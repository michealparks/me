const yt=[],F=new Map,gt=new Map,Ee=new Map,we=new Map,Br=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=3)F.get(n[e]).applyImpulse({x:t[r+0],y:t[r+1],z:t[r+2]},!0)},Vr=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=6){const o=F.get(n[e]);o.applyImpulse({x:t[r+0],y:t[r+1],z:t[r+2]},!1),o.applyTorqueImpulse({x:t[r+3],y:t[r+4],z:t[r+5]},!0)}},Ur=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=3)F.get(n[e]).applyTorqueImpulse({x:t[r+0],y:t[r+1],z:t[r+2]},!0)},Ce=n=>{n.setAngvel({x:0,y:0,z:0},!0)},Ae=n=>{n.setLinvel({x:0,y:0,z:0},!0)},Wr=n=>{const t=F.get(n);t.setLinvel({x:0,y:0,z:0},!1),t.setAngvel({x:0,y:0,z:0},!1),t.setTranslation({x:0,y:1050+n*4,z:0},!1)},Jr=(n,t)=>{gt.get(n).setActiveCollisionTypes(t)},qr=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=6){const o=F.get(n[e]);o.resetForces(!0),o.resetTorques(!0),o.addForce({x:t[r+0],y:t[r+1],z:t[r+2]},!0),o.addTorque({x:t[r+3],y:t[r+4],z:t[r+5]},!0)}},Yr=n=>{const t=F.get(n.id);t.setNextKinematicTranslation(n.translation),t.setNextKinematicRotation(n.rotation)},Kr=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=7){const o=F.get(n[e]);o.setNextKinematicTranslation({x:t[r+0],y:t[r+1],z:t[r+2]}),o.setNextKinematicRotation({w:t[r+6],x:t[r+3],y:t[r+4],z:t[r+5]})}},Xr=(n,t,e,r)=>{for(let i=0,o=0,a=n.length;i<a;i+=1,o+=7){const l=F.get(n[i]);l.setTranslation({x:t[o+0],y:t[o+1],z:t[o+2]},!1),l.setRotation({w:t[o+6],x:t[o+3],y:t[o+4],z:t[o+5]},!0),e&&Ce(l),r&&Ae(l)}},Zr=(n,t,e,r,i)=>{const o=F.get(n);o.setTranslation(t,!0),o.setRotation(e,!0),o.setLinvel(r,!0),o.setAngvel(i,!0)},$r=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=13){const o=F.get(n[e]);o.setTranslation({x:t[r+0],y:t[r+1],z:t[r+2]},!0),o.setRotation({w:t[r+6],x:t[r+3],y:t[r+4],z:t[r+5]},!0),o.setLinvel({x:t[r+7],y:t[r+8],z:t[r+9]},!0),o.setAngvel({x:t[r+10],y:t[r+11],z:t[r+12]},!0)}},Qr=(n,t,e,r)=>{const i=F.get(n);i.setTranslation(t,!0),e&&Ce(i),r&&Ae(i)},tn=(n,t,e,r)=>{for(let i=0,o=0,a=n.length;i<a;i+=1,o+=3){const l=F.get(n[i]);l.setTranslation({x:t[o+0],y:t[o+1],z:t[o+2]},!0),e&&Ce(l),r&&Ae(l)}},en=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=6){const o=F.get(n[e]);o.setLinvel({x:t[r+0],y:t[r+1],z:t[r+2]},!1),o.setAngvel({x:t[r+3],y:t[r+4],z:t[r+5]},!0)}},rn=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=7){const o=F.get(n[e]);o.setLinvel({x:t[r+0],y:t[r+1],z:t[r+2]},!0),o.setRotation({w:t[r+6],x:t[r+3],y:t[r+4],z:t[r+5]},!0)}};var C=(n=>(n[n.FPS=0]="FPS",n[n.INIT=1]="INIT",n[n.RUN=2]="RUN",n[n.PAUSE=3]="PAUSE",n[n.GET_VELOCITY=4]="GET_VELOCITY",n[n.GET_VELOCITIES=5]="GET_VELOCITIES",n[n.SET_ACTIVE_COLLISION_TYPES=6]="SET_ACTIVE_COLLISION_TYPES",n[n.SET_DEBUG_DRAW=7]="SET_DEBUG_DRAW",n[n.SET_GRAVITY=8]="SET_GRAVITY",n[n.SET_FORCES=9]="SET_FORCES",n[n.SET_FRICTION=10]="SET_FRICTION",n[n.SET_MASKS=11]="SET_MASKS",n[n.SET_MASSES=12]="SET_MASSES",n[n.SET_ROTATION=13]="SET_ROTATION",n[n.SET_TRANSFORM=14]="SET_TRANSFORM",n[n.SET_TRANSFORMS=15]="SET_TRANSFORMS",n[n.SET_TRANSFORM_AND_VELOCITY=16]="SET_TRANSFORM_AND_VELOCITY",n[n.SET_TRANSFORMS_AND_VELOCITIES=17]="SET_TRANSFORMS_AND_VELOCITIES",n[n.SET_TRANSLATION=18]="SET_TRANSLATION",n[n.SET_TRANSLATIONS=19]="SET_TRANSLATIONS",n[n.SET_NEXT_KINEMATIC_TRANSFORM=20]="SET_NEXT_KINEMATIC_TRANSFORM",n[n.SET_NEXT_KINEMATIC_TRANSFORMS=21]="SET_NEXT_KINEMATIC_TRANSFORMS",n[n.SET_VELOCITIES=22]="SET_VELOCITIES",n[n.SET_VELOCITIES_AND_ROTATIONS=23]="SET_VELOCITIES_AND_ROTATIONS",n[n.CREATE_RIGIDBODY=24]="CREATE_RIGIDBODY",n[n.CREATE_RIGIDBODIES=25]="CREATE_RIGIDBODIES",n[n.DESTROY_RIGIDBODIES=26]="DESTROY_RIGIDBODIES",n[n.DESTROY_ALL_RIGIDBODIES=27]="DESTROY_ALL_RIGIDBODIES",n[n.CREATE_TRIGGER=28]="CREATE_TRIGGER",n[n.CREATE_TRIGGERS=29]="CREATE_TRIGGERS",n[n.APPLY_IMPULSES=30]="APPLY_IMPULSES",n[n.APPLY_TORQUE_IMPULSE=31]="APPLY_TORQUE_IMPULSE",n[n.APPLY_TORQUE_IMPULSES=32]="APPLY_TORQUE_IMPULSES",n[n.APPLY_CENTRAL_AND_TORQUE_IMPULSE=33]="APPLY_CENTRAL_AND_TORQUE_IMPULSE",n[n.APPLY_LINEAR_AND_TORQUE_IMPULSES=34]="APPLY_LINEAR_AND_TORQUE_IMPULSES",n[n.APPLY_CENTRAL_FORCES=35]="APPLY_CENTRAL_FORCES",n[n.ENABLE_BODY=36]="ENABLE_BODY",n[n.DISABLE_BODY=37]="DISABLE_BODY",n[n.RAYCAST=38]="RAYCAST",n[n.COLLISIONS=39]="COLLISIONS",n[n.TRANSFORMS=40]="TRANSFORMS",n[n.DEBUG_DRAW=41]="DEBUG_DRAW",n))(C||{});const nn=(n,t)=>{const e=F.get(n),r=e.linvel(),i=e.angvel();self.postMessage({angvel:i,event:C.GET_VELOCITY,linvel:r,pid:t})},sn=(n,t)=>{const e=new Float32Array(n.length*6);for(let r=0,i=0,o=n.length;r<o;r+=1,i+=6){const a=F.get(n[r]),l=a.linvel(),w=a.angvel();e[i+0]=l.x,e[i+1]=l.y,e[i+2]=l.z,e[i+3]=w.x,e[i+4]=w.y,e[i+5]=w.z}self.postMessage({event:C.GET_VELOCITIES,pid:t,velocities:e},[e.buffer])};var nr=(n=>(n[n.COLLISION_EVENTS=0]="COLLISION_EVENTS",n[n.CONTACT_EVENTS=1]="CONTACT_EVENTS",n[n.CONTACT_FORCE_EVENTS=2]="CONTACT_FORCE_EVENTS",n))(nr||{}),on="/assets/rapier_wasm3d_bg-6982ba4b.wasm",an=async(n={},t)=>{let e;if(t.startsWith("data:")){const r=t.replace(/^data:.*?base64,/,"");let i;if(typeof Buffer=="function"&&typeof Buffer.from=="function")i=Buffer.from(r,"base64");else if(typeof atob=="function"){const o=atob(r);i=new Uint8Array(o.length);for(let a=0;a<o.length;a++)i[a]=o.charCodeAt(a)}else throw new Error("Cannot decode base64-encoded data URL");e=await WebAssembly.instantiate(i,n)}else{const r=await fetch(t),i=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))e=await WebAssembly.instantiateStreaming(r,n);else{const o=await r.arrayBuffer();e=await WebAssembly.instantiate(o,n)}}return e.instance.exports};const A=new Array(32).fill(void 0);A.push(void 0,null,!0,!1);function I(n){return A[n]}let mt=A.length;function cn(n){n<36||(A[n]=mt,mt=n)}function Lt(n){const t=I(n);return cn(n),t}function D(n){mt===A.length&&A.push(A.length+1);const t=mt;return mt=A[t],A[t]=n,t}function m(n){return n==null}let ae=new Float64Array;function Ot(){return ae.byteLength===0&&(ae=new Float64Array(pt.buffer)),ae}let ce=new Int32Array;function v(){return ce.byteLength===0&&(ce=new Int32Array(pt.buffer)),ce}const ln=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let ir=new ln("utf-8",{ignoreBOM:!0,fatal:!0});ir.decode();let le=new Uint8Array;function dn(){return le.byteLength===0&&(le=new Uint8Array(pt.buffer)),le}function sr(n,t){return ir.decode(dn().subarray(n,n+t))}function hn(){try{const e=E(-16);Ln(e);var n=v()[e/4+0],t=v()[e/4+1];return sr(n,t)}finally{E(16),Dt(n,t)}}function c(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`);return n.ptr}let de=new Float32Array;function rt(){return de.byteLength===0&&(de=new Float32Array(pt.buffer)),de}let P=32;function M(n){if(P==1)throw new Error("out of js stack");return A[--P]=n,P}function $e(n,t){return rt().subarray(n/4,n/4+t)}let he=new Uint32Array;function or(){return he.byteLength===0&&(he=new Uint32Array(pt.buffer)),he}function wn(n,t){return or().subarray(n/4,n/4+t)}let G=0;function at(n,t){const e=t(n.length*4);return rt().set(n,e/4),G=n.length,e}function Nt(n,t){const e=t(n.length*4);return or().set(n,e/4),G=n.length,e}function Ie(n,t){try{return n.apply(this,t)}catch(e){Ld(D(e))}}const Wt=Object.freeze({X:0,0:"X",Y:1,1:"Y",Z:2,2:"Z",AngX:3,3:"AngX",AngY:4,4:"AngY",AngZ:5,5:"AngZ"});class nt{static __wrap(t){const e=Object.create(nt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Fo(t)}constructor(){const t=zo();return nt.__wrap(t)}}class ht{static __wrap(t){const e=Object.create(ht.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();ui(t)}constructor(){const t=pi();return ht.__wrap(t)}}class St{static __wrap(t){const e=Object.create(St.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();ai(t)}constructor(){const t=ci();return St.__wrap(t)}handle(){return vt(this.ptr)}translationApplied(){const t=li(this.ptr);return h.__wrap(t)}translationRemaining(){const t=di(this.ptr);return h.__wrap(t)}toi(){return lt(this.ptr)}worldWitness1(){const t=$t(this.ptr);return h.__wrap(t)}worldWitness2(){const t=hi(this.ptr);return h.__wrap(t)}worldNormal1(){const t=Ne(this.ptr);return h.__wrap(t)}worldNormal2(){const t=wi(this.ptr);return h.__wrap(t)}}class x{static __wrap(t){const e=Object.create(x.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Ka(t)}coTranslation(t){const e=Ho(this.ptr,t);return h.__wrap(e)}coRotation(t){const e=Go(this.ptr,t);return R.__wrap(e)}coSetTranslation(t,e,r,i){ko(this.ptr,t,e,r,i)}coSetTranslationWrtParent(t,e,r,i){Bo(this.ptr,t,e,r,i)}coSetRotation(t,e,r,i,o){Vo(this.ptr,t,e,r,i,o)}coSetRotationWrtParent(t,e,r,i,o){Uo(this.ptr,t,e,r,i,o)}coIsSensor(t){return Wo(this.ptr,t)!==0}coShapeType(t){return Jo(this.ptr,t)>>>0}coHalfspaceNormal(t){const e=qo(this.ptr,t);return e===0?void 0:h.__wrap(e)}coHalfExtents(t){const e=Yo(this.ptr,t);return e===0?void 0:h.__wrap(e)}coSetHalfExtents(t,e){c(e,h),Ko(this.ptr,t,e.ptr)}coRadius(t){try{const i=E(-16);Xo(i,this.ptr,t);var e=v()[i/4+0],r=rt()[i/4+1];return e===0?void 0:r}finally{E(16)}}coSetRadius(t,e){Zo(this.ptr,t,e)}coHalfHeight(t){try{const i=E(-16);$o(i,this.ptr,t);var e=v()[i/4+0],r=rt()[i/4+1];return e===0?void 0:r}finally{E(16)}}coSetHalfHeight(t,e){Qo(this.ptr,t,e)}coRoundRadius(t){try{const i=E(-16);ta(i,this.ptr,t);var e=v()[i/4+0],r=rt()[i/4+1];return e===0?void 0:r}finally{E(16)}}coSetRoundRadius(t,e){ea(this.ptr,t,e)}coVertices(t){try{const i=E(-16);ra(i,this.ptr,t);var e=v()[i/4+0],r=v()[i/4+1];let o;return e!==0&&(o=$e(e,r).slice(),Dt(e,r*4)),o}finally{E(16)}}coIndices(t){try{const i=E(-16);na(i,this.ptr,t);var e=v()[i/4+0],r=v()[i/4+1];let o;return e!==0&&(o=wn(e,r).slice(),Dt(e,r*4)),o}finally{E(16)}}coHeightfieldHeights(t){try{const i=E(-16);ia(i,this.ptr,t);var e=v()[i/4+0],r=v()[i/4+1];let o;return e!==0&&(o=$e(e,r).slice(),Dt(e,r*4)),o}finally{E(16)}}coHeightfieldScale(t){const e=sa(this.ptr,t);return e===0?void 0:h.__wrap(e)}coHeightfieldNRows(t){try{const i=E(-16);oa(i,this.ptr,t);var e=v()[i/4+0],r=v()[i/4+1];return e===0?void 0:r>>>0}finally{E(16)}}coHeightfieldNCols(t){try{const i=E(-16);aa(i,this.ptr,t);var e=v()[i/4+0],r=v()[i/4+1];return e===0?void 0:r>>>0}finally{E(16)}}coParent(t){try{const i=E(-16);ca(i,this.ptr,t);var e=v()[i/4+0],r=Ot()[i/8+1];return e===0?void 0:r}finally{E(16)}}coSetEnabled(t,e){la(this.ptr,t,e)}coIsEnabled(t){return da(this.ptr,t)!==0}coFriction(t){return ha(this.ptr,t)}coRestitution(t){return wa(this.ptr,t)}coDensity(t){return ua(this.ptr,t)}coMass(t){return pa(this.ptr,t)}coVolume(t){return _a(this.ptr,t)}coCollisionGroups(t){return fa(this.ptr,t)>>>0}coSolverGroups(t){return ma(this.ptr,t)>>>0}coActiveHooks(t){return ba(this.ptr,t)>>>0}coActiveCollisionTypes(t){return ya(this.ptr,t)}coActiveEvents(t){return ga(this.ptr,t)>>>0}coContactForceEventThreshold(t){return Sa(this.ptr,t)}coContainsPoint(t,e){return c(e,h),Ra(this.ptr,t,e.ptr)!==0}coCastShape(t,e,r,i,o,a,l,w){c(e,h),c(r,y),c(i,h),c(o,R),c(a,h);const u=Ea(this.ptr,t,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l,w);return u===0?void 0:Xt.__wrap(u)}coCastCollider(t,e,r,i,o,a){c(e,h),c(i,h);const l=Ca(this.ptr,t,e.ptr,r,i.ptr,o,a);return l===0?void 0:Kt.__wrap(l)}coIntersectsShape(t,e,r,i){return c(e,y),c(r,h),c(i,R),Aa(this.ptr,t,e.ptr,r.ptr,i.ptr)!==0}coContactShape(t,e,r,i,o){c(e,y),c(r,h),c(i,R);const a=Ia(this.ptr,t,e.ptr,r.ptr,i.ptr,o);return a===0?void 0:Ct.__wrap(a)}coContactCollider(t,e,r){const i=Ta(this.ptr,t,e,r);return i===0?void 0:Ct.__wrap(i)}coProjectPoint(t,e,r){c(e,h);const i=va(this.ptr,t,e.ptr,r);return Jt.__wrap(i)}coIntersectsRay(t,e,r,i){return c(e,h),c(r,h),ja(this.ptr,t,e.ptr,r.ptr,i)!==0}coCastRay(t,e,r,i,o){return c(e,h),c(r,h),Pa(this.ptr,t,e.ptr,r.ptr,i,o)}coCastRayAndGetNormal(t,e,r,i,o){c(e,h),c(r,h);const a=Ma(this.ptr,t,e.ptr,r.ptr,i,o);return a===0?void 0:Yt.__wrap(a)}coSetSensor(t,e){xa(this.ptr,t,e)}coSetRestitution(t,e){Na(this.ptr,t,e)}coSetFriction(t,e){Da(this.ptr,t,e)}coFrictionCombineRule(t){return La(this.ptr,t)>>>0}coSetFrictionCombineRule(t,e){Oa(this.ptr,t,e)}coRestitutionCombineRule(t){return Fa(this.ptr,t)>>>0}coSetRestitutionCombineRule(t,e){za(this.ptr,t,e)}coSetCollisionGroups(t,e){Ha(this.ptr,t,e)}coSetSolverGroups(t,e){Ga(this.ptr,t,e)}coSetActiveHooks(t,e){ka(this.ptr,t,e)}coSetActiveEvents(t,e){Ba(this.ptr,t,e)}coSetActiveCollisionTypes(t,e){Va(this.ptr,t,e)}coSetShape(t,e){c(e,y),Ua(this.ptr,t,e.ptr)}coSetContactForceEventThreshold(t,e){Wa(this.ptr,t,e)}coSetDensity(t,e){Ja(this.ptr,t,e)}coSetMass(t,e){qa(this.ptr,t,e)}coSetMassProperties(t,e,r,i,o){c(r,h),c(i,h),c(o,R),Ya(this.ptr,t,e,r.ptr,i.ptr,o.ptr)}constructor(){const t=Xa();return x.__wrap(t)}len(){return Za(this.ptr)>>>0}contains(t){return Qe(this.ptr,t)!==0}createCollider(t,e,r,i,o,a,l,w,u,p,_,f,b,j,H,k,V,z,Y,ft,ne,ie,se,xt){try{const oe=E(-16);c(e,y),c(r,h),c(i,R),c(l,h),c(w,h),c(u,R),c(xt,N),$a(oe,this.ptr,t,e.ptr,r.ptr,i.ptr,o,a,l.ptr,w.ptr,u.ptr,p,_,f,b,j,H,k,V,z,Y,ft,ne,ie,se,xt.ptr);var Ze=v()[oe/4+0],kr=Ot()[oe/8+1];return Ze===0?void 0:kr}finally{E(16)}}remove(t,e,r,i){c(e,Z),c(r,N),Qa(this.ptr,t,e.ptr,r.ptr,i)}isHandleValid(t){return Qe(this.ptr,t)!==0}forEachColliderHandle(t){try{tc(this.ptr,M(t))}finally{A[P++]=void 0}}}class Te{static __wrap(t){const e=Object.create(Te.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Wl(t)}collider1(){return vt(this.ptr)}collider2(){return Jl(this.ptr)}total_force(){const t=hr(this.ptr);return h.__wrap(t)}total_force_magnitude(){return ql(this.ptr)}max_force_direction(){const t=Yl(this.ptr);return h.__wrap(t)}max_force_magnitude(){return Kl(this.ptr)}}class ve{static __wrap(t){const e=Object.create(ve.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();lc(t)}normal(){const t=pc(this.ptr);return h.__wrap(t)}local_n1(){const t=_c(this.ptr);return h.__wrap(t)}local_n2(){const t=fc(this.ptr);return h.__wrap(t)}subshape1(){return mc(this.ptr)>>>0}subshape2(){return bc(this.ptr)>>>0}num_contacts(){return yc(this.ptr)>>>0}contact_local_p1(t){const e=gc(this.ptr,t);return e===0?void 0:h.__wrap(e)}contact_local_p2(t){const e=Sc(this.ptr,t);return e===0?void 0:h.__wrap(e)}contact_dist(t){return Rc(this.ptr,t)}contact_fid1(t){return Ec(this.ptr,t)>>>0}contact_fid2(t){return Cc(this.ptr,t)>>>0}contact_impulse(t){return Ac(this.ptr,t)}contact_tangent_impulse_x(t){return Ic(this.ptr,t)}contact_tangent_impulse_y(t){return Tc(this.ptr,t)}num_solver_contacts(){return vc(this.ptr)>>>0}solver_contact_point(t){const e=jc(this.ptr,t);return e===0?void 0:h.__wrap(e)}solver_contact_dist(t){return Pc(this.ptr,t)}solver_contact_friction(t){return Mc(this.ptr,t)}solver_contact_restitution(t){return xc(this.ptr,t)}solver_contact_tangent_velocity(t){const e=Nc(this.ptr,t);return h.__wrap(e)}}class je{static __wrap(t){const e=Object.create(je.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();jd(t)}collider1(){return dc(this.ptr)}collider2(){return hc(this.ptr)}numContactManifolds(){return wc(this.ptr)>>>0}contactManifold(t){const e=uc(this.ptr,t);return e===0?void 0:ve.__wrap(e)}}class Ft{static __wrap(t){const e=Object.create(Ft.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Hl(t)}constructor(){const t=Gl();return Ft.__wrap(t)}vertices(){const t=kl(this.ptr);return Lt(t)}colors(){const t=Bl(this.ptr);return Lt(t)}render(t,e,r,i,o){c(t,N),c(e,x),c(r,X),c(i,$),c(o,tt),Vl(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr)}}class Pe{static __wrap(t){const e=Object.create(Pe.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();md(t)}takeGravity(){const t=bd(this.ptr);return t===0?void 0:h.__wrap(t)}takeIntegrationParameters(){const t=yd(this.ptr);return t===0?void 0:it.__wrap(t)}takeIslandManager(){const t=gd(this.ptr);return t===0?void 0:Z.__wrap(t)}takeBroadPhase(){const t=Sd(this.ptr);return t===0?void 0:nt.__wrap(t)}takeNarrowPhase(){const t=Rd(this.ptr);return t===0?void 0:tt.__wrap(t)}takeBodies(){const t=Ed(this.ptr);return t===0?void 0:N.__wrap(t)}takeColliders(){const t=Cd(this.ptr);return t===0?void 0:x.__wrap(t)}takeImpulseJoints(){const t=Ad(this.ptr);return t===0?void 0:X.__wrap(t)}takeMultibodyJoints(){const t=Id(this.ptr);return t===0?void 0:$.__wrap(t)}}class Rt{static __wrap(t){const e=Object.create(Rt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Ul(t)}constructor(t){const e=Xl(t);return Rt.__wrap(e)}drainCollisionEvents(t){try{Zl(this.ptr,M(t))}finally{A[P++]=void 0}}drainContactForceEvents(t){try{$l(this.ptr,M(t))}finally{A[P++]=void 0}}clear(){Ql(this.ptr)}}class B{static __wrap(t){const e=Object.create(B.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();as(t)}static spherical(t,e){c(t,h),c(e,h);const r=cs(t.ptr,e.ptr);return B.__wrap(r)}static prismatic(t,e,r,i,o,a){c(t,h),c(e,h),c(r,h);const l=ls(t.ptr,e.ptr,r.ptr,i,o,a);return l===0?void 0:B.__wrap(l)}static fixed(t,e,r,i){c(t,h),c(e,R),c(r,h),c(i,R);const o=ds(t.ptr,e.ptr,r.ptr,i.ptr);return B.__wrap(o)}static revolute(t,e,r){c(t,h),c(e,h),c(r,h);const i=hs(t.ptr,e.ptr,r.ptr);return i===0?void 0:B.__wrap(i)}}class X{static __wrap(t){const e=Object.create(X.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Di(t)}jointType(t){return _i(this.ptr,t)>>>0}jointBodyHandle1(t){return fi(this.ptr,t)}jointBodyHandle2(t){return mi(this.ptr,t)}jointFrameX1(t){const e=bi(this.ptr,t);return R.__wrap(e)}jointFrameX2(t){const e=yi(this.ptr,t);return R.__wrap(e)}jointAnchor1(t){const e=gi(this.ptr,t);return h.__wrap(e)}jointAnchor2(t){const e=Si(this.ptr,t);return h.__wrap(e)}jointSetAnchor1(t,e){c(e,h),Ri(this.ptr,t,e.ptr)}jointSetAnchor2(t,e){c(e,h),Ei(this.ptr,t,e.ptr)}jointContactsEnabled(t){return Ci(this.ptr,t)!==0}jointSetContactsEnabled(t,e){Ai(this.ptr,t,e)}jointLimitsEnabled(t,e){return Ii(this.ptr,t,e)!==0}jointLimitsMin(t,e){return Ti(this.ptr,t,e)}jointLimitsMax(t,e){return vi(this.ptr,t,e)}jointSetLimits(t,e,r,i){ji(this.ptr,t,e,r,i)}jointConfigureMotorModel(t,e,r){Pi(this.ptr,t,e,r)}jointConfigureMotorVelocity(t,e,r,i){Mi(this.ptr,t,e,r,i)}jointConfigureMotorPosition(t,e,r,i,o){xi(this.ptr,t,e,r,i,o)}jointConfigureMotor(t,e,r,i,o,a){Ni(this.ptr,t,e,r,i,o,a)}constructor(){const t=Li();return X.__wrap(t)}createJoint(t,e,r,i){return c(t,B),Oi(this.ptr,t.ptr,e,r,i)}remove(t,e){Fi(this.ptr,t,e)}len(){return zi(this.ptr)>>>0}contains(t){return Hi(this.ptr,t)!==0}forEachJointHandle(t){try{Gi(this.ptr,M(t))}finally{A[P++]=void 0}}forEachJointAttachedToRigidBody(t,e){try{ki(this.ptr,t,M(e))}finally{A[P++]=void 0}}}class it{static __wrap(t){const e=Object.create(it.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Bi(t)}constructor(){const t=Vi();return it.__wrap(t)}get dt(){return Qt(this.ptr)}get erp(){return lt(this.ptr)}get allowedLinearError(){return Ui(this.ptr)}get predictionDistance(){return Wi(this.ptr)}get maxVelocityIterations(){return Ji(this.ptr)>>>0}get maxVelocityFrictionIterations(){return qi(this.ptr)>>>0}get maxStabilizationIterations(){return Yi(this.ptr)>>>0}get minIslandSize(){return Ki(this.ptr)>>>0}get maxCcdSubsteps(){return Xi(this.ptr)>>>0}set dt(t){ar(this.ptr,t)}set erp(t){cr(this.ptr,t)}set allowedLinearError(t){Zi(this.ptr,t)}set predictionDistance(t){$i(this.ptr,t)}set maxVelocityIterations(t){Qi(this.ptr,t)}set maxVelocityFrictionIterations(t){ts(this.ptr,t)}set maxStabilizationIterations(t){es(this.ptr,t)}set minIslandSize(t){rs(this.ptr,t)}set maxCcdSubsteps(t){ns(this.ptr,t)}}class Z{static __wrap(t){const e=Object.create(Z.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();is(t)}constructor(){const t=ss();return Z.__wrap(t)}forEachActiveRigidBodyHandle(t){try{os(this.ptr,M(t))}finally{A[P++]=void 0}}}class zt{static __wrap(t){const e=Object.create(zt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();On(t)}constructor(t){const e=Fn(t);return zt.__wrap(e)}up(){const t=zn(this.ptr);return h.__wrap(t)}setUp(t){c(t,h),Hn(this.ptr,t.ptr)}offset(){return Gn(this.ptr)}setOffset(t){kn(this.ptr,t)}slideEnabled(){return Bn(this.ptr)!==0}setSlideEnabled(t){Vn(this.ptr,t)}autostepMaxHeight(){try{const r=E(-16);Un(r,this.ptr);var t=v()[r/4+0],e=rt()[r/4+1];return t===0?void 0:e}finally{E(16)}}autostepMinWidth(){try{const r=E(-16);Wn(r,this.ptr);var t=v()[r/4+0],e=rt()[r/4+1];return t===0?void 0:e}finally{E(16)}}autostepIncludesDynamicBodies(){const t=Jn(this.ptr);return t===16777215?void 0:t!==0}autostepEnabled(){return qn(this.ptr)!==0}enableAutostep(t,e,r){Yn(this.ptr,t,e,r)}disableAutostep(){Kn(this.ptr)}maxSlopeClimbAngle(){return Xn(this.ptr)}setMaxSlopeClimbAngle(t){Zn(this.ptr,t)}minSlopeSlideAngle(){return $n(this.ptr)}setMinSlopeSlideAngle(t){Qn(this.ptr,t)}snapToGroundDistance(){try{const r=E(-16);ti(r,this.ptr);var t=v()[r/4+0],e=rt()[r/4+1];return t===0?void 0:e}finally{E(16)}}enableSnapToGround(t){ei(this.ptr,t)}disableSnapToGround(){ri(this.ptr)}snapToGroundEnabled(){return ni(this.ptr)!==0}computeColliderMovement(t,e,r,i,o,a,l,w,u,p,_){try{c(e,N),c(r,x),c(i,Et),c(a,h),ii(this.ptr,t,e.ptr,r.ptr,i.ptr,o,a.ptr,l,!m(w),m(w)?0:w,u,!m(p),m(p)?0:p,M(_))}finally{A[P++]=void 0}}computedMovement(){const t=Zt(this.ptr);return h.__wrap(t)}computedGrounded(){return xe(this.ptr)!==0}numComputedCollisions(){return si(this.ptr)>>>0}computedCollision(t,e){return c(e,St),oi(this.ptr,t,e.ptr)!==0}}class ${static __wrap(t){const e=Object.create($.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Rs(t)}jointType(t){return ws(this.ptr,t)>>>0}jointFrameX1(t){const e=us(this.ptr,t);return R.__wrap(e)}jointFrameX2(t){const e=ps(this.ptr,t);return R.__wrap(e)}jointAnchor1(t){const e=_s(this.ptr,t);return h.__wrap(e)}jointAnchor2(t){const e=fs(this.ptr,t);return h.__wrap(e)}jointContactsEnabled(t){return ms(this.ptr,t)!==0}jointSetContactsEnabled(t,e){bs(this.ptr,t,e)}jointLimitsEnabled(t,e){return ys(this.ptr,t,e)!==0}jointLimitsMin(t,e){return gs(this.ptr,t,e)}jointLimitsMax(t,e){return Ss(this.ptr,t,e)}constructor(){const t=Es();return $.__wrap(t)}createJoint(t,e,r,i){return c(t,B),Cs(this.ptr,t.ptr,e,r,i)}remove(t,e){As(this.ptr,t,e)}contains(t){return Is(this.ptr,t)!==0}forEachJointHandle(t){try{Ts(this.ptr,M(t))}finally{A[P++]=void 0}}forEachJointAttachedToRigidBody(t,e){try{vs(this.ptr,t,M(e))}finally{A[P++]=void 0}}}class tt{static __wrap(t){const e=Object.create(tt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();nc(t)}constructor(){const t=ic();return tt.__wrap(t)}contacts_with(t,e){sc(this.ptr,t,D(e))}contact_pair(t,e){const r=oc(this.ptr,t,e);return r===0?void 0:je.__wrap(r)}intersections_with(t,e){ac(this.ptr,t,D(e))}intersection_pair(t,e){return cc(this.ptr,t,e)!==0}}class Ht{static __wrap(t){const e=Object.create(Ht.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();td(t)}constructor(){const t=ed();return Ht.__wrap(t)}step(t,e,r,i,o,a,l,w,u,p){c(t,h),c(e,it),c(r,Z),c(i,nt),c(o,tt),c(a,N),c(l,x),c(w,X),c(u,$),c(p,ht),rd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l.ptr,w.ptr,u.ptr,p.ptr)}stepWithEvents(t,e,r,i,o,a,l,w,u,p,_,f,b,j){c(t,h),c(e,it),c(r,Z),c(i,nt),c(o,tt),c(a,N),c(l,x),c(w,X),c(u,$),c(p,ht),c(_,Rt),nd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l.ptr,w.ptr,u.ptr,p.ptr,_.ptr,D(f),D(b),D(j))}}class Gt{static __wrap(t){const e=Object.create(Gt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Lc(t)}colliderHandle(){return Oc(this.ptr)}point(){const t=Zt(this.ptr);return h.__wrap(t)}isInside(){return xe(this.ptr)!==0}featureType(){return Fc(this.ptr)>>>0}featureId(){try{const r=E(-16);zc(r,this.ptr);var t=v()[r/4+0],e=v()[r/4+1];return t===0?void 0:e>>>0}finally{E(16)}}}class Jt{static __wrap(t){const e=Object.create(Jt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dc(t)}point(){const t=Zt(this.ptr);return h.__wrap(t)}isInside(){return xe(this.ptr)!==0}}class Et{static __wrap(t){const e=Object.create(Et.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();id(t)}constructor(){const t=sd();return Et.__wrap(t)}update(t,e){c(t,N),c(e,x),od(this.ptr,t.ptr,e.ptr)}castRay(t,e,r,i,o,a,l,w,u,p,_){try{c(t,N),c(e,x),c(r,h),c(i,h);const f=ad(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o,a,l,!m(w),m(w)?0:w,!m(u),m(u)?0:u,!m(p),m(p)?0:p,M(_));return f===0?void 0:Me.__wrap(f)}finally{A[P++]=void 0}}castRayAndGetNormal(t,e,r,i,o,a,l,w,u,p,_){try{c(t,N),c(e,x),c(r,h),c(i,h);const f=cd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o,a,l,!m(w),m(w)?0:w,!m(u),m(u)?0:u,!m(p),m(p)?0:p,M(_));return f===0?void 0:qt.__wrap(f)}finally{A[P++]=void 0}}intersectionsWithRay(t,e,r,i,o,a,l,w,u,p,_,f){try{c(t,N),c(e,x),c(r,h),c(i,h),ld(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o,a,M(l),w,!m(u),m(u)?0:u,!m(p),m(p)?0:p,!m(_),m(_)?0:_,M(f))}finally{A[P++]=void 0,A[P++]=void 0}}intersectionWithShape(t,e,r,i,o,a,l,w,u,p){try{const b=E(-16);c(t,N),c(e,x),c(r,h),c(i,R),c(o,y),dd(b,this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a,!m(l),m(l)?0:l,!m(w),m(w)?0:w,!m(u),m(u)?0:u,M(p));var _=v()[b/4+0],f=Ot()[b/8+1];return _===0?void 0:f}finally{E(16),A[P++]=void 0}}projectPoint(t,e,r,i,o,a,l,w,u){try{c(t,N),c(e,x),c(r,h);const p=hd(this.ptr,t.ptr,e.ptr,r.ptr,i,o,!m(a),m(a)?0:a,!m(l),m(l)?0:l,!m(w),m(w)?0:w,M(u));return p===0?void 0:Gt.__wrap(p)}finally{A[P++]=void 0}}projectPointAndGetFeature(t,e,r,i,o,a,l,w){try{c(t,N),c(e,x),c(r,h);const u=wd(this.ptr,t.ptr,e.ptr,r.ptr,i,!m(o),m(o)?0:o,!m(a),m(a)?0:a,!m(l),m(l)?0:l,M(w));return u===0?void 0:Gt.__wrap(u)}finally{A[P++]=void 0}}intersectionsWithPoint(t,e,r,i,o,a,l,w,u){try{c(t,N),c(e,x),c(r,h),ud(this.ptr,t.ptr,e.ptr,r.ptr,M(i),o,!m(a),m(a)?0:a,!m(l),m(l)?0:l,!m(w),m(w)?0:w,M(u))}finally{A[P++]=void 0,A[P++]=void 0}}castShape(t,e,r,i,o,a,l,w,u,p,_,f,b){try{c(t,N),c(e,x),c(r,h),c(i,R),c(o,h),c(a,y);const j=pd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l,w,u,!m(p),m(p)?0:p,!m(_),m(_)?0:_,!m(f),m(f)?0:f,M(b));return j===0?void 0:Kt.__wrap(j)}finally{A[P++]=void 0}}intersectionsWithShape(t,e,r,i,o,a,l,w,u,p,_){try{c(t,N),c(e,x),c(r,h),c(i,R),c(o,y),_d(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,M(a),l,!m(w),m(w)?0:w,!m(u),m(u)?0:u,!m(p),m(p)?0:p,M(_))}finally{A[P++]=void 0,A[P++]=void 0}}collidersWithAabbIntersectingAabb(t,e,r){try{c(t,h),c(e,h),fd(this.ptr,t.ptr,e.ptr,M(r))}finally{A[P++]=void 0}}}class qt{static __wrap(t){const e=Object.create(qt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Pd(t)}colliderHandle(){return vt(this.ptr)}normal(){const t=Bc(this.ptr);return h.__wrap(t)}toi(){return Vc(this.ptr)}featureType(){return Uc(this.ptr)>>>0}featureId(){try{const r=E(-16);Wc(r,this.ptr);var t=v()[r/4+0],e=v()[r/4+1];return t===0?void 0:e>>>0}finally{E(16)}}}class Me{static __wrap(t){const e=Object.create(Me.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Jc(t)}colliderHandle(){return vt(this.ptr)}toi(){return lt(this.ptr)}}class Yt{static __wrap(t){const e=Object.create(Yt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Hc(t)}normal(){const t=$t(this.ptr);return h.__wrap(t)}toi(){return lt(this.ptr)}featureType(){return Gc(this.ptr)>>>0}featureId(){try{const r=E(-16);kc(r,this.ptr);var t=v()[r/4+0],e=v()[r/4+1];return t===0?void 0:e>>>0}finally{E(16)}}}class N{static __wrap(t){const e=Object.create(N.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();jo(t)}rbTranslation(t){const e=js(this.ptr,t);return h.__wrap(e)}rbRotation(t){const e=Ps(this.ptr,t);return R.__wrap(e)}rbSleep(t){Ms(this.ptr,t)}rbIsSleeping(t){return xs(this.ptr,t)!==0}rbIsMoving(t){return Ns(this.ptr,t)!==0}rbNextTranslation(t){const e=Ds(this.ptr,t);return h.__wrap(e)}rbNextRotation(t){const e=Ls(this.ptr,t);return R.__wrap(e)}rbSetTranslation(t,e,r,i,o){Os(this.ptr,t,e,r,i,o)}rbSetRotation(t,e,r,i,o,a){Fs(this.ptr,t,e,r,i,o,a)}rbSetLinvel(t,e,r){c(e,h),zs(this.ptr,t,e.ptr,r)}rbSetAngvel(t,e,r){c(e,h),Hs(this.ptr,t,e.ptr,r)}rbSetNextKinematicTranslation(t,e,r,i){Gs(this.ptr,t,e,r,i)}rbSetNextKinematicRotation(t,e,r,i,o){ks(this.ptr,t,e,r,i,o)}rbRecomputeMassPropertiesFromColliders(t,e){c(e,x),Bs(this.ptr,t,e.ptr)}rbSetAdditionalMass(t,e,r){Vs(this.ptr,t,e,r)}rbSetAdditionalMassProperties(t,e,r,i,o,a){c(r,h),c(i,h),c(o,R),Us(this.ptr,t,e,r.ptr,i.ptr,o.ptr,a)}rbLinvel(t){const e=Ws(this.ptr,t);return h.__wrap(e)}rbAngvel(t){const e=Js(this.ptr,t);return h.__wrap(e)}rbLockTranslations(t,e,r){qs(this.ptr,t,e,r)}rbSetEnabledTranslations(t,e,r,i,o){Ys(this.ptr,t,e,r,i,o)}rbLockRotations(t,e,r){Ks(this.ptr,t,e,r)}rbSetEnabledRotations(t,e,r,i,o){Xs(this.ptr,t,e,r,i,o)}rbDominanceGroup(t){return Zs(this.ptr,t)}rbSetDominanceGroup(t,e){$s(this.ptr,t,e)}rbEnableCcd(t,e){Qs(this.ptr,t,e)}rbMass(t){return to(this.ptr,t)}rbWakeUp(t){eo(this.ptr,t)}rbIsCcdEnabled(t){return ro(this.ptr,t)!==0}rbNumColliders(t){return no(this.ptr,t)>>>0}rbCollider(t,e){return io(this.ptr,t,e)}rbBodyType(t){return so(this.ptr,t)>>>0}rbSetBodyType(t,e,r){oo(this.ptr,t,e,r)}rbIsFixed(t){return ao(this.ptr,t)!==0}rbIsKinematic(t){return co(this.ptr,t)!==0}rbIsDynamic(t){return lo(this.ptr,t)!==0}rbLinearDamping(t){return ho(this.ptr,t)}rbAngularDamping(t){return wo(this.ptr,t)}rbSetLinearDamping(t,e){uo(this.ptr,t,e)}rbSetAngularDamping(t,e){po(this.ptr,t,e)}rbSetEnabled(t,e){_o(this.ptr,t,e)}rbIsEnabled(t){return fo(this.ptr,t)!==0}rbGravityScale(t){return mo(this.ptr,t)}rbSetGravityScale(t,e,r){bo(this.ptr,t,e,r)}rbResetForces(t,e){yo(this.ptr,t,e)}rbResetTorques(t,e){go(this.ptr,t,e)}rbAddForce(t,e,r){c(e,h),So(this.ptr,t,e.ptr,r)}rbApplyImpulse(t,e,r){c(e,h),Ro(this.ptr,t,e.ptr,r)}rbAddTorque(t,e,r){c(e,h),Eo(this.ptr,t,e.ptr,r)}rbApplyTorqueImpulse(t,e,r){c(e,h),Co(this.ptr,t,e.ptr,r)}rbAddForceAtPoint(t,e,r,i){c(e,h),c(r,h),Ao(this.ptr,t,e.ptr,r.ptr,i)}rbApplyImpulseAtPoint(t,e,r,i){c(e,h),c(r,h),Io(this.ptr,t,e.ptr,r.ptr,i)}rbUserData(t){return To(this.ptr,t)>>>0}rbSetUserData(t,e){vo(this.ptr,t,e)}constructor(){const t=Po();return N.__wrap(t)}createRigidBody(t,e,r,i,o,a,l,w,u,p,_,f,b,j,H,k,V,z,Y,ft,ne,ie,se,xt){return c(e,h),c(r,R),c(l,h),c(w,h),c(u,h),c(p,h),c(_,R),Mo(this.ptr,t,e.ptr,r.ptr,i,o,a,l.ptr,w.ptr,u.ptr,p.ptr,_.ptr,f,b,j,H,k,V,z,Y,ft,ne,ie,se,xt)}remove(t,e,r,i,o){c(e,Z),c(r,x),c(i,X),c(o,$),xo(this.ptr,t,e.ptr,r.ptr,i.ptr,o.ptr)}len(){return No(this.ptr)>>>0}contains(t){return Do(this.ptr,t)!==0}forEachRigidBodyHandle(t){try{Lo(this.ptr,M(t))}finally{A[P++]=void 0}}propagateModifiedBodyPositionsToColliders(t){c(t,x),Oo(this.ptr,t.ptr)}}class R{static __wrap(t){const e=Object.create(R.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Md(t)}constructor(t,e,r,i){const o=Tl(t,e,r,i);return R.__wrap(o)}static identity(){const t=vl();return R.__wrap(t)}get x(){return Qt(this.ptr)}get y(){return dr(this.ptr)}get z(){return lt(this.ptr)}get w(){return jl(this.ptr)}}class kt{static __wrap(t){const e=Object.create(kt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Dd(t)}constructor(){const t=Nd();return kt.__wrap(t)}serializeAll(t,e,r,i,o,a,l,w,u){c(t,h),c(e,it),c(r,Z),c(i,nt),c(o,tt),c(a,N),c(l,x),c(w,X),c(u,$);const p=Td(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l.ptr,w.ptr,u.ptr);return Lt(p)}deserializeAll(t){const e=vd(this.ptr,D(t));return e===0?void 0:Pe.__wrap(e)}}class y{static __wrap(t){const e=Object.create(y.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();qc(t)}static cuboid(t,e,r){const i=Yc(t,e,r);return y.__wrap(i)}static roundCuboid(t,e,r,i){const o=Kc(t,e,r,i);return y.__wrap(o)}static ball(t){const e=Xc(t);return y.__wrap(e)}static halfspace(t){c(t,h);const e=Zc(t.ptr);return y.__wrap(e)}static capsule(t,e){const r=$c(t,e);return y.__wrap(r)}static cylinder(t,e){const r=Qc(t,e);return y.__wrap(r)}static roundCylinder(t,e,r){const i=tl(t,e,r);return y.__wrap(i)}static cone(t,e){const r=el(t,e);return y.__wrap(r)}static roundCone(t,e,r){const i=rl(t,e,r);return y.__wrap(i)}static polyline(t,e){const r=at(t,U),i=G,o=Nt(e,U),l=nl(r,i,o,G);return y.__wrap(l)}static trimesh(t,e){const r=at(t,U),i=G,o=Nt(e,U),l=il(r,i,o,G);return y.__wrap(l)}static heightfield(t,e,r,i){const o=at(r,U),a=G;c(i,h);const l=sl(t,e,o,a,i.ptr);return y.__wrap(l)}static segment(t,e){c(t,h),c(e,h);const r=ol(t.ptr,e.ptr);return y.__wrap(r)}static triangle(t,e,r){c(t,h),c(e,h),c(r,h);const i=al(t.ptr,e.ptr,r.ptr);return y.__wrap(i)}static roundTriangle(t,e,r,i){c(t,h),c(e,h),c(r,h);const o=cl(t.ptr,e.ptr,r.ptr,i);return y.__wrap(o)}static convexHull(t){const e=at(t,U),i=ll(e,G);return i===0?void 0:y.__wrap(i)}static roundConvexHull(t,e){const r=at(t,U),o=dl(r,G,e);return o===0?void 0:y.__wrap(o)}static convexMesh(t,e){const r=at(t,U),i=G,o=Nt(e,U),l=hl(r,i,o,G);return l===0?void 0:y.__wrap(l)}static roundConvexMesh(t,e,r){const i=at(t,U),o=G,a=Nt(e,U),w=wl(i,o,a,G,r);return w===0?void 0:y.__wrap(w)}castShape(t,e,r,i,o,a,l,w,u){c(t,h),c(e,R),c(r,h),c(i,y),c(o,h),c(a,R),c(l,h);const p=ul(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l.ptr,w,u);return p===0?void 0:Xt.__wrap(p)}intersectsShape(t,e,r,i,o){return c(t,h),c(e,R),c(r,y),c(i,h),c(o,R),pl(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr)!==0}contactShape(t,e,r,i,o,a){c(t,h),c(e,R),c(r,y),c(i,h),c(o,R);const l=_l(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a);return l===0?void 0:Ct.__wrap(l)}containsPoint(t,e,r){return c(t,h),c(e,R),c(r,h),fl(this.ptr,t.ptr,e.ptr,r.ptr)!==0}projectPoint(t,e,r,i){c(t,h),c(e,R),c(r,h);const o=ml(this.ptr,t.ptr,e.ptr,r.ptr,i);return Jt.__wrap(o)}intersectsRay(t,e,r,i,o){return c(t,h),c(e,R),c(r,h),c(i,h),bl(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o)!==0}castRay(t,e,r,i,o,a){return c(t,h),c(e,R),c(r,h),c(i,h),yl(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o,a)}castRayAndGetNormal(t,e,r,i,o,a){c(t,h),c(e,R),c(r,h),c(i,h);const l=gl(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o,a);return l===0?void 0:Yt.__wrap(l)}}class Kt{static __wrap(t){const e=Object.create(Kt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Al(t)}colliderHandle(){return vt(this.ptr)}toi(){return lt(this.ptr)}witness1(){const t=$t(this.ptr);return h.__wrap(t)}witness2(){const t=lr(this.ptr);return h.__wrap(t)}normal1(){const t=Ne(this.ptr);return h.__wrap(t)}normal2(){const t=Il(this.ptr);return h.__wrap(t)}}class Ct{static __wrap(t){const e=Object.create(Ct.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();ec(t)}distance(){return rc(this.ptr)}point1(){const t=Zt(this.ptr);return h.__wrap(t)}point2(){const t=$t(this.ptr);return h.__wrap(t)}normal1(){const t=lr(this.ptr);return h.__wrap(t)}normal2(){const t=Ne(this.ptr);return h.__wrap(t)}}class Xt{static __wrap(t){const e=Object.create(Xt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Sl(t)}toi(){return Qt(this.ptr)}witness1(){const t=Rl(this.ptr);return h.__wrap(t)}witness2(){const t=hr(this.ptr);return h.__wrap(t)}normal1(){const t=El(this.ptr);return h.__wrap(t)}normal2(){const t=Cl(this.ptr);return h.__wrap(t)}}class h{static __wrap(t){const e=Object.create(h.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();xd(t)}static zero(){const t=Pl();return h.__wrap(t)}constructor(t,e,r){const i=Ml(t,e,r);return h.__wrap(i)}get x(){return Qt(this.ptr)}set x(t){ar(this.ptr,t)}get y(){return dr(this.ptr)}set y(t){xl(this.ptr,t)}get z(){return lt(this.ptr)}set z(t){cr(this.ptr,t)}xyz(){const t=Nl(this.ptr);return h.__wrap(t)}yxz(){const t=Dl(this.ptr);return h.__wrap(t)}zxy(){const t=Ll(this.ptr);return h.__wrap(t)}xzy(){const t=Ol(this.ptr);return h.__wrap(t)}yzx(){const t=Fl(this.ptr);return h.__wrap(t)}zyx(){const t=zl(this.ptr);return h.__wrap(t)}}function un(n){Lt(n)}function pn(n){return D(n)}function _n(n,t){const e=I(t),r=typeof e=="number"?e:void 0;Ot()[n/8+1]=m(r)?0:r,v()[n/4+0]=!m(r)}function fn(n){const t=I(n);return typeof t=="boolean"?t?1:0:2}function mn(n){return typeof I(n)=="function"}function bn(n){const t=qt.__wrap(n);return D(t)}function yn(n){const t=Te.__wrap(n);return D(t)}function gn(){return Ie(function(n,t,e){const r=I(n).call(I(t),I(e));return D(r)},arguments)}function Sn(){return Ie(function(n,t,e,r){const i=I(n).call(I(t),I(e),I(r));return D(i)},arguments)}function Rn(){return Ie(function(n,t,e,r,i){const o=I(n).call(I(t),I(e),I(r),I(i));return D(o)},arguments)}function En(n,t,e,r){const i=I(n).bind(I(t),I(e),I(r));return D(i)}function Cn(n){const t=I(n).buffer;return D(t)}function An(n,t,e){const r=new Uint8Array(I(n),t>>>0,e>>>0);return D(r)}function In(n){const t=new Uint8Array(I(n));return D(t)}function Tn(n,t,e){I(n).set(I(t),e>>>0)}function vn(n){return I(n).length}function jn(n,t,e){const r=new Float32Array(I(n),t>>>0,e>>>0);return D(r)}function Pn(n,t,e){I(n).set(I(t),e>>>0)}function Mn(n){return I(n).length}function xn(n){const t=new Float32Array(n>>>0);return D(t)}function Nn(n,t){throw new Error(sr(n,t))}function Dn(){return D(pt)}URL=globalThis.URL;const s=await an({"./rapier_wasm3d_bg.js":{__wbindgen_object_drop_ref:un,__wbindgen_number_new:pn,__wbindgen_number_get:_n,__wbindgen_boolean_get:fn,__wbindgen_is_function:mn,__wbg_rawraycolliderintersection_new:bn,__wbg_rawcontactforceevent_new:yn,__wbg_call_168da88779e35f61:gn,__wbg_call_3999bee59e9f7719:Sn,__wbg_call_e1f72c051cdab859:Rn,__wbg_bind_10dfe70e95d2a480:En,__wbg_buffer_3f3d764d4747d564:Cn,__wbg_newwithbyteoffsetandlength_d9aa266703cb98be:An,__wbg_new_8c3f0052272a457a:In,__wbg_set_83db9690f9353e79:Tn,__wbg_length_9e1ae1900cb0fbd5:vn,__wbg_newwithbyteoffsetandlength_be22e5fcf4f69ab4:jn,__wbg_set_0e0314cf6675c1b9:Pn,__wbg_length_9a2deed95d22668d:Mn,__wbg_newwithlength_a7168e4a1e8f5e12:xn,__wbindgen_throw:Nn,__wbindgen_memory:Dn}},on),pt=s.memory,Ln=s.version,On=s.__wbg_rawkinematiccharactercontroller_free,Fn=s.rawkinematiccharactercontroller_new,zn=s.rawkinematiccharactercontroller_up,Hn=s.rawkinematiccharactercontroller_setUp,Gn=s.rawkinematiccharactercontroller_offset,kn=s.rawkinematiccharactercontroller_setOffset,Bn=s.rawkinematiccharactercontroller_slideEnabled,Vn=s.rawkinematiccharactercontroller_setSlideEnabled,Un=s.rawkinematiccharactercontroller_autostepMaxHeight,Wn=s.rawkinematiccharactercontroller_autostepMinWidth,Jn=s.rawkinematiccharactercontroller_autostepIncludesDynamicBodies,qn=s.rawkinematiccharactercontroller_autostepEnabled,Yn=s.rawkinematiccharactercontroller_enableAutostep,Kn=s.rawkinematiccharactercontroller_disableAutostep,Xn=s.rawkinematiccharactercontroller_maxSlopeClimbAngle,Zn=s.rawkinematiccharactercontroller_setMaxSlopeClimbAngle,$n=s.rawkinematiccharactercontroller_minSlopeSlideAngle,Qn=s.rawkinematiccharactercontroller_setMinSlopeSlideAngle,ti=s.rawkinematiccharactercontroller_snapToGroundDistance,ei=s.rawkinematiccharactercontroller_enableSnapToGround,ri=s.rawkinematiccharactercontroller_disableSnapToGround,ni=s.rawkinematiccharactercontroller_snapToGroundEnabled,ii=s.rawkinematiccharactercontroller_computeColliderMovement,Zt=s.rawkinematiccharactercontroller_computedMovement,xe=s.rawkinematiccharactercontroller_computedGrounded,si=s.rawkinematiccharactercontroller_numComputedCollisions,oi=s.rawkinematiccharactercontroller_computedCollision,ai=s.__wbg_rawcharactercollision_free,ci=s.rawcharactercollision_new,vt=s.rawcharactercollision_handle,li=s.rawcharactercollision_translationApplied,di=s.rawcharactercollision_translationRemaining,lt=s.rawcharactercollision_toi,$t=s.rawcharactercollision_worldWitness1,hi=s.rawcharactercollision_worldWitness2,Ne=s.rawcharactercollision_worldNormal1,wi=s.rawcharactercollision_worldNormal2,ui=s.__wbg_rawccdsolver_free,pi=s.rawccdsolver_new,_i=s.rawimpulsejointset_jointType,fi=s.rawimpulsejointset_jointBodyHandle1,mi=s.rawimpulsejointset_jointBodyHandle2,bi=s.rawimpulsejointset_jointFrameX1,yi=s.rawimpulsejointset_jointFrameX2,gi=s.rawimpulsejointset_jointAnchor1,Si=s.rawimpulsejointset_jointAnchor2,Ri=s.rawimpulsejointset_jointSetAnchor1,Ei=s.rawimpulsejointset_jointSetAnchor2,Ci=s.rawimpulsejointset_jointContactsEnabled,Ai=s.rawimpulsejointset_jointSetContactsEnabled,Ii=s.rawimpulsejointset_jointLimitsEnabled,Ti=s.rawimpulsejointset_jointLimitsMin,vi=s.rawimpulsejointset_jointLimitsMax,ji=s.rawimpulsejointset_jointSetLimits,Pi=s.rawimpulsejointset_jointConfigureMotorModel,Mi=s.rawimpulsejointset_jointConfigureMotorVelocity,xi=s.rawimpulsejointset_jointConfigureMotorPosition,Ni=s.rawimpulsejointset_jointConfigureMotor,Di=s.__wbg_rawimpulsejointset_free,Li=s.rawimpulsejointset_new,Oi=s.rawimpulsejointset_createJoint,Fi=s.rawimpulsejointset_remove,zi=s.rawimpulsejointset_len,Hi=s.rawimpulsejointset_contains,Gi=s.rawimpulsejointset_forEachJointHandle,ki=s.rawimpulsejointset_forEachJointAttachedToRigidBody,Bi=s.__wbg_rawintegrationparameters_free,Vi=s.rawintegrationparameters_new,Qt=s.rawintegrationparameters_dt,Ui=s.rawintegrationparameters_allowedLinearError,Wi=s.rawintegrationparameters_predictionDistance,Ji=s.rawintegrationparameters_maxVelocityIterations,qi=s.rawintegrationparameters_maxVelocityFrictionIterations,Yi=s.rawintegrationparameters_maxStabilizationIterations,Ki=s.rawintegrationparameters_minIslandSize,Xi=s.rawintegrationparameters_maxCcdSubsteps,ar=s.rawintegrationparameters_set_dt,cr=s.rawintegrationparameters_set_erp,Zi=s.rawintegrationparameters_set_allowedLinearError,$i=s.rawintegrationparameters_set_predictionDistance,Qi=s.rawintegrationparameters_set_maxVelocityIterations,ts=s.rawintegrationparameters_set_maxVelocityFrictionIterations,es=s.rawintegrationparameters_set_maxStabilizationIterations,rs=s.rawintegrationparameters_set_minIslandSize,ns=s.rawintegrationparameters_set_maxCcdSubsteps,is=s.__wbg_rawislandmanager_free,ss=s.rawislandmanager_new,os=s.rawislandmanager_forEachActiveRigidBodyHandle,as=s.__wbg_rawgenericjoint_free,cs=s.rawgenericjoint_spherical,ls=s.rawgenericjoint_prismatic,ds=s.rawgenericjoint_fixed,hs=s.rawgenericjoint_revolute,ws=s.rawmultibodyjointset_jointType,us=s.rawmultibodyjointset_jointFrameX1,ps=s.rawmultibodyjointset_jointFrameX2,_s=s.rawmultibodyjointset_jointAnchor1,fs=s.rawmultibodyjointset_jointAnchor2,ms=s.rawmultibodyjointset_jointContactsEnabled,bs=s.rawmultibodyjointset_jointSetContactsEnabled,ys=s.rawmultibodyjointset_jointLimitsEnabled,gs=s.rawmultibodyjointset_jointLimitsMin,Ss=s.rawmultibodyjointset_jointLimitsMax,Rs=s.__wbg_rawmultibodyjointset_free,Es=s.rawmultibodyjointset_new,Cs=s.rawmultibodyjointset_createJoint,As=s.rawmultibodyjointset_remove,Is=s.rawmultibodyjointset_contains,Ts=s.rawmultibodyjointset_forEachJointHandle,vs=s.rawmultibodyjointset_forEachJointAttachedToRigidBody,js=s.rawrigidbodyset_rbTranslation,Ps=s.rawrigidbodyset_rbRotation,Ms=s.rawrigidbodyset_rbSleep,xs=s.rawrigidbodyset_rbIsSleeping,Ns=s.rawrigidbodyset_rbIsMoving,Ds=s.rawrigidbodyset_rbNextTranslation,Ls=s.rawrigidbodyset_rbNextRotation,Os=s.rawrigidbodyset_rbSetTranslation,Fs=s.rawrigidbodyset_rbSetRotation,zs=s.rawrigidbodyset_rbSetLinvel,Hs=s.rawrigidbodyset_rbSetAngvel,Gs=s.rawrigidbodyset_rbSetNextKinematicTranslation,ks=s.rawrigidbodyset_rbSetNextKinematicRotation,Bs=s.rawrigidbodyset_rbRecomputeMassPropertiesFromColliders,Vs=s.rawrigidbodyset_rbSetAdditionalMass,Us=s.rawrigidbodyset_rbSetAdditionalMassProperties,Ws=s.rawrigidbodyset_rbLinvel,Js=s.rawrigidbodyset_rbAngvel,qs=s.rawrigidbodyset_rbLockTranslations,Ys=s.rawrigidbodyset_rbSetEnabledTranslations,Ks=s.rawrigidbodyset_rbLockRotations,Xs=s.rawrigidbodyset_rbSetEnabledRotations,Zs=s.rawrigidbodyset_rbDominanceGroup,$s=s.rawrigidbodyset_rbSetDominanceGroup,Qs=s.rawrigidbodyset_rbEnableCcd,to=s.rawrigidbodyset_rbMass,eo=s.rawrigidbodyset_rbWakeUp,ro=s.rawrigidbodyset_rbIsCcdEnabled,no=s.rawrigidbodyset_rbNumColliders,io=s.rawrigidbodyset_rbCollider,so=s.rawrigidbodyset_rbBodyType,oo=s.rawrigidbodyset_rbSetBodyType,ao=s.rawrigidbodyset_rbIsFixed,co=s.rawrigidbodyset_rbIsKinematic,lo=s.rawrigidbodyset_rbIsDynamic,ho=s.rawrigidbodyset_rbLinearDamping,wo=s.rawrigidbodyset_rbAngularDamping,uo=s.rawrigidbodyset_rbSetLinearDamping,po=s.rawrigidbodyset_rbSetAngularDamping,_o=s.rawrigidbodyset_rbSetEnabled,fo=s.rawrigidbodyset_rbIsEnabled,mo=s.rawrigidbodyset_rbGravityScale,bo=s.rawrigidbodyset_rbSetGravityScale,yo=s.rawrigidbodyset_rbResetForces,go=s.rawrigidbodyset_rbResetTorques,So=s.rawrigidbodyset_rbAddForce,Ro=s.rawrigidbodyset_rbApplyImpulse,Eo=s.rawrigidbodyset_rbAddTorque,Co=s.rawrigidbodyset_rbApplyTorqueImpulse,Ao=s.rawrigidbodyset_rbAddForceAtPoint,Io=s.rawrigidbodyset_rbApplyImpulseAtPoint,To=s.rawrigidbodyset_rbUserData,vo=s.rawrigidbodyset_rbSetUserData,jo=s.__wbg_rawrigidbodyset_free,Po=s.rawrigidbodyset_new,Mo=s.rawrigidbodyset_createRigidBody,xo=s.rawrigidbodyset_remove,No=s.rawrigidbodyset_len,Do=s.rawrigidbodyset_contains,Lo=s.rawrigidbodyset_forEachRigidBodyHandle,Oo=s.rawrigidbodyset_propagateModifiedBodyPositionsToColliders,Fo=s.__wbg_rawbroadphase_free,zo=s.rawbroadphase_new,Ho=s.rawcolliderset_coTranslation,Go=s.rawcolliderset_coRotation,ko=s.rawcolliderset_coSetTranslation,Bo=s.rawcolliderset_coSetTranslationWrtParent,Vo=s.rawcolliderset_coSetRotation,Uo=s.rawcolliderset_coSetRotationWrtParent,Wo=s.rawcolliderset_coIsSensor,Jo=s.rawcolliderset_coShapeType,qo=s.rawcolliderset_coHalfspaceNormal,Yo=s.rawcolliderset_coHalfExtents,Ko=s.rawcolliderset_coSetHalfExtents,Xo=s.rawcolliderset_coRadius,Zo=s.rawcolliderset_coSetRadius,$o=s.rawcolliderset_coHalfHeight,Qo=s.rawcolliderset_coSetHalfHeight,ta=s.rawcolliderset_coRoundRadius,ea=s.rawcolliderset_coSetRoundRadius,ra=s.rawcolliderset_coVertices,na=s.rawcolliderset_coIndices,ia=s.rawcolliderset_coHeightfieldHeights,sa=s.rawcolliderset_coHeightfieldScale,oa=s.rawcolliderset_coHeightfieldNRows,aa=s.rawcolliderset_coHeightfieldNCols,ca=s.rawcolliderset_coParent,la=s.rawcolliderset_coSetEnabled,da=s.rawcolliderset_coIsEnabled,ha=s.rawcolliderset_coFriction,wa=s.rawcolliderset_coRestitution,ua=s.rawcolliderset_coDensity,pa=s.rawcolliderset_coMass,_a=s.rawcolliderset_coVolume,fa=s.rawcolliderset_coCollisionGroups,ma=s.rawcolliderset_coSolverGroups,ba=s.rawcolliderset_coActiveHooks,ya=s.rawcolliderset_coActiveCollisionTypes,ga=s.rawcolliderset_coActiveEvents,Sa=s.rawcolliderset_coContactForceEventThreshold,Ra=s.rawcolliderset_coContainsPoint,Ea=s.rawcolliderset_coCastShape,Ca=s.rawcolliderset_coCastCollider,Aa=s.rawcolliderset_coIntersectsShape,Ia=s.rawcolliderset_coContactShape,Ta=s.rawcolliderset_coContactCollider,va=s.rawcolliderset_coProjectPoint,ja=s.rawcolliderset_coIntersectsRay,Pa=s.rawcolliderset_coCastRay,Ma=s.rawcolliderset_coCastRayAndGetNormal,xa=s.rawcolliderset_coSetSensor,Na=s.rawcolliderset_coSetRestitution,Da=s.rawcolliderset_coSetFriction,La=s.rawcolliderset_coFrictionCombineRule,Oa=s.rawcolliderset_coSetFrictionCombineRule,Fa=s.rawcolliderset_coRestitutionCombineRule,za=s.rawcolliderset_coSetRestitutionCombineRule,Ha=s.rawcolliderset_coSetCollisionGroups,Ga=s.rawcolliderset_coSetSolverGroups,ka=s.rawcolliderset_coSetActiveHooks,Ba=s.rawcolliderset_coSetActiveEvents,Va=s.rawcolliderset_coSetActiveCollisionTypes,Ua=s.rawcolliderset_coSetShape,Wa=s.rawcolliderset_coSetContactForceEventThreshold,Ja=s.rawcolliderset_coSetDensity,qa=s.rawcolliderset_coSetMass,Ya=s.rawcolliderset_coSetMassProperties,Ka=s.__wbg_rawcolliderset_free,Xa=s.rawcolliderset_new,Za=s.rawcolliderset_len,Qe=s.rawcolliderset_contains,$a=s.rawcolliderset_createCollider,Qa=s.rawcolliderset_remove,tc=s.rawcolliderset_forEachColliderHandle,ec=s.__wbg_rawshapecontact_free,rc=s.rawshapecontact_distance,nc=s.__wbg_rawnarrowphase_free,ic=s.rawnarrowphase_new,sc=s.rawnarrowphase_contacts_with,oc=s.rawnarrowphase_contact_pair,ac=s.rawnarrowphase_intersections_with,cc=s.rawnarrowphase_intersection_pair,lc=s.__wbg_rawcontactmanifold_free,dc=s.rawcontactpair_collider1,hc=s.rawcontactpair_collider2,wc=s.rawcontactpair_numContactManifolds,uc=s.rawcontactpair_contactManifold,pc=s.rawcontactmanifold_normal,_c=s.rawcontactmanifold_local_n1,fc=s.rawcontactmanifold_local_n2,mc=s.rawcontactmanifold_subshape1,bc=s.rawcontactmanifold_subshape2,yc=s.rawcontactmanifold_num_contacts,gc=s.rawcontactmanifold_contact_local_p1,Sc=s.rawcontactmanifold_contact_local_p2,Rc=s.rawcontactmanifold_contact_dist,Ec=s.rawcontactmanifold_contact_fid1,Cc=s.rawcontactmanifold_contact_fid2,Ac=s.rawcontactmanifold_contact_impulse,Ic=s.rawcontactmanifold_contact_tangent_impulse_x,Tc=s.rawcontactmanifold_contact_tangent_impulse_y,vc=s.rawcontactmanifold_num_solver_contacts,jc=s.rawcontactmanifold_solver_contact_point,Pc=s.rawcontactmanifold_solver_contact_dist,Mc=s.rawcontactmanifold_solver_contact_friction,xc=s.rawcontactmanifold_solver_contact_restitution,Nc=s.rawcontactmanifold_solver_contact_tangent_velocity,Dc=s.__wbg_rawpointprojection_free,Lc=s.__wbg_rawpointcolliderprojection_free,Oc=s.rawpointcolliderprojection_colliderHandle,Fc=s.rawpointcolliderprojection_featureType,zc=s.rawpointcolliderprojection_featureId,Hc=s.__wbg_rawrayintersection_free,Gc=s.rawrayintersection_featureType,kc=s.rawrayintersection_featureId,Bc=s.rawraycolliderintersection_normal,Vc=s.rawraycolliderintersection_toi,Uc=s.rawraycolliderintersection_featureType,Wc=s.rawraycolliderintersection_featureId,Jc=s.__wbg_rawraycollidertoi_free,qc=s.__wbg_rawshape_free,Yc=s.rawshape_cuboid,Kc=s.rawshape_roundCuboid,Xc=s.rawshape_ball,Zc=s.rawshape_halfspace,$c=s.rawshape_capsule,Qc=s.rawshape_cylinder,tl=s.rawshape_roundCylinder,el=s.rawshape_cone,rl=s.rawshape_roundCone,nl=s.rawshape_polyline,il=s.rawshape_trimesh,sl=s.rawshape_heightfield,ol=s.rawshape_segment,al=s.rawshape_triangle,cl=s.rawshape_roundTriangle,ll=s.rawshape_convexHull,dl=s.rawshape_roundConvexHull,hl=s.rawshape_convexMesh,wl=s.rawshape_roundConvexMesh,ul=s.rawshape_castShape,pl=s.rawshape_intersectsShape,_l=s.rawshape_contactShape,fl=s.rawshape_containsPoint,ml=s.rawshape_projectPoint,bl=s.rawshape_intersectsRay,yl=s.rawshape_castRay,gl=s.rawshape_castRayAndGetNormal,Sl=s.__wbg_rawshapetoi_free,Rl=s.rawshapetoi_witness1,El=s.rawshapetoi_normal1,Cl=s.rawshapetoi_normal2,Al=s.__wbg_rawshapecollidertoi_free,lr=s.rawshapecollidertoi_witness2,Il=s.rawshapecollidertoi_normal2,Tl=s.rawrotation_new,vl=s.rawrotation_identity,dr=s.rawrotation_y,jl=s.rawrotation_w,Pl=s.rawvector_zero,Ml=s.rawvector_new,xl=s.rawvector_set_y,Nl=s.rawvector_xyz,Dl=s.rawvector_yxz,Ll=s.rawvector_zxy,Ol=s.rawvector_xzy,Fl=s.rawvector_yzx,zl=s.rawvector_zyx,Hl=s.__wbg_rawdebugrenderpipeline_free,Gl=s.rawdebugrenderpipeline_new,kl=s.rawdebugrenderpipeline_vertices,Bl=s.rawdebugrenderpipeline_colors,Vl=s.rawdebugrenderpipeline_render,Ul=s.__wbg_raweventqueue_free,Wl=s.__wbg_rawcontactforceevent_free,Jl=s.rawcontactforceevent_collider2,hr=s.rawcontactforceevent_total_force,ql=s.rawcontactforceevent_total_force_magnitude,Yl=s.rawcontactforceevent_max_force_direction,Kl=s.rawcontactforceevent_max_force_magnitude,Xl=s.raweventqueue_new,Zl=s.raweventqueue_drainCollisionEvents,$l=s.raweventqueue_drainContactForceEvents,Ql=s.raweventqueue_clear,td=s.__wbg_rawphysicspipeline_free,ed=s.rawphysicspipeline_new,rd=s.rawphysicspipeline_step,nd=s.rawphysicspipeline_stepWithEvents,id=s.__wbg_rawquerypipeline_free,sd=s.rawquerypipeline_new,od=s.rawquerypipeline_update,ad=s.rawquerypipeline_castRay,cd=s.rawquerypipeline_castRayAndGetNormal,ld=s.rawquerypipeline_intersectionsWithRay,dd=s.rawquerypipeline_intersectionWithShape,hd=s.rawquerypipeline_projectPoint,wd=s.rawquerypipeline_projectPointAndGetFeature,ud=s.rawquerypipeline_intersectionsWithPoint,pd=s.rawquerypipeline_castShape,_d=s.rawquerypipeline_intersectionsWithShape,fd=s.rawquerypipeline_collidersWithAabbIntersectingAabb,md=s.__wbg_rawdeserializedworld_free,bd=s.rawdeserializedworld_takeGravity,yd=s.rawdeserializedworld_takeIntegrationParameters,gd=s.rawdeserializedworld_takeIslandManager,Sd=s.rawdeserializedworld_takeBroadPhase,Rd=s.rawdeserializedworld_takeNarrowPhase,Ed=s.rawdeserializedworld_takeBodies,Cd=s.rawdeserializedworld_takeColliders,Ad=s.rawdeserializedworld_takeImpulseJoints,Id=s.rawdeserializedworld_takeMultibodyJoints,Td=s.rawserializationpipeline_serializeAll,vd=s.rawserializationpipeline_deserializeAll,jd=s.__wbg_rawcontactpair_free,Pd=s.__wbg_rawraycolliderintersection_free,Md=s.__wbg_rawrotation_free,xd=s.__wbg_rawvector_free;s.rawvector_set_x;s.rawvector_set_z;s.rawpointprojection_isInside;s.rawpointcolliderprojection_isInside;s.rawcolliderset_isHandleValid;s.rawshapecontact_point1;s.rawshapecontact_point2;s.rawshapecontact_normal2;s.rawpointprojection_point;s.rawpointcolliderprojection_point;s.rawrayintersection_normal;s.rawshapecollidertoi_witness1;s.rawshapecontact_normal1;s.rawshapecollidertoi_normal1;s.rawshapetoi_witness2;const Nd=s.rawserializationpipeline_new;s.rawintegrationparameters_erp;s.rawrayintersection_toi;s.rawraycollidertoi_toi;s.rawshapetoi_toi;s.rawshapecollidertoi_toi;s.rawrotation_x;s.rawrotation_z;s.rawvector_x;s.rawvector_y;s.rawvector_z;s.rawraycolliderintersection_colliderHandle;s.rawraycollidertoi_colliderHandle;s.rawshapecollidertoi_colliderHandle;s.rawcontactforceevent_collider1;const Dd=s.__wbg_rawserializationpipeline_free,E=s.__wbindgen_add_to_stack_pointer,Dt=s.__wbindgen_free,U=s.__wbindgen_malloc,Ld=s.__wbindgen_exn_store;class wr{constructor(t,e,r){this.x=t,this.y=e,this.z=r}}class d{static new(t,e,r){return new wr(t,e,r)}static intoRaw(t){return new h(t.x,t.y,t.z)}static zeros(){return d.new(0,0,0)}static fromRaw(t){if(!t)return null;let e=d.new(t.x,t.y,t.z);return t.free(),e}static copy(t,e){t.x=e.x,t.y=e.y,t.z=e.z}}class ue{constructor(t,e,r,i){this.x=t,this.y=e,this.z=r,this.w=i}}class g{static identity(){return new ue(0,0,0,1)}static fromRaw(t){if(!t)return null;let e=new ue(t.x,t.y,t.z,t.w);return t.free(),e}static intoRaw(t){return new R(t.x,t.y,t.z,t.w)}static copy(t,e){t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w}}var W;(function(n){n[n.Dynamic=0]="Dynamic",n[n.Fixed=1]="Fixed",n[n.KinematicPositionBased=2]="KinematicPositionBased",n[n.KinematicVelocityBased=3]="KinematicVelocityBased"})(W||(W={}));class pe{constructor(t,e,r){this.rawSet=t,this.colliderSet=e,this.handle=r}finalizeDeserialization(t){this.colliderSet=t}isValid(){return this.rawSet.contains(this.handle)}lockTranslations(t,e){return this.rawSet.rbLockTranslations(this.handle,t,e)}lockRotations(t,e){return this.rawSet.rbLockRotations(this.handle,t,e)}setEnabledTranslations(t,e,r,i){return this.rawSet.rbSetEnabledTranslations(this.handle,t,e,r,i)}restrictTranslations(t,e,r,i){this.setEnabledTranslations(t,e,r,i)}setEnabledRotations(t,e,r,i){return this.rawSet.rbSetEnabledRotations(this.handle,t,e,r,i)}restrictRotations(t,e,r,i){this.setEnabledRotations(t,e,r,i)}dominanceGroup(){return this.rawSet.rbDominanceGroup(this.handle)}setDominanceGroup(t){this.rawSet.rbSetDominanceGroup(this.handle,t)}enableCcd(t){this.rawSet.rbEnableCcd(this.handle,t)}translation(){let t=this.rawSet.rbTranslation(this.handle);return d.fromRaw(t)}rotation(){let t=this.rawSet.rbRotation(this.handle);return g.fromRaw(t)}nextTranslation(){let t=this.rawSet.rbNextTranslation(this.handle);return d.fromRaw(t)}nextRotation(){let t=this.rawSet.rbNextRotation(this.handle);return g.fromRaw(t)}setTranslation(t,e){this.rawSet.rbSetTranslation(this.handle,t.x,t.y,t.z,e)}setLinvel(t,e){let r=d.intoRaw(t);this.rawSet.rbSetLinvel(this.handle,r,e),r.free()}gravityScale(){return this.rawSet.rbGravityScale(this.handle)}setGravityScale(t,e){this.rawSet.rbSetGravityScale(this.handle,t,e)}setRotation(t,e){this.rawSet.rbSetRotation(this.handle,t.x,t.y,t.z,t.w,e)}setAngvel(t,e){let r=d.intoRaw(t);this.rawSet.rbSetAngvel(this.handle,r,e),r.free()}setNextKinematicTranslation(t){this.rawSet.rbSetNextKinematicTranslation(this.handle,t.x,t.y,t.z)}setNextKinematicRotation(t){this.rawSet.rbSetNextKinematicRotation(this.handle,t.x,t.y,t.z,t.w)}linvel(){return d.fromRaw(this.rawSet.rbLinvel(this.handle))}angvel(){return d.fromRaw(this.rawSet.rbAngvel(this.handle))}mass(){return this.rawSet.rbMass(this.handle)}sleep(){this.rawSet.rbSleep(this.handle)}wakeUp(){this.rawSet.rbWakeUp(this.handle)}isCcdEnabled(){return this.rawSet.rbIsCcdEnabled(this.handle)}numColliders(){return this.rawSet.rbNumColliders(this.handle)}collider(t){return this.colliderSet.get(this.rawSet.rbCollider(this.handle,t))}setEnabled(t){this.rawSet.rbSetEnabled(this.handle,t)}isEnabled(){return this.rawSet.rbIsEnabled(this.handle)}bodyType(){return this.rawSet.rbBodyType(this.handle)}setBodyType(t,e){return this.rawSet.rbSetBodyType(this.handle,t,e)}isSleeping(){return this.rawSet.rbIsSleeping(this.handle)}isMoving(){return this.rawSet.rbIsMoving(this.handle)}isFixed(){return this.rawSet.rbIsFixed(this.handle)}isKinematic(){return this.rawSet.rbIsKinematic(this.handle)}isDynamic(){return this.rawSet.rbIsDynamic(this.handle)}linearDamping(){return this.rawSet.rbLinearDamping(this.handle)}angularDamping(){return this.rawSet.rbAngularDamping(this.handle)}setLinearDamping(t){this.rawSet.rbSetLinearDamping(this.handle,t)}recomputeMassPropertiesFromColliders(){this.rawSet.rbRecomputeMassPropertiesFromColliders(this.handle,this.colliderSet.raw)}setAdditionalMass(t,e){this.rawSet.rbSetAdditionalMass(this.handle,t,e)}setAdditionalMassProperties(t,e,r,i,o){let a=d.intoRaw(e),l=d.intoRaw(r),w=g.intoRaw(i);this.rawSet.rbSetAdditionalMassProperties(this.handle,t,a,l,w,o),a.free(),l.free(),w.free()}setAngularDamping(t){this.rawSet.rbSetAngularDamping(this.handle,t)}resetForces(t){this.rawSet.rbResetForces(this.handle,t)}resetTorques(t){this.rawSet.rbResetTorques(this.handle,t)}addForce(t,e){const r=d.intoRaw(t);this.rawSet.rbAddForce(this.handle,r,e),r.free()}applyImpulse(t,e){const r=d.intoRaw(t);this.rawSet.rbApplyImpulse(this.handle,r,e),r.free()}addTorque(t,e){const r=d.intoRaw(t);this.rawSet.rbAddTorque(this.handle,r,e),r.free()}applyTorqueImpulse(t,e){const r=d.intoRaw(t);this.rawSet.rbApplyTorqueImpulse(this.handle,r,e),r.free()}addForceAtPoint(t,e,r){const i=d.intoRaw(t),o=d.intoRaw(e);this.rawSet.rbAddForceAtPoint(this.handle,i,o,r),i.free(),o.free()}applyImpulseAtPoint(t,e,r){const i=d.intoRaw(t),o=d.intoRaw(e);this.rawSet.rbApplyImpulseAtPoint(this.handle,i,o,r),i.free(),o.free()}}class K{constructor(t){this.enabled=!0,this.status=t,this.translation=d.zeros(),this.rotation=g.identity(),this.gravityScale=1,this.linvel=d.zeros(),this.mass=0,this.massOnly=!1,this.centerOfMass=d.zeros(),this.translationsEnabledX=!0,this.translationsEnabledY=!0,this.angvel=d.zeros(),this.principalAngularInertia=d.zeros(),this.angularInertiaLocalFrame=g.identity(),this.translationsEnabledZ=!0,this.rotationsEnabledX=!0,this.rotationsEnabledY=!0,this.rotationsEnabledZ=!0,this.linearDamping=0,this.angularDamping=0,this.canSleep=!0,this.sleeping=!1,this.ccdEnabled=!1,this.dominanceGroup=0}static dynamic(){return new K(W.Dynamic)}static kinematicPositionBased(){return new K(W.KinematicPositionBased)}static kinematicVelocityBased(){return new K(W.KinematicVelocityBased)}static fixed(){return new K(W.Fixed)}static newDynamic(){return new K(W.Dynamic)}static newKinematicPositionBased(){return new K(W.KinematicPositionBased)}static newKinematicVelocityBased(){return new K(W.KinematicVelocityBased)}static newStatic(){return new K(W.Fixed)}setDominanceGroup(t){return this.dominanceGroup=t,this}setEnabled(t){return this.enabled=t,this}setTranslation(t,e,r){if(typeof t!="number"||typeof e!="number"||typeof r!="number")throw TypeError("The translation components must be numbers.");return this.translation={x:t,y:e,z:r},this}setRotation(t){return g.copy(this.rotation,t),this}setGravityScale(t){return this.gravityScale=t,this}setAdditionalMass(t){return this.mass=t,this.massOnly=!0,this}setLinvel(t,e,r){if(typeof t!="number"||typeof e!="number"||typeof r!="number")throw TypeError("The linvel components must be numbers.");return this.linvel={x:t,y:e,z:r},this}setAngvel(t){return d.copy(this.angvel,t),this}setAdditionalMassProperties(t,e,r,i){return this.mass=t,d.copy(this.centerOfMass,e),d.copy(this.principalAngularInertia,r),g.copy(this.angularInertiaLocalFrame,i),this.massOnly=!1,this}enabledTranslations(t,e,r){return this.translationsEnabledX=t,this.translationsEnabledY=e,this.translationsEnabledZ=r,this}restrictTranslations(t,e,r){return this.enabledTranslations(t,e,r)}lockTranslations(){return this.enabledTranslations(!1,!1,!1)}enabledRotations(t,e,r){return this.rotationsEnabledX=t,this.rotationsEnabledY=e,this.rotationsEnabledZ=r,this}restrictRotations(t,e,r){return this.enabledRotations(t,e,r)}lockRotations(){return this.restrictRotations(!1,!1,!1)}setLinearDamping(t){return this.linearDamping=t,this}setAngularDamping(t){return this.angularDamping=t,this}setCanSleep(t){return this.canSleep=t,this}setSleeping(t){return this.sleeping=t,this}setCcdEnabled(t){return this.ccdEnabled=t,this}setUserData(t){return this.userData=t,this}}class te{constructor(){this.fconv=new Float64Array(1),this.uconv=new Uint32Array(this.fconv.buffer),this.data=new Array,this.size=0}set(t,e){let r=this.index(t);for(;this.data.length<=r;)this.data.push(null);this.data[r]==null&&(this.size+=1),this.data[r]=e}len(){return this.size}delete(t){let e=this.index(t);e<this.data.length&&(this.data[e]!=null&&(this.size-=1),this.data[e]=null)}clear(){this.data=new Array}get(t){let e=this.index(t);return e<this.data.length?this.data[e]:null}forEach(t){for(const e of this.data)e!=null&&t(e)}getAll(){return this.data.filter(t=>t!=null)}index(t){return this.fconv[0]=t,this.uconv[0]}}class ur{constructor(t){this.raw=t||new N,this.map=new te,t&&t.forEachRigidBodyHandle(e=>{this.map.set(e,new pe(t,null,e))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}finalizeDeserialization(t){this.map.forEach(e=>e.finalizeDeserialization(t))}createRigidBody(t,e){let r=d.intoRaw(e.translation),i=g.intoRaw(e.rotation),o=d.intoRaw(e.linvel),a=d.intoRaw(e.centerOfMass),l=d.intoRaw(e.angvel),w=d.intoRaw(e.principalAngularInertia),u=g.intoRaw(e.angularInertiaLocalFrame),p=this.raw.createRigidBody(e.enabled,r,i,e.gravityScale,e.mass,e.massOnly,a,o,l,w,u,e.translationsEnabledX,e.translationsEnabledY,e.translationsEnabledZ,e.rotationsEnabledX,e.rotationsEnabledY,e.rotationsEnabledZ,e.linearDamping,e.angularDamping,e.status,e.canSleep,e.sleeping,e.ccdEnabled,e.dominanceGroup);r.free(),i.free(),o.free(),a.free(),l.free(),w.free(),u.free();const _=new pe(this.raw,t,p);return _.userData=e.userData,this.map.set(p,_),_}remove(t,e,r,i,o){for(let a=0;a<this.raw.rbNumColliders(t);a+=1)r.unmap(this.raw.rbCollider(t,a));i.forEachJointHandleAttachedToRigidBody(t,a=>i.unmap(a)),o.forEachJointHandleAttachedToRigidBody(t,a=>o.unmap(a)),this.raw.remove(t,e.raw,r.raw,i.raw,o.raw),this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}forEachActiveRigidBody(t,e){t.forEachActiveRigidBodyHandle(r=>{e(this.get(r))})}getAll(){return this.map.getAll()}}class pr{constructor(t){this.raw=t||new it}free(){this.raw&&this.raw.free(),this.raw=void 0}get dt(){return this.raw.dt}get erp(){return this.raw.erp}get allowedLinearError(){return this.raw.allowedLinearError}get predictionDistance(){return this.raw.predictionDistance}get maxVelocityIterations(){return this.raw.maxVelocityIterations}get maxVelocityFrictionIterations(){return this.raw.maxVelocityFrictionIterations}get maxStabilizationIterations(){return this.raw.maxStabilizationIterations}get minIslandSize(){return this.raw.minIslandSize}get maxCcdSubsteps(){return this.raw.maxCcdSubsteps}set dt(t){this.raw.dt=t}set erp(t){this.raw.erp=t}set allowedLinearError(t){this.raw.allowedLinearError=t}set predictionDistance(t){this.raw.predictionDistance=t}set maxVelocityIterations(t){this.raw.maxVelocityIterations=t}set maxVelocityFrictionIterations(t){this.raw.maxVelocityFrictionIterations=t}set maxStabilizationIterations(t){this.raw.maxStabilizationIterations=t}set minIslandSize(t){this.raw.minIslandSize=t}set maxCcdSubsteps(t){this.raw.maxCcdSubsteps=t}}var L;(function(n){n[n.Revolute=0]="Revolute",n[n.Fixed=1]="Fixed",n[n.Prismatic=2]="Prismatic",n[n.Spherical=3]="Spherical"})(L||(L={}));var _e;(function(n){n[n.AccelerationBased=0]="AccelerationBased",n[n.ForceBased=1]="ForceBased"})(_e||(_e={}));class st{constructor(t,e,r){this.rawSet=t,this.bodySet=e,this.handle=r}static newTyped(t,e,r){switch(t.jointType(r)){case L.Revolute:return new mr(t,e,r);case L.Prismatic:return new fr(t,e,r);case L.Fixed:return new _r(t,e,r);case L.Spherical:return new br(t,e,r);default:return new st(t,e,r)}}finalizeDeserialization(t){this.bodySet=t}isValid(){return this.rawSet.contains(this.handle)}body1(){return this.bodySet.get(this.rawSet.jointBodyHandle1(this.handle))}body2(){return this.bodySet.get(this.rawSet.jointBodyHandle2(this.handle))}type(){return this.rawSet.jointType(this.handle)}frameX1(){return g.fromRaw(this.rawSet.jointFrameX1(this.handle))}frameX2(){return g.fromRaw(this.rawSet.jointFrameX2(this.handle))}anchor1(){return d.fromRaw(this.rawSet.jointAnchor1(this.handle))}anchor2(){return d.fromRaw(this.rawSet.jointAnchor2(this.handle))}setAnchor1(t){const e=d.intoRaw(t);this.rawSet.jointSetAnchor1(this.handle,e),e.free()}setAnchor2(t){const e=d.intoRaw(t);this.rawSet.jointSetAnchor2(this.handle,e),e.free()}setContactsEnabled(t){this.rawSet.jointSetContactsEnabled(this.handle,t)}contactsEnabled(){return this.rawSet.jointContactsEnabled(this.handle)}}class De extends st{limitsEnabled(){return this.rawSet.jointLimitsEnabled(this.handle,this.rawAxis())}limitsMin(){return this.rawSet.jointLimitsMin(this.handle,this.rawAxis())}limitsMax(){return this.rawSet.jointLimitsMax(this.handle,this.rawAxis())}setLimits(t,e){this.rawSet.jointSetLimits(this.handle,this.rawAxis(),t,e)}configureMotorModel(t){this.rawSet.jointConfigureMotorModel(this.handle,this.rawAxis(),t)}configureMotorVelocity(t,e){this.rawSet.jointConfigureMotorVelocity(this.handle,this.rawAxis(),t,e)}configureMotorPosition(t,e,r){this.rawSet.jointConfigureMotorPosition(this.handle,this.rawAxis(),t,e,r)}configureMotor(t,e,r,i){this.rawSet.jointConfigureMotor(this.handle,this.rawAxis(),t,e,r,i)}}class _r extends st{}class fr extends De{rawAxis(){return Wt.X}}class mr extends De{rawAxis(){return Wt.AngX}}class br extends st{}class dt{constructor(){}static fixed(t,e,r,i){let o=new dt;return o.anchor1=t,o.anchor2=r,o.frame1=e,o.frame2=i,o.jointType=L.Fixed,o}static spherical(t,e){let r=new dt;return r.anchor1=t,r.anchor2=e,r.jointType=L.Spherical,r}static prismatic(t,e,r){let i=new dt;return i.anchor1=t,i.anchor2=e,i.axis=r,i.jointType=L.Prismatic,i}static revolute(t,e,r){let i=new dt;return i.anchor1=t,i.anchor2=e,i.axis=r,i.jointType=L.Revolute,i}intoRaw(){let t=d.intoRaw(this.anchor1),e=d.intoRaw(this.anchor2),r,i,o=!1,a=0,l=0;switch(this.jointType){case L.Fixed:let w=g.intoRaw(this.frame1),u=g.intoRaw(this.frame2);i=B.fixed(t,w,e,u),w.free(),u.free();break;case L.Prismatic:r=d.intoRaw(this.axis),this.limitsEnabled&&(o=!0,a=this.limits[0],l=this.limits[1]),i=B.prismatic(t,e,r,o,a,l),r.free();break;case L.Spherical:i=B.spherical(t,e);break;case L.Revolute:r=d.intoRaw(this.axis),i=B.revolute(t,e,r),r.free();break}return t.free(),e.free(),i}}class yr{constructor(t){this.raw=t||new X,this.map=new te,t&&t.forEachJointHandle(e=>{this.map.set(e,st.newTyped(t,null,e))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}finalizeDeserialization(t){this.map.forEach(e=>e.finalizeDeserialization(t))}createJoint(t,e,r,i,o){const a=e.intoRaw(),l=this.raw.createJoint(a,r,i,o);a.free();let w=st.newTyped(this.raw,t,l);return this.map.set(l,w),w}remove(t,e){this.raw.remove(t,e),this.unmap(t)}forEachJointHandleAttachedToRigidBody(t,e){this.raw.forEachJointAttachedToRigidBody(t,e)}unmap(t){this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}getAll(){return this.map.getAll()}}class ot{constructor(t,e){this.rawSet=t,this.handle=e}static newTyped(t,e){switch(t.jointType(e)){case L.Revolute:return new Rr(t,e);case L.Prismatic:return new Sr(t,e);case L.Fixed:return new gr(t,e);case L.Spherical:return new Er(t,e);default:return new ot(t,e)}}isValid(){return this.rawSet.contains(this.handle)}setContactsEnabled(t){this.rawSet.jointSetContactsEnabled(this.handle,t)}contactsEnabled(){return this.rawSet.jointContactsEnabled(this.handle)}}class Le extends ot{}class gr extends ot{}class Sr extends Le{rawAxis(){return Wt.X}}class Rr extends Le{rawAxis(){return Wt.AngX}}class Er extends ot{}class Cr{constructor(t){this.raw=t||new $,this.map=new te,t&&t.forEachJointHandle(e=>{this.map.set(e,ot.newTyped(this.raw,e))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}createJoint(t,e,r,i){const o=t.intoRaw(),a=this.raw.createJoint(o,e,r,i);o.free();let l=ot.newTyped(this.raw,a);return this.map.set(a,l),l}remove(t,e){this.raw.remove(t,e),this.map.delete(t)}unmap(t){this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}forEachJointHandleAttachedToRigidBody(t,e){this.raw.forEachJointAttachedToRigidBody(t,e)}getAll(){return this.map.getAll()}}var At;(function(n){n[n.Average=0]="Average",n[n.Min=1]="Min",n[n.Multiply=2]="Multiply",n[n.Max=3]="Max"})(At||(At={}));class Ar{constructor(t){this.raw=t||new ht}free(){this.raw&&this.raw.free(),this.raw=void 0}}class Ir{constructor(t){this.raw=t||new Z}free(){this.raw&&this.raw.free(),this.raw=void 0}forEachActiveRigidBodyHandle(t){this.raw.forEachActiveRigidBodyHandle(t)}}class Tr{constructor(t){this.raw=t||new nt}free(){this.raw&&this.raw.free(),this.raw=void 0}}class vr{constructor(t){this.raw=t||new tt,this.tempManifold=new jr(null)}free(){this.raw&&this.raw.free(),this.raw=void 0}contactsWith(t,e){this.raw.contacts_with(t,e)}intersectionsWith(t,e){this.raw.intersections_with(t,e)}contactPair(t,e,r){const i=this.raw.contact_pair(t,e);if(i){const o=i.collider1()!=t;let a;for(a=0;a<i.numContactManifolds();++a)this.tempManifold.raw=i.contactManifold(a),this.tempManifold.raw&&r(this.tempManifold,o),this.tempManifold.free();i.free()}}intersectionPair(t,e){return this.raw.intersection_pair(t,e)}}class jr{constructor(t){this.raw=t}free(){this.raw&&this.raw.free(),this.raw=void 0}normal(){return d.fromRaw(this.raw.normal())}localNormal1(){return d.fromRaw(this.raw.local_n1())}localNormal2(){return d.fromRaw(this.raw.local_n2())}subshape1(){return this.raw.subshape1()}subshape2(){return this.raw.subshape2()}numContacts(){return this.raw.num_contacts()}localContactPoint1(t){return d.fromRaw(this.raw.contact_local_p1(t))}localContactPoint2(t){return d.fromRaw(this.raw.contact_local_p2(t))}contactDist(t){return this.raw.contact_dist(t)}contactFid1(t){return this.raw.contact_fid1(t)}contactFid2(t){return this.raw.contact_fid2(t)}contactImpulse(t){return this.raw.contact_impulse(t)}contactTangentImpulseX(t){return this.raw.contact_tangent_impulse_x(t)}contactTangentImpulseY(t){return this.raw.contact_tangent_impulse_y(t)}numSolverContacts(){return this.raw.num_solver_contacts()}solverContactPoint(t){return d.fromRaw(this.raw.solver_contact_point(t))}solverContactDist(t){return this.raw.solver_contact_dist(t)}solverContactFriction(t){return this.raw.solver_contact_friction(t)}solverContactRestitution(t){return this.raw.solver_contact_restitution(t)}solverContactTangentVelocity(t){return d.fromRaw(this.raw.solver_contact_tangent_velocity(t))}}class wt{constructor(t,e,r,i,o){this.distance=t,this.point1=e,this.point2=r,this.normal1=i,this.normal2=o}static fromRaw(t){if(!t)return null;const e=new wt(t.distance(),d.fromRaw(t.point1()),d.fromRaw(t.point2()),d.fromRaw(t.normal1()),d.fromRaw(t.normal2()));return t.free(),e}}var ut;(function(n){n[n.Vertex=0]="Vertex",n[n.Edge=1]="Edge",n[n.Face=2]="Face",n[n.Unknown=3]="Unknown"})(ut||(ut={}));class jt{constructor(t,e){this.point=t,this.isInside=e}static fromRaw(t){if(!t)return null;const e=new jt(d.fromRaw(t.point()),t.isInside());return t.free(),e}}class It{constructor(t,e,r,i,o){this.featureType=ut.Unknown,this.featureId=void 0,this.collider=t,this.point=e,this.isInside=r,o!==void 0&&(this.featureId=o),i!==void 0&&(this.featureType=i)}static fromRaw(t,e){if(!e)return null;const r=new It(t.get(e.colliderHandle()),d.fromRaw(e.point()),e.isInside(),e.featureType(),e.featureId());return e.free(),r}}class Od{constructor(t,e){this.origin=t,this.dir=e}pointAt(t){return{x:this.origin.x+this.dir.x*t,y:this.origin.y+this.dir.y*t,z:this.origin.z+this.dir.z*t}}}class Pt{constructor(t,e,r,i){this.featureType=ut.Unknown,this.featureId=void 0,this.toi=t,this.normal=e,i!==void 0&&(this.featureId=i),r!==void 0&&(this.featureType=r)}static fromRaw(t){if(!t)return null;const e=new Pt(t.toi(),d.fromRaw(t.normal()),t.featureType(),t.featureId());return t.free(),e}}class Tt{constructor(t,e,r,i,o){this.featureType=ut.Unknown,this.featureId=void 0,this.collider=t,this.toi=e,this.normal=r,o!==void 0&&(this.featureId=o),i!==void 0&&(this.featureType=i)}static fromRaw(t,e){if(!e)return null;const r=new Tt(t.get(e.colliderHandle()),e.toi(),d.fromRaw(e.normal()),e.featureType(),e.featureId());return e.free(),r}}class ee{constructor(t,e){this.collider=t,this.toi=e}static fromRaw(t,e){if(!e)return null;const r=new ee(t.get(e.colliderHandle()),e.toi());return e.free(),r}}class _t{constructor(t,e,r,i,o){this.toi=t,this.witness1=e,this.witness2=r,this.normal1=i,this.normal2=o}static fromRaw(t,e){if(!e)return null;const r=new _t(e.toi(),d.fromRaw(e.witness1()),d.fromRaw(e.witness2()),d.fromRaw(e.normal1()),d.fromRaw(e.normal2()));return e.free(),r}}class Mt extends _t{constructor(t,e,r,i,o,a){super(e,r,i,o,a),this.collider=t}static fromRaw(t,e){if(!e)return null;const r=new Mt(t.get(e.colliderHandle()),e.toi(),d.fromRaw(e.witness1()),d.fromRaw(e.witness2()),d.fromRaw(e.normal1()),d.fromRaw(e.normal2()));return e.free(),r}}class O{static fromRaw(t,e){const r=t.coShapeType(e);let i,o,a,l,w,u,p;switch(r){case S.Ball:return new Oe(t.coRadius(e));case S.Cuboid:return i=t.coHalfExtents(e),new Fe(i.x,i.y,i.z);case S.RoundCuboid:return i=t.coHalfExtents(e),o=t.coRoundRadius(e),new ze(i.x,i.y,i.z,o);case S.Capsule:return w=t.coHalfHeight(e),u=t.coRadius(e),new He(w,u);case S.Segment:return a=t.coVertices(e),new Ge(d.new(a[0],a[1],a[2]),d.new(a[3],a[4],a[5]));case S.Polyline:return a=t.coVertices(e),l=t.coIndices(e),new Ve(a,l);case S.Triangle:return a=t.coVertices(e),new ke(d.new(a[0],a[1],a[2]),d.new(a[3],a[4],a[5]),d.new(a[6],a[7],a[8]));case S.RoundTriangle:return a=t.coVertices(e),o=t.coRoundRadius(e),new Be(d.new(a[0],a[1],a[2]),d.new(a[3],a[4],a[5]),d.new(a[6],a[7],a[8]),o);case S.HalfSpace:return p=d.fromRaw(t.coHalfspaceNormal(e)),new Pr(p);case S.TriMesh:return a=t.coVertices(e),l=t.coIndices(e),new Ue(a,l);case S.HeightField:const _=t.coHeightfieldScale(e),f=t.coHeightfieldHeights(e),b=t.coHeightfieldNRows(e),j=t.coHeightfieldNCols(e);return new We(b,j,f,_);case S.ConvexPolyhedron:return a=t.coVertices(e),l=t.coIndices(e),new Bt(a,l);case S.RoundConvexPolyhedron:return a=t.coVertices(e),l=t.coIndices(e),o=t.coRoundRadius(e),new Vt(a,l,o);case S.Cylinder:return w=t.coHalfHeight(e),u=t.coRadius(e),new Je(w,u);case S.RoundCylinder:return w=t.coHalfHeight(e),u=t.coRadius(e),o=t.coRoundRadius(e),new qe(w,u,o);case S.Cone:return w=t.coHalfHeight(e),u=t.coRadius(e),new Ye(w,u);case S.RoundCone:return w=t.coHalfHeight(e),u=t.coRadius(e),o=t.coRoundRadius(e),new Ke(w,u,o);default:throw new Error("unknown shape type: "+r)}}castShape(t,e,r,i,o,a,l,w,u){let p=d.intoRaw(t),_=g.intoRaw(e),f=d.intoRaw(r),b=d.intoRaw(o),j=g.intoRaw(a),H=d.intoRaw(l),k=this.intoRaw(),V=i.intoRaw(),z=_t.fromRaw(null,k.castShape(p,_,f,V,b,j,H,w,u));return p.free(),_.free(),f.free(),b.free(),j.free(),H.free(),k.free(),V.free(),z}intersectsShape(t,e,r,i,o){let a=d.intoRaw(t),l=g.intoRaw(e),w=d.intoRaw(i),u=g.intoRaw(o),p=this.intoRaw(),_=r.intoRaw(),f=p.intersectsShape(a,l,_,w,u);return a.free(),l.free(),w.free(),u.free(),p.free(),_.free(),f}contactShape(t,e,r,i,o,a){let l=d.intoRaw(t),w=g.intoRaw(e),u=d.intoRaw(i),p=g.intoRaw(o),_=this.intoRaw(),f=r.intoRaw(),b=wt.fromRaw(_.contactShape(l,w,f,u,p,a));return l.free(),w.free(),u.free(),p.free(),_.free(),f.free(),b}containsPoint(t,e,r){let i=d.intoRaw(t),o=g.intoRaw(e),a=d.intoRaw(r),l=this.intoRaw(),w=l.containsPoint(i,o,a);return i.free(),o.free(),a.free(),l.free(),w}projectPoint(t,e,r,i){let o=d.intoRaw(t),a=g.intoRaw(e),l=d.intoRaw(r),w=this.intoRaw(),u=jt.fromRaw(w.projectPoint(o,a,l,i));return o.free(),a.free(),l.free(),w.free(),u}intersectsRay(t,e,r,i){let o=d.intoRaw(e),a=g.intoRaw(r),l=d.intoRaw(t.origin),w=d.intoRaw(t.dir),u=this.intoRaw(),p=u.intersectsRay(o,a,l,w,i);return o.free(),a.free(),l.free(),w.free(),u.free(),p}castRay(t,e,r,i,o){let a=d.intoRaw(e),l=g.intoRaw(r),w=d.intoRaw(t.origin),u=d.intoRaw(t.dir),p=this.intoRaw(),_=p.castRay(a,l,w,u,i,o);return a.free(),l.free(),w.free(),u.free(),p.free(),_}castRayAndGetNormal(t,e,r,i,o){let a=d.intoRaw(e),l=g.intoRaw(r),w=d.intoRaw(t.origin),u=d.intoRaw(t.dir),p=this.intoRaw(),_=Pt.fromRaw(p.castRayAndGetNormal(a,l,w,u,i,o));return a.free(),l.free(),w.free(),u.free(),p.free(),_}}var S;(function(n){n[n.Ball=0]="Ball",n[n.Cuboid=1]="Cuboid",n[n.Capsule=2]="Capsule",n[n.Segment=3]="Segment",n[n.Polyline=4]="Polyline",n[n.Triangle=5]="Triangle",n[n.TriMesh=6]="TriMesh",n[n.HeightField=7]="HeightField",n[n.ConvexPolyhedron=9]="ConvexPolyhedron",n[n.Cylinder=10]="Cylinder",n[n.Cone=11]="Cone",n[n.RoundCuboid=12]="RoundCuboid",n[n.RoundTriangle=13]="RoundTriangle",n[n.RoundCylinder=14]="RoundCylinder",n[n.RoundCone=15]="RoundCone",n[n.RoundConvexPolyhedron=16]="RoundConvexPolyhedron",n[n.HalfSpace=17]="HalfSpace"})(S||(S={}));class Oe extends O{constructor(t){super(),this.type=S.Ball,this.radius=t}intoRaw(){return y.ball(this.radius)}}class Pr extends O{constructor(t){super(),this.type=S.HalfSpace,this.normal=t}intoRaw(){let t=d.intoRaw(this.normal),e=y.halfspace(t);return t.free(),e}}class Fe extends O{constructor(t,e,r){super(),this.type=S.Cuboid,this.halfExtents=d.new(t,e,r)}intoRaw(){return y.cuboid(this.halfExtents.x,this.halfExtents.y,this.halfExtents.z)}}class ze extends O{constructor(t,e,r,i){super(),this.type=S.RoundCuboid,this.halfExtents=d.new(t,e,r),this.borderRadius=i}intoRaw(){return y.roundCuboid(this.halfExtents.x,this.halfExtents.y,this.halfExtents.z,this.borderRadius)}}class He extends O{constructor(t,e){super(),this.type=S.Capsule,this.halfHeight=t,this.radius=e}intoRaw(){return y.capsule(this.halfHeight,this.radius)}}class Ge extends O{constructor(t,e){super(),this.type=S.Segment,this.a=t,this.b=e}intoRaw(){let t=d.intoRaw(this.a),e=d.intoRaw(this.b),r=y.segment(t,e);return t.free(),e.free(),r}}class ke extends O{constructor(t,e,r){super(),this.type=S.Triangle,this.a=t,this.b=e,this.c=r}intoRaw(){let t=d.intoRaw(this.a),e=d.intoRaw(this.b),r=d.intoRaw(this.c),i=y.triangle(t,e,r);return t.free(),e.free(),r.free(),i}}class Be extends O{constructor(t,e,r,i){super(),this.type=S.RoundTriangle,this.a=t,this.b=e,this.c=r,this.borderRadius=i}intoRaw(){let t=d.intoRaw(this.a),e=d.intoRaw(this.b),r=d.intoRaw(this.c),i=y.roundTriangle(t,e,r,this.borderRadius);return t.free(),e.free(),r.free(),i}}class Ve extends O{constructor(t,e){super(),this.type=S.Polyline,this.vertices=t,this.indices=e??new Uint32Array(0)}intoRaw(){return y.polyline(this.vertices,this.indices)}}class Ue extends O{constructor(t,e){super(),this.type=S.TriMesh,this.vertices=t,this.indices=e}intoRaw(){return y.trimesh(this.vertices,this.indices)}}class Bt extends O{constructor(t,e){super(),this.type=S.ConvexPolyhedron,this.vertices=t,this.indices=e}intoRaw(){return this.indices?y.convexMesh(this.vertices,this.indices):y.convexHull(this.vertices)}}class Vt extends O{constructor(t,e,r){super(),this.type=S.RoundConvexPolyhedron,this.vertices=t,this.indices=e,this.borderRadius=r}intoRaw(){return this.indices?y.roundConvexMesh(this.vertices,this.indices,this.borderRadius):y.roundConvexHull(this.vertices,this.borderRadius)}}class We extends O{constructor(t,e,r,i){super(),this.type=S.HeightField,this.nrows=t,this.ncols=e,this.heights=r,this.scale=i}intoRaw(){let t=d.intoRaw(this.scale),e=y.heightfield(this.nrows,this.ncols,this.heights,t);return t.free(),e}}class Je extends O{constructor(t,e){super(),this.type=S.Cylinder,this.halfHeight=t,this.radius=e}intoRaw(){return y.cylinder(this.halfHeight,this.radius)}}class qe extends O{constructor(t,e,r){super(),this.type=S.RoundCylinder,this.borderRadius=r,this.halfHeight=t,this.radius=e}intoRaw(){return y.roundCylinder(this.halfHeight,this.radius,this.borderRadius)}}class Ye extends O{constructor(t,e){super(),this.type=S.Cone,this.halfHeight=t,this.radius=e}intoRaw(){return y.cone(this.halfHeight,this.radius)}}class Ke extends O{constructor(t,e,r){super(),this.type=S.RoundCone,this.halfHeight=t,this.radius=e,this.borderRadius=r}intoRaw(){return y.roundCone(this.halfHeight,this.radius,this.borderRadius)}}var Ut;(function(n){n[n.DYNAMIC_DYNAMIC=1]="DYNAMIC_DYNAMIC",n[n.DYNAMIC_KINEMATIC=12]="DYNAMIC_KINEMATIC",n[n.DYNAMIC_FIXED=2]="DYNAMIC_FIXED",n[n.KINEMATIC_KINEMATIC=52224]="KINEMATIC_KINEMATIC",n[n.KINEMATIC_FIXED=8704]="KINEMATIC_FIXED",n[n.FIXED_FIXED=32]="FIXED_FIXED",n[n.DEFAULT=15]="DEFAULT",n[n.ALL=60943]="ALL"})(Ut||(Ut={}));class fe{constructor(t,e,r,i){this.colliderSet=t,this.handle=e,this._parent=r,this._shape=i}finalizeDeserialization(t){this.handle!=null&&(this._parent=t.get(this.colliderSet.raw.coParent(this.handle)))}ensureShapeIsCached(){this._shape||(this._shape=O.fromRaw(this.colliderSet.raw,this.handle))}get shape(){return this.ensureShapeIsCached(),this._shape}isValid(){return this.colliderSet.raw.contains(this.handle)}translation(){return d.fromRaw(this.colliderSet.raw.coTranslation(this.handle))}rotation(){return g.fromRaw(this.colliderSet.raw.coRotation(this.handle))}isSensor(){return this.colliderSet.raw.coIsSensor(this.handle)}setSensor(t){this.colliderSet.raw.coSetSensor(this.handle,t)}setShape(t){let e=t.intoRaw();this.colliderSet.raw.coSetShape(this.handle,e),e.free(),this._shape=t}setEnabled(t){this.colliderSet.raw.coSetEnabled(this.handle,t)}isEnabled(){return this.colliderSet.raw.coIsEnabled(this.handle)}setRestitution(t){this.colliderSet.raw.coSetRestitution(this.handle,t)}setFriction(t){this.colliderSet.raw.coSetFriction(this.handle,t)}frictionCombineRule(){return this.colliderSet.raw.coFrictionCombineRule(this.handle)}setFrictionCombineRule(t){this.colliderSet.raw.coSetFrictionCombineRule(this.handle,t)}restitutionCombineRule(){return this.colliderSet.raw.coRestitutionCombineRule(this.handle)}setRestitutionCombineRule(t){this.colliderSet.raw.coSetRestitutionCombineRule(this.handle,t)}setCollisionGroups(t){this.colliderSet.raw.coSetCollisionGroups(this.handle,t)}setSolverGroups(t){this.colliderSet.raw.coSetSolverGroups(this.handle,t)}activeHooks(){return this.colliderSet.raw.coActiveHooks(this.handle)}setActiveHooks(t){this.colliderSet.raw.coSetActiveHooks(this.handle,t)}activeEvents(){return this.colliderSet.raw.coActiveEvents(this.handle)}setActiveEvents(t){this.colliderSet.raw.coSetActiveEvents(this.handle,t)}activeCollisionTypes(){return this.colliderSet.raw.coActiveCollisionTypes(this.handle)}setContactForceEventThreshold(t){return this.colliderSet.raw.coSetContactForceEventThreshold(this.handle,t)}contactForceEventThreshold(){return this.colliderSet.raw.coContactForceEventThreshold(this.handle)}setActiveCollisionTypes(t){this.colliderSet.raw.coSetActiveCollisionTypes(this.handle,t)}setDensity(t){this.colliderSet.raw.coSetDensity(this.handle,t)}setMass(t){this.colliderSet.raw.coSetMass(this.handle,t)}setMassProperties(t,e,r,i){let o=d.intoRaw(e),a=d.intoRaw(r),l=g.intoRaw(i);this.colliderSet.raw.coSetMassProperties(this.handle,t,o,a,l),o.free(),a.free(),l.free()}setTranslation(t){this.colliderSet.raw.coSetTranslation(this.handle,t.x,t.y,t.z)}setTranslationWrtParent(t){this.colliderSet.raw.coSetTranslationWrtParent(this.handle,t.x,t.y,t.z)}setRotation(t){this.colliderSet.raw.coSetRotation(this.handle,t.x,t.y,t.z,t.w)}setRotationWrtParent(t){this.colliderSet.raw.coSetRotationWrtParent(this.handle,t.x,t.y,t.z,t.w)}shapeType(){return this.colliderSet.raw.coShapeType(this.handle)}halfExtents(){return d.fromRaw(this.colliderSet.raw.coHalfExtents(this.handle))}setHalfExtents(t){const e=d.intoRaw(t);this.colliderSet.raw.coSetHalfExtents(this.handle,e)}radius(){return this.colliderSet.raw.coRadius(this.handle)}setRadius(t){this.colliderSet.raw.coSetRadius(this.handle,t)}roundRadius(){return this.colliderSet.raw.coRoundRadius(this.handle)}setRoundRadius(t){this.colliderSet.raw.coSetRoundRadius(this.handle,t)}halfHeight(){return this.colliderSet.raw.coHalfHeight(this.handle)}setHalfHeight(t){this.colliderSet.raw.coSetHalfHeight(this.handle,t)}vertices(){return this.colliderSet.raw.coVertices(this.handle)}indices(){return this.colliderSet.raw.coIndices(this.handle)}heightfieldHeights(){return this.colliderSet.raw.coHeightfieldHeights(this.handle)}heightfieldScale(){let t=this.colliderSet.raw.coHeightfieldScale(this.handle);return d.fromRaw(t)}heightfieldNRows(){return this.colliderSet.raw.coHeightfieldNRows(this.handle)}heightfieldNCols(){return this.colliderSet.raw.coHeightfieldNCols(this.handle)}parent(){return this._parent}friction(){return this.colliderSet.raw.coFriction(this.handle)}restitution(){return this.colliderSet.raw.coRestitution(this.handle)}density(){return this.colliderSet.raw.coDensity(this.handle)}mass(){return this.colliderSet.raw.coMass(this.handle)}volume(){return this.colliderSet.raw.coVolume(this.handle)}collisionGroups(){return this.colliderSet.raw.coCollisionGroups(this.handle)}solverGroups(){return this.colliderSet.raw.coSolverGroups(this.handle)}containsPoint(t){let e=d.intoRaw(t),r=this.colliderSet.raw.coContainsPoint(this.handle,e);return e.free(),r}projectPoint(t,e){let r=d.intoRaw(t),i=jt.fromRaw(this.colliderSet.raw.coProjectPoint(this.handle,r,e));return r.free(),i}intersectsRay(t,e){let r=d.intoRaw(t.origin),i=d.intoRaw(t.dir),o=this.colliderSet.raw.coIntersectsRay(this.handle,r,i,e);return r.free(),i.free(),o}castShape(t,e,r,i,o,a,l){let w=d.intoRaw(t),u=d.intoRaw(r),p=g.intoRaw(i),_=d.intoRaw(o),f=e.intoRaw(),b=_t.fromRaw(this.colliderSet,this.colliderSet.raw.coCastShape(this.handle,w,f,u,p,_,a,l));return w.free(),u.free(),p.free(),_.free(),f.free(),b}castCollider(t,e,r,i,o){let a=d.intoRaw(t),l=d.intoRaw(r),w=Mt.fromRaw(this.colliderSet,this.colliderSet.raw.coCastCollider(this.handle,a,e.handle,l,i,o));return a.free(),l.free(),w}intersectsShape(t,e,r){let i=d.intoRaw(e),o=g.intoRaw(r),a=t.intoRaw(),l=this.colliderSet.raw.coIntersectsShape(this.handle,a,i,o);return i.free(),o.free(),a.free(),l}contactShape(t,e,r,i){let o=d.intoRaw(e),a=g.intoRaw(r),l=t.intoRaw(),w=wt.fromRaw(this.colliderSet.raw.coContactShape(this.handle,l,o,a,i));return o.free(),a.free(),l.free(),w}contactCollider(t,e){return wt.fromRaw(this.colliderSet.raw.coContactCollider(this.handle,t.handle,e))}castRay(t,e,r){let i=d.intoRaw(t.origin),o=d.intoRaw(t.dir),a=this.colliderSet.raw.coCastRay(this.handle,i,o,e,r);return i.free(),o.free(),a}castRayAndGetNormal(t,e,r){let i=d.intoRaw(t.origin),o=d.intoRaw(t.dir),a=Pt.fromRaw(this.colliderSet.raw.coCastRayAndGetNormal(this.handle,i,o,e,r));return i.free(),o.free(),a}}var ct;(function(n){n[n.Density=0]="Density",n[n.Mass=1]="Mass",n[n.MassProps=2]="MassProps"})(ct||(ct={}));class T{constructor(t){this.enabled=!0,this.shape=t,this.massPropsMode=ct.Density,this.density=1,this.friction=.5,this.restitution=0,this.rotation=g.identity(),this.translation=d.zeros(),this.isSensor=!1,this.collisionGroups=4294967295,this.solverGroups=4294967295,this.frictionCombineRule=At.Average,this.restitutionCombineRule=At.Average,this.activeCollisionTypes=Ut.DEFAULT,this.activeEvents=0,this.activeHooks=0,this.mass=0,this.centerOfMass=d.zeros(),this.contactForceEventThreshold=0,this.principalAngularInertia=d.zeros(),this.angularInertiaLocalFrame=g.identity()}static ball(t){const e=new Oe(t);return new T(e)}static capsule(t,e){const r=new He(t,e);return new T(r)}static segment(t,e){const r=new Ge(t,e);return new T(r)}static triangle(t,e,r){const i=new ke(t,e,r);return new T(i)}static roundTriangle(t,e,r,i){const o=new Be(t,e,r,i);return new T(o)}static polyline(t,e){const r=new Ve(t,e);return new T(r)}static trimesh(t,e){const r=new Ue(t,e);return new T(r)}static cuboid(t,e,r){const i=new Fe(t,e,r);return new T(i)}static roundCuboid(t,e,r,i){const o=new ze(t,e,r,i);return new T(o)}static heightfield(t,e,r,i){const o=new We(t,e,r,i);return new T(o)}static cylinder(t,e){const r=new Je(t,e);return new T(r)}static roundCylinder(t,e,r){const i=new qe(t,e,r);return new T(i)}static cone(t,e){const r=new Ye(t,e);return new T(r)}static roundCone(t,e,r){const i=new Ke(t,e,r);return new T(i)}static convexHull(t){const e=new Bt(t,null);return new T(e)}static convexMesh(t,e){const r=new Bt(t,e);return new T(r)}static roundConvexHull(t,e){const r=new Vt(t,null,e);return new T(r)}static roundConvexMesh(t,e,r){const i=new Vt(t,e,r);return new T(i)}setTranslation(t,e,r){if(typeof t!="number"||typeof e!="number"||typeof r!="number")throw TypeError("The translation components must be numbers.");return this.translation={x:t,y:e,z:r},this}setRotation(t){return g.copy(this.rotation,t),this}setSensor(t){return this.isSensor=t,this}setEnabled(t){return this.enabled=t,this}setDensity(t){return this.massPropsMode=ct.Density,this.density=t,this}setMass(t){return this.massPropsMode=ct.Mass,this.mass=t,this}setMassProperties(t,e,r,i){return this.massPropsMode=ct.MassProps,this.mass=t,d.copy(this.centerOfMass,e),d.copy(this.principalAngularInertia,r),g.copy(this.angularInertiaLocalFrame,i),this}setRestitution(t){return this.restitution=t,this}setFriction(t){return this.friction=t,this}setFrictionCombineRule(t){return this.frictionCombineRule=t,this}setRestitutionCombineRule(t){return this.restitutionCombineRule=t,this}setCollisionGroups(t){return this.collisionGroups=t,this}setSolverGroups(t){return this.solverGroups=t,this}setActiveHooks(t){return this.activeHooks=t,this}setActiveEvents(t){return this.activeEvents=t,this}setActiveCollisionTypes(t){return this.activeCollisionTypes=t,this}setContactForceEventThreshold(t){return this.contactForceEventThreshold=t,this}}class Mr{constructor(t){this.raw=t||new x,this.map=new te,t&&t.forEachColliderHandle(e=>{this.map.set(e,new fe(this,e,null))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}castClosure(t){return e=>{if(t)return t(this.get(e))}}finalizeDeserialization(t){this.map.forEach(e=>e.finalizeDeserialization(t))}createCollider(t,e,r){let i=r!=null&&r!=null;if(i&&isNaN(r))throw Error("Cannot create a collider with a parent rigid-body handle that is not a number.");let o=e.shape.intoRaw(),a=d.intoRaw(e.translation),l=g.intoRaw(e.rotation),w=d.intoRaw(e.centerOfMass),u=d.intoRaw(e.principalAngularInertia),p=g.intoRaw(e.angularInertiaLocalFrame),_=this.raw.createCollider(e.enabled,o,a,l,e.massPropsMode,e.mass,w,u,p,e.density,e.friction,e.restitution,e.frictionCombineRule,e.restitutionCombineRule,e.isSensor,e.collisionGroups,e.solverGroups,e.activeCollisionTypes,e.activeHooks,e.activeEvents,e.contactForceEventThreshold,i,i?r:0,t.raw);o.free(),a.free(),l.free(),w.free(),u.free(),p.free();let f=i?t.get(r):null,b=new fe(this,_,f,e.shape);return this.map.set(_,b),b}remove(t,e,r,i){this.raw.remove(t,e.raw,r.raw,i),this.unmap(t)}unmap(t){this.map.delete(t)}get(t){return this.map.get(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}forEach(t){this.map.forEach(t)}getAll(){return this.map.getAll()}}class xr{constructor(t){this.raw=t||new Ht}free(){this.raw&&this.raw.free(),this.raw=void 0}step(t,e,r,i,o,a,l,w,u,p,_,f){let b=d.intoRaw(t);_?this.raw.stepWithEvents(b,e.raw,r.raw,i.raw,o.raw,a.raw,l.raw,w.raw,u.raw,p.raw,_.raw,f,f?f.filterContactPair:null,f?f.filterIntersectionPair:null):this.raw.step(b,e.raw,r.raw,i.raw,o.raw,a.raw,l.raw,w.raw,u.raw,p.raw),b.free()}}var me;(function(n){n[n.EXCLUDE_FIXED=1]="EXCLUDE_FIXED",n[n.EXCLUDE_KINEMATIC=2]="EXCLUDE_KINEMATIC",n[n.EXCLUDE_DYNAMIC=4]="EXCLUDE_DYNAMIC",n[n.EXCLUDE_SENSORS=8]="EXCLUDE_SENSORS",n[n.EXCLUDE_SOLIDS=16]="EXCLUDE_SOLIDS",n[n.ONLY_DYNAMIC=3]="ONLY_DYNAMIC",n[n.ONLY_KINEMATIC=5]="ONLY_KINEMATIC",n[n.ONLY_FIXED=6]="ONLY_FIXED"})(me||(me={}));class Nr{constructor(t){this.raw=t||new Et}free(){this.raw&&this.raw.free(),this.raw=void 0}update(t,e){this.raw.update(t.raw,e.raw)}castRay(t,e,r,i,o,a,l,w,u,p){let _=d.intoRaw(r.origin),f=d.intoRaw(r.dir),b=ee.fromRaw(e,this.raw.castRay(t.raw,e.raw,_,f,i,o,a,l,w,u,p));return _.free(),f.free(),b}castRayAndGetNormal(t,e,r,i,o,a,l,w,u,p){let _=d.intoRaw(r.origin),f=d.intoRaw(r.dir),b=Tt.fromRaw(e,this.raw.castRayAndGetNormal(t.raw,e.raw,_,f,i,o,a,l,w,u,p));return _.free(),f.free(),b}intersectionsWithRay(t,e,r,i,o,a,l,w,u,p,_){let f=d.intoRaw(r.origin),b=d.intoRaw(r.dir),j=H=>a(Tt.fromRaw(e,H));this.raw.intersectionsWithRay(t.raw,e.raw,f,b,i,o,j,l,w,u,p,_),f.free(),b.free()}intersectionWithShape(t,e,r,i,o,a,l,w,u,p){let _=d.intoRaw(r),f=g.intoRaw(i),b=o.intoRaw(),j=this.raw.intersectionWithShape(t.raw,e.raw,_,f,b,a,l,w,u,p);return _.free(),f.free(),b.free(),j}projectPoint(t,e,r,i,o,a,l,w,u){let p=d.intoRaw(r),_=It.fromRaw(e,this.raw.projectPoint(t.raw,e.raw,p,i,o,a,l,w,u));return p.free(),_}projectPointAndGetFeature(t,e,r,i,o,a,l,w){let u=d.intoRaw(r),p=It.fromRaw(e,this.raw.projectPointAndGetFeature(t.raw,e.raw,u,i,o,a,l,w));return u.free(),p}intersectionsWithPoint(t,e,r,i,o,a,l,w,u){let p=d.intoRaw(r);this.raw.intersectionsWithPoint(t.raw,e.raw,p,i,o,a,l,w,u),p.free()}castShape(t,e,r,i,o,a,l,w,u,p,_,f,b){let j=d.intoRaw(r),H=g.intoRaw(i),k=d.intoRaw(o),V=a.intoRaw(),z=Mt.fromRaw(e,this.raw.castShape(t.raw,e.raw,j,H,k,V,l,w,u,p,_,f,b));return j.free(),H.free(),k.free(),V.free(),z}intersectionsWithShape(t,e,r,i,o,a,l,w,u,p,_){let f=d.intoRaw(r),b=g.intoRaw(i),j=o.intoRaw();this.raw.intersectionsWithShape(t.raw,e.raw,f,b,j,a,l,w,u,p,_),f.free(),b.free(),j.free()}collidersWithAabbIntersectingAabb(t,e,r){let i=d.intoRaw(t),o=d.intoRaw(e);this.raw.collidersWithAabbIntersectingAabb(i,o,r),i.free(),o.free()}}class be{constructor(t){this.raw=t||new kt}free(){this.raw&&this.raw.free(),this.raw=void 0}serializeAll(t,e,r,i,o,a,l,w,u){let p=d.intoRaw(t);const _=this.raw.serializeAll(p,e.raw,r.raw,i.raw,o.raw,a.raw,l.raw,w.raw,u.raw);return p.free(),_}deserializeAll(t){return re.fromRaw(this.raw.deserializeAll(t))}}class Dr{constructor(t,e){this.vertices=t,this.colors=e}}class Lr{constructor(t){this.raw=t||new Ft}free(){this.raw&&this.raw.free(),this.raw=void 0,this.vertices=void 0,this.colors=void 0}render(t,e,r,i,o){this.raw.render(t.raw,e.raw,r.raw,i.raw,o.raw),this.vertices=this.raw.vertices(),this.colors=this.raw.colors()}}class Or{}class Fr{constructor(t,e,r,i,o){this.params=e,this.bodies=r,this.colliders=i,this.queries=o,this.raw=new zt(t),this.rawCharacterCollision=new St,this._applyImpulsesToDynamicBodies=!1,this._characterMass=null}free(){this.raw&&(this.raw.free(),this.rawCharacterCollision.free()),this.raw=void 0,this.rawCharacterCollision=void 0}up(){return this.raw.up()}setUp(t){let e=d.intoRaw(t);return this.raw.setUp(e)}applyImpulsesToDynamicBodies(){return this._applyImpulsesToDynamicBodies}setApplyImpulsesToDynamicBodies(t){this._applyImpulsesToDynamicBodies=t}characterMass(){return this._characterMass}setCharacterMass(t){this._characterMass=t}offset(){return this.raw.offset()}setOffset(t){this.raw.setOffset(t)}slideEnabled(){return this.raw.slideEnabled()}setSlideEnabled(t){this.raw.setSlideEnabled(t)}autostepMaxHeight(){return this.raw.autostepMaxHeight()}autostepMinWidth(){return this.raw.autostepMinWidth()}autostepIncludesDynamicBodies(){return this.raw.autostepIncludesDynamicBodies()}autostepEnabled(){return this.raw.autostepEnabled()}enableAutostep(t,e,r){this.raw.enableAutostep(t,e,r)}disableAutostep(){return this.raw.disableAutostep()}maxSlopeClimbAngle(){return this.raw.maxSlopeClimbAngle()}setMaxSlopeClimbAngle(t){this.raw.setMaxSlopeClimbAngle(t)}minSlopeSlideAngle(){return this.raw.minSlopeSlideAngle()}setMinSlopeSlideAngle(t){this.raw.setMinSlopeSlideAngle(t)}snapToGroundDistance(){return this.raw.snapToGroundDistance()}enableSnapToGround(t){this.raw.enableSnapToGround(t)}disableSnapToGround(){this.raw.disableSnapToGround()}snapToGroundEnabled(){return this.raw.snapToGroundEnabled()}computeColliderMovement(t,e,r,i,o){let a=d.intoRaw(e);this.raw.computeColliderMovement(this.params.dt,this.bodies.raw,this.colliders.raw,this.queries.raw,t.handle,a,this._applyImpulsesToDynamicBodies,this._characterMass,r,i,this.colliders.castClosure(o)),a.free()}computedMovement(){return d.fromRaw(this.raw.computedMovement())}computedGrounded(){return this.raw.computedGrounded()}numComputedCollisions(){return this.raw.numComputedCollisions()}computedCollision(t,e){if(this.raw.computedCollision(t,this.rawCharacterCollision)){let r=this.rawCharacterCollision;return e=e??new Or,e.translationApplied=d.fromRaw(r.translationApplied()),e.translationRemaining=d.fromRaw(r.translationRemaining()),e.toi=r.toi(),e.witness1=d.fromRaw(r.worldWitness1()),e.witness2=d.fromRaw(r.worldWitness2()),e.normal1=d.fromRaw(r.worldNormal1()),e.normal2=d.fromRaw(r.worldNormal2()),e.collider=this.colliders.get(r.handle()),e}else return null}}class re{constructor(t,e,r,i,o,a,l,w,u,p,_,f,b,j){this.gravity=t,this.integrationParameters=new pr(e),this.islands=new Ir(r),this.broadPhase=new Tr(i),this.narrowPhase=new vr(o),this.bodies=new ur(a),this.colliders=new Mr(l),this.impulseJoints=new yr(w),this.multibodyJoints=new Cr(u),this.ccdSolver=new Ar(p),this.queryPipeline=new Nr(_),this.physicsPipeline=new xr(f),this.serializationPipeline=new be(b),this.debugRenderPipeline=new Lr(j),this.characterControllers=new Set,this.impulseJoints.finalizeDeserialization(this.bodies),this.bodies.finalizeDeserialization(this.colliders),this.colliders.finalizeDeserialization(this.bodies)}free(){this.integrationParameters.free(),this.islands.free(),this.broadPhase.free(),this.narrowPhase.free(),this.bodies.free(),this.colliders.free(),this.impulseJoints.free(),this.multibodyJoints.free(),this.ccdSolver.free(),this.queryPipeline.free(),this.physicsPipeline.free(),this.serializationPipeline.free(),this.debugRenderPipeline.free(),this.characterControllers.forEach(t=>t.free()),this.integrationParameters=void 0,this.islands=void 0,this.broadPhase=void 0,this.narrowPhase=void 0,this.bodies=void 0,this.colliders=void 0,this.ccdSolver=void 0,this.impulseJoints=void 0,this.multibodyJoints=void 0,this.queryPipeline=void 0,this.physicsPipeline=void 0,this.serializationPipeline=void 0,this.debugRenderPipeline=void 0,this.characterControllers=void 0}static fromRaw(t){return t?new re(d.fromRaw(t.takeGravity()),t.takeIntegrationParameters(),t.takeIslandManager(),t.takeBroadPhase(),t.takeNarrowPhase(),t.takeBodies(),t.takeColliders(),t.takeImpulseJoints(),t.takeMultibodyJoints()):null}takeSnapshot(){return this.serializationPipeline.serializeAll(this.gravity,this.integrationParameters,this.islands,this.broadPhase,this.narrowPhase,this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints)}static restoreSnapshot(t){return new be().deserializeAll(t)}debugRender(){return this.debugRenderPipeline.render(this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints,this.narrowPhase),new Dr(this.debugRenderPipeline.vertices,this.debugRenderPipeline.colors)}step(t,e){this.physicsPipeline.step(this.gravity,this.integrationParameters,this.islands,this.broadPhase,this.narrowPhase,this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints,this.ccdSolver,t,e),this.queryPipeline.update(this.bodies,this.colliders)}propagateModifiedBodyPositionsToColliders(){this.bodies.raw.propagateModifiedBodyPositionsToColliders(this.colliders.raw)}updateSceneQueries(){this.propagateModifiedBodyPositionsToColliders(),this.queryPipeline.update(this.bodies,this.colliders)}get timestep(){return this.integrationParameters.dt}set timestep(t){this.integrationParameters.dt=t}get maxVelocityIterations(){return this.integrationParameters.maxVelocityIterations}set maxVelocityIterations(t){this.integrationParameters.maxVelocityIterations=t}get maxVelocityFrictionIterations(){return this.integrationParameters.maxVelocityFrictionIterations}set maxVelocityFrictionIterations(t){this.integrationParameters.maxVelocityFrictionIterations=t}get maxStabilizationIterations(){return this.integrationParameters.maxStabilizationIterations}set maxStabilizationIterations(t){this.integrationParameters.maxStabilizationIterations=t}createRigidBody(t){return this.bodies.createRigidBody(this.colliders,t)}createCharacterController(t){let e=new Fr(t,this.integrationParameters,this.bodies,this.colliders,this.queryPipeline);return this.characterControllers.add(e),e}removeCharacterController(t){this.characterControllers.delete(t),t.free()}createCollider(t,e){let r=e?e.handle:void 0;return this.colliders.createCollider(this.bodies,t,r)}createImpulseJoint(t,e,r,i){return this.impulseJoints.createJoint(this.bodies,t,e.handle,r.handle,i)}createMultibodyJoint(t,e,r,i){return this.multibodyJoints.createJoint(t,e.handle,r.handle,i)}getRigidBody(t){return this.bodies.get(t)}getCollider(t){return this.colliders.get(t)}getImpulseJoint(t){return this.impulseJoints.get(t)}getMultibodyJoint(t){return this.multibodyJoints.get(t)}removeRigidBody(t){this.bodies&&this.bodies.remove(t.handle,this.islands,this.colliders,this.impulseJoints,this.multibodyJoints)}removeCollider(t,e){this.colliders&&this.colliders.remove(t.handle,this.islands,this.bodies,e)}removeImpulseJoint(t,e){this.impulseJoints&&this.impulseJoints.remove(t.handle,e)}removeMultibodyJoint(t,e){this.impulseJoints&&this.multibodyJoints.remove(t.handle,e)}forEachCollider(t){this.colliders.forEach(t)}forEachRigidBody(t){this.bodies.forEach(t)}forEachActiveRigidBody(t){this.bodies.forEachActiveRigidBody(this.islands,t)}castRay(t,e,r,i,o,a,l,w){return this.queryPipeline.castRay(this.bodies,this.colliders,t,e,r,i,o,a?a.handle:null,l?l.handle:null,this.colliders.castClosure(w))}castRayAndGetNormal(t,e,r,i,o,a,l,w){return this.queryPipeline.castRayAndGetNormal(this.bodies,this.colliders,t,e,r,i,o,a?a.handle:null,l?l.handle:null,this.colliders.castClosure(w))}intersectionsWithRay(t,e,r,i,o,a,l,w,u){this.queryPipeline.intersectionsWithRay(this.bodies,this.colliders,t,e,r,i,o,a,l?l.handle:null,w?w.handle:null,this.colliders.castClosure(u))}intersectionWithShape(t,e,r,i,o,a,l,w){let u=this.queryPipeline.intersectionWithShape(this.bodies,this.colliders,t,e,r,i,o,a?a.handle:null,l?l.handle:null,this.colliders.castClosure(w));return u!=null?this.colliders.get(u):null}projectPoint(t,e,r,i,o,a,l){return this.queryPipeline.projectPoint(this.bodies,this.colliders,t,e,r,i,o?o.handle:null,a?a.handle:null,this.colliders.castClosure(l))}projectPointAndGetFeature(t,e,r,i,o,a){return this.queryPipeline.projectPointAndGetFeature(this.bodies,this.colliders,t,e,r,i?i.handle:null,o?o.handle:null,this.colliders.castClosure(a))}intersectionsWithPoint(t,e,r,i,o,a,l){this.queryPipeline.intersectionsWithPoint(this.bodies,this.colliders,t,this.colliders.castClosure(e),r,i,o?o.handle:null,a?a.handle:null,this.colliders.castClosure(l))}castShape(t,e,r,i,o,a,l,w,u,p,_){return this.queryPipeline.castShape(this.bodies,this.colliders,t,e,r,i,o,a,l,w,u?u.handle:null,p?p.handle:null,this.colliders.castClosure(_))}intersectionsWithShape(t,e,r,i,o,a,l,w,u){this.queryPipeline.intersectionsWithShape(this.bodies,this.colliders,t,e,r,this.colliders.castClosure(i),o,a,l?l.handle:null,w?w.handle:null,this.colliders.castClosure(u))}collidersWithAabbIntersectingAabb(t,e,r){this.queryPipeline.collidersWithAabbIntersectingAabb(t,e,this.colliders.castClosure(r))}contactsWith(t,e){this.narrowPhase.contactsWith(t.handle,this.colliders.castClosure(e))}intersectionsWith(t,e){this.narrowPhase.intersectionsWith(t.handle,this.colliders.castClosure(e))}contactPair(t,e,r){this.narrowPhase.contactPair(t.handle,e.handle,r)}intersectionPair(t,e){return this.narrowPhase.intersectionPair(t.handle,e.handle)}}var ye;(function(n){n[n.COLLISION_EVENTS=1]="COLLISION_EVENTS",n[n.CONTACT_FORCE_EVENTS=2]="CONTACT_FORCE_EVENTS"})(ye||(ye={}));class zr{free(){this.raw&&this.raw.free(),this.raw=void 0}collider1(){return this.raw.collider1()}collider2(){return this.raw.collider2()}totalForce(){return d.fromRaw(this.raw.total_force())}totalForceMagnitude(){return this.raw.total_force_magnitude()}maxForceDirection(){return d.fromRaw(this.raw.max_force_direction())}maxForceMagnitude(){return this.raw.max_force_magnitude()}}class Fd{constructor(t,e){this.raw=e||new Rt(t)}free(){this.raw&&this.raw.free(),this.raw=void 0}drainCollisionEvents(t){this.raw.drainCollisionEvents(t)}drainContactForceEvents(t){let e=new zr;this.raw.drainContactForceEvents(r=>{e.raw=r,t(e),e.free()})}clear(){this.raw.clear()}}var ge;(function(n){n[n.FILTER_CONTACT_PAIRS=1]="FILTER_CONTACT_PAIRS",n[n.FILTER_INTERSECTION_PAIRS=2]="FILTER_INTERSECTION_PAIRS"})(ge||(ge={}));var Se;(function(n){n[n.EMPTY=0]="EMPTY",n[n.COMPUTE_IMPULSE=1]="COMPUTE_IMPULSE"})(Se||(Se={}));function zd(){return hn()}var J=Object.freeze({__proto__:null,get ActiveCollisionTypes(){return Ut},get ActiveEvents(){return ye},get ActiveHooks(){return ge},Ball:Oe,BroadPhase:Tr,CCDSolver:Ar,Capsule:He,CharacterCollision:Or,get CoefficientCombineRule(){return At},Collider:fe,ColliderDesc:T,ColliderSet:Mr,Cone:Ye,ConvexPolyhedron:Bt,Cuboid:Fe,Cylinder:Je,DebugRenderBuffers:Dr,DebugRenderPipeline:Lr,EventQueue:Fd,get FeatureType(){return ut},FixedImpulseJoint:_r,FixedMultibodyJoint:gr,HalfSpace:Pr,Heightfield:We,ImpulseJoint:st,ImpulseJointSet:yr,IntegrationParameters:pr,IslandManager:Ir,JointData:dt,get JointType(){return L},KinematicCharacterController:Fr,get MassPropsMode(){return ct},get MotorModel(){return _e},MultibodyJoint:ot,MultibodyJointSet:Cr,NarrowPhase:vr,PhysicsPipeline:xr,PointColliderProjection:It,PointProjection:jt,Polyline:Ve,PrismaticImpulseJoint:fr,PrismaticMultibodyJoint:Sr,Quaternion:ue,get QueryFilterFlags(){return me},QueryPipeline:Nr,Ray:Od,RayColliderIntersection:Tt,RayColliderToi:ee,RayIntersection:Pt,RevoluteImpulseJoint:mr,RevoluteMultibodyJoint:Rr,RigidBody:pe,RigidBodyDesc:K,RigidBodySet:ur,get RigidBodyType(){return W},RotationOps:g,RoundCone:Ke,RoundConvexPolyhedron:Vt,RoundCuboid:ze,RoundCylinder:qe,RoundTriangle:Be,Segment:Ge,SerializationPipeline:be,Shape:O,ShapeColliderTOI:Mt,ShapeContact:wt,ShapeTOI:_t,get ShapeType(){return S},get SolverFlags(){return Se},SphericalImpulseJoint:br,SphericalMultibodyJoint:Er,TempContactForceEvent:zr,TempContactManifold:jr,TriMesh:Ue,Triangle:ke,UnitImpulseJoint:De,UnitMultibodyJoint:Le,Vector3:wr,VectorOps:d,World:re,version:zd}),et=(n=>(n[n.Dynamic=0]="Dynamic",n[n.Fixed=1]="Fixed",n[n.KinematicPositionBased=2]="KinematicPositionBased",n[n.KinematicVelocityBased=3]="KinematicVelocityBased",n[n.Sensor=4]="Sensor",n))(et||{});const Hd=n=>Number.parseInt(n.reverse().join(""),2),Gd=(n,t)=>n&1<<t?1:0,kd=(n,t,e)=>{const r=1<<t;return e===1?n|r:n&~r},Bd=(n,t)=>n^1<<t,Vd=(n,t)=>n&~(1<<t),Ud=(n,t=8)=>n.toString(2).padStart(t,"0").split("").reverse().map(Number),Wd={clearBit:Vd,create:Hd,getBit:Gd,getBits:Ud,setBit:kd,toggleBit:Bd};let tr=-1;const Jd=()=>(tr+=1,tr);var Q=(n=>(n[n.Cuboid=0]="Cuboid",n[n.Ball=1]="Ball",n[n.Capsule=2]="Capsule",n[n.Cone=3]="Cone",n[n.ConvexHull=4]="ConvexHull",n[n.Cylinder=5]="Cylinder",n[n.Trimesh=6]="Trimesh",n[n.Heightfield=7]="Heightfield",n))(Q||{});const qd=n=>{switch(n.collider){case Q.Ball:return T.ball(n.collider1);case Q.Capsule:return T.capsule(n.collider2,n.collider1);case Q.Cone:return T.cone(n.collider2,n.collider1);case Q.ConvexHull:return T.convexHull(n.vertices);case Q.Cuboid:return T.cuboid(n.collider1,n.collider2,n.collider3);case Q.Cylinder:return T.cylinder(n.collider2,n.collider1);case Q.Heightfield:return T.heightfield(n.collider1,n.collider2,n.vertices,{x:1,y:1,z:1});case Q.Trimesh:return T.trimesh(n.vertices,n.indices??new Uint32Array(0))}throw new Error("bodytype not supported")},Xe=1e3/Number.parseInt({}.SWORD_FPS??"60",10),Yd=Number.parseFloat({}.SWORD_DEBUG_SLOWDOWN??"3"),Kd=Number.parseFloat({}.DEFAULT_GRAVITY??"-9.8"),Xd=Number.parseFloat({}.SWORD_DEFAULT_FRICTION??"0.2"),Zd=Number.parseFloat({}.SWORD_DEFAULT_RESTITUTION??"0.5"),q=new J.World({x:0,y:Kd,z:0});q.timestep=Xe/1e3;const er=new J.EventQueue(!0);let bt=0,Re=0,Hr=0,Gr=-1,rr=-1;const $d=()=>{q.step(er),bt=performance.now(),Hr=1e3/(bt-Re),Re=bt;const n=[],t=[];for(let u=0,p=yt.length;u<p;u+=1){const _=yt[u];if(_.isSleeping())continue;n.push(_.userData);const f=_.translation(),b=_.rotation();t.push(f.x,f.y,f.z,b.x,b.y,b.z,b.w)}const e=new Uint16Array(n),r=new Float32Array(t),i=[],o=[];er.drainCollisionEvents((u,p,_)=>{const f=we.get(u),b=we.get(p);if(_&&Ee.get(f)){const j=gt.get(f),H=gt.get(b);q.contactPair(j,H,(k,V)=>{let z=k.localContactPoint1(0),Y=k.localContactPoint2(0);if(z!==null&&Y!==null){if(V){const ft=z;z=Y,Y=ft}o.push(f,b,z.x,z.y,z.z,Y.x,Y.y,Y.z)}})}else _||i.push(f,b)});const a=new Uint16Array(o),l=new Uint16Array(i),w=new Float32Array(o);self.postMessage({collisionEnd:l,collisionStart:a,contactStart:w,event:C.TRANSFORMS,ids:e,transforms:r},[l.buffer,a.buffer,w.buffer,e.buffer,r.buffer])},Qd=()=>{if(q===void 0)return;const{colors:n,vertices:t}=q.debugRender();self.postMessage({colors:n,event:C.DEBUG_DRAW,vertices:t},[t.buffer,n.buffer])},th=n=>{bt=performance.now(),Re=bt,Gr=self.setInterval($d,Xe),postMessage({event:C.RUN,pid:n})},eh=(n,t=Yd)=>{n?rr=self.setInterval(Qd,Xe*t):clearInterval(rr)},rh=n=>{clearInterval(Gr),postMessage({event:C.PAUSE,pid:n})},nh=n=>{switch(n){case et.Dynamic:return J.RigidBodyType.Dynamic;case et.KinematicPositionBased:return J.RigidBodyType.KinematicPositionBased;case et.KinematicVelocityBased:return J.RigidBodyType.KinematicVelocityBased;case et.Fixed:case et.Sensor:return J.RigidBodyType.Fixed}},ih=(n=[],t=[])=>{const e=new Array(32).fill(0);for(let r=0,i=n.length;r<i;r+=1)e[n[r]]=1;for(let r=0,i=t.length;r<i;r+=1)e[16+t[r]]=1;return Wd.create(e)},sh=n=>{const t=Jd(),e=new J.RigidBodyDesc(nh(n.type)).setCanSleep(n.canSleep).setCcdEnabled(n.ccd),r=qd(n).setDensity(n.density).setFriction(Xd).setFrictionCombineRule(J.CoefficientCombineRule.Max).setRestitution(Zd).setRestitutionCombineRule(J.CoefficientCombineRule.Max).setSensor(n.type===et.Sensor);if(n.groups!==void 0||n.filter!==void 0){const a=ih(n.groups,n.filter);r.setCollisionGroups(a)}const i=q.createRigidBody(e),o=q.createCollider(r,i);return n.events===nr.CONTACT_EVENTS?(o.setActiveEvents(J.ActiveEvents.COLLISION_EVENTS),Ee.set(t,!0)):n.events>-1?o.setActiveEvents(n.events):o.setActiveEvents(J.ActiveEvents.COLLISION_EVENTS),n.type===et.Dynamic&&yt.push(i),i.userData=t,F.set(t,i),gt.set(t,o),we.set(i.handle,t),i},oh=n=>{const{instances:t}=n,e=t.length/7,r=new Uint16Array(e);for(let i=0,o=0;i<e;i+=1,o+=7){const a=sh(n),l=a.userData;r[i]=l,n.disabled?a.setTranslation({x:0,y:-2e3+l*((n.collider1??-10)-10),z:0},!1):(a.setTranslation({x:t[o+0],y:t[o+1],z:t[o+2]},!1),a.setRotation({w:t[o+3],x:t[o+4],y:t[o+5],z:t[o+6]},!1))}self.postMessage({event:C.CREATE_RIGIDBODIES,ids:r,pid:n.pid},[r.buffer])},ah=n=>{yt.splice(0,yt.length),F.clear(),gt.clear(),Ee.clear(),q.bodies.free(),postMessage({event:C.DESTROY_ALL_RIGIDBODIES,pid:n})},ch=(n,t,e)=>{q.gravity.x=n,q.gravity.y=t,q.gravity.z=e};self.addEventListener("message",n=>{const{data:t}=n;switch(t.event){case C.APPLY_IMPULSES:return Br(t.ids,t.impulses);case C.APPLY_TORQUE_IMPULSES:return Ur(t.ids,t.impulses);case C.APPLY_LINEAR_AND_TORQUE_IMPULSES:return Vr(t.ids,t.impulses);case C.CREATE_RIGIDBODIES:return oh(t);case C.DESTROY_ALL_RIGIDBODIES:return ah(t.pid);case C.DISABLE_BODY:return Wr(t.id);case C.GET_VELOCITY:return nn(t.id,t.pid);case C.GET_VELOCITIES:return sn(t.ids,t.pid);case C.PAUSE:return rh(t.pid);case C.RUN:return th(t.pid);case C.SET_ACTIVE_COLLISION_TYPES:return Jr(t.id,t.types);case C.SET_DEBUG_DRAW:return eh(t.on,t.slowdown);case C.SET_FORCES:return qr(t.ids,t.forces);case C.SET_GRAVITY:return ch(t.x,t.y,t.z);case C.SET_NEXT_KINEMATIC_TRANSFORM:return Yr(t);case C.SET_NEXT_KINEMATIC_TRANSFORMS:return Kr(t.ids,t.transforms);case C.SET_TRANSLATION:return Qr(t.id,t.translation,t.resetAngvel,t.resetLinvel);case C.SET_TRANSLATIONS:return tn(t.ids,t.translations,t.resetAngvel,t.resetLinvel);case C.SET_TRANSFORMS:return Xr(t.ids,t.transforms,t.resetAngvel,t.resetLinvel);case C.SET_TRANSFORM_AND_VELOCITY:return Zr(t.id,t.translation,t.rotation,t.linvel,t.angvel);case C.SET_TRANSFORMS_AND_VELOCITIES:return $r(t.ids,t.array);case C.SET_VELOCITIES:return en(t.ids,t.velocities);case C.SET_VELOCITIES_AND_ROTATIONS:return rn(t.ids,t.array);default:throw new Error(`Unexpected event in worker: ${t.event}!`)}});({}).SWORD_DEBUG==="true"&&setInterval(()=>{postMessage({event:C.FPS,fps:Hr})},1e3);self.postMessage({event:C.INIT});
