var nP=Object.defineProperty,iP=Object.defineProperties;var rP=Object.getOwnPropertyDescriptors;var ah=Object.getOwnPropertySymbols;var zw=Object.prototype.hasOwnProperty,Vw=Object.prototype.propertyIsEnumerable;var Ww=(n,e,t)=>e in n?nP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,At=(n,e)=>{for(var t in e||(e={}))zw.call(e,t)&&Ww(n,t,e[t]);if(ah)for(var t of ah(e))Vw.call(e,t)&&Ww(n,t,e[t]);return n},Nn=(n,e)=>iP(n,rP(e));var _i=(n,e)=>{var t={};for(var i in n)zw.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&ah)for(var i of ah(n))e.indexOf(i)<0&&Vw.call(n,i)&&(t[i]=n[i]);return t};/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const lh="136",sP={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},oP={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Jw=0,s0=1,jw=2,aP=3,lP=0,o0=1,a0=2,Za=3,$r=0,Wt=1,Di=2,l0=1,uP=2,li=0,$a=1,u0=2,c0=3,f0=4,Xw=5,Uo=100,Kw=101,Qw=102,d0=103,h0=104,Yw=200,qw=201,Zw=202,$w=203,p0=204,m0=205,e1=206,t1=207,n1=208,i1=209,r1=210,s1=0,o1=1,a1=2,uh=3,l1=4,u1=5,c1=6,f1=7,rc=0,d1=1,h1=2,wr=0,p1=1,m1=2,g1=3,g0=4,y1=5,ch=300,Go=301,Ho=302,sc=303,oc=304,el=306,ac=307,Ds=1e3,Cn=1001,tl=1002,Ht=1003,lc=1004,cP=1004,uc=1005,fP=1005,xt=1006,fh=1007,dP=1007,Ar=1008,hP=1008,xn=1009,v1=1010,x1=1011,nl=1012,_1=1013,il=1014,Sr=1015,es=1016,M1=1017,w1=1018,A1=1019,Fs=1020,S1=1021,Jn=1022,qt=1023,y0=1024,E1=1025,Ns=1026,Os=1027,T1=1028,C1=1029,b1=1030,B1=1031,R1=1032,L1=1033,v0=33776,x0=33777,_0=33778,M0=33779,w0=35840,A0=35841,S0=35842,E0=35843,P1=36196,T0=37492,C0=37496,I1=37808,D1=37809,F1=37810,N1=37811,O1=37812,k1=37813,U1=37814,G1=37815,H1=37816,z1=37817,V1=37818,W1=37819,J1=37820,j1=37821,X1=36492,K1=37840,Q1=37841,Y1=37842,q1=37843,Z1=37844,$1=37845,eA=37846,tA=37847,nA=37848,iA=37849,rA=37850,sA=37851,oA=37852,aA=37853,lA=2200,uA=2201,cA=2202,rl=2300,zo=2301,dh=2302,Vo=2400,Wo=2401,cc=2402,hh=2500,b0=2501,fA=0,dA=1,B0=2,ui=3e3,Fi=3001,R0=3200,hA=3201,ks=0,pA=1,pP=0,ph=7680,mP=7681,gP=7682,yP=7683,vP=34055,xP=34056,_P=5386,MP=512,wP=513,AP=514,SP=515,EP=516,TP=517,CP=518,mA=519,sl=35044,Us=35048,bP=35040,BP=35045,RP=35049,LP=35041,PP=35046,IP=35050,DP=35042,FP="100",L0="300 es";class Er{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const On=[];for(let n=0;n<256;n++)On[n]=(n<16?"0":"")+n.toString(16);let mh=1234567;const Jo=Math.PI/180,fc=180/Math.PI;function Mi(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(On[n&255]+On[n>>8&255]+On[n>>16&255]+On[n>>24&255]+"-"+On[e&255]+On[e>>8&255]+"-"+On[e>>16&15|64]+On[e>>24&255]+"-"+On[t&63|128]+On[t>>8&255]+"-"+On[t>>16&255]+On[t>>24&255]+On[i&255]+On[i>>8&255]+On[i>>16&255]+On[i>>24&255]).toUpperCase()}function kn(n,e,t){return Math.max(e,Math.min(t,n))}function P0(n,e){return(n%e+e)%e}function NP(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function OP(n,e,t){return n!==e?(t-n)/(e-n):0}function dc(n,e,t){return(1-t)*n+t*e}function kP(n,e,t,i){return dc(n,e,1-Math.exp(-t*i))}function UP(n,e=1){return e-Math.abs(P0(n,e*2)-e)}function GP(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function HP(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function zP(n,e){return n+Math.floor(Math.random()*(e-n+1))}function VP(n,e){return n+Math.random()*(e-n)}function WP(n){return n*(.5-Math.random())}function JP(n){return n!==void 0&&(mh=n%2147483647),mh=mh*16807%2147483647,(mh-1)/2147483646}function jP(n){return n*Jo}function XP(n){return n*fc}function I0(n){return(n&n-1)==0&&n!==0}function gA(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function yA(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function KP(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),f=s((e+i)/2),h=o((e+i)/2),m=s((e-i)/2),d=o((e-i)/2),p=s((i-e)/2),x=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*m,l*d,a*f);break;case"YZY":n.set(l*d,a*h,l*m,a*f);break;case"ZXZ":n.set(l*m,l*d,a*h,a*f);break;case"XZX":n.set(a*h,l*x,l*p,a*f);break;case"YXY":n.set(l*p,a*h,l*x,a*f);break;case"ZYZ":n.set(l*x,l*p,a*h,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}var jo=Object.freeze({__proto__:null,DEG2RAD:Jo,RAD2DEG:fc,generateUUID:Mi,clamp:kn,euclideanModulo:P0,mapLinear:NP,inverseLerp:OP,lerp:dc,damp:kP,pingpong:UP,smoothstep:GP,smootherstep:HP,randInt:zP,randFloat:VP,randFloatSpread:WP,seededRandom:JP,degToRad:jP,radToDeg:XP,isPowerOfTwo:I0,ceilPowerOfTwo:gA,floorPowerOfTwo:yA,setQuaternionFromProperEuler:KP});class ie{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}ie.prototype.isVector2=!0;class _n{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,f){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],f=i[1],h=i[4],m=i[7],d=i[2],p=i[5],x=i[8],_=r[0],M=r[3],v=r[6],y=r[1],A=r[4],w=r[7],T=r[2],C=r[5],B=r[8];return s[0]=o*_+a*y+l*T,s[3]=o*M+a*A+l*C,s[6]=o*v+a*w+l*B,s[1]=f*_+h*y+m*T,s[4]=f*M+h*A+m*C,s[7]=f*v+h*w+m*B,s[2]=d*_+p*y+x*T,s[5]=d*M+p*A+x*C,s[8]=d*v+p*w+x*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8];return t*o*h-t*a*f-i*s*h+i*a*l+r*s*f-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8],m=h*o-a*f,d=a*l-h*s,p=f*s-o*l,x=t*m+i*d+r*p;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/x;return e[0]=m*_,e[1]=(r*f-h*i)*_,e[2]=(a*i-r*o)*_,e[3]=d*_,e[4]=(h*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=p*_,e[7]=(i*l-f*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),f=Math.sin(s);return this.set(i*l,i*f,-i*(l*o+f*a)+o+e,-r*f,r*l,-r*(-f*o+l*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],f=r[4],h=r[7];return r[0]=t*s+i*l,r[3]=t*o+i*f,r[6]=t*a+i*h,r[1]=-i*s+t*l,r[4]=-i*o+t*f,r[7]=-i*a+t*h,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}_n.prototype.isMatrix3=!0;function vA(n){if(n.length===0)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}const QP={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ol(n,e){return new QP[n](e)}function gh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}let al;class Xo{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{al===void 0&&(al=gh("canvas")),al.width=e.width,al.height=e.height;const i=al.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=al}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let YP=0;class Zt extends Er{constructor(e=Zt.DEFAULT_IMAGE,t=Zt.DEFAULT_MAPPING,i=Cn,r=Cn,s=xt,o=Ar,a=qt,l=xn,f=1,h=ui){super();Object.defineProperty(this,"id",{value:YP++}),this.uuid=Mi(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ie(0,0),this.repeat=new ie(1,1),this.center=new ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _n,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=Mi()),!t&&e.images[r.uuid]===void 0){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(D0(r[o].image)):s.push(D0(r[o]))}else s=D0(r);e.images[r.uuid]={uuid:r.uuid,url:s}}i.image=r.uuid}return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ch)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ds:e.x=e.x-Math.floor(e.x);break;case Cn:e.x=e.x<0?0:1;break;case tl:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ds:e.y=e.y-Math.floor(e.y);break;case Cn:e.y=e.y<0?0:1;break;case tl:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}Zt.DEFAULT_IMAGE=void 0;Zt.DEFAULT_MAPPING=ch;Zt.prototype.isTexture=!0;function D0(n){return typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&n instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap?Xo.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Pt{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const o=.01,a=.1,l=e.elements,f=l[0],h=l[4],m=l[8],d=l[1],p=l[5],x=l[9],_=l[2],M=l[6],v=l[10];if(Math.abs(h-d)<o&&Math.abs(m-_)<o&&Math.abs(x-M)<o){if(Math.abs(h+d)<a&&Math.abs(m+_)<a&&Math.abs(x+M)<a&&Math.abs(f+p+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const A=(f+1)/2,w=(p+1)/2,T=(v+1)/2,C=(h+d)/4,B=(m+_)/4,I=(x+M)/4;return A>w&&A>T?A<o?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(A),r=C/i,s=B/i):w>T?w<o?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=C/r,s=I/r):T<o?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(T),i=B/s,r=I/s),this.set(i,r,s,t),this}let y=Math.sqrt((M-x)*(M-x)+(m-_)*(m-_)+(d-h)*(d-h));return Math.abs(y)<.001&&(y=1),this.x=(M-x)/y,this.y=(m-_)/y,this.z=(d-h)/y,this.w=Math.acos((f+p+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Pt.prototype.isVector4=!0;class an extends Er{constructor(e,t,i={}){super();this.width=e,this.height=t,this.depth=1,this.scissor=new Pt(0,0,e,t),this.scissorTest=!1,this.viewport=new Pt(0,0,e,t),this.texture=new Zt(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:xt,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=At({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}an.prototype.isWebGLRenderTarget=!0;class xA extends an{constructor(e,t,i){super(e,t);const r=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=r.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}xA.prototype.isWebGLMultipleRenderTargets=!0;class ll extends an{constructor(e,t,i={}){super(e,t,i);this.samples=4,this.ignoreDepthForMultisampleCopy=i.ignoreDepth!==void 0?i.ignoreDepth:!0,this.useRenderToTexture=i.useRenderToTexture!==void 0?i.useRenderToTexture:!1,this.useRenderbuffer=this.useRenderToTexture===!1}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}ll.prototype.isWebGLMultisampleRenderTarget=!0;class Mn{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],f=i[r+1],h=i[r+2],m=i[r+3];const d=s[o+0],p=s[o+1],x=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=f,e[t+2]=h,e[t+3]=m;return}if(a===1){e[t+0]=d,e[t+1]=p,e[t+2]=x,e[t+3]=_;return}if(m!==_||l!==d||f!==p||h!==x){let M=1-a;const v=l*d+f*p+h*x+m*_,y=v>=0?1:-1,A=1-v*v;if(A>Number.EPSILON){const T=Math.sqrt(A),C=Math.atan2(T,v*y);M=Math.sin(M*C)/T,a=Math.sin(a*C)/T}const w=a*y;if(l=l*M+d*w,f=f*M+p*w,h=h*M+x*w,m=m*M+_*w,M===1-a){const T=1/Math.sqrt(l*l+f*f+h*h+m*m);l*=T,f*=T,h*=T,m*=T}}e[t]=l,e[t+1]=f,e[t+2]=h,e[t+3]=m}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],f=i[r+2],h=i[r+3],m=s[o],d=s[o+1],p=s[o+2],x=s[o+3];return e[t]=a*x+h*m+l*p-f*d,e[t+1]=l*x+h*d+f*m-a*p,e[t+2]=f*x+h*p+a*d-l*m,e[t+3]=h*x-a*m-l*d-f*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,f=a(i/2),h=a(r/2),m=a(s/2),d=l(i/2),p=l(r/2),x=l(s/2);switch(o){case"XYZ":this._x=d*h*m+f*p*x,this._y=f*p*m-d*h*x,this._z=f*h*x+d*p*m,this._w=f*h*m-d*p*x;break;case"YXZ":this._x=d*h*m+f*p*x,this._y=f*p*m-d*h*x,this._z=f*h*x-d*p*m,this._w=f*h*m+d*p*x;break;case"ZXY":this._x=d*h*m-f*p*x,this._y=f*p*m+d*h*x,this._z=f*h*x+d*p*m,this._w=f*h*m-d*p*x;break;case"ZYX":this._x=d*h*m-f*p*x,this._y=f*p*m+d*h*x,this._z=f*h*x-d*p*m,this._w=f*h*m+d*p*x;break;case"YZX":this._x=d*h*m+f*p*x,this._y=f*p*m+d*h*x,this._z=f*h*x-d*p*m,this._w=f*h*m-d*p*x;break;case"XZY":this._x=d*h*m-f*p*x,this._y=f*p*m-d*h*x,this._z=f*h*x+d*p*m,this._w=f*h*m+d*p*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],f=t[2],h=t[6],m=t[10],d=i+a+m;if(d>0){const p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(h-l)*p,this._y=(s-f)*p,this._z=(o-r)*p}else if(i>a&&i>m){const p=2*Math.sqrt(1+i-a-m);this._w=(h-l)/p,this._x=.25*p,this._y=(r+o)/p,this._z=(s+f)/p}else if(a>m){const p=2*Math.sqrt(1+a-i-m);this._w=(s-f)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(l+h)/p}else{const p=2*Math.sqrt(1+m-i-a);this._w=(o-r)/p,this._x=(s+f)/p,this._y=(l+h)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(kn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,f=t._z,h=t._w;return this._x=i*h+o*a+r*f-s*l,this._y=r*h+o*l+s*a-i*f,this._z=s*h+o*f+i*l-r*a,this._w=o*h-i*a-r*l-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*i+t*this._x,this._y=p*r+t*this._y,this._z=p*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(l),h=Math.atan2(f,a),m=Math.sin((1-t)*h)/f,d=Math.sin(t*h)/f;return this._w=o*m+this._w*d,this._x=i*m+this._x*d,this._y=r*m+this._y*d,this._z=s*m+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Mn.prototype.isQuaternion=!0;class P{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_A.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_A.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,f=l*t+o*r-a*i,h=l*i+a*t-s*r,m=l*r+s*i-o*t,d=-s*t-o*i-a*r;return this.x=f*l+d*-s+h*-a-m*-o,this.y=h*l+d*-o+m*-s-f*-a,this.z=m*l+d*-a+f*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return F0.copy(this).projectOnVector(e),this.sub(F0)}reflect(e){return this.sub(F0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(kn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}P.prototype.isVector3=!0;const F0=new P,_A=new Mn;class ci{constructor(e=new P(1/0,1/0,1/0),t=new P(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,f=e.length;l<f;l+=3){const h=e[l],m=e[l+1],d=e[l+2];h<t&&(t=h),m<i&&(i=m),d<r&&(r=d),h>s&&(s=h),m>o&&(o=m),d>a&&(a=d)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,f=e.count;l<f;l++){const h=e.getX(l),m=e.getY(l),d=e.getZ(l);h<t&&(t=h),m<i&&(i=m),d<r&&(r=d),h>s&&(s=h),m>o&&(o=m),d>a&&(a=d)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=hc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),N0.copy(t.boundingBox),N0.applyMatrix4(e.matrixWorld),this.union(N0));const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hc),hc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(pc),yh.subVectors(this.max,pc),ul.subVectors(e.a,pc),cl.subVectors(e.b,pc),fl.subVectors(e.c,pc),Gs.subVectors(cl,ul),Hs.subVectors(fl,cl),Ko.subVectors(ul,fl);let t=[0,-Gs.z,Gs.y,0,-Hs.z,Hs.y,0,-Ko.z,Ko.y,Gs.z,0,-Gs.x,Hs.z,0,-Hs.x,Ko.z,0,-Ko.x,-Gs.y,Gs.x,0,-Hs.y,Hs.x,0,-Ko.y,Ko.x,0];return!O0(t,ul,cl,fl,yh)||(t=[1,0,0,0,1,0,0,0,1],!O0(t,ul,cl,fl,yh))?!1:(vh.crossVectors(Gs,Hs),t=[vh.x,vh.y,vh.z],O0(t,ul,cl,fl,yh))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return hc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(hc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ts[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ts[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ts[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ts[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ts[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ts[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ts[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ts[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ts),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}ci.prototype.isBox3=!0;const ts=[new P,new P,new P,new P,new P,new P,new P,new P],hc=new P,N0=new ci,ul=new P,cl=new P,fl=new P,Gs=new P,Hs=new P,Ko=new P,pc=new P,yh=new P,vh=new P,Qo=new P;function O0(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Qo.fromArray(n,s);const a=r.x*Math.abs(Qo.x)+r.y*Math.abs(Qo.y)+r.z*Math.abs(Qo.z),l=e.dot(Qo),f=t.dot(Qo),h=i.dot(Qo);if(Math.max(-Math.max(l,f,h),Math.min(l,f,h))>a)return!1}return!0}const qP=new ci,MA=new P,xh=new P,k0=new P;class ns{constructor(e=new P,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):qP.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){k0.subVectors(e,this.center);const t=k0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(k0.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return this.center.equals(e.center)===!0?xh.set(0,0,1).multiplyScalar(e.radius):xh.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(MA.copy(e.center).add(xh)),this.expandByPoint(MA.copy(e.center).sub(xh)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const is=new P,U0=new P,_h=new P,zs=new P,G0=new P,Mh=new P,H0=new P;class Vs{constructor(e=new P,t=new P(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,is)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=is.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(is.copy(this.direction).multiplyScalar(t).add(this.origin),is.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){U0.copy(e).add(t).multiplyScalar(.5),_h.copy(t).sub(e).normalize(),zs.copy(this.origin).sub(U0);const s=e.distanceTo(t)*.5,o=-this.direction.dot(_h),a=zs.dot(this.direction),l=-zs.dot(_h),f=zs.lengthSq(),h=Math.abs(1-o*o);let m,d,p,x;if(h>0)if(m=o*l-a,d=o*a-l,x=s*h,m>=0)if(d>=-x)if(d<=x){const _=1/h;m*=_,d*=_,p=m*(m+o*d+2*a)+d*(o*m+d+2*l)+f}else d=s,m=Math.max(0,-(o*d+a)),p=-m*m+d*(d+2*l)+f;else d=-s,m=Math.max(0,-(o*d+a)),p=-m*m+d*(d+2*l)+f;else d<=-x?(m=Math.max(0,-(-o*s+a)),d=m>0?-s:Math.min(Math.max(-s,-l),s),p=-m*m+d*(d+2*l)+f):d<=x?(m=0,d=Math.min(Math.max(-s,-l),s),p=d*(d+2*l)+f):(m=Math.max(0,-(o*s+a)),d=m>0?s:Math.min(Math.max(-s,-l),s),p=-m*m+d*(d+2*l)+f);else d=o>0?-s:s,m=Math.max(0,-(o*d+a)),p=-m*m+d*(d+2*l)+f;return i&&i.copy(this.direction).multiplyScalar(m).add(this.origin),r&&r.copy(_h).multiplyScalar(d).add(U0),p}intersectSphere(e,t){is.subVectors(e.center,this.origin);const i=is.dot(this.direction),r=is.dot(is)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const f=1/this.direction.x,h=1/this.direction.y,m=1/this.direction.z,d=this.origin;return f>=0?(i=(e.min.x-d.x)*f,r=(e.max.x-d.x)*f):(i=(e.max.x-d.x)*f,r=(e.min.x-d.x)*f),h>=0?(s=(e.min.y-d.y)*h,o=(e.max.y-d.y)*h):(s=(e.max.y-d.y)*h,o=(e.min.y-d.y)*h),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),m>=0?(a=(e.min.z-d.z)*m,l=(e.max.z-d.z)*m):(a=(e.max.z-d.z)*m,l=(e.min.z-d.z)*m),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,is)!==null}intersectTriangle(e,t,i,r,s){G0.subVectors(t,e),Mh.subVectors(i,e),H0.crossVectors(G0,Mh);let o=this.direction.dot(H0),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;zs.subVectors(this.origin,e);const l=a*this.direction.dot(Mh.crossVectors(zs,Mh));if(l<0)return null;const f=a*this.direction.dot(G0.cross(zs));if(f<0||l+f>o)return null;const h=-a*zs.dot(H0);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Fe{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,f,h,m,d,p,x,_,M){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=f,v[6]=h,v[10]=m,v[14]=d,v[3]=p,v[7]=x,v[11]=_,v[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Fe().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/dl.setFromMatrixColumn(e,0).length(),s=1/dl.setFromMatrixColumn(e,1).length(),o=1/dl.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),f=Math.sin(r),h=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const d=o*h,p=o*m,x=a*h,_=a*m;t[0]=l*h,t[4]=-l*m,t[8]=f,t[1]=p+x*f,t[5]=d-_*f,t[9]=-a*l,t[2]=_-d*f,t[6]=x+p*f,t[10]=o*l}else if(e.order==="YXZ"){const d=l*h,p=l*m,x=f*h,_=f*m;t[0]=d+_*a,t[4]=x*a-p,t[8]=o*f,t[1]=o*m,t[5]=o*h,t[9]=-a,t[2]=p*a-x,t[6]=_+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*h,p=l*m,x=f*h,_=f*m;t[0]=d-_*a,t[4]=-o*m,t[8]=x+p*a,t[1]=p+x*a,t[5]=o*h,t[9]=_-d*a,t[2]=-o*f,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*h,p=o*m,x=a*h,_=a*m;t[0]=l*h,t[4]=x*f-p,t[8]=d*f+_,t[1]=l*m,t[5]=_*f+d,t[9]=p*f-x,t[2]=-f,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,p=o*f,x=a*l,_=a*f;t[0]=l*h,t[4]=_-d*m,t[8]=x*m+p,t[1]=m,t[5]=o*h,t[9]=-a*h,t[2]=-f*h,t[6]=p*m+x,t[10]=d-_*m}else if(e.order==="XZY"){const d=o*l,p=o*f,x=a*l,_=a*f;t[0]=l*h,t[4]=-m,t[8]=f*h,t[1]=d*m+_,t[5]=o*h,t[9]=p*m-x,t[2]=x*m-p,t[6]=a*h,t[10]=_*m+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ZP,e,$P)}lookAt(e,t,i){const r=this.elements;return wi.subVectors(e,t),wi.lengthSq()===0&&(wi.z=1),wi.normalize(),Ws.crossVectors(i,wi),Ws.lengthSq()===0&&(Math.abs(i.z)===1?wi.x+=1e-4:wi.z+=1e-4,wi.normalize(),Ws.crossVectors(i,wi)),Ws.normalize(),wh.crossVectors(wi,Ws),r[0]=Ws.x,r[4]=wh.x,r[8]=wi.x,r[1]=Ws.y,r[5]=wh.y,r[9]=wi.y,r[2]=Ws.z,r[6]=wh.z,r[10]=wi.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],f=i[12],h=i[1],m=i[5],d=i[9],p=i[13],x=i[2],_=i[6],M=i[10],v=i[14],y=i[3],A=i[7],w=i[11],T=i[15],C=r[0],B=r[4],I=r[8],k=r[12],G=r[1],O=r[5],R=r[9],L=r[13],W=r[2],j=r[6],J=r[10],K=r[14],de=r[3],we=r[7],$=r[11],H=r[15];return s[0]=o*C+a*G+l*W+f*de,s[4]=o*B+a*O+l*j+f*we,s[8]=o*I+a*R+l*J+f*$,s[12]=o*k+a*L+l*K+f*H,s[1]=h*C+m*G+d*W+p*de,s[5]=h*B+m*O+d*j+p*we,s[9]=h*I+m*R+d*J+p*$,s[13]=h*k+m*L+d*K+p*H,s[2]=x*C+_*G+M*W+v*de,s[6]=x*B+_*O+M*j+v*we,s[10]=x*I+_*R+M*J+v*$,s[14]=x*k+_*L+M*K+v*H,s[3]=y*C+A*G+w*W+T*de,s[7]=y*B+A*O+w*j+T*we,s[11]=y*I+A*R+w*J+T*$,s[15]=y*k+A*L+w*K+T*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],f=e[13],h=e[2],m=e[6],d=e[10],p=e[14],x=e[3],_=e[7],M=e[11],v=e[15];return x*(+s*l*m-r*f*m-s*a*d+i*f*d+r*a*p-i*l*p)+_*(+t*l*p-t*f*d+s*o*d-r*o*p+r*f*h-s*l*h)+M*(+t*f*m-t*a*p-s*o*m+i*o*p+s*a*h-i*f*h)+v*(-r*a*h-t*l*m+t*a*d+r*o*m-i*o*d+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8],m=e[9],d=e[10],p=e[11],x=e[12],_=e[13],M=e[14],v=e[15],y=m*M*f-_*d*f+_*l*p-a*M*p-m*l*v+a*d*v,A=x*d*f-h*M*f-x*l*p+o*M*p+h*l*v-o*d*v,w=h*_*f-x*m*f+x*a*p-o*_*p-h*a*v+o*m*v,T=x*m*l-h*_*l-x*a*d+o*_*d+h*a*M-o*m*M,C=t*y+i*A+r*w+s*T;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/C;return e[0]=y*B,e[1]=(_*d*s-m*M*s-_*r*p+i*M*p+m*r*v-i*d*v)*B,e[2]=(a*M*s-_*l*s+_*r*f-i*M*f-a*r*v+i*l*v)*B,e[3]=(m*l*s-a*d*s-m*r*f+i*d*f+a*r*p-i*l*p)*B,e[4]=A*B,e[5]=(h*M*s-x*d*s+x*r*p-t*M*p-h*r*v+t*d*v)*B,e[6]=(x*l*s-o*M*s-x*r*f+t*M*f+o*r*v-t*l*v)*B,e[7]=(o*d*s-h*l*s+h*r*f-t*d*f-o*r*p+t*l*p)*B,e[8]=w*B,e[9]=(x*m*s-h*_*s-x*i*p+t*_*p+h*i*v-t*m*v)*B,e[10]=(o*_*s-x*a*s+x*i*f-t*_*f-o*i*v+t*a*v)*B,e[11]=(h*a*s-o*m*s-h*i*f+t*m*f+o*i*p-t*a*p)*B,e[12]=T*B,e[13]=(h*_*r-x*m*r+x*i*d-t*_*d-h*i*M+t*m*M)*B,e[14]=(x*a*r-o*_*r-x*i*l+t*_*l+o*i*M-t*a*M)*B,e[15]=(o*m*r-h*a*r+h*i*l-t*m*l-o*i*d+t*a*d)*B,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,f=s*o,h=s*a;return this.set(f*o+i,f*a-r*l,f*l+r*a,0,f*a+r*l,h*a+i,h*l-r*o,0,f*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,f=s+s,h=o+o,m=a+a,d=s*f,p=s*h,x=s*m,_=o*h,M=o*m,v=a*m,y=l*f,A=l*h,w=l*m,T=i.x,C=i.y,B=i.z;return r[0]=(1-(_+v))*T,r[1]=(p+w)*T,r[2]=(x-A)*T,r[3]=0,r[4]=(p-w)*C,r[5]=(1-(d+v))*C,r[6]=(M+y)*C,r[7]=0,r[8]=(x+A)*B,r[9]=(M-y)*B,r[10]=(1-(d+_))*B,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=dl.set(r[0],r[1],r[2]).length();const o=dl.set(r[4],r[5],r[6]).length(),a=dl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],tr.copy(this);const f=1/s,h=1/o,m=1/a;return tr.elements[0]*=f,tr.elements[1]*=f,tr.elements[2]*=f,tr.elements[4]*=h,tr.elements[5]*=h,tr.elements[6]*=h,tr.elements[8]*=m,tr.elements[9]*=m,tr.elements[10]*=m,t.setFromRotationMatrix(tr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*s/(t-e),f=2*s/(i-r),h=(t+e)/(t-e),m=(i+r)/(i-r),d=-(o+s)/(o-s),p=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=f,a[9]=m,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),f=1/(i-r),h=1/(o-s),m=(t+e)*l,d=(i+r)*f,p=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-m,a[1]=0,a[5]=2*f,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}Fe.prototype.isMatrix4=!0;const dl=new P,tr=new Fe,ZP=new P(0,0,0),$P=new P(1,1,1),Ws=new P,wh=new P,wi=new P,wA=new Fe,AA=new Mn;class Yo{constructor(e=0,t=0,i=0,r=Yo.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],f=r[5],h=r[9],m=r[2],d=r[6],p=r[10];switch(t){case"XYZ":this._y=Math.asin(kn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,f),this._z=0);break;case"YXZ":this._x=Math.asin(-kn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,f)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(kn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-m,p),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-kn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(kn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-kn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,f),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return wA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wA,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return AA.setFromEuler(this),this.setFromQuaternion(AA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new P(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Yo.prototype.isEuler=!0;Yo.DefaultOrder="XYZ";Yo.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class qo{constructor(){this.mask=1|0}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=4294967295|0}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let e2=0;const SA=new P,hl=new Mn,rs=new Fe,Ah=new P,mc=new P,t2=new P,n2=new Mn,EA=new P(1,0,0),TA=new P(0,1,0),CA=new P(0,0,1),i2={type:"added"},bA={type:"removed"};class ht extends Er{constructor(){super();Object.defineProperty(this,"id",{value:e2++}),this.uuid=Mi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ht.DefaultUp.clone();const e=new P,t=new Yo,i=new Mn,r=new P(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Fe},normalMatrix:{value:new _n}}),this.matrix=new Fe,this.matrixWorld=new Fe,this.matrixAutoUpdate=ht.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new qo,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return hl.setFromAxisAngle(e,t),this.quaternion.multiply(hl),this}rotateOnWorldAxis(e,t){return hl.setFromAxisAngle(e,t),this.quaternion.premultiply(hl),this}rotateX(e){return this.rotateOnAxis(EA,e)}rotateY(e){return this.rotateOnAxis(TA,e)}rotateZ(e){return this.rotateOnAxis(CA,e)}translateOnAxis(e,t){return SA.copy(e).applyQuaternion(this.quaternion),this.position.add(SA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(EA,e)}translateY(e){return this.translateOnAxis(TA,e)}translateZ(e){return this.translateOnAxis(CA,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(rs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Ah.copy(e):Ah.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),mc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rs.lookAt(mc,Ah,this.up):rs.lookAt(Ah,mc,this.up),this.quaternion.setFromRotationMatrix(rs),r&&(rs.extractRotation(r.matrixWorld),hl.setFromRotationMatrix(rs),this.quaternion.premultiply(hl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(i2)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(bA)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(bA)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),rs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),rs.multiply(e.parent.matrixWorld)),e.applyMatrix4(rs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mc,e,t2),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mc,n2,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let f=0,h=l.length;f<h;f++){const m=l[f];s(e.shapes,m)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,f=this.material.length;l<f;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),f=o(e.textures),h=o(e.images),m=o(e.shapes),d=o(e.skeletons),p=o(e.animations);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),f.length>0&&(i.textures=f),h.length>0&&(i.images=h),m.length>0&&(i.shapes=m),d.length>0&&(i.skeletons=d),p.length>0&&(i.animations=p)}return i.object=r,i;function o(a){const l=[];for(const f in a){const h=a[f];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}ht.DefaultUp=new P(0,1,0);ht.DefaultMatrixAutoUpdate=!0;ht.prototype.isObject3D=!0;const nr=new P,ss=new P,z0=new P,os=new P,pl=new P,ml=new P,BA=new P,V0=new P,W0=new P,J0=new P;class ln{constructor(e=new P,t=new P,i=new P){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),nr.subVectors(e,t),r.cross(nr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){nr.subVectors(r,t),ss.subVectors(i,t),z0.subVectors(e,t);const o=nr.dot(nr),a=nr.dot(ss),l=nr.dot(z0),f=ss.dot(ss),h=ss.dot(z0),m=o*f-a*a;if(m===0)return s.set(-2,-1,-1);const d=1/m,p=(f*l-a*h)*d,x=(o*h-a*l)*d;return s.set(1-p-x,x,p)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,os),os.x>=0&&os.y>=0&&os.x+os.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,os),l.set(0,0),l.addScaledVector(s,os.x),l.addScaledVector(o,os.y),l.addScaledVector(a,os.z),l}static isFrontFacing(e,t,i,r){return nr.subVectors(i,t),ss.subVectors(e,t),nr.cross(ss).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return nr.subVectors(this.c,this.b),ss.subVectors(this.a,this.b),nr.cross(ss).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ln.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ln.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return ln.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return ln.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ln.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;pl.subVectors(r,i),ml.subVectors(s,i),V0.subVectors(e,i);const l=pl.dot(V0),f=ml.dot(V0);if(l<=0&&f<=0)return t.copy(i);W0.subVectors(e,r);const h=pl.dot(W0),m=ml.dot(W0);if(h>=0&&m<=h)return t.copy(r);const d=l*m-h*f;if(d<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector(pl,o);J0.subVectors(e,s);const p=pl.dot(J0),x=ml.dot(J0);if(x>=0&&p<=x)return t.copy(s);const _=p*f-l*x;if(_<=0&&f>=0&&x<=0)return a=f/(f-x),t.copy(i).addScaledVector(ml,a);const M=h*x-p*m;if(M<=0&&m-h>=0&&p-x>=0)return BA.subVectors(s,r),a=(m-h)/(m-h+(p-x)),t.copy(r).addScaledVector(BA,a);const v=1/(M+_+d);return o=_*v,a=d*v,t.copy(i).addScaledVector(pl,o).addScaledVector(ml,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let r2=0;class un extends Er{constructor(){super();Object.defineProperty(this,"id",{value:r2++}),this.uuid=Mi(),this.name="",this.type="Material",this.fog=!0,this.blending=$a,this.side=$r,this.vertexColors=!1,this.opacity=1,this.format=qt,this.transparent=!1,this.blendSrc=p0,this.blendDst=m0,this.blendEquation=Uo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=uh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=mA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ph,this.stencilZFail=ph,this.stencilZPass=ph,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===l0;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==$a&&(i.blending=this.blending),this.side!==$r&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==qt&&(i.format=this.format),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}un.prototype.isMaterial=!0;const RA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ir={h:0,s:0,l:0},Sh={h:0,s:0,l:0};function j0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function X0(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function K0(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}class ye{constructor(e,t,i){return t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,i){return this.r=e,this.g=t,this.b=i,this}setHSL(e,t,i){if(e=P0(e,1),t=kn(t,0,1),i=kn(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,s=2*i-r;this.r=j0(s,r,e+1/3),this.g=j0(s,r,e),this.b=j0(s,r,e-1/3)}return this}setStyle(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const a=parseFloat(r[1])/360,l=parseInt(r[2],10)/100,f=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(a,l,f)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=RA[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=X0(e.r),this.g=X0(e.g),this.b=X0(e.b),this}copyLinearToSRGB(e){return this.r=K0(e.r),this.g=K0(e.g),this.b=K0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,i=this.g,r=this.b,s=Math.max(t,i,r),o=Math.min(t,i,r);let a,l;const f=(o+s)/2;if(o===s)a=0,l=0;else{const h=s-o;switch(l=f<=.5?h/(s+o):h/(2-s-o),s){case t:a=(i-r)/h+(i<r?6:0);break;case i:a=(r-t)/h+2;break;case r:a=(t-i)/h+4;break}a/=6}return e.h=a,e.s=l,e.l=f,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,i){return this.getHSL(ir),ir.h+=e,ir.s+=t,ir.l+=i,this.setHSL(ir.h,ir.s,ir.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ir),e.getHSL(Sh);const i=dc(ir.h,Sh.h,t),r=dc(ir.s,Sh.s,t),s=dc(ir.l,Sh.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}ye.NAMES=RA;ye.prototype.isColor=!0;ye.prototype.r=1;ye.prototype.g=1;ye.prototype.b=1;class fi extends un{constructor(e){super();this.type="MeshBasicMaterial",this.color=new ye(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}fi.prototype.isMeshBasicMaterial=!0;const zt=new P,Eh=new ie;class lt{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=sl,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ye),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new ie),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new P),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Pt),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Eh.fromBufferAttribute(this,t),Eh.applyMatrix3(e),this.setXY(t,Eh.x,Eh.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)zt.fromBufferAttribute(this,t),zt.applyMatrix3(e),this.setXYZ(t,zt.x,zt.y,zt.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)zt.x=this.getX(t),zt.y=this.getY(t),zt.z=this.getZ(t),zt.applyMatrix4(e),this.setXYZ(t,zt.x,zt.y,zt.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)zt.x=this.getX(t),zt.y=this.getY(t),zt.z=this.getZ(t),zt.applyNormalMatrix(e),this.setXYZ(t,zt.x,zt.y,zt.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)zt.x=this.getX(t),zt.y=this.getY(t),zt.z=this.getZ(t),zt.transformDirection(e),this.setXYZ(t,zt.x,zt.y,zt.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==sl&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}lt.prototype.isBufferAttribute=!0;class LA extends lt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class PA extends lt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class IA extends lt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class DA extends lt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Th extends lt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class FA extends lt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Ch extends lt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class NA extends lt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}NA.prototype.isFloat16BufferAttribute=!0;class Ge extends lt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class OA extends lt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let s2=0;const Ni=new Fe,Q0=new ht,gl=new P,Ai=new ci,gc=new ci,bn=new P;class je extends Er{constructor(){super();Object.defineProperty(this,"id",{value:s2++}),this.uuid=Mi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(vA(e)>65535?Ch:Th)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new _n().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ni.makeRotationFromQuaternion(e),this.applyMatrix4(Ni),this}rotateX(e){return Ni.makeRotationX(e),this.applyMatrix4(Ni),this}rotateY(e){return Ni.makeRotationY(e),this.applyMatrix4(Ni),this}rotateZ(e){return Ni.makeRotationZ(e),this.applyMatrix4(Ni),this}translate(e,t,i){return Ni.makeTranslation(e,t,i),this.applyMatrix4(Ni),this}scale(e,t,i){return Ni.makeScale(e,t,i),this.applyMatrix4(Ni),this}lookAt(e){return Q0.lookAt(e),Q0.updateMatrix(),this.applyMatrix4(Q0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(gl).negate(),this.translate(gl.x,gl.y,gl.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ge(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ci);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new P(-1/0,-1/0,-1/0),new P(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Ai.setFromBufferAttribute(s),this.morphTargetsRelative?(bn.addVectors(this.boundingBox.min,Ai.min),this.boundingBox.expandByPoint(bn),bn.addVectors(this.boundingBox.max,Ai.max),this.boundingBox.expandByPoint(bn)):(this.boundingBox.expandByPoint(Ai.min),this.boundingBox.expandByPoint(Ai.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ns);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new P,1/0);return}if(e){const i=this.boundingSphere.center;if(Ai.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];gc.setFromBufferAttribute(a),this.morphTargetsRelative?(bn.addVectors(Ai.min,gc.min),Ai.expandByPoint(bn),bn.addVectors(Ai.max,gc.max),Ai.expandByPoint(bn)):(Ai.expandByPoint(gc.min),Ai.expandByPoint(gc.max))}Ai.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)bn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(bn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let f=0,h=a.count;f<h;f++)bn.fromBufferAttribute(a,f),l&&(gl.fromBufferAttribute(e,f),bn.add(gl)),r=Math.max(r,i.distanceToSquared(bn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;t.tangent===void 0&&this.setAttribute("tangent",new lt(new Float32Array(4*a),4));const l=t.tangent.array,f=[],h=[];for(let G=0;G<a;G++)f[G]=new P,h[G]=new P;const m=new P,d=new P,p=new P,x=new ie,_=new ie,M=new ie,v=new P,y=new P;function A(G,O,R){m.fromArray(r,G*3),d.fromArray(r,O*3),p.fromArray(r,R*3),x.fromArray(o,G*2),_.fromArray(o,O*2),M.fromArray(o,R*2),d.sub(m),p.sub(m),_.sub(x),M.sub(x);const L=1/(_.x*M.y-M.x*_.y);!isFinite(L)||(v.copy(d).multiplyScalar(M.y).addScaledVector(p,-_.y).multiplyScalar(L),y.copy(p).multiplyScalar(_.x).addScaledVector(d,-M.x).multiplyScalar(L),f[G].add(v),f[O].add(v),f[R].add(v),h[G].add(y),h[O].add(y),h[R].add(y))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let G=0,O=w.length;G<O;++G){const R=w[G],L=R.start,W=R.count;for(let j=L,J=L+W;j<J;j+=3)A(i[j+0],i[j+1],i[j+2])}const T=new P,C=new P,B=new P,I=new P;function k(G){B.fromArray(s,G*3),I.copy(B);const O=f[G];T.copy(O),T.sub(B.multiplyScalar(B.dot(O))).normalize(),C.crossVectors(I,O);const L=C.dot(h[G])<0?-1:1;l[G*4]=T.x,l[G*4+1]=T.y,l[G*4+2]=T.z,l[G*4+3]=L}for(let G=0,O=w.length;G<O;++G){const R=w[G],L=R.start,W=R.count;for(let j=L,J=L+W;j<J;j+=3)k(i[j+0]),k(i[j+1]),k(i[j+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new lt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,p=i.count;d<p;d++)i.setXYZ(d,0,0,0);const r=new P,s=new P,o=new P,a=new P,l=new P,f=new P,h=new P,m=new P;if(e)for(let d=0,p=e.count;d<p;d+=3){const x=e.getX(d+0),_=e.getX(d+1),M=e.getX(d+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,M),h.subVectors(o,s),m.subVectors(r,s),h.cross(m),a.fromBufferAttribute(i,x),l.fromBufferAttribute(i,_),f.fromBufferAttribute(i,M),a.add(h),l.add(h),f.add(h),i.setXYZ(x,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(M,f.x,f.y,f.z)}else for(let d=0,p=t.count;d<p;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),h.subVectors(o,s),m.subVectors(r,s),h.cross(m),i.setXYZ(d+0,h.x,h.y,h.z),i.setXYZ(d+1,h.x,h.y,h.z),i.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(e.attributes[r]===void 0)continue;const o=i[r].array,a=e.attributes[r],l=a.array,f=a.itemSize*t,h=Math.min(l.length,o.length-f);for(let m=0,d=f;m<h;m++,d++)o[d]=l[m]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)bn.fromBufferAttribute(e,t),bn.normalize(),e.setXYZ(t,bn.x,bn.y,bn.z)}toNonIndexed(){function e(a,l){const f=a.array,h=a.itemSize,m=a.normalized,d=new f.constructor(l.length*h);let p=0,x=0;for(let _=0,M=l.length;_<M;_++){a.isInterleavedBufferAttribute?p=l[_]*a.data.stride+a.offset:p=l[_]*h;for(let v=0;v<h;v++)d[x++]=f[p++]}return new lt(d,h,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new je,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],f=e(l,i);t.setAttribute(a,f)}const s=this.morphAttributes;for(const a in s){const l=[],f=s[a];for(let h=0,m=f.length;h<m;h++){const d=f[h],p=e(d,i);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const f=o[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const f in l)l[f]!==void 0&&(e[f]=l[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const f=i[l];e.data.attributes[l]=f.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const f=this.morphAttributes[l],h=[];for(let m=0,d=f.length;m<d;m++){const p=f[m];h.push(p.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const f in r){const h=r[f];this.setAttribute(f,h.clone(t))}const s=e.morphAttributes;for(const f in s){const h=[],m=s[f];for(let d=0,p=m.length;d<p;d++)h.push(m[d].clone(t));this.morphAttributes[f]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,h=o.length;f<h;f++){const m=o[f];this.addGroup(m.start,m.count,m.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}je.prototype.isBufferGeometry=!0;const kA=new Fe,yl=new Vs,Y0=new ns,Js=new P,js=new P,Xs=new P,q0=new P,Z0=new P,$0=new P,bh=new P,Bh=new P,Rh=new P,Lh=new ie,Ph=new ie,Ih=new ie,ey=new P,Dh=new P;class $t extends ht{constructor(e=new je,t=new fi){super();this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Y0.copy(i.boundingSphere),Y0.applyMatrix4(s),e.ray.intersectsSphere(Y0)===!1)||(kA.copy(s).invert(),yl.copy(e.ray).applyMatrix4(kA),i.boundingBox!==null&&yl.intersectsBox(i.boundingBox)===!1))return;let o;if(i.isBufferGeometry){const a=i.index,l=i.attributes.position,f=i.morphAttributes.position,h=i.morphTargetsRelative,m=i.attributes.uv,d=i.attributes.uv2,p=i.groups,x=i.drawRange;if(a!==null)if(Array.isArray(r))for(let _=0,M=p.length;_<M;_++){const v=p[_],y=r[v.materialIndex],A=Math.max(v.start,x.start),w=Math.min(a.count,Math.min(v.start+v.count,x.start+x.count));for(let T=A,C=w;T<C;T+=3){const B=a.getX(T),I=a.getX(T+1),k=a.getX(T+2);o=Fh(this,y,e,yl,l,f,h,m,d,B,I,k),o&&(o.faceIndex=Math.floor(T/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const _=Math.max(0,x.start),M=Math.min(a.count,x.start+x.count);for(let v=_,y=M;v<y;v+=3){const A=a.getX(v),w=a.getX(v+1),T=a.getX(v+2);o=Fh(this,r,e,yl,l,f,h,m,d,A,w,T),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let _=0,M=p.length;_<M;_++){const v=p[_],y=r[v.materialIndex],A=Math.max(v.start,x.start),w=Math.min(l.count,Math.min(v.start+v.count,x.start+x.count));for(let T=A,C=w;T<C;T+=3){const B=T,I=T+1,k=T+2;o=Fh(this,y,e,yl,l,f,h,m,d,B,I,k),o&&(o.faceIndex=Math.floor(T/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const _=Math.max(0,x.start),M=Math.min(l.count,x.start+x.count);for(let v=_,y=M;v<y;v+=3){const A=v,w=v+1,T=v+2;o=Fh(this,r,e,yl,l,f,h,m,d,A,w,T),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}$t.prototype.isMesh=!0;function o2(n,e,t,i,r,s,o,a){let l;if(e.side===Wt?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side!==Di,a),l===null)return null;Dh.copy(a),Dh.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Dh);return f<t.near||f>t.far?null:{distance:f,point:Dh.clone(),object:n}}function Fh(n,e,t,i,r,s,o,a,l,f,h,m){Js.fromBufferAttribute(r,f),js.fromBufferAttribute(r,h),Xs.fromBufferAttribute(r,m);const d=n.morphTargetInfluences;if(s&&d){bh.set(0,0,0),Bh.set(0,0,0),Rh.set(0,0,0);for(let x=0,_=s.length;x<_;x++){const M=d[x],v=s[x];M!==0&&(q0.fromBufferAttribute(v,f),Z0.fromBufferAttribute(v,h),$0.fromBufferAttribute(v,m),o?(bh.addScaledVector(q0,M),Bh.addScaledVector(Z0,M),Rh.addScaledVector($0,M)):(bh.addScaledVector(q0.sub(Js),M),Bh.addScaledVector(Z0.sub(js),M),Rh.addScaledVector($0.sub(Xs),M)))}Js.add(bh),js.add(Bh),Xs.add(Rh)}n.isSkinnedMesh&&(n.boneTransform(f,Js),n.boneTransform(h,js),n.boneTransform(m,Xs));const p=o2(n,e,t,i,Js,js,Xs,ey);if(p){a&&(Lh.fromBufferAttribute(a,f),Ph.fromBufferAttribute(a,h),Ih.fromBufferAttribute(a,m),p.uv=ln.getUV(ey,Js,js,Xs,Lh,Ph,Ih,new ie)),l&&(Lh.fromBufferAttribute(l,f),Ph.fromBufferAttribute(l,h),Ih.fromBufferAttribute(l,m),p.uv2=ln.getUV(ey,Js,js,Xs,Lh,Ph,Ih,new ie));const x={a:f,b:h,c:m,normal:new P,materialIndex:0};ln.getNormal(Js,js,Xs,x.normal),p.face=x}return p}class as extends je{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],f=[],h=[],m=[];let d=0,p=0;x("z","y","x",-1,-1,i,t,e,o,s,0),x("z","y","x",1,-1,i,t,-e,o,s,1),x("x","z","y",1,1,e,i,t,r,o,2),x("x","z","y",1,-1,e,i,-t,r,o,3),x("x","y","z",1,-1,e,t,i,r,s,4),x("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ge(f,3)),this.setAttribute("normal",new Ge(h,3)),this.setAttribute("uv",new Ge(m,2));function x(_,M,v,y,A,w,T,C,B,I,k){const G=w/B,O=T/I,R=w/2,L=T/2,W=C/2,j=B+1,J=I+1;let K=0,de=0;const we=new P;for(let $=0;$<J;$++){const H=$*O-L;for(let q=0;q<j;q++){const ee=q*G-R;we[_]=ee*y,we[M]=H*A,we[v]=W,f.push(we.x,we.y,we.z),we[_]=0,we[M]=0,we[v]=C>0?1:-1,h.push(we.x,we.y,we.z),m.push(q/B),m.push(1-$/I),K+=1}}for(let $=0;$<I;$++)for(let H=0;H<B;H++){const q=d+H+j*$,ee=d+H+j*($+1),ce=d+(H+1)+j*($+1),Ie=d+(H+1)+j*$;l.push(q,ee,Ie),l.push(ee,ce,Ie),de+=6}a.addGroup(p,de,k),p+=de,d+=K}}static fromJSON(e){return new as(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function vl(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function jn(n){const e={};for(let t=0;t<n.length;t++){const i=vl(n[t]);for(const r in i)e[r]=i[r]}return e}const UA={clone:vl,merge:jn};var a2=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,l2=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class di extends un{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=a2,this.fragmentShader=l2,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vl(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}di.prototype.isShaderMaterial=!0;class Ks extends ht{constructor(){super();this.type="Camera",this.matrixWorldInverse=new Fe,this.projectionMatrix=new Fe,this.projectionMatrixInverse=new Fe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Ks.prototype.isCamera=!0;class cn extends Ks{constructor(e=50,t=1,i=.1,r=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=fc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Jo*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fc*2*Math.atan(Math.tan(Jo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Jo*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,f=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/f,r*=o.width/l,i*=o.height/f}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}cn.prototype.isPerspectiveCamera=!0;const xl=90,_l=1;class Nh extends ht{constructor(e,t,i){super();if(this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new cn(xl,_l,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new P(1,0,0)),this.add(r);const s=new cn(xl,_l,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new P(-1,0,0)),this.add(s);const o=new cn(xl,_l,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new P(0,1,0)),this.add(o);const a=new cn(xl,_l,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new P(0,-1,0)),this.add(a);const l=new cn(xl,_l,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new P(0,0,1)),this.add(l);const f=new cn(xl,_l,e,t);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new P(0,0,-1)),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,f]=this.children,h=e.xr.enabled,m=e.getRenderTarget();e.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=d,e.setRenderTarget(i,5),e.render(t,f),e.setRenderTarget(m),e.xr.enabled=h}}class Ml extends Zt{constructor(e,t,i,r,s,o,a,l,f,h){e=e!==void 0?e:[],t=t!==void 0?t:Go;super(e,t,i,r,s,o,a,l,f,h);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Ml.prototype.isCubeTexture=!0;class Oh extends an{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i);super(e,e,t);t=t||{},this.texture=new Ml(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:xt,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=qt,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new as(5,5,5),s=new di({name:"CubemapFromEquirect",uniforms:vl(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Wt,blending:li});s.uniforms.tEquirect.value=t;const o=new $t(r,s),a=t.minFilter;return t.minFilter===Ar&&(t.minFilter=xt),new Nh(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}Oh.prototype.isWebGLCubeRenderTarget=!0;const ty=new P,u2=new P,c2=new _n;class Tr{constructor(e=new P(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=ty.subVectors(i,t).cross(u2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(ty),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||c2.getNormalMatrix(e),r=this.coplanarPoint(ty).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Tr.prototype.isPlane=!0;const wl=new ns,kh=new P;class yc{constructor(e=new Tr,t=new Tr,i=new Tr,r=new Tr,s=new Tr,o=new Tr){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],f=i[5],h=i[6],m=i[7],d=i[8],p=i[9],x=i[10],_=i[11],M=i[12],v=i[13],y=i[14],A=i[15];return t[0].setComponents(a-r,m-l,_-d,A-M).normalize(),t[1].setComponents(a+r,m+l,_+d,A+M).normalize(),t[2].setComponents(a+s,m+f,_+p,A+v).normalize(),t[3].setComponents(a-s,m-f,_-p,A-v).normalize(),t[4].setComponents(a-o,m-h,_-x,A-y).normalize(),t[5].setComponents(a+o,m+h,_+x,A+y).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),wl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(wl)}intersectsSprite(e){return wl.center.set(0,0,0),wl.radius=.7071067811865476,wl.applyMatrix4(e.matrixWorld),this.intersectsSphere(wl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(kh.x=r.normal.x>0?e.max.x:e.min.x,kh.y=r.normal.y>0?e.max.y:e.min.y,kh.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(kh)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function GA(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function f2(n,e){const t=e.isWebGL2,i=new WeakMap;function r(f,h){const m=f.array,d=f.usage,p=n.createBuffer();n.bindBuffer(h,p),n.bufferData(h,m,d),f.onUploadCallback();let x=5126;return m instanceof Float32Array?x=5126:m instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):m instanceof Uint16Array?f.isFloat16BufferAttribute?t?x=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):x=5123:m instanceof Int16Array?x=5122:m instanceof Uint32Array?x=5125:m instanceof Int32Array?x=5124:m instanceof Int8Array?x=5120:(m instanceof Uint8Array||m instanceof Uint8ClampedArray)&&(x=5121),{buffer:p,type:x,bytesPerElement:m.BYTES_PER_ELEMENT,version:f.version}}function s(f,h,m){const d=h.array,p=h.updateRange;n.bindBuffer(m,f),p.count===-1?n.bufferSubData(m,0,d):(t?n.bufferSubData(m,p.offset*d.BYTES_PER_ELEMENT,d,p.offset,p.count):n.bufferSubData(m,p.offset*d.BYTES_PER_ELEMENT,d.subarray(p.offset,p.offset+p.count)),p.count=-1)}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const h=i.get(f);h&&(n.deleteBuffer(h.buffer),i.delete(f))}function l(f,h){if(f.isGLBufferAttribute){const d=i.get(f);(!d||d.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const m=i.get(f);m===void 0?i.set(f,r(f,h)):m.version<f.version&&(s(m.buffer,f,h),m.version=f.version)}return{get:o,remove:a,update:l}}class Zo extends je{constructor(e=1,t=1,i=1,r=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),f=a+1,h=l+1,m=e/a,d=t/l,p=[],x=[],_=[],M=[];for(let v=0;v<h;v++){const y=v*d-o;for(let A=0;A<f;A++){const w=A*m-s;x.push(w,-y,0),_.push(0,0,1),M.push(A/a),M.push(1-v/l)}}for(let v=0;v<l;v++)for(let y=0;y<a;y++){const A=y+f*v,w=y+f*(v+1),T=y+1+f*(v+1),C=y+1+f*v;p.push(A,w,C),p.push(w,T,C)}this.setIndex(p),this.setAttribute("position",new Ge(x,3)),this.setAttribute("normal",new Ge(_,3)),this.setAttribute("uv",new Ge(M,2))}static fromJSON(e){return new Zo(e.width,e.height,e.widthSegments,e.heightSegments)}}var d2=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,h2=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,p2=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,m2=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,g2=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,y2=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,v2="vec3 transformed = vec3( position );",x2=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_2=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,M2=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,w2=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,A2=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,S2=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,E2=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,T2=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,C2=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,b2=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,B2=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,R2=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,L2=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		return texture2D( envMap, uv ).rgb;
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,P2=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,I2=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,D2=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,F2=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,N2=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,O2="gl_FragColor = linearToOutputTexel( gl_FragColor );",k2=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,U2=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,G2=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,H2=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,z2=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,V2=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,W2=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,J2=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,j2=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,X2=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,K2=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Q2=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Y2=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,q2=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Z2=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,$2=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,eI=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,tI=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,nI=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,iI=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,rI=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,sI=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,oI=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,aI=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lI=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,uI=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,cI=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fI=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,dI=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,hI=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,pI=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mI=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gI=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yI=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,vI=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,xI=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,_I=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,MI=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,wI=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,AI=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,SI=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,EI=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,TI=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,CI=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,bI=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,BI=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,RI=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,LI=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,PI=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,II=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,DI=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,FI=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,NI=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,OI=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,kI=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,UI=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,GI=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,HI=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,zI=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,VI=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,WI=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,JI=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,jI=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,XI=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,KI=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,QI=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,YI=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,qI=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,ZI=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,$I=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,e3=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,t3=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,n3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,i3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,r3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,s3=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const o3=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,a3=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,l3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,u3=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,c3=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,f3=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,d3=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,h3=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,p3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,m3=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,g3=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,y3=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,v3=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,x3=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_3=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,M3=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,w3=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,A3=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,S3=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,E3=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,T3=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,C3=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,b3=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,B3=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,R3=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,L3=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,I3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,D3=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,F3=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,N3=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,O3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ft={alphamap_fragment:d2,alphamap_pars_fragment:h2,alphatest_fragment:p2,alphatest_pars_fragment:m2,aomap_fragment:g2,aomap_pars_fragment:y2,begin_vertex:v2,beginnormal_vertex:x2,bsdfs:_2,bumpmap_pars_fragment:M2,clipping_planes_fragment:w2,clipping_planes_pars_fragment:A2,clipping_planes_pars_vertex:S2,clipping_planes_vertex:E2,color_fragment:T2,color_pars_fragment:C2,color_pars_vertex:b2,color_vertex:B2,common:R2,cube_uv_reflection_fragment:L2,defaultnormal_vertex:P2,displacementmap_pars_vertex:I2,displacementmap_vertex:D2,emissivemap_fragment:F2,emissivemap_pars_fragment:N2,encodings_fragment:O2,encodings_pars_fragment:k2,envmap_fragment:U2,envmap_common_pars_fragment:G2,envmap_pars_fragment:H2,envmap_pars_vertex:z2,envmap_physical_pars_fragment:$2,envmap_vertex:V2,fog_vertex:W2,fog_pars_vertex:J2,fog_fragment:j2,fog_pars_fragment:X2,gradientmap_pars_fragment:K2,lightmap_fragment:Q2,lightmap_pars_fragment:Y2,lights_lambert_vertex:q2,lights_pars_begin:Z2,lights_toon_fragment:eI,lights_toon_pars_fragment:tI,lights_phong_fragment:nI,lights_phong_pars_fragment:iI,lights_physical_fragment:rI,lights_physical_pars_fragment:sI,lights_fragment_begin:oI,lights_fragment_maps:aI,lights_fragment_end:lI,logdepthbuf_fragment:uI,logdepthbuf_pars_fragment:cI,logdepthbuf_pars_vertex:fI,logdepthbuf_vertex:dI,map_fragment:hI,map_pars_fragment:pI,map_particle_fragment:mI,map_particle_pars_fragment:gI,metalnessmap_fragment:yI,metalnessmap_pars_fragment:vI,morphnormal_vertex:xI,morphtarget_pars_vertex:_I,morphtarget_vertex:MI,normal_fragment_begin:wI,normal_fragment_maps:AI,normal_pars_fragment:SI,normal_pars_vertex:EI,normal_vertex:TI,normalmap_pars_fragment:CI,clearcoat_normal_fragment_begin:bI,clearcoat_normal_fragment_maps:BI,clearcoat_pars_fragment:RI,output_fragment:LI,packing:PI,premultiplied_alpha_fragment:II,project_vertex:DI,dithering_fragment:FI,dithering_pars_fragment:NI,roughnessmap_fragment:OI,roughnessmap_pars_fragment:kI,shadowmap_pars_fragment:UI,shadowmap_pars_vertex:GI,shadowmap_vertex:HI,shadowmask_pars_fragment:zI,skinbase_vertex:VI,skinning_pars_vertex:WI,skinning_vertex:JI,skinnormal_vertex:jI,specularmap_fragment:XI,specularmap_pars_fragment:KI,tonemapping_fragment:QI,tonemapping_pars_fragment:YI,transmission_fragment:qI,transmission_pars_fragment:ZI,uv_pars_fragment:$I,uv_pars_vertex:e3,uv_vertex:t3,uv2_pars_fragment:n3,uv2_pars_vertex:i3,uv2_vertex:r3,worldpos_vertex:s3,background_vert:o3,background_frag:a3,cube_vert:l3,cube_frag:u3,depth_vert:c3,depth_frag:f3,distanceRGBA_vert:d3,distanceRGBA_frag:h3,equirect_vert:p3,equirect_frag:m3,linedashed_vert:g3,linedashed_frag:y3,meshbasic_vert:v3,meshbasic_frag:x3,meshlambert_vert:_3,meshlambert_frag:M3,meshmatcap_vert:w3,meshmatcap_frag:A3,meshnormal_vert:S3,meshnormal_frag:E3,meshphong_vert:T3,meshphong_frag:C3,meshphysical_vert:b3,meshphysical_frag:B3,meshtoon_vert:R3,meshtoon_frag:L3,points_vert:P3,points_frag:I3,shadow_vert:D3,shadow_frag:F3,sprite_vert:N3,sprite_frag:O3},be={common:{diffuse:{value:new ye(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new _n},uv2Transform:{value:new _n},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ye(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ye(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _n}},sprite:{diffuse:{value:new ye(16777215)},opacity:{value:1},center:{value:new ie(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _n}}},rr={basic:{uniforms:jn([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.fog]),vertexShader:ft.meshbasic_vert,fragmentShader:ft.meshbasic_frag},lambert:{uniforms:jn([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.fog,be.lights,{emissive:{value:new ye(0)}}]),vertexShader:ft.meshlambert_vert,fragmentShader:ft.meshlambert_frag},phong:{uniforms:jn([be.common,be.specularmap,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.fog,be.lights,{emissive:{value:new ye(0)},specular:{value:new ye(1118481)},shininess:{value:30}}]),vertexShader:ft.meshphong_vert,fragmentShader:ft.meshphong_frag},standard:{uniforms:jn([be.common,be.envmap,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.roughnessmap,be.metalnessmap,be.fog,be.lights,{emissive:{value:new ye(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag},toon:{uniforms:jn([be.common,be.aomap,be.lightmap,be.emissivemap,be.bumpmap,be.normalmap,be.displacementmap,be.gradientmap,be.fog,be.lights,{emissive:{value:new ye(0)}}]),vertexShader:ft.meshtoon_vert,fragmentShader:ft.meshtoon_frag},matcap:{uniforms:jn([be.common,be.bumpmap,be.normalmap,be.displacementmap,be.fog,{matcap:{value:null}}]),vertexShader:ft.meshmatcap_vert,fragmentShader:ft.meshmatcap_frag},points:{uniforms:jn([be.points,be.fog]),vertexShader:ft.points_vert,fragmentShader:ft.points_frag},dashed:{uniforms:jn([be.common,be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ft.linedashed_vert,fragmentShader:ft.linedashed_frag},depth:{uniforms:jn([be.common,be.displacementmap]),vertexShader:ft.depth_vert,fragmentShader:ft.depth_frag},normal:{uniforms:jn([be.common,be.bumpmap,be.normalmap,be.displacementmap,{opacity:{value:1}}]),vertexShader:ft.meshnormal_vert,fragmentShader:ft.meshnormal_frag},sprite:{uniforms:jn([be.sprite,be.fog]),vertexShader:ft.sprite_vert,fragmentShader:ft.sprite_frag},background:{uniforms:{uvTransform:{value:new _n},t2D:{value:null}},vertexShader:ft.background_vert,fragmentShader:ft.background_frag},cube:{uniforms:jn([be.envmap,{opacity:{value:1}}]),vertexShader:ft.cube_vert,fragmentShader:ft.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ft.equirect_vert,fragmentShader:ft.equirect_frag},distanceRGBA:{uniforms:jn([be.common,be.displacementmap,{referencePosition:{value:new P},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ft.distanceRGBA_vert,fragmentShader:ft.distanceRGBA_frag},shadow:{uniforms:jn([be.lights,be.fog,{color:{value:new ye(0)},opacity:{value:1}}]),vertexShader:ft.shadow_vert,fragmentShader:ft.shadow_frag}};rr.physical={uniforms:jn([rr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ie(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ye(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ye(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new ye(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag};function k3(n,e,t,i,r){const s=new ye(0);let o=0,a,l,f=null,h=0,m=null;function d(x,_){let M=!1,v=_.isScene===!0?_.background:null;v&&v.isTexture&&(v=e.get(v));const y=n.xr,A=y.getSession&&y.getSession();A&&A.environmentBlendMode==="additive"&&(v=null),v===null?p(s,o):v&&v.isColor&&(p(v,1),M=!0),(n.autoClear||M)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||v.mapping===el)?(l===void 0&&(l=new $t(new as(1,1,1),new di({name:"BackgroundCubeMaterial",uniforms:vl(rr.cube.uniforms),vertexShader:rr.cube.vertexShader,fragmentShader:rr.cube.fragmentShader,side:Wt,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(w,T,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,(f!==v||h!==v.version||m!==n.toneMapping)&&(l.material.needsUpdate=!0,f=v,h=v.version,m=n.toneMapping),x.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(a===void 0&&(a=new $t(new Zo(2,2),new di({name:"BackgroundMaterial",uniforms:vl(rr.background.uniforms),vertexShader:rr.background.vertexShader,fragmentShader:rr.background.fragmentShader,side:$r,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=v,v.matrixAutoUpdate===!0&&v.updateMatrix(),a.material.uniforms.uvTransform.value.copy(v.matrix),(f!==v||h!==v.version||m!==n.toneMapping)&&(a.material.needsUpdate=!0,f=v,h=v.version,m=n.toneMapping),x.unshift(a,a.geometry,a.material,0,0,null))}function p(x,_){t.buffers.color.setClear(x.r,x.g,x.b,_,r)}return{getClearColor:function(){return s},setClearColor:function(x,_=1){s.set(x),o=_,p(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(x){o=x,p(s,o)},render:d}}function U3(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=_(null);let f=l;function h(L,W,j,J,K){let de=!1;if(o){const we=x(J,j,W);f!==we&&(f=we,d(f.object)),de=M(J,K),de&&v(J,K)}else{const we=W.wireframe===!0;(f.geometry!==J.id||f.program!==j.id||f.wireframe!==we)&&(f.geometry=J.id,f.program=j.id,f.wireframe=we,de=!0)}L.isInstancedMesh===!0&&(de=!0),K!==null&&t.update(K,34963),de&&(B(L,W,j,J),K!==null&&n.bindBuffer(34963,t.get(K).buffer))}function m(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function d(L){return i.isWebGL2?n.bindVertexArray(L):s.bindVertexArrayOES(L)}function p(L){return i.isWebGL2?n.deleteVertexArray(L):s.deleteVertexArrayOES(L)}function x(L,W,j){const J=j.wireframe===!0;let K=a[L.id];K===void 0&&(K={},a[L.id]=K);let de=K[W.id];de===void 0&&(de={},K[W.id]=de);let we=de[J];return we===void 0&&(we=_(m()),de[J]=we),we}function _(L){const W=[],j=[],J=[];for(let K=0;K<r;K++)W[K]=0,j[K]=0,J[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:j,attributeDivisors:J,object:L,attributes:{},index:null}}function M(L,W){const j=f.attributes,J=L.attributes;let K=0;for(const de in J){const we=j[de],$=J[de];if(we===void 0||we.attribute!==$||we.data!==$.data)return!0;K++}return f.attributesNum!==K||f.index!==W}function v(L,W){const j={},J=L.attributes;let K=0;for(const de in J){const we=J[de],$={};$.attribute=we,we.data&&($.data=we.data),j[de]=$,K++}f.attributes=j,f.attributesNum=K,f.index=W}function y(){const L=f.newAttributes;for(let W=0,j=L.length;W<j;W++)L[W]=0}function A(L){w(L,0)}function w(L,W){const j=f.newAttributes,J=f.enabledAttributes,K=f.attributeDivisors;j[L]=1,J[L]===0&&(n.enableVertexAttribArray(L),J[L]=1),K[L]!==W&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,W),K[L]=W)}function T(){const L=f.newAttributes,W=f.enabledAttributes;for(let j=0,J=W.length;j<J;j++)W[j]!==L[j]&&(n.disableVertexAttribArray(j),W[j]=0)}function C(L,W,j,J,K,de){i.isWebGL2===!0&&(j===5124||j===5125)?n.vertexAttribIPointer(L,W,j,K,de):n.vertexAttribPointer(L,W,j,J,K,de)}function B(L,W,j,J){if(i.isWebGL2===!1&&(L.isInstancedMesh||J.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const K=J.attributes,de=j.getAttributes(),we=W.defaultAttributeValues;for(const $ in de){const H=de[$];if(H.location>=0){let q=K[$];if(q===void 0&&($==="instanceMatrix"&&L.instanceMatrix&&(q=L.instanceMatrix),$==="instanceColor"&&L.instanceColor&&(q=L.instanceColor)),q!==void 0){const ee=q.normalized,ce=q.itemSize,Ie=t.get(q);if(Ie===void 0)continue;const ae=Ie.buffer,Ue=Ie.type,Be=Ie.bytesPerElement;if(q.isInterleavedBufferAttribute){const Ae=q.data,De=Ae.stride,nt=q.offset;if(Ae&&Ae.isInstancedInterleavedBuffer){for(let oe=0;oe<H.locationSize;oe++)w(H.location+oe,Ae.meshPerAttribute);L.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let oe=0;oe<H.locationSize;oe++)A(H.location+oe);n.bindBuffer(34962,ae);for(let oe=0;oe<H.locationSize;oe++)C(H.location+oe,ce/H.locationSize,Ue,ee,De*Be,(nt+ce/H.locationSize*oe)*Be)}else{if(q.isInstancedBufferAttribute){for(let Ae=0;Ae<H.locationSize;Ae++)w(H.location+Ae,q.meshPerAttribute);L.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=q.meshPerAttribute*q.count)}else for(let Ae=0;Ae<H.locationSize;Ae++)A(H.location+Ae);n.bindBuffer(34962,ae);for(let Ae=0;Ae<H.locationSize;Ae++)C(H.location+Ae,ce/H.locationSize,Ue,ee,ce*Be,ce/H.locationSize*Ae*Be)}}else if(we!==void 0){const ee=we[$];if(ee!==void 0)switch(ee.length){case 2:n.vertexAttrib2fv(H.location,ee);break;case 3:n.vertexAttrib3fv(H.location,ee);break;case 4:n.vertexAttrib4fv(H.location,ee);break;default:n.vertexAttrib1fv(H.location,ee)}}}}T()}function I(){O();for(const L in a){const W=a[L];for(const j in W){const J=W[j];for(const K in J)p(J[K].object),delete J[K];delete W[j]}delete a[L]}}function k(L){if(a[L.id]===void 0)return;const W=a[L.id];for(const j in W){const J=W[j];for(const K in J)p(J[K].object),delete J[K];delete W[j]}delete a[L.id]}function G(L){for(const W in a){const j=a[W];if(j[L.id]===void 0)continue;const J=j[L.id];for(const K in J)p(J[K].object),delete J[K];delete j[L.id]}}function O(){R(),f!==l&&(f=l,d(f.object))}function R(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:O,resetDefaultState:R,dispose:I,releaseStatesOfGeometry:k,releaseStatesOfProgram:G,initAttributes:y,enableAttribute:A,disableUnusedAttributes:T}}function G3(n,e,t,i){const r=i.isWebGL2;let s;function o(f){s=f}function a(f,h){n.drawArrays(s,f,h),t.update(h,s,1)}function l(f,h,m){if(m===0)return;let d,p;if(r)d=n,p="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[p](s,f,h,m),t.update(h,s,m)}this.setMode=o,this.render=a,this.renderInstances=l}function H3(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(B){if(B==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";B="mediump"}return B==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext!="undefined"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const f=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,m=n.getParameter(34930),d=n.getParameter(35660),p=n.getParameter(3379),x=n.getParameter(34076),_=n.getParameter(34921),M=n.getParameter(36347),v=n.getParameter(36348),y=n.getParameter(36349),A=d>0,w=o||e.has("OES_texture_float"),T=A&&w,C=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:m,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:x,maxAttributes:_,maxVertexUniforms:M,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:A,floatFragmentTextures:w,floatVertexTextures:T,maxSamples:C}}function z3(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Tr,a=new _n,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(m,d,p){const x=m.length!==0||d||i!==0||r;return r=d,t=h(m,p,0),i=m.length,x},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,f()},this.setState=function(m,d,p){const x=m.clippingPlanes,_=m.clipIntersection,M=m.clipShadows,v=n.get(m);if(!r||x===null||x.length===0||s&&!M)s?h(null):f();else{const y=s?0:i,A=y*4;let w=v.clippingState||null;l.value=w,w=h(x,d,A,p);for(let T=0;T!==A;++T)w[T]=t[T];v.clippingState=w,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=y}};function f(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(m,d,p,x){const _=m!==null?m.length:0;let M=null;if(_!==0){if(M=l.value,x!==!0||M===null){const v=p+_*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(M===null||M.length<v)&&(M=new Float32Array(v));for(let A=0,w=p;A!==_;++A,w+=4)o.copy(m[A]).applyMatrix4(y,a),o.normal.toArray(M,w),M[w+3]=o.constant}l.value=M,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,M}}function V3(n){let e=new WeakMap;function t(o,a){return a===sc?o.mapping=Go:a===oc&&(o.mapping=Ho),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===sc||a===oc)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const f=n.getRenderTarget(),h=new Oh(l.height/2);return h.fromEquirectangularTexture(n,o),e.set(o,h),n.setRenderTarget(f),o.addEventListener("dispose",r),t(h.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class $o extends Ks{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}$o.prototype.isOrthographicCamera=!0;class Al extends di{constructor(e){super(e);this.type="RawShaderMaterial"}}Al.prototype.isRawShaderMaterial=!0;const Sl=4,Qs=8,Cr=Math.pow(2,Qs),HA=[.125,.215,.35,.446,.526,.582],zA=Qs-Sl+1+HA.length,El=20,Uh={[ui]:0,[Fi]:1},ny=new $o,{_lodPlanes:vc,_sizeLods:VA,_sigmas:Gh}=W3(),WA=new ye;let iy=null;const ea=(1+Math.sqrt(5))/2,Tl=1/ea,JA=[new P(1,1,1),new P(-1,1,1),new P(1,1,-1),new P(-1,1,-1),new P(0,ea,Tl),new P(0,ea,-Tl),new P(Tl,0,ea),new P(-Tl,0,ea),new P(ea,Tl,0),new P(-ea,Tl,0)];class jA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=J3(El),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){iy=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=QA(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=KA(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<vc.length;e++)vc[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(iy),e.scissorTest=!1,Hh(e,0,0,e.width,e.height)}_fromTexture(e){iy=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:xt,minFilter:xt,generateMipmaps:!1,type:es,format:qt,encoding:ui,depthBuffer:!1},i=XA(t);return i.depthBuffer=!e,this._pingPongRenderTarget=XA(t),i}_compileMaterial(e){const t=new $t(vc[0],e);this._renderer.compile(t,ny)}_sceneToCubeUV(e,t,i,r){const s=90,o=1,a=new cn(s,o,t,i),l=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,m=h.autoClear,d=h.toneMapping;h.getClearColor(WA),h.toneMapping=wr,h.autoClear=!1;const p=new fi({name:"PMREM.Background",side:Wt,depthWrite:!1,depthTest:!1}),x=new $t(new as,p);let _=!1;const M=e.background;M?M.isColor&&(p.color.copy(M),e.background=null,_=!0):(p.color.copy(WA),_=!0);for(let v=0;v<6;v++){const y=v%3;y==0?(a.up.set(0,l[v],0),a.lookAt(f[v],0,0)):y==1?(a.up.set(0,0,l[v]),a.lookAt(0,f[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,f[v])),Hh(r,y*Cr,v>2?Cr:0,Cr,Cr),h.setRenderTarget(r),_&&h.render(x,a),h.render(e,a)}x.geometry.dispose(),x.material.dispose(),h.toneMapping=d,h.autoClear=m,e.background=M}_setEncoding(e,t){this._renderer.capabilities.isWebGL2===!0&&t.format===qt&&t.type===xn&&t.encoding===Fi?e.value=Uh[ui]:e.value=Uh[t.encoding]}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Go||e.mapping===Ho;r?this._cubemapShader==null&&(this._cubemapShader=QA()):this._equirectShader==null&&(this._equirectShader=KA());const s=r?this._cubemapShader:this._equirectShader,o=new $t(vc[0],s),a=s.uniforms;a.envMap.value=e,r||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),Hh(t,0,0,3*Cr,2*Cr),i.setRenderTarget(t),i.render(o,ny)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<zA;r++){const s=Math.sqrt(Gh[r]*Gh[r]-Gh[r-1]*Gh[r-1]),o=JA[(r-1)%JA.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,m=new $t(vc[r],f),d=f.uniforms,p=VA[i]-1,x=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*El-1),_=s/x,M=isFinite(s)?1+Math.floor(h*_):El;M>El&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${El}`);const v=[];let y=0;for(let C=0;C<El;++C){const B=C/_,I=Math.exp(-B*B/2);v.push(I),C==0?y+=I:C<M&&(y+=2*I)}for(let C=0;C<v.length;C++)v[C]=v[C]/y;d.envMap.value=e.texture,d.samples.value=M,d.weights.value=v,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a),d.dTheta.value=x,d.mipInt.value=Qs-i;const A=VA[r],w=3*Math.max(0,Cr-2*A),T=(r===0?0:2*Cr)+2*A*(r>Qs-Sl?r-Qs+Sl:0);Hh(t,w,T,3*A,2*A),l.setRenderTarget(t),l.render(m,ny)}}function W3(){const n=[],e=[],t=[];let i=Qs;for(let r=0;r<zA;r++){const s=Math.pow(2,i);e.push(s);let o=1/s;r>Qs-Sl?o=HA[r-Qs+Sl-1]:r==0&&(o=0),t.push(o);const a=1/(s-1),l=-a/2,f=1+a/2,h=[l,l,f,l,f,f,l,l,f,f,l,f],m=6,d=6,p=3,x=2,_=1,M=new Float32Array(p*d*m),v=new Float32Array(x*d*m),y=new Float32Array(_*d*m);for(let w=0;w<m;w++){const T=w%3*2/3-1,C=w>2?0:-1,B=[T,C,0,T+2/3,C,0,T+2/3,C+1,0,T,C,0,T+2/3,C+1,0,T,C+1,0];M.set(B,p*d*w),v.set(h,x*d*w);const I=[w,w,w,w,w,w];y.set(I,_*d*w)}const A=new je;A.setAttribute("position",new lt(M,p)),A.setAttribute("uv",new lt(v,x)),A.setAttribute("faceIndex",new lt(y,_)),n.push(A),i>Sl&&i--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function XA(n){const e=new an(3*Cr,3*Cr,n);return e.texture.mapping=el,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Hh(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function J3(n){const e=new Float32Array(n),t=new P(0,1,0);return new Al({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:ry(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${sy()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:li,depthTest:!1,depthWrite:!1})}function KA(){const n=new ie(1,1);return new Al({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:Uh[ui]}},vertexShader:ry(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${sy()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

			}
		`,blending:li,depthTest:!1,depthWrite:!1})}function QA(){return new Al({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Uh[ui]}},vertexShader:ry(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${sy()}

			void main() {

				gl_FragColor = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) );

			}
		`,blending:li,depthTest:!1,depthWrite:!1})}function ry(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function sy(){return`

		uniform int inputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else {

				return sRGBToLinear( value );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function j3(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const l=a.mapping,f=l===sc||l===oc,h=l===Go||l===Ho;if(f||h){if(e.has(a))return e.get(a).texture;{const m=a.image;if(f&&m&&m.height>0||h&&m&&r(m)){const d=n.getRenderTarget();t===null&&(t=new jA(n));const p=f?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),n.setRenderTarget(d),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const f=6;for(let h=0;h<f;h++)a[h]!==void 0&&l++;return l===f}function s(a){const l=a.target;l.removeEventListener("dispose",s);const f=e.get(l);f!==void 0&&(e.delete(l),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function X3(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function K3(n,e,t,i){const r={},s=new WeakMap;function o(m){const d=m.target;d.index!==null&&e.remove(d.index);for(const x in d.attributes)e.remove(d.attributes[x]);d.removeEventListener("dispose",o),delete r[d.id];const p=s.get(d);p&&(e.remove(p),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(m,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d}function l(m){const d=m.attributes;for(const x in d)e.update(d[x],34962);const p=m.morphAttributes;for(const x in p){const _=p[x];for(let M=0,v=_.length;M<v;M++)e.update(_[M],34962)}}function f(m){const d=[],p=m.index,x=m.attributes.position;let _=0;if(p!==null){const y=p.array;_=p.version;for(let A=0,w=y.length;A<w;A+=3){const T=y[A+0],C=y[A+1],B=y[A+2];d.push(T,C,C,B,B,T)}}else{const y=x.array;_=x.version;for(let A=0,w=y.length/3-1;A<w;A+=3){const T=A+0,C=A+1,B=A+2;d.push(T,C,C,B,B,T)}}const M=new(vA(d)>65535?Ch:Th)(d,1);M.version=_;const v=s.get(m);v&&e.remove(v),s.set(m,M)}function h(m){const d=s.get(m);if(d){const p=m.index;p!==null&&d.version<p.version&&f(m)}else f(m);return s.get(m)}return{get:a,update:l,getWireframeAttribute:h}}function Q3(n,e,t,i){const r=i.isWebGL2;let s;function o(d){s=d}let a,l;function f(d){a=d.type,l=d.bytesPerElement}function h(d,p){n.drawElements(s,p,a,d*l),t.update(p,s,1)}function m(d,p,x){if(x===0)return;let _,M;if(r)_=n,M="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),M="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[M](s,p,a,d*l,x),t.update(p,s,x)}this.setMode=o,this.setIndex=f,this.render=h,this.renderInstances=m}function Y3(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}class zh extends Zt{constructor(e=null,t=1,i=1,r=1){super(null);this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ht,this.minFilter=Ht,this.wrapR=Cn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}zh.prototype.isDataTexture2DArray=!0;function q3(n,e){return n[0]-e[0]}function Z3(n,e){return Math.abs(e[1])-Math.abs(n[1])}function YA(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function $3(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new P,a=[];for(let f=0;f<8;f++)a[f]=[f,0];function l(f,h,m,d){const p=f.morphTargetInfluences;if(e.isWebGL2===!0){const x=h.morphAttributes.position.length;let _=s.get(h);if(_===void 0||_.count!==x){_!==void 0&&_.texture.dispose();const y=h.morphAttributes.normal!==void 0,A=h.morphAttributes.position,w=h.morphAttributes.normal||[],T=h.attributes.position.count,C=y===!0?2:1;let B=T*C,I=1;B>e.maxTextureSize&&(I=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const k=new Float32Array(B*I*4*x),G=new zh(k,B,I,x);G.format=qt,G.type=Sr,G.needsUpdate=!0;const O=C*4;for(let R=0;R<x;R++){const L=A[R],W=w[R],j=B*I*4*R;for(let J=0;J<L.count;J++){o.fromBufferAttribute(L,J),L.normalized===!0&&YA(o,L);const K=J*O;k[j+K+0]=o.x,k[j+K+1]=o.y,k[j+K+2]=o.z,k[j+K+3]=0,y===!0&&(o.fromBufferAttribute(W,J),W.normalized===!0&&YA(o,W),k[j+K+4]=o.x,k[j+K+5]=o.y,k[j+K+6]=o.z,k[j+K+7]=0)}}_={count:x,texture:G,size:new ie(B,I)},s.set(h,_)}let M=0;for(let y=0;y<p.length;y++)M+=p[y];const v=h.morphTargetsRelative?1:1-M;d.getUniforms().setValue(n,"morphTargetBaseInfluence",v),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const x=p===void 0?0:p.length;let _=i[h.id];if(_===void 0||_.length!==x){_=[];for(let w=0;w<x;w++)_[w]=[w,0];i[h.id]=_}for(let w=0;w<x;w++){const T=_[w];T[0]=w,T[1]=p[w]}_.sort(Z3);for(let w=0;w<8;w++)w<x&&_[w][1]?(a[w][0]=_[w][0],a[w][1]=_[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(q3);const M=h.morphAttributes.position,v=h.morphAttributes.normal;let y=0;for(let w=0;w<8;w++){const T=a[w],C=T[0],B=T[1];C!==Number.MAX_SAFE_INTEGER&&B?(M&&h.getAttribute("morphTarget"+w)!==M[C]&&h.setAttribute("morphTarget"+w,M[C]),v&&h.getAttribute("morphNormal"+w)!==v[C]&&h.setAttribute("morphNormal"+w,v[C]),r[w]=B,y+=B):(M&&h.hasAttribute("morphTarget"+w)===!0&&h.deleteAttribute("morphTarget"+w),v&&h.hasAttribute("morphNormal"+w)===!0&&h.deleteAttribute("morphNormal"+w),r[w]=0)}const A=h.morphTargetsRelative?1:1-y;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function eD(n,e,t,i){let r=new WeakMap;function s(l){const f=i.render.frame,h=l.geometry,m=e.get(l,h);return r.get(m)!==f&&(e.update(m),r.set(m,f)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),m}function o(){r=new WeakMap}function a(l){const f=l.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}class oy extends Zt{constructor(e=null,t=1,i=1,r=1){super(null);this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ht,this.minFilter=Ht,this.wrapR=Cn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}oy.prototype.isDataTexture3D=!0;const qA=new Zt,ZA=new zh,$A=new oy,eS=new Ml,tS=[],nS=[],iS=new Float32Array(16),rS=new Float32Array(9),sS=new Float32Array(4);function Cl(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=tS[r];if(s===void 0&&(s=new Float32Array(r),tS[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ei(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Xn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Vh(n,e){let t=nS[e];t===void 0&&(t=new Int32Array(e),nS[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function tD(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function nD(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ei(t,e))return;n.uniform2fv(this.addr,e),Xn(t,e)}}function iD(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ei(t,e))return;n.uniform3fv(this.addr,e),Xn(t,e)}}function rD(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ei(t,e))return;n.uniform4fv(this.addr,e),Xn(t,e)}}function sD(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ei(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Xn(t,e)}else{if(ei(t,i))return;sS.set(i),n.uniformMatrix2fv(this.addr,!1,sS),Xn(t,i)}}function oD(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ei(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Xn(t,e)}else{if(ei(t,i))return;rS.set(i),n.uniformMatrix3fv(this.addr,!1,rS),Xn(t,i)}}function aD(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ei(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Xn(t,e)}else{if(ei(t,i))return;iS.set(i),n.uniformMatrix4fv(this.addr,!1,iS),Xn(t,i)}}function lD(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function uD(n,e){const t=this.cache;ei(t,e)||(n.uniform2iv(this.addr,e),Xn(t,e))}function cD(n,e){const t=this.cache;ei(t,e)||(n.uniform3iv(this.addr,e),Xn(t,e))}function fD(n,e){const t=this.cache;ei(t,e)||(n.uniform4iv(this.addr,e),Xn(t,e))}function dD(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function hD(n,e){const t=this.cache;ei(t,e)||(n.uniform2uiv(this.addr,e),Xn(t,e))}function pD(n,e){const t=this.cache;ei(t,e)||(n.uniform3uiv(this.addr,e),Xn(t,e))}function mD(n,e){const t=this.cache;ei(t,e)||(n.uniform4uiv(this.addr,e),Xn(t,e))}function gD(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||qA,r)}function yD(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||$A,r)}function vD(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||eS,r)}function xD(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||ZA,r)}function _D(n){switch(n){case 5126:return tD;case 35664:return nD;case 35665:return iD;case 35666:return rD;case 35674:return sD;case 35675:return oD;case 35676:return aD;case 5124:case 35670:return lD;case 35667:case 35671:return uD;case 35668:case 35672:return cD;case 35669:case 35673:return fD;case 5125:return dD;case 36294:return hD;case 36295:return pD;case 36296:return mD;case 35678:case 36198:case 36298:case 36306:case 35682:return gD;case 35679:case 36299:case 36307:return yD;case 35680:case 36300:case 36308:case 36293:return vD;case 36289:case 36303:case 36311:case 36292:return xD}}function MD(n,e){n.uniform1fv(this.addr,e)}function wD(n,e){const t=Cl(e,this.size,2);n.uniform2fv(this.addr,t)}function AD(n,e){const t=Cl(e,this.size,3);n.uniform3fv(this.addr,t)}function SD(n,e){const t=Cl(e,this.size,4);n.uniform4fv(this.addr,t)}function ED(n,e){const t=Cl(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function TD(n,e){const t=Cl(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function CD(n,e){const t=Cl(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function bD(n,e){n.uniform1iv(this.addr,e)}function BD(n,e){n.uniform2iv(this.addr,e)}function RD(n,e){n.uniform3iv(this.addr,e)}function LD(n,e){n.uniform4iv(this.addr,e)}function PD(n,e){n.uniform1uiv(this.addr,e)}function ID(n,e){n.uniform2uiv(this.addr,e)}function DD(n,e){n.uniform3uiv(this.addr,e)}function FD(n,e){n.uniform4uiv(this.addr,e)}function ND(n,e,t){const i=e.length,r=Vh(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTexture2D(e[s]||qA,r[s])}function OD(n,e,t){const i=e.length,r=Vh(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||$A,r[s])}function kD(n,e,t){const i=e.length,r=Vh(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTextureCube(e[s]||eS,r[s])}function UD(n,e,t){const i=e.length,r=Vh(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||ZA,r[s])}function GD(n){switch(n){case 5126:return MD;case 35664:return wD;case 35665:return AD;case 35666:return SD;case 35674:return ED;case 35675:return TD;case 35676:return CD;case 5124:case 35670:return bD;case 35667:case 35671:return BD;case 35668:case 35672:return RD;case 35669:case 35673:return LD;case 5125:return PD;case 36294:return ID;case 36295:return DD;case 36296:return FD;case 35678:case 36198:case 36298:case 36306:case 35682:return ND;case 35679:case 36299:case 36307:return OD;case 35680:case 36300:case 36308:case 36293:return kD;case 36289:case 36303:case 36311:case 36292:return UD}}function HD(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=_D(e.type)}function oS(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=GD(e.type)}oS.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Xn(e,n)};function aS(n){this.id=n,this.seq=[],this.map={}}aS.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const ay=/(\w+)(\])?(\[|\.)?/g;function lS(n,e){n.seq.push(e),n.map[e.id]=e}function zD(n,e,t){const i=n.name,r=i.length;for(ay.lastIndex=0;;){const s=ay.exec(i),o=ay.lastIndex;let a=s[1];const l=s[2]==="]",f=s[3];if(l&&(a=a|0),f===void 0||f==="["&&o+2===r){lS(t,f===void 0?new HD(a,n,e):new oS(a,n,e));break}else{let m=t.map[a];m===void 0&&(m=new aS(a),lS(t,m)),t=m}}}function Ys(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i),s=n.getUniformLocation(e,r.name);zD(r,s,this)}}Ys.prototype.setValue=function(n,e,t,i){const r=this.map[e];r!==void 0&&r.setValue(n,t,i)};Ys.prototype.setOptional=function(n,e,t){const i=e[t];i!==void 0&&this.setValue(n,t,i)};Ys.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];a.needsUpdate!==!1&&o.setValue(n,a.value,i)}};Ys.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};function uS(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let VD=0;function WD(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function cS(n){switch(n){case ui:return["Linear","( value )"];case Fi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function fS(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();return i&&r===""?"":t.toUpperCase()+`

`+r+`

`+WD(n.getShaderSource(e))}function ta(n,e){const t=cS(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function JD(n,e){const t=cS(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function jD(n,e){let t;switch(e){case p1:t="Linear";break;case m1:t="Reinhard";break;case g1:t="OptimizedCineon";break;case g0:t="ACESFilmic";break;case y1:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function XD(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xc).join(`
`)}function KD(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function QD(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function xc(n){return n!==""}function dS(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function hS(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const YD=/^[ \t]*#include +<([\w\d./]+)>/gm;function ly(n){return n.replace(YD,qD)}function qD(n,e){const t=ft[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return ly(t)}const ZD=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,$D=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pS(n){return n.replace($D,mS).replace(ZD,eF)}function eF(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),mS(n,e,t,i)}function mS(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function gS(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function tF(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===o0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===a0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Za&&(e="SHADOWMAP_TYPE_VSM"),e}function nF(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Go:case Ho:e="ENVMAP_TYPE_CUBE";break;case el:case ac:e="ENVMAP_TYPE_CUBE_UV";break}return e}function iF(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Ho:case ac:e="ENVMAP_MODE_REFRACTION";break}return e}function rF(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case rc:e="ENVMAP_BLENDING_MULTIPLY";break;case d1:e="ENVMAP_BLENDING_MIX";break;case h1:e="ENVMAP_BLENDING_ADD";break}return e}function sF(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=tF(t),f=nF(t),h=iF(t),m=rF(t),d=t.isWebGL2?"":XD(t),p=KD(s),x=r.createProgram();let _,M,v=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=[p].filter(xc).join(`
`),_.length>0&&(_+=`
`),M=[d,p].filter(xc).join(`
`),M.length>0&&(M+=`
`)):(_=[gS(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(xc).join(`
`),M=[d,gS(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==wr?"#define TONE_MAPPING":"",t.toneMapping!==wr?ft.tonemapping_pars_fragment:"",t.toneMapping!==wr?jD("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===Jn?"#define OPAQUE":"",ft.encodings_pars_fragment,t.map?ta("mapTexelToLinear",t.mapEncoding):"",t.matcap?ta("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?ta("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?ta("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?ta("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?ta("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?ta("lightMapTexelToLinear",t.lightMapEncoding):"",JD("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(xc).join(`
`)),o=ly(o),o=dS(o,t),o=hS(o,t),a=ly(a),a=dS(a,t),a=hS(a,t),o=pS(o),a=pS(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,M=["#define varying in",t.glslVersion===L0?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===L0?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const y=v+_+o,A=v+M+a,w=uS(r,35633,y),T=uS(r,35632,A);if(r.attachShader(x,w),r.attachShader(x,T),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x),n.debug.checkShaderErrors){const I=r.getProgramInfoLog(x).trim(),k=r.getShaderInfoLog(w).trim(),G=r.getShaderInfoLog(T).trim();let O=!0,R=!0;if(r.getProgramParameter(x,35714)===!1){O=!1;const L=fS(r,w,"vertex"),W=fS(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,35715)+`

Program Info Log: `+I+`
`+L+`
`+W)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(k===""||G==="")&&(R=!1);R&&(this.diagnostics={runnable:O,programLog:I,vertexShader:{log:k,prefix:_},fragmentShader:{log:G,prefix:M}})}r.deleteShader(w),r.deleteShader(T);let C;this.getUniforms=function(){return C===void 0&&(C=new Ys(r,x)),C};let B;return this.getAttributes=function(){return B===void 0&&(B=QD(r,x)),B},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.name=t.shaderName,this.id=VD++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=w,this.fragmentShader=T,this}let oF=0;class aF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new lF;t.set(e,i)}return t.get(e)}}class lF{constructor(){this.id=oF++,this.usedTimes=0}}function uF(n,e,t,i,r,s,o){const a=new qo,l=new aF,f=[],h=r.isWebGL2,m=r.logarithmicDepthBuffer,d=r.floatVertexTextures,p=r.maxVertexUniforms,x=r.vertexTextures;let _=r.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(R){const W=R.skeleton.bones;if(d)return 1024;{const J=Math.floor((p-20)/4),K=Math.min(J,W.length);return K<W.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+W.length+" bones. This GPU supports "+K+"."),0):K}}function y(R){let L;return R&&R.isTexture?L=R.encoding:R&&R.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),L=R.texture.encoding):L=ui,h&&R&&R.isTexture&&R.format===qt&&R.type===xn&&R.encoding===Fi&&(L=ui),L}function A(R,L,W,j,J){const K=j.fog,de=R.isMeshStandardMaterial?j.environment:null,we=(R.isMeshStandardMaterial?t:e).get(R.envMap||de),$=M[R.type],H=J.isSkinnedMesh?v(J):0;R.precision!==null&&(_=r.getMaxPrecision(R.precision),_!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",_,"instead."));let q,ee,ce,Ie;if($){const De=rr[$];q=De.vertexShader,ee=De.fragmentShader}else q=R.vertexShader,ee=R.fragmentShader,l.update(R),ce=l.getVertexShaderID(R),Ie=l.getFragmentShaderID(R);const ae=n.getRenderTarget(),Ue=R.alphaTest>0,Be=R.clearcoat>0;return{isWebGL2:h,shaderID:$,shaderName:R.type,vertexShader:q,fragmentShader:ee,defines:R.defines,customVertexShaderID:ce,customFragmentShaderID:Ie,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:_,instancing:J.isInstancedMesh===!0,instancingColor:J.isInstancedMesh===!0&&J.instanceColor!==null,supportsVertexTextures:x,outputEncoding:ae!==null?y(ae.texture):n.outputEncoding,map:!!R.map,mapEncoding:y(R.map),matcap:!!R.matcap,matcapEncoding:y(R.matcap),envMap:!!we,envMapMode:we&&we.mapping,envMapEncoding:y(we),envMapCubeUV:!!we&&(we.mapping===el||we.mapping===ac),lightMap:!!R.lightMap,lightMapEncoding:y(R.lightMap),aoMap:!!R.aoMap,emissiveMap:!!R.emissiveMap,emissiveMapEncoding:y(R.emissiveMap),bumpMap:!!R.bumpMap,normalMap:!!R.normalMap,objectSpaceNormalMap:R.normalMapType===pA,tangentSpaceNormalMap:R.normalMapType===ks,clearcoat:Be,clearcoatMap:Be&&!!R.clearcoatMap,clearcoatRoughnessMap:Be&&!!R.clearcoatRoughnessMap,clearcoatNormalMap:Be&&!!R.clearcoatNormalMap,displacementMap:!!R.displacementMap,roughnessMap:!!R.roughnessMap,metalnessMap:!!R.metalnessMap,specularMap:!!R.specularMap,specularIntensityMap:!!R.specularIntensityMap,specularColorMap:!!R.specularColorMap,specularColorMapEncoding:y(R.specularColorMap),alphaMap:!!R.alphaMap,alphaTest:Ue,gradientMap:!!R.gradientMap,sheen:R.sheen>0,sheenColorMap:!!R.sheenColorMap,sheenColorMapEncoding:y(R.sheenColorMap),sheenRoughnessMap:!!R.sheenRoughnessMap,transmission:R.transmission>0,transmissionMap:!!R.transmissionMap,thicknessMap:!!R.thicknessMap,combine:R.combine,vertexTangents:!!R.normalMap&&!!J.geometry&&!!J.geometry.attributes.tangent,vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!J.geometry&&!!J.geometry.attributes.color&&J.geometry.attributes.color.itemSize===4,vertexUvs:!!R.map||!!R.bumpMap||!!R.normalMap||!!R.specularMap||!!R.alphaMap||!!R.emissiveMap||!!R.roughnessMap||!!R.metalnessMap||!!R.clearcoatMap||!!R.clearcoatRoughnessMap||!!R.clearcoatNormalMap||!!R.displacementMap||!!R.transmissionMap||!!R.thicknessMap||!!R.specularIntensityMap||!!R.specularColorMap||!!R.sheenColorMap||!!R.sheenRoughnessMap,uvsVertexOnly:!(!!R.map||!!R.bumpMap||!!R.normalMap||!!R.specularMap||!!R.alphaMap||!!R.emissiveMap||!!R.roughnessMap||!!R.metalnessMap||!!R.clearcoatNormalMap||R.transmission>0||!!R.transmissionMap||!!R.thicknessMap||!!R.specularIntensityMap||!!R.specularColorMap||R.sheen>0||!!R.sheenColorMap||!!R.sheenRoughnessMap)&&!!R.displacementMap,fog:!!K,useFog:R.fog,fogExp2:K&&K.isFogExp2,flatShading:!!R.flatShading,sizeAttenuation:R.sizeAttenuation,logarithmicDepthBuffer:m,skinning:J.isSkinnedMesh===!0&&H>0,maxBones:H,useVertexTexture:d,morphTargets:!!J.geometry&&!!J.geometry.morphAttributes.position,morphNormals:!!J.geometry&&!!J.geometry.morphAttributes.normal,morphTargetsCount:!!J.geometry&&!!J.geometry.morphAttributes.position?J.geometry.morphAttributes.position.length:0,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:R.format,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:R.toneMapped?n.toneMapping:wr,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Di,flipSided:R.side===Wt,depthPacking:R.depthPacking!==void 0?R.depthPacking:!1,index0AttributeName:R.index0AttributeName,extensionDerivatives:R.extensions&&R.extensions.derivatives,extensionFragDepth:R.extensions&&R.extensions.fragDepth,extensionDrawBuffers:R.extensions&&R.extensions.drawBuffers,extensionShaderTextureLOD:R.extensions&&R.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}}function w(R){const L=[];if(R.shaderID?L.push(R.shaderID):(L.push(R.customVertexShaderID),L.push(R.customFragmentShaderID)),R.defines!==void 0)for(const W in R.defines)L.push(W),L.push(R.defines[W]);return R.isRawShaderMaterial===!1&&(T(L,R),C(L,R),L.push(n.outputEncoding)),L.push(R.customProgramCacheKey),L.join()}function T(R,L){R.push(L.precision),R.push(L.outputEncoding),R.push(L.mapEncoding),R.push(L.matcapEncoding),R.push(L.envMapMode),R.push(L.envMapEncoding),R.push(L.lightMapEncoding),R.push(L.emissiveMapEncoding),R.push(L.combine),R.push(L.vertexUvs),R.push(L.fogExp2),R.push(L.sizeAttenuation),R.push(L.maxBones),R.push(L.morphTargetsCount),R.push(L.numDirLights),R.push(L.numPointLights),R.push(L.numSpotLights),R.push(L.numHemiLights),R.push(L.numRectAreaLights),R.push(L.numDirLightShadows),R.push(L.numPointLightShadows),R.push(L.numSpotLightShadows),R.push(L.shadowMapType),R.push(L.toneMapping),R.push(L.numClippingPlanes),R.push(L.numClipIntersection),R.push(L.format),R.push(L.specularColorMapEncoding),R.push(L.sheenColorMapEncoding)}function C(R,L){a.disableAll(),L.isWebGL2&&a.enable(0),L.supportsVertexTextures&&a.enable(1),L.instancing&&a.enable(2),L.instancingColor&&a.enable(3),L.map&&a.enable(4),L.matcap&&a.enable(5),L.envMap&&a.enable(6),L.envMapCubeUV&&a.enable(7),L.lightMap&&a.enable(8),L.aoMap&&a.enable(9),L.emissiveMap&&a.enable(10),L.bumpMap&&a.enable(11),L.normalMap&&a.enable(12),L.objectSpaceNormalMap&&a.enable(13),L.tangentSpaceNormalMap&&a.enable(14),L.clearcoat&&a.enable(15),L.clearcoatMap&&a.enable(16),L.clearcoatRoughnessMap&&a.enable(17),L.clearcoatNormalMap&&a.enable(18),L.displacementMap&&a.enable(19),L.specularMap&&a.enable(20),L.roughnessMap&&a.enable(21),L.metalnessMap&&a.enable(22),L.gradientMap&&a.enable(23),L.alphaMap&&a.enable(24),L.alphaTest&&a.enable(25),L.vertexColors&&a.enable(26),L.vertexAlphas&&a.enable(27),L.vertexUvs&&a.enable(28),L.vertexTangents&&a.enable(29),L.uvsVertexOnly&&a.enable(30),L.fog&&a.enable(31),R.push(a.mask),a.disableAll(),L.useFog&&a.enable(0),L.flatShading&&a.enable(1),L.logarithmicDepthBuffer&&a.enable(2),L.skinning&&a.enable(3),L.useVertexTexture&&a.enable(4),L.morphTargets&&a.enable(5),L.morphNormals&&a.enable(6),L.premultipliedAlpha&&a.enable(7),L.shadowMapEnabled&&a.enable(8),L.physicallyCorrectLights&&a.enable(9),L.doubleSided&&a.enable(10),L.flipSided&&a.enable(11),L.depthPacking&&a.enable(12),L.dithering&&a.enable(13),L.specularIntensityMap&&a.enable(14),L.specularColorMap&&a.enable(15),L.transmission&&a.enable(16),L.transmissionMap&&a.enable(17),L.thicknessMap&&a.enable(18),L.sheen&&a.enable(19),L.sheenColorMap&&a.enable(20),L.sheenRoughnessMap&&a.enable(21),R.push(a.mask)}function B(R){const L=M[R.type];let W;if(L){const j=rr[L];W=UA.clone(j.uniforms)}else W=R.uniforms;return W}function I(R,L){let W;for(let j=0,J=f.length;j<J;j++){const K=f[j];if(K.cacheKey===L){W=K,++W.usedTimes;break}}return W===void 0&&(W=new sF(n,L,R,s),f.push(W)),W}function k(R){if(--R.usedTimes==0){const L=f.indexOf(R);f[L]=f[f.length-1],f.pop(),R.destroy()}}function G(R){l.remove(R)}function O(){l.dispose()}return{getParameters:A,getProgramCacheKey:w,getUniforms:B,acquireProgram:I,releaseProgram:k,releaseShaderCache:G,programs:f,dispose:O}}function cF(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function fF(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function yS(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function vS(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(m,d,p,x,_,M){let v=n[e];return v===void 0?(v={id:m.id,object:m,geometry:d,material:p,groupOrder:x,renderOrder:m.renderOrder,z:_,group:M},n[e]=v):(v.id=m.id,v.object=m,v.geometry=d,v.material=p,v.groupOrder=x,v.renderOrder=m.renderOrder,v.z=_,v.group=M),e++,v}function a(m,d,p,x,_,M){const v=o(m,d,p,x,_,M);p.transmission>0?i.push(v):p.transparent===!0?r.push(v):t.push(v)}function l(m,d,p,x,_,M){const v=o(m,d,p,x,_,M);p.transmission>0?i.unshift(v):p.transparent===!0?r.unshift(v):t.unshift(v)}function f(m,d){t.length>1&&t.sort(m||fF),i.length>1&&i.sort(d||yS),r.length>1&&r.sort(d||yS)}function h(){for(let m=e,d=n.length;m<d;m++){const p=n[m];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:f}}function dF(){let n=new WeakMap;function e(i,r){let s;return n.has(i)===!1?(s=new vS,n.set(i,[s])):r>=n.get(i).length?(s=new vS,n.get(i).push(s)):s=n.get(i)[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function hF(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new P,color:new ye};break;case"SpotLight":t={position:new P,direction:new P,color:new ye,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new P,color:new ye,distance:0,decay:0};break;case"HemisphereLight":t={direction:new P,skyColor:new ye,groundColor:new ye};break;case"RectAreaLight":t={color:new ye,position:new P,halfWidth:new P,halfHeight:new P};break}return n[e.id]=t,t}}}function pF(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let mF=0;function gF(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function yF(n,e){const t=new hF,i=pF(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let h=0;h<9;h++)r.probe.push(new P);const s=new P,o=new Fe,a=new Fe;function l(h,m){let d=0,p=0,x=0;for(let k=0;k<9;k++)r.probe[k].set(0,0,0);let _=0,M=0,v=0,y=0,A=0,w=0,T=0,C=0;h.sort(gF);const B=m!==!0?Math.PI:1;for(let k=0,G=h.length;k<G;k++){const O=h[k],R=O.color,L=O.intensity,W=O.distance,j=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)d+=R.r*L*B,p+=R.g*L*B,x+=R.b*L*B;else if(O.isLightProbe)for(let J=0;J<9;J++)r.probe[J].addScaledVector(O.sh.coefficients[J],L);else if(O.isDirectionalLight){const J=t.get(O);if(J.color.copy(O.color).multiplyScalar(O.intensity*B),O.castShadow){const K=O.shadow,de=i.get(O);de.shadowBias=K.bias,de.shadowNormalBias=K.normalBias,de.shadowRadius=K.radius,de.shadowMapSize=K.mapSize,r.directionalShadow[_]=de,r.directionalShadowMap[_]=j,r.directionalShadowMatrix[_]=O.shadow.matrix,w++}r.directional[_]=J,_++}else if(O.isSpotLight){const J=t.get(O);if(J.position.setFromMatrixPosition(O.matrixWorld),J.color.copy(R).multiplyScalar(L*B),J.distance=W,J.coneCos=Math.cos(O.angle),J.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),J.decay=O.decay,O.castShadow){const K=O.shadow,de=i.get(O);de.shadowBias=K.bias,de.shadowNormalBias=K.normalBias,de.shadowRadius=K.radius,de.shadowMapSize=K.mapSize,r.spotShadow[v]=de,r.spotShadowMap[v]=j,r.spotShadowMatrix[v]=O.shadow.matrix,C++}r.spot[v]=J,v++}else if(O.isRectAreaLight){const J=t.get(O);J.color.copy(R).multiplyScalar(L),J.halfWidth.set(O.width*.5,0,0),J.halfHeight.set(0,O.height*.5,0),r.rectArea[y]=J,y++}else if(O.isPointLight){const J=t.get(O);if(J.color.copy(O.color).multiplyScalar(O.intensity*B),J.distance=O.distance,J.decay=O.decay,O.castShadow){const K=O.shadow,de=i.get(O);de.shadowBias=K.bias,de.shadowNormalBias=K.normalBias,de.shadowRadius=K.radius,de.shadowMapSize=K.mapSize,de.shadowCameraNear=K.camera.near,de.shadowCameraFar=K.camera.far,r.pointShadow[M]=de,r.pointShadowMap[M]=j,r.pointShadowMatrix[M]=O.shadow.matrix,T++}r.point[M]=J,M++}else if(O.isHemisphereLight){const J=t.get(O);J.skyColor.copy(O.color).multiplyScalar(L*B),J.groundColor.copy(O.groundColor).multiplyScalar(L*B),r.hemi[A]=J,A++}}y>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=be.LTC_FLOAT_1,r.rectAreaLTC2=be.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=be.LTC_HALF_1,r.rectAreaLTC2=be.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=p,r.ambient[2]=x;const I=r.hash;(I.directionalLength!==_||I.pointLength!==M||I.spotLength!==v||I.rectAreaLength!==y||I.hemiLength!==A||I.numDirectionalShadows!==w||I.numPointShadows!==T||I.numSpotShadows!==C)&&(r.directional.length=_,r.spot.length=v,r.rectArea.length=y,r.point.length=M,r.hemi.length=A,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=T,r.pointShadowMap.length=T,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=T,r.spotShadowMatrix.length=C,I.directionalLength=_,I.pointLength=M,I.spotLength=v,I.rectAreaLength=y,I.hemiLength=A,I.numDirectionalShadows=w,I.numPointShadows=T,I.numSpotShadows=C,r.version=mF++)}function f(h,m){let d=0,p=0,x=0,_=0,M=0;const v=m.matrixWorldInverse;for(let y=0,A=h.length;y<A;y++){const w=h[y];if(w.isDirectionalLight){const T=r.directional[d];T.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(v),d++}else if(w.isSpotLight){const T=r.spot[x];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(v),T.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(v),x++}else if(w.isRectAreaLight){const T=r.rectArea[_];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(v),a.identity(),o.copy(w.matrixWorld),o.premultiply(v),a.extractRotation(o),T.halfWidth.set(w.width*.5,0,0),T.halfHeight.set(0,w.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),_++}else if(w.isPointLight){const T=r.point[p];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(v),p++}else if(w.isHemisphereLight){const T=r.hemi[M];T.direction.setFromMatrixPosition(w.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),M++}}}return{setup:l,setupView:f,state:r}}function xS(n,e){const t=new yF(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(m){i.push(m)}function a(m){r.push(m)}function l(m){t.setup(i,m)}function f(m){t.setupView(i,m)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:f,pushLight:o,pushShadow:a}}function vF(n,e){let t=new WeakMap;function i(s,o=0){let a;return t.has(s)===!1?(a=new xS(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new xS(n,e),t.get(s).push(a)):a=t.get(s)[o],a}function r(){t=new WeakMap}return{get:i,dispose:r}}class Wh extends un{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=R0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Wh.prototype.isMeshDepthMaterial=!0;class Jh extends un{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new P,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Jh.prototype.isMeshDistanceMaterial=!0;const xF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,_F=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function _S(n,e,t){let i=new yc;const r=new ie,s=new ie,o=new Pt,a=new Wh({depthPacking:hA}),l=new Jh,f={},h=t.maxTextureSize,m={0:Wt,1:$r,2:Di},d=new di({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ie},radius:{value:4}},vertexShader:xF,fragmentShader:_F}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const x=new je;x.setAttribute("position",new lt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new $t(x,d),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=o0,this.render=function(w,T,C){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||w.length===0)return;const B=n.getRenderTarget(),I=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),G=n.state;G.setBlending(li),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);for(let O=0,R=w.length;O<R;O++){const L=w[O],W=L.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",L,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;r.copy(W.mapSize);const j=W.getFrameExtents();if(r.multiply(j),s.copy(W.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/j.x),r.x=s.x*j.x,W.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/j.y),r.y=s.y*j.y,W.mapSize.y=s.y)),W.map===null&&!W.isPointLightShadow&&this.type===Za){const K={minFilter:xt,magFilter:xt,format:qt};W.map=new an(r.x,r.y,K),W.map.texture.name=L.name+".shadowMap",W.mapPass=new an(r.x,r.y,K),W.camera.updateProjectionMatrix()}if(W.map===null){const K={minFilter:Ht,magFilter:Ht,format:qt};W.map=new an(r.x,r.y,K),W.map.texture.name=L.name+".shadowMap",W.camera.updateProjectionMatrix()}n.setRenderTarget(W.map),n.clear();const J=W.getViewportCount();for(let K=0;K<J;K++){const de=W.getViewport(K);o.set(s.x*de.x,s.y*de.y,s.x*de.z,s.y*de.w),G.viewport(o),W.updateMatrices(L,K),i=W.getFrustum(),A(T,C,W.camera,L,this.type)}!W.isPointLightShadow&&this.type===Za&&v(W,C),W.needsUpdate=!1}M.needsUpdate=!1,n.setRenderTarget(B,I,k)};function v(w,T){const C=e.update(_);d.defines.VSM_SAMPLES!==w.blurSamples&&(d.defines.VSM_SAMPLES=w.blurSamples,p.defines.VSM_SAMPLES=w.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),d.uniforms.shadow_pass.value=w.map.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(T,null,C,d,_,null),p.uniforms.shadow_pass.value=w.mapPass.texture,p.uniforms.resolution.value=w.mapSize,p.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(T,null,C,p,_,null)}function y(w,T,C,B,I,k,G){let O=null;const R=B.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(R!==void 0?O=R:O=B.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0){const L=O.uuid,W=C.uuid;let j=f[L];j===void 0&&(j={},f[L]=j);let J=j[W];J===void 0&&(J=O.clone(),j[W]=J),O=J}return O.visible=C.visible,O.wireframe=C.wireframe,G===Za?O.side=C.shadowSide!==null?C.shadowSide:C.side:O.side=C.shadowSide!==null?C.shadowSide:m[C.side],O.alphaMap=C.alphaMap,O.alphaTest=C.alphaTest,O.clipShadows=C.clipShadows,O.clippingPlanes=C.clippingPlanes,O.clipIntersection=C.clipIntersection,O.displacementMap=C.displacementMap,O.displacementScale=C.displacementScale,O.displacementBias=C.displacementBias,O.wireframeLinewidth=C.wireframeLinewidth,O.linewidth=C.linewidth,B.isPointLight===!0&&O.isMeshDistanceMaterial===!0&&(O.referencePosition.setFromMatrixPosition(B.matrixWorld),O.nearDistance=I,O.farDistance=k),O}function A(w,T,C,B,I){if(w.visible===!1)return;if(w.layers.test(T.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&I===Za)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,w.matrixWorld);const O=e.update(w),R=w.material;if(Array.isArray(R)){const L=O.groups;for(let W=0,j=L.length;W<j;W++){const J=L[W],K=R[J.materialIndex];if(K&&K.visible){const de=y(w,O,K,B,C.near,C.far,I);n.renderBufferDirect(C,null,O,de,w,J)}}}else if(R.visible){const L=y(w,O,R,B,C.near,C.far,I);n.renderBufferDirect(C,null,O,L,w,null)}}const G=w.children;for(let O=0,R=G.length;O<R;O++)A(G[O],T,C,B,I)}}function MF(n,e,t){const i=t.isWebGL2;function r(){let z=!1;const xe=new Pt;let ge=null;const Ye=new Pt(0,0,0,0);return{setMask:function(ke){ge!==ke&&!z&&(n.colorMask(ke,ke,ke,ke),ge=ke)},setLocked:function(ke){z=ke},setClear:function(ke,at,Ce,it,Mt){Mt===!0&&(ke*=it,at*=it,Ce*=it),xe.set(ke,at,Ce,it),Ye.equals(xe)===!1&&(n.clearColor(ke,at,Ce,it),Ye.copy(xe))},reset:function(){z=!1,ge=null,Ye.set(-1,0,0,0)}}}function s(){let z=!1,xe=null,ge=null,Ye=null;return{setTest:function(ke){ke?ee(2929):ce(2929)},setMask:function(ke){xe!==ke&&!z&&(n.depthMask(ke),xe=ke)},setFunc:function(ke){if(ge!==ke){if(ke)switch(ke){case s1:n.depthFunc(512);break;case o1:n.depthFunc(519);break;case a1:n.depthFunc(513);break;case uh:n.depthFunc(515);break;case l1:n.depthFunc(514);break;case u1:n.depthFunc(518);break;case c1:n.depthFunc(516);break;case f1:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);ge=ke}},setLocked:function(ke){z=ke},setClear:function(ke){Ye!==ke&&(n.clearDepth(ke),Ye=ke)},reset:function(){z=!1,xe=null,ge=null,Ye=null}}}function o(){let z=!1,xe=null,ge=null,Ye=null,ke=null,at=null,Ce=null,it=null,Mt=null;return{setTest:function(pt){z||(pt?ee(2960):ce(2960))},setMask:function(pt){xe!==pt&&!z&&(n.stencilMask(pt),xe=pt)},setFunc:function(pt,gn,En){(ge!==pt||Ye!==gn||ke!==En)&&(n.stencilFunc(pt,gn,En),ge=pt,Ye=gn,ke=En)},setOp:function(pt,gn,En){(at!==pt||Ce!==gn||it!==En)&&(n.stencilOp(pt,gn,En),at=pt,Ce=gn,it=En)},setLocked:function(pt){z=pt},setClear:function(pt){Mt!==pt&&(n.clearStencil(pt),Mt=pt)},reset:function(){z=!1,xe=null,ge=null,Ye=null,ke=null,at=null,Ce=null,it=null,Mt=null}}}const a=new r,l=new s,f=new o;let h={},m={},d=null,p=!1,x=null,_=null,M=null,v=null,y=null,A=null,w=null,T=!1,C=null,B=null,I=null,k=null,G=null;const O=n.getParameter(35661);let R=!1,L=0;const W=n.getParameter(7938);W.indexOf("WebGL")!==-1?(L=parseFloat(/^WebGL (\d)/.exec(W)[1]),R=L>=1):W.indexOf("OpenGL ES")!==-1&&(L=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),R=L>=2);let j=null,J={};const K=n.getParameter(3088),de=n.getParameter(2978),we=new Pt().fromArray(K),$=new Pt().fromArray(de);function H(z,xe,ge){const Ye=new Uint8Array(4),ke=n.createTexture();n.bindTexture(z,ke),n.texParameteri(z,10241,9728),n.texParameteri(z,10240,9728);for(let at=0;at<ge;at++)n.texImage2D(xe+at,0,6408,1,1,0,6408,5121,Ye);return ke}const q={};q[3553]=H(3553,3553,1),q[34067]=H(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),f.setClear(0),ee(2929),l.setFunc(uh),nt(!1),oe(s0),ee(2884),Ae(li);function ee(z){h[z]!==!0&&(n.enable(z),h[z]=!0)}function ce(z){h[z]!==!1&&(n.disable(z),h[z]=!1)}function Ie(z,xe){return m[z]!==xe?(n.bindFramebuffer(z,xe),m[z]=xe,i&&(z===36009&&(m[36160]=xe),z===36160&&(m[36009]=xe)),!0):!1}function ae(z){return d!==z?(n.useProgram(z),d=z,!0):!1}const Ue={[Uo]:32774,[Kw]:32778,[Qw]:32779};if(i)Ue[d0]=32775,Ue[h0]=32776;else{const z=e.get("EXT_blend_minmax");z!==null&&(Ue[d0]=z.MIN_EXT,Ue[h0]=z.MAX_EXT)}const Be={[Yw]:0,[qw]:1,[Zw]:768,[p0]:770,[r1]:776,[n1]:774,[e1]:772,[$w]:769,[m0]:771,[i1]:775,[t1]:773};function Ae(z,xe,ge,Ye,ke,at,Ce,it){if(z===li){p===!0&&(ce(3042),p=!1);return}if(p===!1&&(ee(3042),p=!0),z!==Xw){if(z!==x||it!==T){if((_!==Uo||y!==Uo)&&(n.blendEquation(32774),_=Uo,y=Uo),it)switch(z){case $a:n.blendFuncSeparate(1,771,1,771);break;case u0:n.blendFunc(1,1);break;case c0:n.blendFuncSeparate(0,0,769,771);break;case f0:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",z);break}else switch(z){case $a:n.blendFuncSeparate(770,771,1,771);break;case u0:n.blendFunc(770,1);break;case c0:n.blendFunc(0,769);break;case f0:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",z);break}M=null,v=null,A=null,w=null,x=z,T=it}return}ke=ke||xe,at=at||ge,Ce=Ce||Ye,(xe!==_||ke!==y)&&(n.blendEquationSeparate(Ue[xe],Ue[ke]),_=xe,y=ke),(ge!==M||Ye!==v||at!==A||Ce!==w)&&(n.blendFuncSeparate(Be[ge],Be[Ye],Be[at],Be[Ce]),M=ge,v=Ye,A=at,w=Ce),x=z,T=null}function De(z,xe){z.side===Di?ce(2884):ee(2884);let ge=z.side===Wt;xe&&(ge=!ge),nt(ge),z.blending===$a&&z.transparent===!1?Ae(li):Ae(z.blending,z.blendEquation,z.blendSrc,z.blendDst,z.blendEquationAlpha,z.blendSrcAlpha,z.blendDstAlpha,z.premultipliedAlpha),l.setFunc(z.depthFunc),l.setTest(z.depthTest),l.setMask(z.depthWrite),a.setMask(z.colorWrite);const Ye=z.stencilWrite;f.setTest(Ye),Ye&&(f.setMask(z.stencilWriteMask),f.setFunc(z.stencilFunc,z.stencilRef,z.stencilFuncMask),f.setOp(z.stencilFail,z.stencilZFail,z.stencilZPass)),pe(z.polygonOffset,z.polygonOffsetFactor,z.polygonOffsetUnits),z.alphaToCoverage===!0?ee(32926):ce(32926)}function nt(z){C!==z&&(z?n.frontFace(2304):n.frontFace(2305),C=z)}function oe(z){z!==Jw?(ee(2884),z!==B&&(z===s0?n.cullFace(1029):z===jw?n.cullFace(1028):n.cullFace(1032))):ce(2884),B=z}function fe(z){z!==I&&(R&&n.lineWidth(z),I=z)}function pe(z,xe,ge){z?(ee(32823),(k!==xe||G!==ge)&&(n.polygonOffset(xe,ge),k=xe,G=ge)):ce(32823)}function Re(z){z?ee(3089):ce(3089)}function ve(z){z===void 0&&(z=33984+O-1),j!==z&&(n.activeTexture(z),j=z)}function Ke(z,xe){j===null&&ve();let ge=J[j];ge===void 0&&(ge={type:void 0,texture:void 0},J[j]=ge),(ge.type!==z||ge.texture!==xe)&&(n.bindTexture(z,xe||q[z]),ge.type=z,ge.texture=xe)}function Qe(){const z=J[j];z!==void 0&&z.type!==void 0&&(n.bindTexture(z.type,null),z.type=void 0,z.texture=void 0)}function Ze(){try{n.compressedTexImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function Ct(){try{n.texSubImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function U(){try{n.texSubImage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function D(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function le(){try{n.texStorage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function me(){try{n.texStorage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function Se(){try{n.texImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function he(){try{n.texImage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function Ve(z){we.equals(z)===!1&&(n.scissor(z.x,z.y,z.z,z.w),we.copy(z))}function He(z){$.equals(z)===!1&&(n.viewport(z.x,z.y,z.z,z.w),$.copy(z))}function Me(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},j=null,J={},m={},d=null,p=!1,x=null,_=null,M=null,v=null,y=null,A=null,w=null,T=!1,C=null,B=null,I=null,k=null,G=null,we.set(0,0,n.canvas.width,n.canvas.height),$.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),f.reset()}return{buffers:{color:a,depth:l,stencil:f},enable:ee,disable:ce,bindFramebuffer:Ie,useProgram:ae,setBlending:Ae,setMaterial:De,setFlipSided:nt,setCullFace:oe,setLineWidth:fe,setPolygonOffset:pe,setScissorTest:Re,activeTexture:ve,bindTexture:Ke,unbindTexture:Qe,compressedTexImage2D:Ze,texImage2D:Se,texImage3D:he,texStorage2D:le,texStorage3D:me,texSubImage2D:Ct,texSubImage3D:U,compressedTexSubImage2D:D,scissor:Ve,viewport:He,reset:Me}}function wF(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,f=r.maxCubemapSize,h=r.maxTextureSize,m=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,x=new WeakMap;let _,M=!1;try{M=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(U,D){return M?new OffscreenCanvas(U,D):gh("canvas")}function y(U,D,le,me){let Se=1;if((U.width>me||U.height>me)&&(Se=me/Math.max(U.width,U.height)),Se<1||D===!0)if(typeof HTMLImageElement!="undefined"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&U instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&U instanceof ImageBitmap){const he=D?yA:Math.floor,Ve=he(Se*U.width),He=he(Se*U.height);_===void 0&&(_=v(Ve,He));const Me=le?v(Ve,He):_;return Me.width=Ve,Me.height=He,Me.getContext("2d").drawImage(U,0,0,Ve,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+Ve+"x"+He+")."),Me}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function A(U){return I0(U.width)&&I0(U.height)}function w(U){return a?!1:U.wrapS!==Cn||U.wrapT!==Cn||U.minFilter!==Ht&&U.minFilter!==xt}function T(U,D){return U.generateMipmaps&&D&&U.minFilter!==Ht&&U.minFilter!==xt}function C(U){n.generateMipmap(U)}function B(U,D,le,me){if(a===!1)return D;if(U!==null){if(n[U]!==void 0)return n[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let Se=D;return D===6403&&(le===5126&&(Se=33326),le===5131&&(Se=33325),le===5121&&(Se=33321)),D===6407&&(le===5126&&(Se=34837),le===5131&&(Se=34843),le===5121&&(Se=32849)),D===6408&&(le===5126&&(Se=34836),le===5131&&(Se=34842),le===5121&&(Se=me===Fi?35907:32856)),(Se===33325||Se===33326||Se===34842||Se===34836)&&e.get("EXT_color_buffer_float"),Se}function I(U,D,le){return T(U,le)===!0||U.isFramebufferTexture&&U.minFilter!==Ht&&U.minFilter!==xt?Math.log2(Math.max(D.width,D.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?D.mipmaps.length:1}function k(U){return U===Ht||U===lc||U===uc?9728:9729}function G(U){const D=U.target;D.removeEventListener("dispose",G),R(D),D.isVideoTexture&&x.delete(D),o.memory.textures--}function O(U){const D=U.target;D.removeEventListener("dispose",O),L(D)}function R(U){const D=i.get(U);D.__webglInit!==void 0&&(n.deleteTexture(D.__webglTexture),i.remove(U))}function L(U){const D=U.texture,le=i.get(U),me=i.get(D);if(!!U){if(me.__webglTexture!==void 0&&(n.deleteTexture(me.__webglTexture),o.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++)n.deleteFramebuffer(le.__webglFramebuffer[Se]),le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer[Se]);else n.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&n.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&n.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer&&n.deleteRenderbuffer(le.__webglColorRenderbuffer),le.__webglDepthRenderbuffer&&n.deleteRenderbuffer(le.__webglDepthRenderbuffer);if(U.isWebGLMultipleRenderTargets)for(let Se=0,he=D.length;Se<he;Se++){const Ve=i.get(D[Se]);Ve.__webglTexture&&(n.deleteTexture(Ve.__webglTexture),o.memory.textures--),i.remove(D[Se])}i.remove(D),i.remove(U)}}let W=0;function j(){W=0}function J(){const U=W;return U>=l&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+l),W+=1,U}function K(U,D){const le=i.get(U);if(U.isVideoTexture&&ve(U),U.version>0&&le.__version!==U.version){const me=U.image;if(me===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ie(le,U,D);return}}t.activeTexture(33984+D),t.bindTexture(3553,le.__webglTexture)}function de(U,D){const le=i.get(U);if(U.version>0&&le.__version!==U.version){Ie(le,U,D);return}t.activeTexture(33984+D),t.bindTexture(35866,le.__webglTexture)}function we(U,D){const le=i.get(U);if(U.version>0&&le.__version!==U.version){Ie(le,U,D);return}t.activeTexture(33984+D),t.bindTexture(32879,le.__webglTexture)}function $(U,D){const le=i.get(U);if(U.version>0&&le.__version!==U.version){ae(le,U,D);return}t.activeTexture(33984+D),t.bindTexture(34067,le.__webglTexture)}const H={[Ds]:10497,[Cn]:33071,[tl]:33648},q={[Ht]:9728,[lc]:9984,[uc]:9986,[xt]:9729,[fh]:9985,[Ar]:9987};function ee(U,D,le){if(le?(n.texParameteri(U,10242,H[D.wrapS]),n.texParameteri(U,10243,H[D.wrapT]),(U===32879||U===35866)&&n.texParameteri(U,32882,H[D.wrapR]),n.texParameteri(U,10240,q[D.magFilter]),n.texParameteri(U,10241,q[D.minFilter])):(n.texParameteri(U,10242,33071),n.texParameteri(U,10243,33071),(U===32879||U===35866)&&n.texParameteri(U,32882,33071),(D.wrapS!==Cn||D.wrapT!==Cn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(U,10240,k(D.magFilter)),n.texParameteri(U,10241,k(D.minFilter)),D.minFilter!==Ht&&D.minFilter!==xt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const me=e.get("EXT_texture_filter_anisotropic");if(D.type===Sr&&e.has("OES_texture_float_linear")===!1||a===!1&&D.type===es&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||i.get(D).__currentAnisotropy)&&(n.texParameterf(U,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy)}}function ce(U,D){U.__webglInit===void 0&&(U.__webglInit=!0,D.addEventListener("dispose",G),U.__webglTexture=n.createTexture(),o.memory.textures++)}function Ie(U,D,le){let me=3553;D.isDataTexture2DArray&&(me=35866),D.isDataTexture3D&&(me=32879),ce(U,D),t.activeTexture(33984+le),t.bindTexture(me,U.__webglTexture),n.pixelStorei(37440,D.flipY),n.pixelStorei(37441,D.premultiplyAlpha),n.pixelStorei(3317,D.unpackAlignment),n.pixelStorei(37443,0);const Se=w(D)&&A(D.image)===!1,he=y(D.image,Se,!1,h),Ve=A(he)||a,He=s.convert(D.format);let Me=s.convert(D.type),z=B(D.internalFormat,He,Me,D.encoding);ee(me,D,Ve);let xe;const ge=D.mipmaps,Ye=a&&D.isVideoTexture!==!0,ke=U.__version===void 0,at=I(D,he,Ve);if(D.isDepthTexture)z=6402,a?D.type===Sr?z=36012:D.type===il?z=33190:D.type===Fs?z=35056:z=33189:D.type===Sr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===Ns&&z===6402&&D.type!==nl&&D.type!==il&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=nl,Me=s.convert(D.type)),D.format===Os&&z===6402&&(z=34041,D.type!==Fs&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=Fs,Me=s.convert(D.type))),Ye&&ke?t.texStorage2D(3553,1,z,he.width,he.height):t.texImage2D(3553,0,z,he.width,he.height,0,He,Me,null);else if(D.isDataTexture)if(ge.length>0&&Ve){Ye&&ke&&t.texStorage2D(3553,at,z,ge[0].width,ge[0].height);for(let Ce=0,it=ge.length;Ce<it;Ce++)xe=ge[Ce],Ye?t.texSubImage2D(3553,0,0,0,xe.width,xe.height,He,Me,xe.data):t.texImage2D(3553,Ce,z,xe.width,xe.height,0,He,Me,xe.data);D.generateMipmaps=!1}else Ye?(ke&&t.texStorage2D(3553,at,z,he.width,he.height),t.texSubImage2D(3553,0,0,0,he.width,he.height,He,Me,he.data)):t.texImage2D(3553,0,z,he.width,he.height,0,He,Me,he.data);else if(D.isCompressedTexture){Ye&&ke&&t.texStorage2D(3553,at,z,ge[0].width,ge[0].height);for(let Ce=0,it=ge.length;Ce<it;Ce++)xe=ge[Ce],D.format!==qt&&D.format!==Jn?He!==null?Ye?t.compressedTexSubImage2D(3553,Ce,0,0,xe.width,xe.height,He,xe.data):t.compressedTexImage2D(3553,Ce,z,xe.width,xe.height,0,xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ye?t.texSubImage2D(3553,Ce,0,0,xe.width,xe.height,He,Me,xe.data):t.texImage2D(3553,Ce,z,xe.width,xe.height,0,He,Me,xe.data)}else if(D.isDataTexture2DArray)Ye?(ke&&t.texStorage3D(35866,at,z,he.width,he.height,he.depth),t.texSubImage3D(35866,0,0,0,0,he.width,he.height,he.depth,He,Me,he.data)):t.texImage3D(35866,0,z,he.width,he.height,he.depth,0,He,Me,he.data);else if(D.isDataTexture3D)Ye?(ke&&t.texStorage3D(32879,at,z,he.width,he.height,he.depth),t.texSubImage3D(32879,0,0,0,0,he.width,he.height,he.depth,He,Me,he.data)):t.texImage3D(32879,0,z,he.width,he.height,he.depth,0,He,Me,he.data);else if(D.isFramebufferTexture)Ye&&ke?t.texStorage2D(3553,at,z,he.width,he.height):t.texImage2D(3553,0,z,he.width,he.height,0,He,Me,null);else if(ge.length>0&&Ve){Ye&&ke&&t.texStorage2D(3553,at,z,ge[0].width,ge[0].height);for(let Ce=0,it=ge.length;Ce<it;Ce++)xe=ge[Ce],Ye?t.texSubImage2D(3553,Ce,0,0,He,Me,xe):t.texImage2D(3553,Ce,z,He,Me,xe);D.generateMipmaps=!1}else Ye?(ke&&t.texStorage2D(3553,at,z,he.width,he.height),t.texSubImage2D(3553,0,0,0,He,Me,he)):t.texImage2D(3553,0,z,He,Me,he);T(D,Ve)&&C(me),U.__version=D.version,D.onUpdate&&D.onUpdate(D)}function ae(U,D,le){if(D.image.length!==6)return;ce(U,D),t.activeTexture(33984+le),t.bindTexture(34067,U.__webglTexture),n.pixelStorei(37440,D.flipY),n.pixelStorei(37441,D.premultiplyAlpha),n.pixelStorei(3317,D.unpackAlignment),n.pixelStorei(37443,0);const me=D&&(D.isCompressedTexture||D.image[0].isCompressedTexture),Se=D.image[0]&&D.image[0].isDataTexture,he=[];for(let Ce=0;Ce<6;Ce++)!me&&!Se?he[Ce]=y(D.image[Ce],!1,!0,f):he[Ce]=Se?D.image[Ce].image:D.image[Ce];const Ve=he[0],He=A(Ve)||a,Me=s.convert(D.format),z=s.convert(D.type),xe=B(D.internalFormat,Me,z,D.encoding),ge=a&&D.isVideoTexture!==!0,Ye=U.__version===void 0;let ke=I(D,Ve,He);ee(34067,D,He);let at;if(me){ge&&Ye&&t.texStorage2D(34067,ke,xe,Ve.width,Ve.height);for(let Ce=0;Ce<6;Ce++){at=he[Ce].mipmaps;for(let it=0;it<at.length;it++){const Mt=at[it];D.format!==qt&&D.format!==Jn?Me!==null?ge?t.compressedTexSubImage2D(34069+Ce,it,0,0,Mt.width,Mt.height,Me,Mt.data):t.compressedTexImage2D(34069+Ce,it,xe,Mt.width,Mt.height,0,Mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ge?t.texSubImage2D(34069+Ce,it,0,0,Mt.width,Mt.height,Me,z,Mt.data):t.texImage2D(34069+Ce,it,xe,Mt.width,Mt.height,0,Me,z,Mt.data)}}}else{at=D.mipmaps,ge&&Ye&&(at.length>0&&ke++,t.texStorage2D(34067,ke,xe,he[0].width,he[0].height));for(let Ce=0;Ce<6;Ce++)if(Se){ge?t.texSubImage2D(34069+Ce,0,0,0,he[Ce].width,he[Ce].height,Me,z,he[Ce].data):t.texImage2D(34069+Ce,0,xe,he[Ce].width,he[Ce].height,0,Me,z,he[Ce].data);for(let it=0;it<at.length;it++){const pt=at[it].image[Ce].image;ge?t.texSubImage2D(34069+Ce,it+1,0,0,pt.width,pt.height,Me,z,pt.data):t.texImage2D(34069+Ce,it+1,xe,pt.width,pt.height,0,Me,z,pt.data)}}else{ge?t.texSubImage2D(34069+Ce,0,0,0,Me,z,he[Ce]):t.texImage2D(34069+Ce,0,xe,Me,z,he[Ce]);for(let it=0;it<at.length;it++){const Mt=at[it];ge?t.texSubImage2D(34069+Ce,it+1,0,0,Me,z,Mt.image[Ce]):t.texImage2D(34069+Ce,it+1,xe,Me,z,Mt.image[Ce])}}}T(D,He)&&C(34067),U.__version=D.version,D.onUpdate&&D.onUpdate(D)}function Ue(U,D,le,me,Se){const he=s.convert(le.format),Ve=s.convert(le.type),He=B(le.internalFormat,he,Ve,le.encoding);i.get(D).__hasExternalTextures||(Se===32879||Se===35866?t.texImage3D(Se,0,He,D.width,D.height,D.depth,0,he,Ve,null):t.texImage2D(Se,0,He,D.width,D.height,0,he,Ve,null)),t.bindFramebuffer(36160,U),D.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,me,Se,i.get(le).__webglTexture,0,Re(D)):n.framebufferTexture2D(36160,me,Se,i.get(le).__webglTexture,0),t.bindFramebuffer(36160,null)}function Be(U,D,le){if(n.bindRenderbuffer(36161,U),D.depthBuffer&&!D.stencilBuffer){let me=33189;if(le||D.useRenderToTexture){const Se=D.depthTexture;Se&&Se.isDepthTexture&&(Se.type===Sr?me=36012:Se.type===il&&(me=33190));const he=Re(D);D.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,he,me,D.width,D.height):n.renderbufferStorageMultisample(36161,he,me,D.width,D.height)}else n.renderbufferStorage(36161,me,D.width,D.height);n.framebufferRenderbuffer(36160,36096,36161,U)}else if(D.depthBuffer&&D.stencilBuffer){const me=Re(D);le&&D.useRenderbuffer?n.renderbufferStorageMultisample(36161,me,35056,D.width,D.height):D.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,me,35056,D.width,D.height):n.renderbufferStorage(36161,34041,D.width,D.height),n.framebufferRenderbuffer(36160,33306,36161,U)}else{const me=D.isWebGLMultipleRenderTargets===!0?D.texture[0]:D.texture,Se=s.convert(me.format),he=s.convert(me.type),Ve=B(me.internalFormat,Se,he,me.encoding),He=Re(D);le&&D.useRenderbuffer?n.renderbufferStorageMultisample(36161,He,Ve,D.width,D.height):D.useRenderToTexture?p.renderbufferStorageMultisampleEXT(36161,He,Ve,D.width,D.height):n.renderbufferStorage(36161,Ve,D.width,D.height)}n.bindRenderbuffer(36161,null)}function Ae(U,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,U),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),K(D.depthTexture,0);const me=i.get(D.depthTexture).__webglTexture,Se=Re(D);if(D.depthTexture.format===Ns)D.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,me,0,Se):n.framebufferTexture2D(36160,36096,3553,me,0);else if(D.depthTexture.format===Os)D.useRenderToTexture?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,me,0,Se):n.framebufferTexture2D(36160,33306,3553,me,0);else throw new Error("Unknown depthTexture format")}function De(U){const D=i.get(U),le=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!D.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");Ae(D.__webglFramebuffer,U)}else if(le){D.__webglDepthbuffer=[];for(let me=0;me<6;me++)t.bindFramebuffer(36160,D.__webglFramebuffer[me]),D.__webglDepthbuffer[me]=n.createRenderbuffer(),Be(D.__webglDepthbuffer[me],U,!1)}else t.bindFramebuffer(36160,D.__webglFramebuffer),D.__webglDepthbuffer=n.createRenderbuffer(),Be(D.__webglDepthbuffer,U,!1);t.bindFramebuffer(36160,null)}function nt(U,D,le){const me=i.get(U);D!==void 0&&Ue(me.__webglFramebuffer,U,U.texture,36064,3553),le!==void 0&&De(U)}function oe(U){const D=U.texture,le=i.get(U),me=i.get(D);U.addEventListener("dispose",O),U.isWebGLMultipleRenderTargets!==!0&&(me.__webglTexture===void 0&&(me.__webglTexture=n.createTexture()),me.__version=D.version,o.memory.textures++);const Se=U.isWebGLCubeRenderTarget===!0,he=U.isWebGLMultipleRenderTargets===!0,Ve=D.isDataTexture3D||D.isDataTexture2DArray,He=A(U)||a;if(a&&D.format===Jn&&(D.type===Sr||D.type===es)&&(D.format=qt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Se){le.__webglFramebuffer=[];for(let Me=0;Me<6;Me++)le.__webglFramebuffer[Me]=n.createFramebuffer()}else if(le.__webglFramebuffer=n.createFramebuffer(),he)if(r.drawBuffers){const Me=U.texture;for(let z=0,xe=Me.length;z<xe;z++){const ge=i.get(Me[z]);ge.__webglTexture===void 0&&(ge.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(U.useRenderbuffer)if(a){le.__webglMultisampledFramebuffer=n.createFramebuffer(),le.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,le.__webglColorRenderbuffer);const Me=s.convert(D.format),z=s.convert(D.type),xe=B(D.internalFormat,Me,z,D.encoding),ge=Re(U);n.renderbufferStorageMultisample(36161,ge,xe,U.width,U.height),t.bindFramebuffer(36160,le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,le.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),U.depthBuffer&&(le.__webglDepthRenderbuffer=n.createRenderbuffer(),Be(le.__webglDepthRenderbuffer,U,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Se){t.bindTexture(34067,me.__webglTexture),ee(34067,D,He);for(let Me=0;Me<6;Me++)Ue(le.__webglFramebuffer[Me],U,D,36064,34069+Me);T(D,He)&&C(34067),t.unbindTexture()}else if(he){const Me=U.texture;for(let z=0,xe=Me.length;z<xe;z++){const ge=Me[z],Ye=i.get(ge);t.bindTexture(3553,Ye.__webglTexture),ee(3553,ge,He),Ue(le.__webglFramebuffer,U,ge,36064+z,3553),T(ge,He)&&C(3553)}t.unbindTexture()}else{let Me=3553;Ve&&(a?Me=D.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(Me,me.__webglTexture),ee(Me,D,He),Ue(le.__webglFramebuffer,U,D,36064,Me),T(D,He)&&C(Me),t.unbindTexture()}U.depthBuffer&&De(U)}function fe(U){const D=A(U)||a,le=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let me=0,Se=le.length;me<Se;me++){const he=le[me];if(T(he,D)){const Ve=U.isWebGLCubeRenderTarget?34067:3553,He=i.get(he).__webglTexture;t.bindTexture(Ve,He),C(Ve),t.unbindTexture()}}}function pe(U){if(U.useRenderbuffer)if(a){const D=U.width,le=U.height;let me=16384;const Se=[36064],he=U.stencilBuffer?33306:36096;U.depthBuffer&&Se.push(he),U.ignoreDepthForMultisampleCopy||(U.depthBuffer&&(me|=256),U.stencilBuffer&&(me|=1024));const Ve=i.get(U);t.bindFramebuffer(36008,Ve.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ve.__webglFramebuffer),U.ignoreDepthForMultisampleCopy&&(n.invalidateFramebuffer(36008,[he]),n.invalidateFramebuffer(36009,[he])),n.blitFramebuffer(0,0,D,le,0,0,D,le,me,9728),n.invalidateFramebuffer(36008,Se),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,Ve.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Re(U){return a&&(U.useRenderbuffer||U.useRenderToTexture)?Math.min(m,U.samples):0}function ve(U){const D=o.render.frame;x.get(U)!==D&&(x.set(U,D),U.update())}let Ke=!1,Qe=!1;function Ze(U,D){U&&U.isWebGLRenderTarget&&(Ke===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Ke=!0),U=U.texture),K(U,D)}function Ct(U,D){U&&U.isWebGLCubeRenderTarget&&(Qe===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Qe=!0),U=U.texture),$(U,D)}this.allocateTextureUnit=J,this.resetTextureUnits=j,this.setTexture2D=K,this.setTexture2DArray=de,this.setTexture3D=we,this.setTextureCube=$,this.rebindTextures=nt,this.setupRenderTarget=oe,this.updateRenderTargetMipmap=fe,this.updateMultisampleRenderTarget=pe,this.setupDepthRenderbuffer=De,this.setupFrameBufferTexture=Ue,this.safeSetTexture2D=Ze,this.safeSetTextureCube=Ct}function MS(n,e,t){const i=t.isWebGL2;function r(s){let o;if(s===xn)return 5121;if(s===M1)return 32819;if(s===w1)return 32820;if(s===A1)return 33635;if(s===v1)return 5120;if(s===x1)return 5122;if(s===nl)return 5123;if(s===_1)return 5124;if(s===il)return 5125;if(s===Sr)return 5126;if(s===es)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===S1)return 6406;if(s===Jn)return 6407;if(s===qt)return 6408;if(s===y0)return 6409;if(s===E1)return 6410;if(s===Ns)return 6402;if(s===Os)return 34041;if(s===T1)return 6403;if(s===C1)return 36244;if(s===b1)return 33319;if(s===B1)return 33320;if(s===R1)return 36248;if(s===L1)return 36249;if(s===v0||s===x0||s===_0||s===M0)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===v0)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===x0)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===_0)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===M0)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===w0||s===A0||s===S0||s===E0)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===w0)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===A0)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===S0)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===E0)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===P1)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===T0||s===C0)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===T0)return o.COMPRESSED_RGB8_ETC2;if(s===C0)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===I1||s===D1||s===F1||s===N1||s===O1||s===k1||s===U1||s===G1||s===H1||s===z1||s===V1||s===W1||s===J1||s===j1||s===K1||s===Q1||s===Y1||s===q1||s===Z1||s===$1||s===eA||s===tA||s===nA||s===iA||s===rA||s===sA||s===oA||s===aA)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===X1)return o=e.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===Fs)return i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}class uy extends cn{constructor(e=[]){super();this.cameras=e}}uy.prototype.isArrayCamera=!0;class sr extends ht{constructor(){super();this.type="Group"}}sr.prototype.isGroup=!0;const AF={type:"move"};class cy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new sr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new sr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new P,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new P),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new sr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new P,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new P),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(a!==null&&(r=t.getPose(e.targetRaySpace,i),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(AF))),f&&e.hand){o=!0;for(const _ of e.hand.values()){const M=t.getJointPose(_,i);if(f.joints[_.jointName]===void 0){const y=new sr;y.matrixAutoUpdate=!1,y.visible=!1,f.joints[_.jointName]=y,f.add(y)}const v=f.joints[_.jointName];M!==null&&(v.matrix.fromArray(M.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=M.radius),v.visible=M!==null}const h=f.joints["index-finger-tip"],m=f.joints["thumb-tip"],d=h.position.distanceTo(m.position),p=.02,x=.005;f.inputState.pinching&&d>p+x?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&d<=p-x&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),f!==null&&(f.visible=o!==null),this}}class _c extends Zt{constructor(e,t,i,r,s,o,a,l,f,h){if(h=h!==void 0?h:Ns,h!==Ns&&h!==Os)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Ns&&(i=nl),i===void 0&&h===Os&&(i=Fs);super(null,r,s,o,a,l,h,i,f);this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ht,this.minFilter=l!==void 0?l:Ht,this.flipY=!1,this.generateMipmaps=!1}}_c.prototype.isDepthTexture=!0;class SF extends Er{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor";const l=e.extensions.has("WEBGL_multisampled_render_to_texture");let f=null,h=null,m=null,d=null,p=!1,x=null;const _=t.getContextAttributes();let M=null,v=null;const y=[],A=new Map,w=new cn;w.layers.enable(1),w.viewport=new Pt;const T=new cn;T.layers.enable(2),T.viewport=new Pt;const C=[w,T],B=new uy;B.layers.enable(1),B.layers.enable(2);let I=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($){let H=y[$];return H===void 0&&(H=new cy,y[$]=H),H.getTargetRaySpace()},this.getControllerGrip=function($){let H=y[$];return H===void 0&&(H=new cy,y[$]=H),H.getGripSpace()},this.getHand=function($){let H=y[$];return H===void 0&&(H=new cy,y[$]=H),H.getHandSpace()};function G($){const H=A.get($.inputSource);H&&H.dispatchEvent({type:$.type,data:$.inputSource})}function O(){A.forEach(function($,H){$.disconnect(H)}),A.clear(),I=null,k=null,e.setRenderTarget(M),d=null,m=null,h=null,r=null,v=null,we.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function($){s=$,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){a=$,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return m!==null?m:d},this.getBinding=function(){return h},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function($){if(r=$,r!==null){if(M=e.getRenderTarget(),r.addEventListener("select",G),r.addEventListener("selectstart",G),r.addEventListener("selectend",G),r.addEventListener("squeeze",G),r.addEventListener("squeezestart",G),r.addEventListener("squeezeend",G),r.addEventListener("end",O),r.addEventListener("inputsourceschange",R),_.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const H={antialias:r.renderState.layers===void 0?_.antialias:!0,alpha:_.alpha,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,H),r.updateRenderState({baseLayer:d}),v=new an(d.framebufferWidth,d.framebufferHeight,{format:qt,type:xn,encoding:e.outputEncoding})}else{p=_.antialias;let H=null,q=null,ee=null;_.depth&&(ee=_.stencil?35056:33190,H=_.stencil?Os:Ns,q=_.stencil?Fs:nl);const ce={colorFormat:_.alpha||p?32856:32849,depthFormat:ee,scaleFactor:s};h=new XRWebGLBinding(r,t),m=h.createProjectionLayer(ce),r.updateRenderState({layers:[m]}),p?v=new ll(m.textureWidth,m.textureHeight,{format:qt,type:xn,depthTexture:new _c(m.textureWidth,m.textureHeight,q,void 0,void 0,void 0,void 0,void 0,void 0,H),stencilBuffer:_.stencil,ignoreDepth:m.ignoreDepthValues,useRenderToTexture:l,encoding:e.outputEncoding}):v=new an(m.textureWidth,m.textureHeight,{format:_.alpha?qt:Jn,type:xn,depthTexture:new _c(m.textureWidth,m.textureHeight,q,void 0,void 0,void 0,void 0,void 0,void 0,H),stencilBuffer:_.stencil,ignoreDepth:m.ignoreDepthValues,encoding:e.outputEncoding})}this.setFoveation(1),o=await r.requestReferenceSpace(a),we.setContext(r),we.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function R($){const H=r.inputSources;for(let q=0;q<y.length;q++)A.set(H[q],y[q]);for(let q=0;q<$.removed.length;q++){const ee=$.removed[q],ce=A.get(ee);ce&&(ce.dispatchEvent({type:"disconnected",data:ee}),A.delete(ee))}for(let q=0;q<$.added.length;q++){const ee=$.added[q],ce=A.get(ee);ce&&ce.dispatchEvent({type:"connected",data:ee})}}const L=new P,W=new P;function j($,H,q){L.setFromMatrixPosition(H.matrixWorld),W.setFromMatrixPosition(q.matrixWorld);const ee=L.distanceTo(W),ce=H.projectionMatrix.elements,Ie=q.projectionMatrix.elements,ae=ce[14]/(ce[10]-1),Ue=ce[14]/(ce[10]+1),Be=(ce[9]+1)/ce[5],Ae=(ce[9]-1)/ce[5],De=(ce[8]-1)/ce[0],nt=(Ie[8]+1)/Ie[0],oe=ae*De,fe=ae*nt,pe=ee/(-De+nt),Re=pe*-De;H.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(Re),$.translateZ(pe),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert();const ve=ae+pe,Ke=Ue+pe,Qe=oe-Re,Ze=fe+(ee-Re),Ct=Be*Ue/Ke*ve,U=Ae*Ue/Ke*ve;$.projectionMatrix.makePerspective(Qe,Ze,Ct,U,ve,Ke)}function J($,H){H===null?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(H.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}this.updateCamera=function($){if(r===null)return;B.near=T.near=w.near=$.near,B.far=T.far=w.far=$.far,(I!==B.near||k!==B.far)&&(r.updateRenderState({depthNear:B.near,depthFar:B.far}),I=B.near,k=B.far);const H=$.parent,q=B.cameras;J(B,H);for(let ce=0;ce<q.length;ce++)J(q[ce],H);B.matrixWorld.decompose(B.position,B.quaternion,B.scale),$.position.copy(B.position),$.quaternion.copy(B.quaternion),$.scale.copy(B.scale),$.matrix.copy(B.matrix),$.matrixWorld.copy(B.matrixWorld);const ee=$.children;for(let ce=0,Ie=ee.length;ce<Ie;ce++)ee[ce].updateMatrixWorld(!0);q.length===2?j(B,w,T):B.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return B},this.getFoveation=function(){if(m!==null)return m.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function($){m!==null&&(m.fixedFoveation=$),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=$)};let K=null;function de($,H){if(f=H.getViewerPose(o),x=H,f!==null){const ee=f.views;d!==null&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let ce=!1;ee.length!==B.cameras.length&&(B.cameras.length=0,ce=!0);for(let Ie=0;Ie<ee.length;Ie++){const ae=ee[Ie];let Ue=null;if(d!==null)Ue=d.getViewport(ae);else{const Ae=h.getViewSubImage(m,ae);Ue=Ae.viewport,Ie===0&&(e.setRenderTargetTextures(v,Ae.colorTexture,m.ignoreDepthValues?void 0:Ae.depthStencilTexture),e.setRenderTarget(v))}const Be=C[Ie];Be.matrix.fromArray(ae.transform.matrix),Be.projectionMatrix.fromArray(ae.projectionMatrix),Be.viewport.set(Ue.x,Ue.y,Ue.width,Ue.height),Ie===0&&B.matrix.copy(Be.matrix),ce===!0&&B.cameras.push(Be)}}const q=r.inputSources;for(let ee=0;ee<y.length;ee++){const ce=y[ee],Ie=q[ee];ce.update(Ie,H,o)}K&&K($,H),x=null}const we=new GA;we.setAnimationLoop(de),this.setAnimationLoop=function($){K=$},this.dispose=function(){}}}function EF(n){function e(v,y){v.fogColor.value.copy(y.color),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)}function t(v,y,A,w,T){y.isMeshBasicMaterial?i(v,y):y.isMeshLambertMaterial?(i(v,y),l(v,y)):y.isMeshToonMaterial?(i(v,y),h(v,y)):y.isMeshPhongMaterial?(i(v,y),f(v,y)):y.isMeshStandardMaterial?(i(v,y),y.isMeshPhysicalMaterial?d(v,y,T):m(v,y)):y.isMeshMatcapMaterial?(i(v,y),p(v,y)):y.isMeshDepthMaterial?(i(v,y),x(v,y)):y.isMeshDistanceMaterial?(i(v,y),_(v,y)):y.isMeshNormalMaterial?(i(v,y),M(v,y)):y.isLineBasicMaterial?(r(v,y),y.isLineDashedMaterial&&s(v,y)):y.isPointsMaterial?o(v,y,A,w):y.isSpriteMaterial?a(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function i(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.specularMap&&(v.specularMap.value=y.specularMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const A=n.get(y).envMap;A&&(v.envMap.value=A,v.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap&&(v.lightMap.value=y.lightMap,v.lightMapIntensity.value=y.lightMapIntensity),y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity);let w;y.map?w=y.map:y.specularMap?w=y.specularMap:y.displacementMap?w=y.displacementMap:y.normalMap?w=y.normalMap:y.bumpMap?w=y.bumpMap:y.roughnessMap?w=y.roughnessMap:y.metalnessMap?w=y.metalnessMap:y.alphaMap?w=y.alphaMap:y.emissiveMap?w=y.emissiveMap:y.clearcoatMap?w=y.clearcoatMap:y.clearcoatNormalMap?w=y.clearcoatNormalMap:y.clearcoatRoughnessMap?w=y.clearcoatRoughnessMap:y.specularIntensityMap?w=y.specularIntensityMap:y.specularColorMap?w=y.specularColorMap:y.transmissionMap?w=y.transmissionMap:y.thicknessMap?w=y.thicknessMap:y.sheenColorMap?w=y.sheenColorMap:y.sheenRoughnessMap&&(w=y.sheenRoughnessMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),v.uvTransform.value.copy(w.matrix));let T;y.aoMap?T=y.aoMap:y.lightMap&&(T=y.lightMap),T!==void 0&&(T.isWebGLRenderTarget&&(T=T.texture),T.matrixAutoUpdate===!0&&T.updateMatrix(),v.uv2Transform.value.copy(T.matrix))}function r(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity}function s(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}function o(v,y,A,w){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*A,v.scale.value=w*.5,y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);let T;y.map?T=y.map:y.alphaMap&&(T=y.alphaMap),T!==void 0&&(T.matrixAutoUpdate===!0&&T.updateMatrix(),v.uvTransform.value.copy(T.matrix))}function a(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);let A;y.map?A=y.map:y.alphaMap&&(A=y.alphaMap),A!==void 0&&(A.matrixAutoUpdate===!0&&A.updateMatrix(),v.uvTransform.value.copy(A.matrix))}function l(v,y){y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap)}function f(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap),y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===Wt&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===Wt&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)}function h(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap),y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===Wt&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===Wt&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)}function m(v,y){v.roughness.value=y.roughness,v.metalness.value=y.metalness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap),y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===Wt&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===Wt&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),n.get(y).envMap&&(v.envMapIntensity.value=y.envMapIntensity)}function d(v,y,A){m(v,y),v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap)),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),v.clearcoatNormalMap.value=y.clearcoatNormalMap,y.side===Wt&&v.clearcoatNormalScale.value.negate())),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=A.texture,v.transmissionSamplerSize.value.set(A.width,A.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap)}function p(v,y){y.matcap&&(v.matcap.value=y.matcap),y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===Wt&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===Wt&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)}function x(v,y){y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)}function _(v,y){y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),v.referencePosition.value.copy(y.referencePosition),v.nearDistance.value=y.nearDistance,v.farDistance.value=y.farDistance}function M(v,y){y.bumpMap&&(v.bumpMap.value=y.bumpMap,v.bumpScale.value=y.bumpScale,y.side===Wt&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,v.normalScale.value.copy(y.normalScale),y.side===Wt&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function TF(){const n=gh("canvas");return n.style.display="block",n}function Rt(n={}){const e=n.canvas!==void 0?n.canvas:TF(),t=n.context!==void 0?n.context:null,i=n.alpha!==void 0?n.alpha:!1,r=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,l=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,f=n.powerPreference!==void 0?n.powerPreference:"default",h=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let m=null,d=null;const p=[],x=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ui,this.physicallyCorrectLights=!1,this.toneMapping=wr,this.toneMappingExposure=1;const _=this;let M=!1,v=0,y=0,A=null,w=-1,T=null;const C=new Pt,B=new Pt;let I=null,k=e.width,G=e.height,O=1,R=null,L=null;const W=new Pt(0,0,k,G),j=new Pt(0,0,k,G);let J=!1;const K=[],de=new yc;let we=!1,$=!1,H=null;const q=new Fe,ee=new P,ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ie(){return A===null?O:1}let ae=t;function Ue(F,Y){for(let te=0;te<F.length;te++){const Z=F[te],ue=e.getContext(Z,Y);if(ue!==null)return ue}return null}try{const F={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${lh}`),e.addEventListener("webglcontextlost",Ye,!1),e.addEventListener("webglcontextrestored",ke,!1),ae===null){const Y=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&Y.shift(),ae=Ue(Y,F),ae===null)throw Ue(Y)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ae.getShaderPrecisionFormat===void 0&&(ae.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}let Be,Ae,De,nt,oe,fe,pe,Re,ve,Ke,Qe,Ze,Ct,U,D,le,me,Se,he,Ve,He,Me,z;function xe(){Be=new X3(ae),Ae=new H3(ae,Be,n),Be.init(Ae),Me=new MS(ae,Be,Ae),De=new MF(ae,Be,Ae),K[0]=1029,nt=new Y3(ae),oe=new cF,fe=new wF(ae,Be,De,oe,Ae,Me,nt),pe=new V3(_),Re=new j3(_),ve=new f2(ae,Ae),z=new U3(ae,Be,ve,Ae),Ke=new K3(ae,ve,nt,z),Qe=new eD(ae,Ke,ve,nt),he=new $3(ae,Ae,fe),le=new z3(oe),Ze=new uF(_,pe,Re,Be,Ae,z,le),Ct=new EF(oe),U=new dF,D=new vF(Be,Ae),Se=new k3(_,pe,De,Qe,a),me=new _S(_,Qe,Ae),Ve=new G3(ae,Be,nt,Ae),He=new Q3(ae,Be,nt,Ae),nt.programs=Ze.programs,_.capabilities=Ae,_.extensions=Be,_.properties=oe,_.renderLists=U,_.shadowMap=me,_.state=De,_.info=nt}xe();const ge=new SF(_,ae);this.xr=ge,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const F=Be.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=Be.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(F){F!==void 0&&(O=F,this.setSize(k,G,!1))},this.getSize=function(F){return F.set(k,G)},this.setSize=function(F,Y,te){if(ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=F,G=Y,e.width=Math.floor(F*O),e.height=Math.floor(Y*O),te!==!1&&(e.style.width=F+"px",e.style.height=Y+"px"),this.setViewport(0,0,F,Y)},this.getDrawingBufferSize=function(F){return F.set(k*O,G*O).floor()},this.setDrawingBufferSize=function(F,Y,te){k=F,G=Y,O=te,e.width=Math.floor(F*te),e.height=Math.floor(Y*te),this.setViewport(0,0,F,Y)},this.getCurrentViewport=function(F){return F.copy(C)},this.getViewport=function(F){return F.copy(W)},this.setViewport=function(F,Y,te,Z){F.isVector4?W.set(F.x,F.y,F.z,F.w):W.set(F,Y,te,Z),De.viewport(C.copy(W).multiplyScalar(O).floor())},this.getScissor=function(F){return F.copy(j)},this.setScissor=function(F,Y,te,Z){F.isVector4?j.set(F.x,F.y,F.z,F.w):j.set(F,Y,te,Z),De.scissor(B.copy(j).multiplyScalar(O).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(F){De.setScissorTest(J=F)},this.setOpaqueSort=function(F){R=F},this.setTransparentSort=function(F){L=F},this.getClearColor=function(F){return F.copy(Se.getClearColor())},this.setClearColor=function(){Se.setClearColor.apply(Se,arguments)},this.getClearAlpha=function(){return Se.getClearAlpha()},this.setClearAlpha=function(){Se.setClearAlpha.apply(Se,arguments)},this.clear=function(F,Y,te){let Z=0;(F===void 0||F)&&(Z|=16384),(Y===void 0||Y)&&(Z|=256),(te===void 0||te)&&(Z|=1024),ae.clear(Z)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ye,!1),e.removeEventListener("webglcontextrestored",ke,!1),U.dispose(),D.dispose(),oe.dispose(),pe.dispose(),Re.dispose(),Qe.dispose(),z.dispose(),Ze.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",gn),ge.removeEventListener("sessionend",En),H&&(H.dispose(),H=null),Zn.stop()};function Ye(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function ke(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const F=nt.autoReset,Y=me.enabled,te=me.autoUpdate,Z=me.needsUpdate,ue=me.type;xe(),nt.autoReset=F,me.enabled=Y,me.autoUpdate=te,me.needsUpdate=Z,me.type=ue}function at(F){const Y=F.target;Y.removeEventListener("dispose",at),Ce(Y)}function Ce(F){it(F),oe.remove(F)}function it(F){const Y=oe.get(F).programs;Y!==void 0&&(Y.forEach(function(te){Ze.releaseProgram(te)}),F.isShaderMaterial&&Ze.releaseShaderCache(F))}this.renderBufferDirect=function(F,Y,te,Z,ue,qe){Y===null&&(Y=ce);const rt=ue.isMesh&&ue.matrixWorld.determinant()<0,ut=pd(F,Y,te,Z,ue);De.setMaterial(Z,rt);let $e=te.index;const mt=te.attributes.position;if($e===null){if(mt===void 0||mt.count===0)return}else if($e.count===0)return;let ct=1;Z.wireframe===!0&&($e=Ke.getWireframeAttribute(te),ct=2),z.setup(ue,Z,ut,te,$e);let dt,It=Ve;$e!==null&&(dt=ve.get($e),It=He,It.setIndex(dt));const qi=$e!==null?$e.count:mt.count,Zi=te.drawRange.start*ct,vt=te.drawRange.count*ct,Pn=qe!==null?qe.start*ct:0,Dt=qe!==null?qe.count*ct:1/0,gt=Math.max(Zi,Pn),Ft=Math.min(qi,Zi+vt,Pn+Dt)-1,yn=Math.max(0,Ft-gt+1);if(yn!==0){if(ue.isMesh)Z.wireframe===!0?(De.setLineWidth(Z.wireframeLinewidth*Ie()),It.setMode(1)):It.setMode(4);else if(ue.isLine){let kt=Z.linewidth;kt===void 0&&(kt=1),De.setLineWidth(kt*Ie()),ue.isLineSegments?It.setMode(1):ue.isLineLoop?It.setMode(2):It.setMode(3)}else ue.isPoints?It.setMode(0):ue.isSprite&&It.setMode(4);if(ue.isInstancedMesh)It.renderInstances(gt,yn,ue.count);else if(te.isInstancedBufferGeometry){const kt=Math.min(te.instanceCount,te._maxInstanceCount);It.renderInstances(gt,yn,kt)}else It.render(gt,yn)}},this.compile=function(F,Y){d=D.get(F),d.init(),x.push(d),F.traverseVisible(function(te){te.isLight&&te.layers.test(Y.layers)&&(d.pushLight(te),te.castShadow&&d.pushShadow(te))}),d.setupLights(_.physicallyCorrectLights),F.traverse(function(te){const Z=te.material;if(Z)if(Array.isArray(Z))for(let ue=0;ue<Z.length;ue++){const qe=Z[ue];Ua(qe,F,te)}else Ua(Z,F,te)}),x.pop(),d=null};let Mt=null;function pt(F){Mt&&Mt(F)}function gn(){Zn.stop()}function En(){Zn.start()}const Zn=new GA;Zn.setAnimationLoop(pt),typeof window!="undefined"&&Zn.setContext(window),this.setAnimationLoop=function(F){Mt=F,ge.setAnimationLoop(F),F===null?Zn.stop():Zn.start()},ge.addEventListener("sessionstart",gn),ge.addEventListener("sessionend",En),this.render=function(F,Y){if(Y!==void 0&&Y.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;F.autoUpdate===!0&&F.updateMatrixWorld(),Y.parent===null&&Y.updateMatrixWorld(),ge.enabled===!0&&ge.isPresenting===!0&&(ge.cameraAutoUpdate===!0&&ge.updateCamera(Y),Y=ge.getCamera()),F.isScene===!0&&F.onBeforeRender(_,F,Y,A),d=D.get(F,x.length),d.init(),x.push(d),q.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse),de.setFromProjectionMatrix(q),$=this.localClippingEnabled,we=le.init(this.clippingPlanes,$,Y),m=U.get(F,p.length),m.init(),p.push(m),cd(F,Y,0,_.sortObjects),m.finish(),_.sortObjects===!0&&m.sort(R,L),we===!0&&le.beginShadows();const te=d.state.shadowsArray;if(me.render(te,F,Y),we===!0&&le.endShadows(),this.info.autoReset===!0&&this.info.reset(),Se.render(m,F),d.setupLights(_.physicallyCorrectLights),Y.isArrayCamera){const Z=Y.cameras;for(let ue=0,qe=Z.length;ue<qe;ue++){const rt=Z[ue];fd(m,F,rt,rt.viewport)}}else fd(m,F,Y);A!==null&&(fe.updateMultisampleRenderTarget(A),fe.updateRenderTargetMipmap(A)),F.isScene===!0&&F.onAfterRender(_,F,Y),De.buffers.depth.setTest(!0),De.buffers.depth.setMask(!0),De.buffers.color.setMask(!0),De.setPolygonOffset(!1),z.resetDefaultState(),w=-1,T=null,x.pop(),x.length>0?d=x[x.length-1]:d=null,p.pop(),p.length>0?m=p[p.length-1]:m=null};function cd(F,Y,te,Z){if(F.visible===!1)return;if(F.layers.test(Y.layers)){if(F.isGroup)te=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(Y);else if(F.isLight)d.pushLight(F),F.castShadow&&d.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||de.intersectsSprite(F)){Z&&ee.setFromMatrixPosition(F.matrixWorld).applyMatrix4(q);const rt=Qe.update(F),ut=F.material;ut.visible&&m.push(F,rt,ut,te,ee.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(F.isSkinnedMesh&&F.skeleton.frame!==nt.render.frame&&(F.skeleton.update(),F.skeleton.frame=nt.render.frame),!F.frustumCulled||de.intersectsObject(F))){Z&&ee.setFromMatrixPosition(F.matrixWorld).applyMatrix4(q);const rt=Qe.update(F),ut=F.material;if(Array.isArray(ut)){const $e=rt.groups;for(let mt=0,ct=$e.length;mt<ct;mt++){const dt=$e[mt],It=ut[dt.materialIndex];It&&It.visible&&m.push(F,rt,It,te,ee.z,dt)}}else ut.visible&&m.push(F,rt,ut,te,ee.z,null)}}const qe=F.children;for(let rt=0,ut=qe.length;rt<ut;rt++)cd(qe[rt],Y,te,Z)}function fd(F,Y,te,Z){const ue=F.opaque,qe=F.transmissive,rt=F.transparent;d.setupLightsView(te),qe.length>0&&Du(ue,Y,te),Z&&De.viewport(C.copy(Z)),ue.length>0&&ka(ue,Y,te),qe.length>0&&ka(qe,Y,te),rt.length>0&&ka(rt,Y,te)}function Du(F,Y,te){if(H===null){const rt=o===!0&&Ae.isWebGL2===!0?ll:an;H=new rt(1024,1024,{generateMipmaps:!0,type:Me.convert(es)!==null?es:xn,minFilter:Ar,magFilter:Ht,wrapS:Cn,wrapT:Cn,useRenderToTexture:Be.has("WEBGL_multisampled_render_to_texture")})}const Z=_.getRenderTarget();_.setRenderTarget(H),_.clear();const ue=_.toneMapping;_.toneMapping=wr,ka(F,Y,te),_.toneMapping=ue,fe.updateMultisampleRenderTarget(H),fe.updateRenderTargetMipmap(H),_.setRenderTarget(Z)}function ka(F,Y,te){const Z=Y.isScene===!0?Y.overrideMaterial:null;for(let ue=0,qe=F.length;ue<qe;ue++){const rt=F[ue],ut=rt.object,$e=rt.geometry,mt=Z===null?rt.material:Z,ct=rt.group;ut.layers.test(te.layers)&&dd(ut,Y,te,$e,mt,ct)}}function dd(F,Y,te,Z,ue,qe){F.onBeforeRender(_,Y,te,Z,ue,qe),F.modelViewMatrix.multiplyMatrices(te.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),ue.onBeforeRender(_,Y,te,Z,F,qe),ue.transparent===!0&&ue.side===Di?(ue.side=Wt,ue.needsUpdate=!0,_.renderBufferDirect(te,Y,Z,ue,F,qe),ue.side=$r,ue.needsUpdate=!0,_.renderBufferDirect(te,Y,Z,ue,F,qe),ue.side=Di):_.renderBufferDirect(te,Y,Z,ue,F,qe),F.onAfterRender(_,Y,te,Z,ue,qe)}function Ua(F,Y,te){Y.isScene!==!0&&(Y=ce);const Z=oe.get(F),ue=d.state.lights,qe=d.state.shadowsArray,rt=ue.state.version,ut=Ze.getParameters(F,ue.state,qe,Y,te),$e=Ze.getProgramCacheKey(ut);let mt=Z.programs;Z.environment=F.isMeshStandardMaterial?Y.environment:null,Z.fog=Y.fog,Z.envMap=(F.isMeshStandardMaterial?Re:pe).get(F.envMap||Z.environment),mt===void 0&&(F.addEventListener("dispose",at),mt=new Map,Z.programs=mt);let ct=mt.get($e);if(ct!==void 0){if(Z.currentProgram===ct&&Z.lightsStateVersion===rt)return hd(F,ut),ct}else ut.uniforms=Ze.getUniforms(F),F.onBuild(te,ut,_),F.onBeforeCompile(ut,_),ct=Ze.acquireProgram(ut,$e),mt.set($e,ct),Z.uniforms=ut.uniforms;const dt=Z.uniforms;(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(dt.clippingPlanes=le.uniform),hd(F,ut),Z.needsLights=gd(F),Z.lightsStateVersion=rt,Z.needsLights&&(dt.ambientLightColor.value=ue.state.ambient,dt.lightProbe.value=ue.state.probe,dt.directionalLights.value=ue.state.directional,dt.directionalLightShadows.value=ue.state.directionalShadow,dt.spotLights.value=ue.state.spot,dt.spotLightShadows.value=ue.state.spotShadow,dt.rectAreaLights.value=ue.state.rectArea,dt.ltc_1.value=ue.state.rectAreaLTC1,dt.ltc_2.value=ue.state.rectAreaLTC2,dt.pointLights.value=ue.state.point,dt.pointLightShadows.value=ue.state.pointShadow,dt.hemisphereLights.value=ue.state.hemi,dt.directionalShadowMap.value=ue.state.directionalShadowMap,dt.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,dt.spotShadowMap.value=ue.state.spotShadowMap,dt.spotShadowMatrix.value=ue.state.spotShadowMatrix,dt.pointShadowMap.value=ue.state.pointShadowMap,dt.pointShadowMatrix.value=ue.state.pointShadowMatrix);const It=ct.getUniforms(),qi=Ys.seqWithValue(It.seq,dt);return Z.currentProgram=ct,Z.uniformsList=qi,ct}function hd(F,Y){const te=oe.get(F);te.outputEncoding=Y.outputEncoding,te.instancing=Y.instancing,te.skinning=Y.skinning,te.morphTargets=Y.morphTargets,te.morphNormals=Y.morphNormals,te.morphTargetsCount=Y.morphTargetsCount,te.numClippingPlanes=Y.numClippingPlanes,te.numIntersection=Y.numClipIntersection,te.vertexAlphas=Y.vertexAlphas,te.vertexTangents=Y.vertexTangents,te.toneMapping=Y.toneMapping}function pd(F,Y,te,Z,ue){Y.isScene!==!0&&(Y=ce),fe.resetTextureUnits();const qe=Y.fog,rt=Z.isMeshStandardMaterial?Y.environment:null,ut=A===null?_.outputEncoding:A.texture.encoding,$e=(Z.isMeshStandardMaterial?Re:pe).get(Z.envMap||rt),mt=Z.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,ct=!!Z.normalMap&&!!te.attributes.tangent,dt=!!te.morphAttributes.position,It=!!te.morphAttributes.normal,qi=te.morphAttributes.position?te.morphAttributes.position.length:0,Zi=Z.toneMapped?_.toneMapping:wr,vt=oe.get(Z),Pn=d.state.lights;if(we===!0&&($===!0||F!==T)){const Tn=F===T&&Z.id===w;le.setState(Z,F,Tn)}let Dt=!1;Z.version===vt.__version?(vt.needsLights&&vt.lightsStateVersion!==Pn.state.version||vt.outputEncoding!==ut||ue.isInstancedMesh&&vt.instancing===!1||!ue.isInstancedMesh&&vt.instancing===!0||ue.isSkinnedMesh&&vt.skinning===!1||!ue.isSkinnedMesh&&vt.skinning===!0||vt.envMap!==$e||Z.fog&&vt.fog!==qe||vt.numClippingPlanes!==void 0&&(vt.numClippingPlanes!==le.numPlanes||vt.numIntersection!==le.numIntersection)||vt.vertexAlphas!==mt||vt.vertexTangents!==ct||vt.morphTargets!==dt||vt.morphNormals!==It||vt.toneMapping!==Zi||Ae.isWebGL2===!0&&vt.morphTargetsCount!==qi)&&(Dt=!0):(Dt=!0,vt.__version=Z.version);let gt=vt.currentProgram;Dt===!0&&(gt=Ua(Z,Y,ue));let Ft=!1,yn=!1,kt=!1;const bt=gt.getUniforms(),vi=vt.uniforms;if(De.useProgram(gt.program)&&(Ft=!0,yn=!0,kt=!0),Z.id!==w&&(w=Z.id,yn=!0),Ft||T!==F){if(bt.setValue(ae,"projectionMatrix",F.projectionMatrix),Ae.logarithmicDepthBuffer&&bt.setValue(ae,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),T!==F&&(T=F,yn=!0,kt=!0),Z.isShaderMaterial||Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshStandardMaterial||Z.envMap){const Tn=bt.map.cameraPosition;Tn!==void 0&&Tn.setValue(ae,ee.setFromMatrixPosition(F.matrixWorld))}(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial)&&bt.setValue(ae,"isOrthographic",F.isOrthographicCamera===!0),(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial||Z.isShadowMaterial||ue.isSkinnedMesh)&&bt.setValue(ae,"viewMatrix",F.matrixWorldInverse)}if(ue.isSkinnedMesh){bt.setOptional(ae,ue,"bindMatrix"),bt.setOptional(ae,ue,"bindMatrixInverse");const Tn=ue.skeleton;Tn&&(Ae.floatVertexTextures?(Tn.boneTexture===null&&Tn.computeBoneTexture(),bt.setValue(ae,"boneTexture",Tn.boneTexture,fe),bt.setValue(ae,"boneTextureSize",Tn.boneTextureSize)):bt.setOptional(ae,Tn,"boneMatrices"))}return!!te&&(te.morphAttributes.position!==void 0||te.morphAttributes.normal!==void 0)&&he.update(ue,te,Z,gt),(yn||vt.receiveShadow!==ue.receiveShadow)&&(vt.receiveShadow=ue.receiveShadow,bt.setValue(ae,"receiveShadow",ue.receiveShadow)),yn&&(bt.setValue(ae,"toneMappingExposure",_.toneMappingExposure),vt.needsLights&&md(vi,kt),qe&&Z.fog&&Ct.refreshFogUniforms(vi,qe),Ct.refreshMaterialUniforms(vi,Z,O,G,H),Ys.upload(ae,vt.uniformsList,vi,fe)),Z.isShaderMaterial&&Z.uniformsNeedUpdate===!0&&(Ys.upload(ae,vt.uniformsList,vi,fe),Z.uniformsNeedUpdate=!1),Z.isSpriteMaterial&&bt.setValue(ae,"center",ue.center),bt.setValue(ae,"modelViewMatrix",ue.modelViewMatrix),bt.setValue(ae,"normalMatrix",ue.normalMatrix),bt.setValue(ae,"modelMatrix",ue.matrixWorld),gt}function md(F,Y){F.ambientLightColor.needsUpdate=Y,F.lightProbe.needsUpdate=Y,F.directionalLights.needsUpdate=Y,F.directionalLightShadows.needsUpdate=Y,F.pointLights.needsUpdate=Y,F.pointLightShadows.needsUpdate=Y,F.spotLights.needsUpdate=Y,F.spotLightShadows.needsUpdate=Y,F.rectAreaLights.needsUpdate=Y,F.hemisphereLights.needsUpdate=Y}function gd(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(F,Y,te){oe.get(F.texture).__webglTexture=Y,oe.get(F.depthTexture).__webglTexture=te;const Z=oe.get(F);Z.__hasExternalTextures=!0,Z.__hasExternalTextures&&(Z.__autoAllocateDepthBuffer=te===void 0,Z.__autoAllocateDepthBuffer||F.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),F.useRenderToTexture=!1,F.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(F,Y){const te=oe.get(F);te.__webglFramebuffer=Y,te.__useDefaultFramebuffer=Y===void 0},this.setRenderTarget=function(F,Y=0,te=0){A=F,v=Y,y=te;let Z=!0;if(F){const $e=oe.get(F);$e.__useDefaultFramebuffer!==void 0?(De.bindFramebuffer(36160,null),Z=!1):$e.__webglFramebuffer===void 0?fe.setupRenderTarget(F):$e.__hasExternalTextures&&fe.rebindTextures(F,oe.get(F.texture).__webglTexture,oe.get(F.depthTexture).__webglTexture)}let ue=null,qe=!1,rt=!1;if(F){const $e=F.texture;($e.isDataTexture3D||$e.isDataTexture2DArray)&&(rt=!0);const mt=oe.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(ue=mt[Y],qe=!0):F.useRenderbuffer?ue=oe.get(F).__webglMultisampledFramebuffer:ue=mt,C.copy(F.viewport),B.copy(F.scissor),I=F.scissorTest}else C.copy(W).multiplyScalar(O).floor(),B.copy(j).multiplyScalar(O).floor(),I=J;if(De.bindFramebuffer(36160,ue)&&Ae.drawBuffers&&Z){let $e=!1;if(F)if(F.isWebGLMultipleRenderTargets){const mt=F.texture;if(K.length!==mt.length||K[0]!==36064){for(let ct=0,dt=mt.length;ct<dt;ct++)K[ct]=36064+ct;K.length=mt.length,$e=!0}}else(K.length!==1||K[0]!==36064)&&(K[0]=36064,K.length=1,$e=!0);else(K.length!==1||K[0]!==1029)&&(K[0]=1029,K.length=1,$e=!0);$e&&(Ae.isWebGL2?ae.drawBuffers(K):Be.get("WEBGL_draw_buffers").drawBuffersWEBGL(K))}if(De.viewport(C),De.scissor(B),De.setScissorTest(I),qe){const $e=oe.get(F.texture);ae.framebufferTexture2D(36160,36064,34069+Y,$e.__webglTexture,te)}else if(rt){const $e=oe.get(F.texture),mt=Y||0;ae.framebufferTextureLayer(36160,36064,$e.__webglTexture,te||0,mt)}w=-1},this.readRenderTargetPixels=function(F,Y,te,Z,ue,qe,rt){if(!(F&&F.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ut=oe.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&rt!==void 0&&(ut=ut[rt]),ut){De.bindFramebuffer(36160,ut);try{const $e=F.texture,mt=$e.format,ct=$e.type;if(mt!==qt&&Me.convert(mt)!==ae.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const dt=ct===es&&(Be.has("EXT_color_buffer_half_float")||Ae.isWebGL2&&Be.has("EXT_color_buffer_float"));if(ct!==xn&&Me.convert(ct)!==ae.getParameter(35738)&&!(ct===Sr&&(Ae.isWebGL2||Be.has("OES_texture_float")||Be.has("WEBGL_color_buffer_float")))&&!dt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ae.checkFramebufferStatus(36160)===36053?Y>=0&&Y<=F.width-Z&&te>=0&&te<=F.height-ue&&ae.readPixels(Y,te,Z,ue,Me.convert(mt),Me.convert(ct),qe):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const $e=A!==null?oe.get(A).__webglFramebuffer:null;De.bindFramebuffer(36160,$e)}}},this.copyFramebufferToTexture=function(F,Y,te=0){if(Y.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const Z=Math.pow(2,-te),ue=Math.floor(Y.image.width*Z),qe=Math.floor(Y.image.height*Z);fe.setTexture2D(Y,0),ae.copyTexSubImage2D(3553,te,0,0,F.x,F.y,ue,qe),De.unbindTexture()},this.copyTextureToTexture=function(F,Y,te,Z=0){const ue=Y.image.width,qe=Y.image.height,rt=Me.convert(te.format),ut=Me.convert(te.type);fe.setTexture2D(te,0),ae.pixelStorei(37440,te.flipY),ae.pixelStorei(37441,te.premultiplyAlpha),ae.pixelStorei(3317,te.unpackAlignment),Y.isDataTexture?ae.texSubImage2D(3553,Z,F.x,F.y,ue,qe,rt,ut,Y.image.data):Y.isCompressedTexture?ae.compressedTexSubImage2D(3553,Z,F.x,F.y,Y.mipmaps[0].width,Y.mipmaps[0].height,rt,Y.mipmaps[0].data):ae.texSubImage2D(3553,Z,F.x,F.y,rt,ut,Y.image),Z===0&&te.generateMipmaps&&ae.generateMipmap(3553),De.unbindTexture()},this.copyTextureToTexture3D=function(F,Y,te,Z,ue=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const qe=F.max.x-F.min.x+1,rt=F.max.y-F.min.y+1,ut=F.max.z-F.min.z+1,$e=Me.convert(Z.format),mt=Me.convert(Z.type);let ct;if(Z.isDataTexture3D)fe.setTexture3D(Z,0),ct=32879;else if(Z.isDataTexture2DArray)fe.setTexture2DArray(Z,0),ct=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ae.pixelStorei(37440,Z.flipY),ae.pixelStorei(37441,Z.premultiplyAlpha),ae.pixelStorei(3317,Z.unpackAlignment);const dt=ae.getParameter(3314),It=ae.getParameter(32878),qi=ae.getParameter(3316),Zi=ae.getParameter(3315),vt=ae.getParameter(32877),Pn=te.isCompressedTexture?te.mipmaps[0]:te.image;ae.pixelStorei(3314,Pn.width),ae.pixelStorei(32878,Pn.height),ae.pixelStorei(3316,F.min.x),ae.pixelStorei(3315,F.min.y),ae.pixelStorei(32877,F.min.z),te.isDataTexture||te.isDataTexture3D?ae.texSubImage3D(ct,ue,Y.x,Y.y,Y.z,qe,rt,ut,$e,mt,Pn.data):te.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ae.compressedTexSubImage3D(ct,ue,Y.x,Y.y,Y.z,qe,rt,ut,$e,Pn.data)):ae.texSubImage3D(ct,ue,Y.x,Y.y,Y.z,qe,rt,ut,$e,mt,Pn),ae.pixelStorei(3314,dt),ae.pixelStorei(32878,It),ae.pixelStorei(3316,qi),ae.pixelStorei(3315,Zi),ae.pixelStorei(32877,vt),ue===0&&Z.generateMipmaps&&ae.generateMipmap(ct),De.unbindTexture()},this.initTexture=function(F){fe.setTexture2D(F,0),De.unbindTexture()},this.resetState=function(){v=0,y=0,A=null,De.reset(),z.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Rt.prototype.isWebGLRenderer=!0;class wS extends Rt{}wS.prototype.isWebGL1Renderer=!0;class Mc{constructor(e,t=25e-5){this.name="",this.color=new ye(e),this.density=t}clone(){return new Mc(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Mc.prototype.isFogExp2=!0;class wc{constructor(e,t=1,i=1e3){this.name="",this.color=new ye(e),this.near=t,this.far=i}clone(){return new wc(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}wc.prototype.isFog=!0;class ls extends ht{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}ls.prototype.isScene=!0;class qs{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=sl,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Mi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}qs.prototype.isInterleavedBuffer=!0;const fn=new P;class us{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)fn.x=this.getX(t),fn.y=this.getY(t),fn.z=this.getZ(t),fn.applyMatrix4(e),this.setXYZ(t,fn.x,fn.y,fn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)fn.x=this.getX(t),fn.y=this.getY(t),fn.z=this.getZ(t),fn.applyNormalMatrix(e),this.setXYZ(t,fn.x,fn.y,fn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)fn.x=this.getX(t),fn.y=this.getY(t),fn.z=this.getZ(t),fn.transformDirection(e),this.setXYZ(t,fn.x,fn.y,fn.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new lt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new us(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}us.prototype.isInterleavedBufferAttribute=!0;class jh extends un{constructor(e){super();this.type="SpriteMaterial",this.color=new ye(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}jh.prototype.isSpriteMaterial=!0;let bl;const Ac=new P,Bl=new P,Rl=new P,Ll=new ie,Sc=new ie,AS=new Fe,Xh=new P,Ec=new P,Kh=new P,SS=new ie,fy=new ie,ES=new ie;class Qh extends ht{constructor(e){super();if(this.type="Sprite",bl===void 0){bl=new je;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new qs(t,5);bl.setIndex([0,1,2,0,2,3]),bl.setAttribute("position",new us(i,3,0,!1)),bl.setAttribute("uv",new us(i,2,3,!1))}this.geometry=bl,this.material=e!==void 0?e:new jh,this.center=new ie(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Bl.setFromMatrixScale(this.matrixWorld),AS.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Bl.multiplyScalar(-Rl.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Yh(Xh.set(-.5,-.5,0),Rl,o,Bl,r,s),Yh(Ec.set(.5,-.5,0),Rl,o,Bl,r,s),Yh(Kh.set(.5,.5,0),Rl,o,Bl,r,s),SS.set(0,0),fy.set(1,0),ES.set(1,1);let a=e.ray.intersectTriangle(Xh,Ec,Kh,!1,Ac);if(a===null&&(Yh(Ec.set(-.5,.5,0),Rl,o,Bl,r,s),fy.set(0,1),a=e.ray.intersectTriangle(Xh,Kh,Ec,!1,Ac),a===null))return;const l=e.ray.origin.distanceTo(Ac);l<e.near||l>e.far||t.push({distance:l,point:Ac.clone(),uv:ln.getUV(Ac,Xh,Ec,Kh,SS,fy,ES,new ie),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}Qh.prototype.isSprite=!0;function Yh(n,e,t,i,r,s){Ll.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Sc.x=s*Ll.x-r*Ll.y,Sc.y=r*Ll.x+s*Ll.y):Sc.copy(Ll),n.copy(e),n.x+=Sc.x,n.y+=Sc.y,n.applyMatrix4(AS)}const qh=new P,TS=new P;class CS extends ht{constructor(){super();this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){qh.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(qh);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){qh.setFromMatrixPosition(e.matrixWorld),TS.setFromMatrixPosition(this.matrixWorld);const i=qh.distanceTo(TS)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s&&i>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}const bS=new P,BS=new Pt,RS=new Pt,CF=new P,LS=new Fe;class Tc extends $t{constructor(e,t){super(e,t);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Fe,this.bindMatrixInverse=new Fe}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Pt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;BS.fromBufferAttribute(r.attributes.skinIndex,e),RS.fromBufferAttribute(r.attributes.skinWeight,e),bS.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=RS.getComponent(s);if(o!==0){const a=BS.getComponent(s);LS.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(CF.copy(bS).applyMatrix4(LS),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}Tc.prototype.isSkinnedMesh=!0;class Cc extends ht{constructor(){super();this.type="Bone"}}Cc.prototype.isBone=!0;class na extends Zt{constructor(e=null,t=1,i=1,r,s,o,a,l,f=Ht,h=Ht,m,d){super(null,o,a,l,f,h,r,s,m,d);this.image={data:e,width:t,height:i},this.magFilter=f,this.minFilter=h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}na.prototype.isDataTexture=!0;const PS=new Fe,bF=new Fe;class bc{constructor(e=[],t=[]){this.uuid=Mi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Fe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Fe;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:bF;PS.multiplyMatrices(a,t[s]),PS.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new bc(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=gA(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new na(t,e,e,qt,Sr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Cc),this.bones.push(o),this.boneInverses.push(new Fe().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class ia extends lt{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,t,i);this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}ia.prototype.isInstancedBufferAttribute=!0;const IS=new Fe,DS=new Fe,Zh=[],Bc=new $t;class dy extends $t{constructor(e,t,i){super(e,t);this.instanceMatrix=new ia(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Bc.geometry=this.geometry,Bc.material=this.material,Bc.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,IS),DS.multiplyMatrices(i,IS),Bc.matrixWorld=DS,Bc.raycast(e,Zh);for(let o=0,a=Zh.length;o<a;o++){const l=Zh[o];l.instanceId=s,l.object=this,t.push(l)}Zh.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ia(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}dy.prototype.isInstancedMesh=!0;class wn extends un{constructor(e){super();this.type="LineBasicMaterial",this.color=new ye(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}wn.prototype.isLineBasicMaterial=!0;const FS=new P,NS=new P,OS=new Fe,hy=new Vs,$h=new ns;class br extends ht{constructor(e=new je,t=new wn){super();this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)FS.fromBufferAttribute(t,r-1),NS.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=FS.distanceTo(NS);e.setAttribute("lineDistance",new Ge(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),$h.copy(i.boundingSphere),$h.applyMatrix4(r),$h.radius+=s,e.ray.intersectsSphere($h)===!1)return;OS.copy(r).invert(),hy.copy(e.ray).applyMatrix4(OS);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=new P,h=new P,m=new P,d=new P,p=this.isLineSegments?2:1;if(i.isBufferGeometry){const x=i.index,M=i.attributes.position;if(x!==null){const v=Math.max(0,o.start),y=Math.min(x.count,o.start+o.count);for(let A=v,w=y-1;A<w;A+=p){const T=x.getX(A),C=x.getX(A+1);if(f.fromBufferAttribute(M,T),h.fromBufferAttribute(M,C),hy.distanceSqToSegment(f,h,d,m)>l)continue;d.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(d);I<e.near||I>e.far||t.push({distance:I,point:m.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),y=Math.min(M.count,o.start+o.count);for(let A=v,w=y-1;A<w;A+=p){if(f.fromBufferAttribute(M,A),h.fromBufferAttribute(M,A+1),hy.distanceSqToSegment(f,h,d,m)>l)continue;d.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(d);C<e.near||C>e.far||t.push({distance:C,point:m.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}br.prototype.isLine=!0;const kS=new P,US=new P;class ti extends br{constructor(e,t){super(e,t);this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)kS.fromBufferAttribute(t,r),US.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+kS.distanceTo(US);e.setAttribute("lineDistance",new Ge(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}ti.prototype.isLineSegments=!0;class ep extends br{constructor(e,t){super(e,t);this.type="LineLoop"}}ep.prototype.isLineLoop=!0;class Zs extends un{constructor(e){super();this.type="PointsMaterial",this.color=new ye(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Zs.prototype.isPointsMaterial=!0;const GS=new Fe,py=new Vs,tp=new ns,np=new P;class Pl extends ht{constructor(e=new je,t=new Zs){super();this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),tp.copy(i.boundingSphere),tp.applyMatrix4(r),tp.radius+=s,e.ray.intersectsSphere(tp)===!1)return;GS.copy(r).invert(),py.copy(e.ray).applyMatrix4(GS);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(i.isBufferGeometry){const f=i.index,m=i.attributes.position;if(f!==null){const d=Math.max(0,o.start),p=Math.min(f.count,o.start+o.count);for(let x=d,_=p;x<_;x++){const M=f.getX(x);np.fromBufferAttribute(m,M),HS(np,M,l,r,e,t,this)}}else{const d=Math.max(0,o.start),p=Math.min(m.count,o.start+o.count);for(let x=d,_=p;x<_;x++)np.fromBufferAttribute(m,x),HS(np,x,l,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Pl.prototype.isPoints=!0;function HS(n,e,t,i,r,s,o){const a=py.distanceSqToPoint(n);if(a<t){const l=new P;py.closestPointToPoint(n,l),l.applyMatrix4(i);const f=r.ray.origin.distanceTo(l);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class zS extends Zt{constructor(e,t,i,r,s,o,a,l,f){super(e,t,i,r,s,o,a,l,f);this.format=a!==void 0?a:Jn,this.minFilter=o!==void 0?o:xt,this.magFilter=s!==void 0?s:xt,this.generateMipmaps=!1;const h=this;function m(){h.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}zS.prototype.isVideoTexture=!0;class VS extends Zt{constructor(e,t,i){super({width:e,height:t});this.format=i,this.magFilter=Ht,this.minFilter=Ht,this.generateMipmaps=!1,this.needsUpdate=!0}}VS.prototype.isFramebufferTexture=!0;class my extends Zt{constructor(e,t,i,r,s,o,a,l,f,h,m,d){super(null,o,a,l,f,h,r,s,m,d);this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}my.prototype.isCompressedTexture=!0;class WS extends Zt{constructor(e,t,i,r,s,o,a,l,f){super(e,t,i,r,s,o,a,l,f);this.needsUpdate=!0}}WS.prototype.isCanvasTexture=!0;class Il extends je{constructor(e=1,t=8,i=0,r=Math.PI*2){super();this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],f=new P,h=new ie;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let m=0,d=3;m<=t;m++,d+=3){const p=i+m/t*r;f.x=e*Math.cos(p),f.y=e*Math.sin(p),o.push(f.x,f.y,f.z),a.push(0,0,1),h.x=(o[d]/e+1)/2,h.y=(o[d+1]/e+1)/2,l.push(h.x,h.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new Ge(o,3)),this.setAttribute("normal",new Ge(a,3)),this.setAttribute("uv",new Ge(l,2))}static fromJSON(e){return new Il(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class $s extends je{constructor(e=1,t=1,i=1,r=8,s=1,o=!1,a=0,l=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const f=this;r=Math.floor(r),s=Math.floor(s);const h=[],m=[],d=[],p=[];let x=0;const _=[],M=i/2;let v=0;y(),o===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(h),this.setAttribute("position",new Ge(m,3)),this.setAttribute("normal",new Ge(d,3)),this.setAttribute("uv",new Ge(p,2));function y(){const w=new P,T=new P;let C=0;const B=(t-e)/i;for(let I=0;I<=s;I++){const k=[],G=I/s,O=G*(t-e)+e;for(let R=0;R<=r;R++){const L=R/r,W=L*l+a,j=Math.sin(W),J=Math.cos(W);T.x=O*j,T.y=-G*i+M,T.z=O*J,m.push(T.x,T.y,T.z),w.set(j,B,J).normalize(),d.push(w.x,w.y,w.z),p.push(L,1-G),k.push(x++)}_.push(k)}for(let I=0;I<r;I++)for(let k=0;k<s;k++){const G=_[k][I],O=_[k+1][I],R=_[k+1][I+1],L=_[k][I+1];h.push(G,O,L),h.push(O,R,L),C+=6}f.addGroup(v,C,0),v+=C}function A(w){const T=x,C=new ie,B=new P;let I=0;const k=w===!0?e:t,G=w===!0?1:-1;for(let R=1;R<=r;R++)m.push(0,M*G,0),d.push(0,G,0),p.push(.5,.5),x++;const O=x;for(let R=0;R<=r;R++){const W=R/r*l+a,j=Math.cos(W),J=Math.sin(W);B.x=k*J,B.y=M*G,B.z=k*j,m.push(B.x,B.y,B.z),d.push(0,G,0),C.x=j*.5+.5,C.y=J*.5*G+.5,p.push(C.x,C.y),x++}for(let R=0;R<r;R++){const L=T+R,W=O+R;w===!0?h.push(W,W+1,L):h.push(W+1,W,L),I+=3}f.addGroup(v,I,w===!0?1:2),v+=I}}static fromJSON(e){return new $s(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Dl extends $s{constructor(e=1,t=1,i=8,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a);this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Dl(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Br extends je{constructor(e=[],t=[],i=1,r=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),f(i),h(),this.setAttribute("position",new Ge(s,3)),this.setAttribute("normal",new Ge(s.slice(),3)),this.setAttribute("uv",new Ge(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(y){const A=new P,w=new P,T=new P;for(let C=0;C<t.length;C+=3)p(t[C+0],A),p(t[C+1],w),p(t[C+2],T),l(A,w,T,y)}function l(y,A,w,T){const C=T+1,B=[];for(let I=0;I<=C;I++){B[I]=[];const k=y.clone().lerp(w,I/C),G=A.clone().lerp(w,I/C),O=C-I;for(let R=0;R<=O;R++)R===0&&I===C?B[I][R]=k:B[I][R]=k.clone().lerp(G,R/O)}for(let I=0;I<C;I++)for(let k=0;k<2*(C-I)-1;k++){const G=Math.floor(k/2);k%2==0?(d(B[I][G+1]),d(B[I+1][G]),d(B[I][G])):(d(B[I][G+1]),d(B[I+1][G+1]),d(B[I+1][G]))}}function f(y){const A=new P;for(let w=0;w<s.length;w+=3)A.x=s[w+0],A.y=s[w+1],A.z=s[w+2],A.normalize().multiplyScalar(y),s[w+0]=A.x,s[w+1]=A.y,s[w+2]=A.z}function h(){const y=new P;for(let A=0;A<s.length;A+=3){y.x=s[A+0],y.y=s[A+1],y.z=s[A+2];const w=M(y)/2/Math.PI+.5,T=v(y)/Math.PI+.5;o.push(w,1-T)}x(),m()}function m(){for(let y=0;y<o.length;y+=6){const A=o[y+0],w=o[y+2],T=o[y+4],C=Math.max(A,w,T),B=Math.min(A,w,T);C>.9&&B<.1&&(A<.2&&(o[y+0]+=1),w<.2&&(o[y+2]+=1),T<.2&&(o[y+4]+=1))}}function d(y){s.push(y.x,y.y,y.z)}function p(y,A){const w=y*3;A.x=e[w+0],A.y=e[w+1],A.z=e[w+2]}function x(){const y=new P,A=new P,w=new P,T=new P,C=new ie,B=new ie,I=new ie;for(let k=0,G=0;k<s.length;k+=9,G+=6){y.set(s[k+0],s[k+1],s[k+2]),A.set(s[k+3],s[k+4],s[k+5]),w.set(s[k+6],s[k+7],s[k+8]),C.set(o[G+0],o[G+1]),B.set(o[G+2],o[G+3]),I.set(o[G+4],o[G+5]),T.copy(y).add(A).add(w).divideScalar(3);const O=M(T);_(C,G+0,y,O),_(B,G+2,A,O),_(I,G+4,w,O)}}function _(y,A,w,T){T<0&&y.x===1&&(o[A]=y.x-1),w.x===0&&w.z===0&&(o[A]=T/2/Math.PI+.5)}function M(y){return Math.atan2(y.z,-y.x)}function v(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}static fromJSON(e){return new Br(e.vertices,e.indices,e.radius,e.details)}}class Fl extends Br{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fl(e.radius,e.detail)}}const ip=new P,rp=new P,gy=new P,sp=new ln;class yy extends je{constructor(e=null,t=1){super();if(this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Jo*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,f=[0,0,0],h=["a","b","c"],m=new Array(3),d={},p=[];for(let x=0;x<l;x+=3){o?(f[0]=o.getX(x),f[1]=o.getX(x+1),f[2]=o.getX(x+2)):(f[0]=x,f[1]=x+1,f[2]=x+2);const{a:_,b:M,c:v}=sp;if(_.fromBufferAttribute(a,f[0]),M.fromBufferAttribute(a,f[1]),v.fromBufferAttribute(a,f[2]),sp.getNormal(gy),m[0]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,m[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,m[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let y=0;y<3;y++){const A=(y+1)%3,w=m[y],T=m[A],C=sp[h[y]],B=sp[h[A]],I=`${w}_${T}`,k=`${T}_${w}`;k in d&&d[k]?(gy.dot(d[k].normal)<=s&&(p.push(C.x,C.y,C.z),p.push(B.x,B.y,B.z)),d[k]=null):I in d||(d[I]={index0:f[y],index1:f[A],normal:gy.clone()})}}for(const x in d)if(d[x]){const{index0:_,index1:M}=d[x];ip.fromBufferAttribute(a,_),rp.fromBufferAttribute(a,M),p.push(ip.x,ip.y,ip.z),p.push(rp.x,rp.y,rp.z)}this.setAttribute("position",new Ge(p,3))}}}class Si{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,f;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),f=i[r]-o,f<0)a=r+1;else if(f>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],d=i[r+1]-h,p=(o-h)/d;return(r+p)/(s-1)}getTangent(e,t){const i=1e-4;let r=e-i,s=e+i;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ie:new P);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new P,r=[],s=[],o=[],a=new P,l=new Fe;for(let p=0;p<=e;p++){const x=p/e;r[p]=this.getTangentAt(x,new P)}s[0]=new P,o[0]=new P;let f=Number.MAX_VALUE;const h=Math.abs(r[0].x),m=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=f&&(f=h,i.set(1,0,0)),m<=f&&(f=m,i.set(0,1,0)),d<=f&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();const x=Math.acos(kn(r[p-1].dot(r[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,x))}o[p].crossVectors(r[p],s[p])}if(t===!0){let p=Math.acos(kn(s[0].dot(s[e]),-1,1));p/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let x=1;x<=e;x++)s[x].applyMatrix4(l.makeRotationAxis(r[x],p*x)),o[x].crossVectors(r[x],s[x])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Rc extends Si{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new ie,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),f=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),m=Math.sin(this.aRotation),d=l-this.aX,p=f-this.aY;l=d*h-p*m+this.aX,f=d*m+p*h+this.aY}return i.set(l,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Rc.prototype.isEllipseCurve=!0;class vy extends Rc{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o);this.type="ArcCurve"}}vy.prototype.isArcCurve=!0;function xy(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,f){r(o,a,f*(a-s),f*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,f,h,m){let d=(o-s)/f-(a-s)/(f+h)+(a-o)/h,p=(a-o)/h-(l-o)/(h+m)+(l-a)/m;d*=h,p*=h,r(o,a,d,p)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const op=new P,_y=new xy,My=new xy,wy=new xy;class Ay extends Si{constructor(e=[],t=!1,i="centripetal",r=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new P){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let f,h;this.closed||a>0?f=r[(a-1)%s]:(op.subVectors(r[0],r[1]).add(r[0]),f=op);const m=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(op.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=op),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let x=Math.pow(f.distanceToSquared(m),p),_=Math.pow(m.distanceToSquared(d),p),M=Math.pow(d.distanceToSquared(h),p);_<1e-4&&(_=1),x<1e-4&&(x=_),M<1e-4&&(M=_),_y.initNonuniformCatmullRom(f.x,m.x,d.x,h.x,x,_,M),My.initNonuniformCatmullRom(f.y,m.y,d.y,h.y,x,_,M),wy.initNonuniformCatmullRom(f.z,m.z,d.z,h.z,x,_,M)}else this.curveType==="catmullrom"&&(_y.initCatmullRom(f.x,m.x,d.x,h.x,this.tension),My.initCatmullRom(f.y,m.y,d.y,h.y,this.tension),wy.initCatmullRom(f.z,m.z,d.z,h.z,this.tension));return i.set(_y.calc(l),My.calc(l),wy.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new P().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}Ay.prototype.isCatmullRomCurve3=!0;function JS(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function BF(n,e){const t=1-n;return t*t*e}function RF(n,e){return 2*(1-n)*n*e}function LF(n,e){return n*n*e}function Lc(n,e,t,i){return BF(n,e)+RF(n,t)+LF(n,i)}function PF(n,e){const t=1-n;return t*t*t*e}function IF(n,e){const t=1-n;return 3*t*t*n*e}function DF(n,e){return 3*(1-n)*n*n*e}function FF(n,e){return n*n*n*e}function Pc(n,e,t,i,r){return PF(n,e)+IF(n,t)+DF(n,i)+FF(n,r)}class ap extends Si{constructor(e=new ie,t=new ie,i=new ie,r=new ie){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ie){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Pc(e,r.x,s.x,o.x,a.x),Pc(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}ap.prototype.isCubicBezierCurve=!0;class Sy extends Si{constructor(e=new P,t=new P,i=new P,r=new P){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new P){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Pc(e,r.x,s.x,o.x,a.x),Pc(e,r.y,s.y,o.y,a.y),Pc(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Sy.prototype.isCubicBezierCurve3=!0;class Ic extends Si{constructor(e=new ie,t=new ie){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ie){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new ie;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Ic.prototype.isLineCurve=!0;class jS extends Si{constructor(e=new P,t=new P){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new P){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lp extends Si{constructor(e=new ie,t=new ie,i=new ie){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ie){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Lc(e,r.x,s.x,o.x),Lc(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}lp.prototype.isQuadraticBezierCurve=!0;class up extends Si{constructor(e=new P,t=new P,i=new P){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new P){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Lc(e,r.x,s.x,o.x),Lc(e,r.y,s.y,o.y),Lc(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}up.prototype.isQuadraticBezierCurve3=!0;class cp extends Si{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new ie){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],f=r[o],h=r[o>r.length-2?r.length-1:o+1],m=r[o>r.length-3?r.length-1:o+2];return i.set(JS(a,l.x,f.x,h.x,m.x),JS(a,l.y,f.y,h.y,m.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ie().fromArray(r))}return this}}cp.prototype.isSplineCurve=!0;var Ey=Object.freeze({__proto__:null,ArcCurve:vy,CatmullRomCurve3:Ay,CubicBezierCurve:ap,CubicBezierCurve3:Sy,EllipseCurve:Rc,LineCurve:Ic,LineCurve3:jS,QuadraticBezierCurve:lp,QuadraticBezierCurve3:up,SplineCurve:cp});class XS extends Si{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ic(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),f=l===0?0:1-o/l;return a.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let f=0;f<l.length;f++){const h=l[f];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Ey[r.type]().fromJSON(r))}return this}}class Dc extends XS{constructor(e){super();this.type="Path",this.currentPoint=new ie,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Ic(this.currentPoint.clone(),new ie(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new lp(this.currentPoint.clone(),new ie(e,t),new ie(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new ap(this.currentPoint.clone(),new ie(e,t),new ie(i,r),new ie(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new cp(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const f=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+f,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const f=new Rc(e,t,i,r,s,o,a,l);if(this.curves.length>0){const m=f.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(f);const h=f.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Rr extends Dc{constructor(e){super(e);this.uuid=Mi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Dc().fromJSON(r))}return this}}const NF={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=KS(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,f,h,m,d,p;if(i&&(s=HF(n,e,s,t)),n.length>80*t){a=f=n[0],l=h=n[1];for(let x=t;x<r;x+=t)m=n[x],d=n[x+1],m<a&&(a=m),d<l&&(l=d),m>f&&(f=m),d>h&&(h=d);p=Math.max(f-a,h-l),p=p!==0?1/p:0}return Fc(s,o,t,a,l,p),o}};function KS(n,e,t,i,r){let s,o;if(r===ZF(n,e,t,i)>0)for(s=e;s<t;s+=i)o=qS(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=qS(s,n[s],n[s+1],o);return o&&fp(o,o.next)&&(Oc(o),o=o.next),o}function eo(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(fp(t,t.next)||en(t.prev,t,t.next)===0)){if(Oc(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Fc(n,e,t,i,r,s,o){if(!n)return;!o&&s&&jF(n,i,r,s);let a=n,l,f;for(;n.prev!==n.next;){if(l=n.prev,f=n.next,s?kF(n,i,r,s):OF(n)){e.push(l.i/t),e.push(n.i/t),e.push(f.i/t),Oc(n),n=f.next,a=f.next;continue}if(n=f,n===a){o?o===1?(n=UF(eo(n),e,t),Fc(n,e,t,i,r,s,2)):o===2&&GF(n,e,t,i,r,s):Fc(eo(n),e,t,i,r,s,1);break}}}function OF(n){const e=n.prev,t=n,i=n.next;if(en(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Nl(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&en(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function kF(n,e,t,i){const r=n.prev,s=n,o=n.next;if(en(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,f=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,h=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,m=Ty(a,l,e,t,i),d=Ty(f,h,e,t,i);let p=n.prevZ,x=n.nextZ;for(;p&&p.z>=m&&x&&x.z<=d;){if(p!==n.prev&&p!==n.next&&Nl(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&en(p.prev,p,p.next)>=0||(p=p.prevZ,x!==n.prev&&x!==n.next&&Nl(r.x,r.y,s.x,s.y,o.x,o.y,x.x,x.y)&&en(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;p&&p.z>=m;){if(p!==n.prev&&p!==n.next&&Nl(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&en(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;x&&x.z<=d;){if(x!==n.prev&&x!==n.next&&Nl(r.x,r.y,s.x,s.y,o.x,o.y,x.x,x.y)&&en(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function UF(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!fp(r,s)&&QS(r,i,i.next,s)&&Nc(r,s)&&Nc(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),Oc(i),Oc(i.next),i=n=s),i=i.next}while(i!==n);return eo(i)}function GF(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&QF(o,a)){let l=YS(o,a);o=eo(o,o.next),l=eo(l,l.next),Fc(o,e,t,i,r,s),Fc(l,e,t,i,r,s);return}a=a.next}o=o.next}while(o!==n)}function HF(n,e,t,i){const r=[];let s,o,a,l,f;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,f=KS(n,a,l,i,!1),f===f.next&&(f.steiner=!0),r.push(KF(f));for(r.sort(zF),s=0;s<r.length;s++)VF(r[s],t),t=eo(t,t.next);return t}function zF(n,e){return n.x-e.x}function VF(n,e){if(e=WF(n,e),e){const t=YS(e,n);eo(e,e.next),eo(t,t.next)}}function WF(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s){if(s=d,d===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,l=o.x,f=o.y;let h=1/0,m;t=o;do i>=t.x&&t.x>=l&&i!==t.x&&Nl(r<f?i:s,r,l,f,r<f?s:i,r,t.x,t.y)&&(m=Math.abs(r-t.y)/(i-t.x),Nc(t,n)&&(m<h||m===h&&(t.x>o.x||t.x===o.x&&JF(o,t)))&&(o=t,h=m)),t=t.next;while(t!==a);return o}function JF(n,e){return en(n.prev,n,e.prev)<0&&en(e.next,n,n.next)<0}function jF(n,e,t,i){let r=n;do r.z===null&&(r.z=Ty(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,XF(r)}function XF(n){let e,t,i,r,s,o,a,l,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<f&&(a++,i=i.nextZ,!!i);e++);for(l=f;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(o>1);return n}function Ty(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function KF(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Nl(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function QF(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!YF(n,e)&&(Nc(n,e)&&Nc(e,n)&&qF(n,e)&&(en(n.prev,n,e.prev)||en(n,e.prev,e))||fp(n,e)&&en(n.prev,n,n.next)>0&&en(e.prev,e,e.next)>0)}function en(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function fp(n,e){return n.x===e.x&&n.y===e.y}function QS(n,e,t,i){const r=hp(en(n,e,t)),s=hp(en(n,e,i)),o=hp(en(t,i,n)),a=hp(en(t,i,e));return!!(r!==s&&o!==a||r===0&&dp(n,t,e)||s===0&&dp(n,i,e)||o===0&&dp(t,n,i)||a===0&&dp(t,e,i))}function dp(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function hp(n){return n>0?1:n<0?-1:0}function YF(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&QS(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Nc(n,e){return en(n.prev,n,n.next)<0?en(n,e,n.next)>=0&&en(n,n.prev,e)>=0:en(n,e,n.prev)<0||en(n,n.next,e)<0}function qF(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function YS(n,e){const t=new Cy(n.i,n.x,n.y),i=new Cy(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function qS(n,e,t,i){const r=new Cy(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Oc(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Cy(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ZF(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Lr{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Lr.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];ZS(e),$S(i,e);let o=e.length;t.forEach(ZS);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,$S(i,t[l]);const a=NF.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function ZS(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function $S(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Pr extends je{constructor(e=new Rr([new ie(.5,.5),new ie(-.5,.5),new ie(-.5,-.5),new ie(.5,-.5)]),t={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const f=e[a];o(f)}this.setAttribute("position",new Ge(r,3)),this.setAttribute("uv",new Ge(s,2)),this.computeVertexNormals();function o(a){const l=[],f=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1;let m=t.depth!==void 0?t.depth:1,d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:p-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,y=t.UVGenerator!==void 0?t.UVGenerator:$F;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),m=t.amount);let A,w=!1,T,C,B,I;v&&(A=v.getSpacedPoints(h),w=!0,d=!1,T=v.computeFrenetFrames(h,!1),C=new P,B=new P,I=new P),d||(M=0,p=0,x=0,_=0);const k=a.extractPoints(f);let G=k.shape;const O=k.holes;if(!Lr.isClockWise(G)){G=G.reverse();for(let oe=0,fe=O.length;oe<fe;oe++){const pe=O[oe];Lr.isClockWise(pe)&&(O[oe]=pe.reverse())}}const L=Lr.triangulateShape(G,O),W=G;for(let oe=0,fe=O.length;oe<fe;oe++){const pe=O[oe];G=G.concat(pe)}function j(oe,fe,pe){return fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),fe.clone().multiplyScalar(pe).add(oe)}const J=G.length,K=L.length;function de(oe,fe,pe){let Re,ve,Ke;const Qe=oe.x-fe.x,Ze=oe.y-fe.y,Ct=pe.x-oe.x,U=pe.y-oe.y,D=Qe*Qe+Ze*Ze,le=Qe*U-Ze*Ct;if(Math.abs(le)>Number.EPSILON){const me=Math.sqrt(D),Se=Math.sqrt(Ct*Ct+U*U),he=fe.x-Ze/me,Ve=fe.y+Qe/me,He=pe.x-U/Se,Me=pe.y+Ct/Se,z=((He-he)*U-(Me-Ve)*Ct)/(Qe*U-Ze*Ct);Re=he+Qe*z-oe.x,ve=Ve+Ze*z-oe.y;const xe=Re*Re+ve*ve;if(xe<=2)return new ie(Re,ve);Ke=Math.sqrt(xe/2)}else{let me=!1;Qe>Number.EPSILON?Ct>Number.EPSILON&&(me=!0):Qe<-Number.EPSILON?Ct<-Number.EPSILON&&(me=!0):Math.sign(Ze)===Math.sign(U)&&(me=!0),me?(Re=-Ze,ve=Qe,Ke=Math.sqrt(D)):(Re=Qe,ve=Ze,Ke=Math.sqrt(D/2))}return new ie(Re/Ke,ve/Ke)}const we=[];for(let oe=0,fe=W.length,pe=fe-1,Re=oe+1;oe<fe;oe++,pe++,Re++)pe===fe&&(pe=0),Re===fe&&(Re=0),we[oe]=de(W[oe],W[pe],W[Re]);const $=[];let H,q=we.concat();for(let oe=0,fe=O.length;oe<fe;oe++){const pe=O[oe];H=[];for(let Re=0,ve=pe.length,Ke=ve-1,Qe=Re+1;Re<ve;Re++,Ke++,Qe++)Ke===ve&&(Ke=0),Qe===ve&&(Qe=0),H[Re]=de(pe[Re],pe[Ke],pe[Qe]);$.push(H),q=q.concat(H)}for(let oe=0;oe<M;oe++){const fe=oe/M,pe=p*Math.cos(fe*Math.PI/2),Re=x*Math.sin(fe*Math.PI/2)+_;for(let ve=0,Ke=W.length;ve<Ke;ve++){const Qe=j(W[ve],we[ve],Re);Ue(Qe.x,Qe.y,-pe)}for(let ve=0,Ke=O.length;ve<Ke;ve++){const Qe=O[ve];H=$[ve];for(let Ze=0,Ct=Qe.length;Ze<Ct;Ze++){const U=j(Qe[Ze],H[Ze],Re);Ue(U.x,U.y,-pe)}}}const ee=x+_;for(let oe=0;oe<J;oe++){const fe=d?j(G[oe],q[oe],ee):G[oe];w?(B.copy(T.normals[0]).multiplyScalar(fe.x),C.copy(T.binormals[0]).multiplyScalar(fe.y),I.copy(A[0]).add(B).add(C),Ue(I.x,I.y,I.z)):Ue(fe.x,fe.y,0)}for(let oe=1;oe<=h;oe++)for(let fe=0;fe<J;fe++){const pe=d?j(G[fe],q[fe],ee):G[fe];w?(B.copy(T.normals[oe]).multiplyScalar(pe.x),C.copy(T.binormals[oe]).multiplyScalar(pe.y),I.copy(A[oe]).add(B).add(C),Ue(I.x,I.y,I.z)):Ue(pe.x,pe.y,m/h*oe)}for(let oe=M-1;oe>=0;oe--){const fe=oe/M,pe=p*Math.cos(fe*Math.PI/2),Re=x*Math.sin(fe*Math.PI/2)+_;for(let ve=0,Ke=W.length;ve<Ke;ve++){const Qe=j(W[ve],we[ve],Re);Ue(Qe.x,Qe.y,m+pe)}for(let ve=0,Ke=O.length;ve<Ke;ve++){const Qe=O[ve];H=$[ve];for(let Ze=0,Ct=Qe.length;Ze<Ct;Ze++){const U=j(Qe[Ze],H[Ze],Re);w?Ue(U.x,U.y+A[h-1].y,A[h-1].x+pe):Ue(U.x,U.y,m+pe)}}}ce(),Ie();function ce(){const oe=r.length/3;if(d){let fe=0,pe=J*fe;for(let Re=0;Re<K;Re++){const ve=L[Re];Be(ve[2]+pe,ve[1]+pe,ve[0]+pe)}fe=h+M*2,pe=J*fe;for(let Re=0;Re<K;Re++){const ve=L[Re];Be(ve[0]+pe,ve[1]+pe,ve[2]+pe)}}else{for(let fe=0;fe<K;fe++){const pe=L[fe];Be(pe[2],pe[1],pe[0])}for(let fe=0;fe<K;fe++){const pe=L[fe];Be(pe[0]+J*h,pe[1]+J*h,pe[2]+J*h)}}i.addGroup(oe,r.length/3-oe,0)}function Ie(){const oe=r.length/3;let fe=0;ae(W,fe),fe+=W.length;for(let pe=0,Re=O.length;pe<Re;pe++){const ve=O[pe];ae(ve,fe),fe+=ve.length}i.addGroup(oe,r.length/3-oe,1)}function ae(oe,fe){let pe=oe.length;for(;--pe>=0;){const Re=pe;let ve=pe-1;ve<0&&(ve=oe.length-1);for(let Ke=0,Qe=h+M*2;Ke<Qe;Ke++){const Ze=J*Ke,Ct=J*(Ke+1),U=fe+Re+Ze,D=fe+ve+Ze,le=fe+ve+Ct,me=fe+Re+Ct;Ae(U,D,le,me)}}}function Ue(oe,fe,pe){l.push(oe),l.push(fe),l.push(pe)}function Be(oe,fe,pe){De(oe),De(fe),De(pe);const Re=r.length/3,ve=y.generateTopUV(i,r,Re-3,Re-2,Re-1);nt(ve[0]),nt(ve[1]),nt(ve[2])}function Ae(oe,fe,pe,Re){De(oe),De(fe),De(Re),De(fe),De(pe),De(Re);const ve=r.length/3,Ke=y.generateSideWallUV(i,r,ve-6,ve-3,ve-2,ve-1);nt(Ke[0]),nt(Ke[1]),nt(Ke[3]),nt(Ke[1]),nt(Ke[2]),nt(Ke[3])}function De(oe){r.push(l[oe*3+0]),r.push(l[oe*3+1]),r.push(l[oe*3+2])}function nt(oe){s.push(oe.x),s.push(oe.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return eN(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Ey[r.type]().fromJSON(r)),new Pr(i,e.options)}}const $F={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],f=e[r*3],h=e[r*3+1];return[new ie(s,o),new ie(a,l),new ie(f,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],f=e[i*3],h=e[i*3+1],m=e[i*3+2],d=e[r*3],p=e[r*3+1],x=e[r*3+2],_=e[s*3],M=e[s*3+1],v=e[s*3+2];return Math.abs(a-h)<Math.abs(o-f)?[new ie(o,1-l),new ie(f,1-m),new ie(d,1-x),new ie(_,1-v)]:[new ie(a,1-l),new ie(h,1-m),new ie(p,1-x),new ie(M,1-v)]}};function eN(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ol extends Br{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ol(e.radius,e.detail)}}class kl extends je{constructor(e=[new ie(0,.5),new ie(.5,0),new ie(0,-.5)],t=12,i=0,r=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=kn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],f=[],h=1/t,m=new P,d=new ie,p=new P,x=new P,_=new P;let M=0,v=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:M=e[y+1].x-e[y].x,v=e[y+1].y-e[y].y,p.x=v*1,p.y=-M,p.z=v*0,_.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:M=e[y+1].x-e[y].x,v=e[y+1].y-e[y].y,p.x=v*1,p.y=-M,p.z=v*0,x.copy(p),p.x+=_.x,p.y+=_.y,p.z+=_.z,p.normalize(),l.push(p.x,p.y,p.z),_.copy(x)}for(let y=0;y<=t;y++){const A=i+y*h*r,w=Math.sin(A),T=Math.cos(A);for(let C=0;C<=e.length-1;C++){m.x=e[C].x*w,m.y=e[C].y,m.z=e[C].x*T,o.push(m.x,m.y,m.z),d.x=y/t,d.y=C/(e.length-1),a.push(d.x,d.y);const B=l[3*C+0]*w,I=l[3*C+1],k=l[3*C+0]*T;f.push(B,I,k)}}for(let y=0;y<t;y++)for(let A=0;A<e.length-1;A++){const w=A+y*e.length,T=w,C=w+e.length,B=w+e.length+1,I=w+1;s.push(T,C,I),s.push(C,B,I)}this.setIndex(s),this.setAttribute("position",new Ge(o,3)),this.setAttribute("uv",new Ge(a,2)),this.setAttribute("normal",new Ge(f,3))}static fromJSON(e){return new kl(e.points,e.segments,e.phiStart,e.phiLength)}}class ra extends Br{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t);this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ra(e.radius,e.detail)}}class Ul extends je{constructor(e=.5,t=1,i=8,r=1,s=0,o=Math.PI*2){super();this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],f=[],h=[];let m=e;const d=(t-e)/r,p=new P,x=new ie;for(let _=0;_<=r;_++){for(let M=0;M<=i;M++){const v=s+M/i*o;p.x=m*Math.cos(v),p.y=m*Math.sin(v),l.push(p.x,p.y,p.z),f.push(0,0,1),x.x=(p.x/t+1)/2,x.y=(p.y/t+1)/2,h.push(x.x,x.y)}m+=d}for(let _=0;_<r;_++){const M=_*(i+1);for(let v=0;v<i;v++){const y=v+M,A=y,w=y+i+1,T=y+i+2,C=y+1;a.push(A,w,C),a.push(w,T,C)}}this.setIndex(a),this.setAttribute("position",new Ge(l,3)),this.setAttribute("normal",new Ge(f,3)),this.setAttribute("uv",new Ge(h,2))}static fromJSON(e){return new Ul(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class sa extends je{constructor(e=new Rr([new ie(0,.5),new ie(-.5,-.5),new ie(.5,-.5)]),t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)f(e);else for(let h=0;h<e.length;h++)f(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ge(r,3)),this.setAttribute("normal",new Ge(s,3)),this.setAttribute("uv",new Ge(o,2));function f(h){const m=r.length/3,d=h.extractPoints(t);let p=d.shape;const x=d.holes;Lr.isClockWise(p)===!1&&(p=p.reverse());for(let M=0,v=x.length;M<v;M++){const y=x[M];Lr.isClockWise(y)===!0&&(x[M]=y.reverse())}const _=Lr.triangulateShape(p,x);for(let M=0,v=x.length;M<v;M++){const y=x[M];p=p.concat(y)}for(let M=0,v=p.length;M<v;M++){const y=p[M];r.push(y.x,y.y,0),s.push(0,0,1),o.push(y.x,y.y)}for(let M=0,v=_.length;M<v;M++){const y=_[M],A=y[0]+m,w=y[1]+m,T=y[2]+m;i.push(A,w,T),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return tN(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new sa(i,e.curveSegments)}}function tN(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class oa extends je{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let f=0;const h=[],m=new P,d=new P,p=[],x=[],_=[],M=[];for(let v=0;v<=i;v++){const y=[],A=v/i;let w=0;v==0&&o==0?w=.5/t:v==i&&l==Math.PI&&(w=-.5/t);for(let T=0;T<=t;T++){const C=T/t;m.x=-e*Math.cos(r+C*s)*Math.sin(o+A*a),m.y=e*Math.cos(o+A*a),m.z=e*Math.sin(r+C*s)*Math.sin(o+A*a),x.push(m.x,m.y,m.z),d.copy(m).normalize(),_.push(d.x,d.y,d.z),M.push(C+w,1-A),y.push(f++)}h.push(y)}for(let v=0;v<i;v++)for(let y=0;y<t;y++){const A=h[v][y+1],w=h[v][y],T=h[v+1][y],C=h[v+1][y+1];(v!==0||o>0)&&p.push(A,w,C),(v!==i-1||l<Math.PI)&&p.push(w,T,C)}this.setIndex(p),this.setAttribute("position",new Ge(x,3)),this.setAttribute("normal",new Ge(_,3)),this.setAttribute("uv",new Ge(M,2))}static fromJSON(e){return new oa(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Gl extends Br{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t);this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gl(e.radius,e.detail)}}class Hl extends je{constructor(e=1,t=.4,i=8,r=6,s=Math.PI*2){super();this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],f=[],h=new P,m=new P,d=new P;for(let p=0;p<=i;p++)for(let x=0;x<=r;x++){const _=x/r*s,M=p/i*Math.PI*2;m.x=(e+t*Math.cos(M))*Math.cos(_),m.y=(e+t*Math.cos(M))*Math.sin(_),m.z=t*Math.sin(M),a.push(m.x,m.y,m.z),h.x=e*Math.cos(_),h.y=e*Math.sin(_),d.subVectors(m,h).normalize(),l.push(d.x,d.y,d.z),f.push(x/r),f.push(p/i)}for(let p=1;p<=i;p++)for(let x=1;x<=r;x++){const _=(r+1)*p+x-1,M=(r+1)*(p-1)+x-1,v=(r+1)*(p-1)+x,y=(r+1)*p+x;o.push(_,M,y),o.push(M,v,y)}this.setIndex(o),this.setAttribute("position",new Ge(a,3)),this.setAttribute("normal",new Ge(l,3)),this.setAttribute("uv",new Ge(f,2))}static fromJSON(e){return new Hl(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class zl extends je{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],f=[],h=[],m=new P,d=new P,p=new P,x=new P,_=new P,M=new P,v=new P;for(let A=0;A<=i;++A){const w=A/i*s*Math.PI*2;y(w,s,o,e,p),y(w+.01,s,o,e,x),M.subVectors(x,p),v.addVectors(x,p),_.crossVectors(M,v),v.crossVectors(_,M),_.normalize(),v.normalize();for(let T=0;T<=r;++T){const C=T/r*Math.PI*2,B=-t*Math.cos(C),I=t*Math.sin(C);m.x=p.x+(B*v.x+I*_.x),m.y=p.y+(B*v.y+I*_.y),m.z=p.z+(B*v.z+I*_.z),l.push(m.x,m.y,m.z),d.subVectors(m,p).normalize(),f.push(d.x,d.y,d.z),h.push(A/i),h.push(T/r)}}for(let A=1;A<=i;A++)for(let w=1;w<=r;w++){const T=(r+1)*(A-1)+(w-1),C=(r+1)*A+(w-1),B=(r+1)*A+w,I=(r+1)*(A-1)+w;a.push(T,C,I),a.push(C,B,I)}this.setIndex(a),this.setAttribute("position",new Ge(l,3)),this.setAttribute("normal",new Ge(f,3)),this.setAttribute("uv",new Ge(h,2));function y(A,w,T,C,B){const I=Math.cos(A),k=Math.sin(A),G=T/w*A,O=Math.cos(G);B.x=C*(2+O)*.5*I,B.y=C*(2+O)*k*.5,B.z=C*Math.sin(G)*.5}}static fromJSON(e){return new zl(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Vl extends je{constructor(e=new up(new P(-1,-1,0),new P(-1,1,0),new P(1,1,0)),t=64,i=1,r=8,s=!1){super();this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new P,l=new P,f=new ie;let h=new P;const m=[],d=[],p=[],x=[];_(),this.setIndex(x),this.setAttribute("position",new Ge(m,3)),this.setAttribute("normal",new Ge(d,3)),this.setAttribute("uv",new Ge(p,2));function _(){for(let A=0;A<t;A++)M(A);M(s===!1?t:0),y(),v()}function M(A){h=e.getPointAt(A/t,h);const w=o.normals[A],T=o.binormals[A];for(let C=0;C<=r;C++){const B=C/r*Math.PI*2,I=Math.sin(B),k=-Math.cos(B);l.x=k*w.x+I*T.x,l.y=k*w.y+I*T.y,l.z=k*w.z+I*T.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,m.push(a.x,a.y,a.z)}}function v(){for(let A=1;A<=t;A++)for(let w=1;w<=r;w++){const T=(r+1)*(A-1)+(w-1),C=(r+1)*A+(w-1),B=(r+1)*A+w,I=(r+1)*(A-1)+w;x.push(T,C,I),x.push(C,B,I)}}function y(){for(let A=0;A<=t;A++)for(let w=0;w<=r;w++)f.x=A/t,f.y=w/r,p.push(f.x,f.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Vl(new Ey[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class by extends je{constructor(e=null){super();if(this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new P,s=new P;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let f=0,h=l.length;f<h;++f){const m=l[f],d=m.start,p=m.count;for(let x=d,_=d+p;x<_;x+=3)for(let M=0;M<3;M++){const v=a.getX(x+M),y=a.getX(x+(M+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,y),eE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let f=0;f<3;f++){const h=3*a+f,m=3*a+(f+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,m),eE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ge(t,3))}}}function eE(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i,r),!0)}var tE=Object.freeze({__proto__:null,BoxGeometry:as,BoxBufferGeometry:as,CircleGeometry:Il,CircleBufferGeometry:Il,ConeGeometry:Dl,ConeBufferGeometry:Dl,CylinderGeometry:$s,CylinderBufferGeometry:$s,DodecahedronGeometry:Fl,DodecahedronBufferGeometry:Fl,EdgesGeometry:yy,ExtrudeGeometry:Pr,ExtrudeBufferGeometry:Pr,IcosahedronGeometry:Ol,IcosahedronBufferGeometry:Ol,LatheGeometry:kl,LatheBufferGeometry:kl,OctahedronGeometry:ra,OctahedronBufferGeometry:ra,PlaneGeometry:Zo,PlaneBufferGeometry:Zo,PolyhedronGeometry:Br,PolyhedronBufferGeometry:Br,RingGeometry:Ul,RingBufferGeometry:Ul,ShapeGeometry:sa,ShapeBufferGeometry:sa,SphereGeometry:oa,SphereBufferGeometry:oa,TetrahedronGeometry:Gl,TetrahedronBufferGeometry:Gl,TorusGeometry:Hl,TorusBufferGeometry:Hl,TorusKnotGeometry:zl,TorusKnotBufferGeometry:zl,TubeGeometry:Vl,TubeBufferGeometry:Vl,WireframeGeometry:by});class By extends un{constructor(e){super();this.type="ShadowMaterial",this.color=new ye(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}By.prototype.isShadowMaterial=!0;class aa extends un{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ye(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ks,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}aa.prototype.isMeshStandardMaterial=!0;class cs extends aa{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return kn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new ye(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new ye(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ye(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}cs.prototype.isMeshPhysicalMaterial=!0;class Ry extends un{constructor(e){super();this.type="MeshPhongMaterial",this.color=new ye(16777215),this.specular=new ye(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ks,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Ry.prototype.isMeshPhongMaterial=!0;class Ly extends un{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ye(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ks,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Ly.prototype.isMeshToonMaterial=!0;class pp extends un{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ks,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}pp.prototype.isMeshNormalMaterial=!0;class Py extends un{constructor(e){super();this.type="MeshLambertMaterial",this.color=new ye(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=rc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Py.prototype.isMeshLambertMaterial=!0;class Iy extends un{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ye(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ks,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}Iy.prototype.isMeshMatcapMaterial=!0;class Dy extends wn{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}Dy.prototype.isLineDashedMaterial=!0;var nN=Object.freeze({__proto__:null,ShadowMaterial:By,SpriteMaterial:jh,RawShaderMaterial:Al,ShaderMaterial:di,PointsMaterial:Zs,MeshPhysicalMaterial:cs,MeshStandardMaterial:aa,MeshPhongMaterial:Ry,MeshToonMaterial:Ly,MeshNormalMaterial:pp,MeshLambertMaterial:Py,MeshDepthMaterial:Wh,MeshDistanceMaterial:Jh,MeshBasicMaterial:fi,MeshMatcapMaterial:Iy,LineDashedMaterial:Dy,LineBasicMaterial:wn,Material:un});const Jt={arraySlice:function(n,e,t){return Jt.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const f=s.tracks[l],h=f.getValueSize(),m=[],d=[];for(let p=0;p<f.times.length;++p){const x=f.times[p]*r;if(!(x<t||x>=i)){m.push(f.times[p]);for(let _=0;_<h;++_)d.push(f.values[p*h+_])}}m.length!==0&&(f.times=Jt.convertArray(m,f.times.constructor),f.values=Jt.convertArray(d,f.values.constructor),o.push(f))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const f=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(f===void 0)continue;let h=0;const m=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);let d=0;const p=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);const x=a.times.length-1;let _;if(s<=a.times[0]){const v=h,y=m-h;_=Jt.arraySlice(a.values,v,y)}else if(s>=a.times[x]){const v=x*m+h,y=v+m-h;_=Jt.arraySlice(a.values,v,y)}else{const v=a.createInterpolant(),y=h,A=m-h;v.evaluate(s),_=Jt.arraySlice(v.resultBuffer,y,A)}l==="quaternion"&&new Mn().fromArray(_).normalize().conjugate().toArray(_);const M=f.times.length;for(let v=0;v<M;++v){const y=v*p+d;if(l==="quaternion")Mn.multiplyQuaternionsFlat(f.values,y,_,0,f.values,y);else{const A=p-d*2;for(let w=0;w<A;++w)f.values[y+w]-=_[w]}}}return n.blendMode=b0,n}};class Ir{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Ir.prototype.beforeStart_=Ir.prototype.copySampleValue_;Ir.prototype.afterEnd_=Ir.prototype.copySampleValue_;class nE extends Ir{constructor(e,t,i,r){super(e,t,i,r);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Vo,endingEnd:Vo}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Wo:s=e,a=2*t-i;break;case cc:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Wo:o=e,l=2*i-t;break;case cc:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const f=(i-t)*.5,h=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,h=this._offsetPrev,m=this._offsetNext,d=this._weightPrev,p=this._weightNext,x=(i-t)/(r-t),_=x*x,M=_*x,v=-d*M+2*d*_-d*x,y=(1+d)*M+(-1.5-2*d)*_+(-.5+d)*x+1,A=(-1-p)*M+(1.5+p)*_+.5*x,w=p*M-p*_;for(let T=0;T!==a;++T)s[T]=v*o[h+T]+y*o[f+T]+A*o[l+T]+w*o[m+T];return s}}class Fy extends Ir{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,h=(i-t)/(r-t),m=1-h;for(let d=0;d!==a;++d)s[d]=o[f+d]*m+o[l+d]*h;return s}}class iE extends Ir{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class or{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jt.convertArray(t,this.TimeBufferType),this.values=Jt.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Jt.convertArray(e.times,Array),values:Jt.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new iE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Fy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new nE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case rl:t=this.InterpolantFactoryMethodDiscrete;break;case zo:t=this.InterpolantFactoryMethodLinear;break;case dh:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return rl;case this.InterpolantFactoryMethodLinear:return zo;case this.InterpolantFactoryMethodSmooth:return dh}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Jt.arraySlice(i,s,o),this.values=Jt.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&Jt.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const f=r[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){const e=Jt.arraySlice(this.times),t=Jt.arraySlice(this.values),i=this.getValueSize(),r=this.getInterpolation()===dh,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const f=e[a],h=e[a+1];if(f!==h&&(a!==1||f!==e[0]))if(r)l=!0;else{const m=a*i,d=m-i,p=m+i;for(let x=0;x!==i;++x){const _=t[m+x];if(_!==t[d+x]||_!==t[p+x]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const m=a*i,d=o*i;for(let p=0;p!==i;++p)t[d+p]=t[m+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,f=0;f!==i;++f)t[l+f]=t[a+f];++o}return o!==e.length?(this.times=Jt.arraySlice(e,0,o),this.values=Jt.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Jt.arraySlice(this.times,0),t=Jt.arraySlice(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}or.prototype.TimeBufferType=Float32Array;or.prototype.ValueBufferType=Float32Array;or.prototype.DefaultInterpolation=zo;class la extends or{}la.prototype.ValueTypeName="bool";la.prototype.ValueBufferType=Array;la.prototype.DefaultInterpolation=rl;la.prototype.InterpolantFactoryMethodLinear=void 0;la.prototype.InterpolantFactoryMethodSmooth=void 0;class Ny extends or{}Ny.prototype.ValueTypeName="color";class Wl extends or{}Wl.prototype.ValueTypeName="number";class rE extends Ir{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let f=e*a;for(let h=f+a;f!==h;f+=4)Mn.slerpFlat(s,0,o,f-a,o,f,l);return s}}class to extends or{InterpolantFactoryMethodLinear(e){return new rE(this.times,this.values,this.getValueSize(),e)}}to.prototype.ValueTypeName="quaternion";to.prototype.DefaultInterpolation=zo;to.prototype.InterpolantFactoryMethodSmooth=void 0;class ua extends or{}ua.prototype.ValueTypeName="string";ua.prototype.ValueBufferType=Array;ua.prototype.DefaultInterpolation=rl;ua.prototype.InterpolantFactoryMethodLinear=void 0;ua.prototype.InterpolantFactoryMethodSmooth=void 0;class Jl extends or{}Jl.prototype.ValueTypeName="vector";class jl{constructor(e,t=-1,i,r=hh){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Mi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(rN(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(or.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],f=[];l.push((a+s-1)%s,a,(a+1)%s),f.push(0,1,0);const h=Jt.getKeyframeOrder(l);l=Jt.sortedArray(l,1,h),f=Jt.sortedArray(f,1,h),!r&&l[0]===0&&(l.push(s),f.push(f[0])),o.push(new Wl(".morphTargetInfluences["+t[a].name+"]",l,f).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const f=e[a],h=f.name.match(s);if(h&&h.length>1){const m=h[1];let d=r[m];d||(r[m]=d=[]),d.push(f)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(m,d,p,x,_){if(p.length!==0){const M=[],v=[];Jt.flattenJSON(p,M,v,x),M.length!==0&&_.push(new m(d,M,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const f=e.hierarchy||[];for(let m=0;m<f.length;m++){const d=f[m].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const p={};let x;for(x=0;x<d.length;x++)if(d[x].morphTargets)for(let _=0;_<d[x].morphTargets.length;_++)p[d[x].morphTargets[_]]=-1;for(const _ in p){const M=[],v=[];for(let y=0;y!==d[x].morphTargets.length;++y){const A=d[x];M.push(A.time),v.push(A.morphTarget===_?1:0)}r.push(new Wl(".morphTargetInfluence["+_+"]",M,v))}l=p.length*(o||1)}else{const p=".bones["+t[m].name+"]";i(Jl,p+".position",d,"pos",r),i(to,p+".quaternion",d,"rot",r),i(Jl,p+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function iN(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wl;case"vector":case"vector2":case"vector3":case"vector4":return Jl;case"color":return Ny;case"quaternion":return to;case"bool":case"boolean":return la;case"string":return ua}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function rN(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=iN(n.type);if(n.times===void 0){const t=[],i=[];Jt.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ca={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Oy{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,m){return f.push(h,m),this},this.removeHandler=function(h){const m=f.indexOf(h);return m!==-1&&f.splice(m,2),this},this.getHandler=function(h){for(let m=0,d=f.length;m<d;m+=2){const p=f[m],x=f[m+1];if(p.global&&(p.lastIndex=0),p.test(h))return x}return null}}}const sE=new Oy;class Un{constructor(e){this.manager=e!==void 0?e:sE,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const fs={};class hi extends Un{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ca.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(fs[e]!==void 0){fs[e].push({onLoad:t,onProgress:i,onError:r});return}fs[e]=[],fs[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then(a=>{if(a.status===200||a.status===0){if(a.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||a.body.getReader===void 0)return a;const l=fs[e],f=a.body.getReader(),h=a.headers.get("Content-Length"),m=h?parseInt(h):0,d=m!==0;let p=0;const x=new ReadableStream({start(_){M();function M(){f.read().then(({done:v,value:y})=>{if(v)_.close();else{p+=y.byteLength;const A=new ProgressEvent("progress",{lengthComputable:d,loaded:p,total:m});for(let w=0,T=l.length;w<T;w++){const C=l[w];C.onProgress&&C.onProgress(A)}_.enqueue(y),M()}})}}});return new Response(x)}else throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{switch(this.responseType){case"arraybuffer":return a.arrayBuffer();case"blob":return a.blob();case"document":return a.text().then(l=>new DOMParser().parseFromString(l,this.mimeType));case"json":return a.json();default:return a.text()}}).then(a=>{ca.add(e,a);const l=fs[e];delete fs[e];for(let f=0,h=l.length;f<h;f++){const m=l[f];m.onLoad&&m.onLoad(a)}}).catch(a=>{const l=fs[e];if(l===void 0)throw this.manager.itemError(e),a;delete fs[e];for(let f=0,h=l.length;f<h;f++){const m=l[f];m.onError&&m.onError(a)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class sN extends Un{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new hi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=jl.parse(e[i]);t.push(r)}return t}}class oN extends Un{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new my,l=new hi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let f=0;function h(m){l.load(e[m],function(d){const p=s.parse(d,!0);o[m]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},f+=1,f===6&&(p.mipmapCount===1&&(a.minFilter=xt),a.image=o,a.format=p.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let m=0,d=e.length;m<d;++m)h(m);else l.load(e,function(m){const d=s.parse(m,!0);if(d.isCubemap){const p=d.mipmaps.length/d.mipmapCount;for(let x=0;x<p;x++){o[x]={mipmaps:[]};for(let _=0;_<d.mipmapCount;_++)o[x].mipmaps.push(d.mipmaps[x*d.mipmapCount+_]),o[x].format=d.format,o[x].width=d.width,o[x].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=xt),a.format=d.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class kc extends Un{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ca.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=gh("img");function l(){h(),ca.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(m){h(),r&&r(m),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",f,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class oE extends Un{constructor(e){super(e)}load(e,t,i,r){const s=new Ml,o=new kc(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(f){o.load(e[f],function(h){s.images[f]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)l(f);return s}}class aE extends Un{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new na,a=new hi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const f=s.parse(l);!f||(f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:Cn,o.wrapT=f.wrapT!==void 0?f.wrapT:Cn,o.magFilter=f.magFilter!==void 0?f.magFilter:xt,o.minFilter=f.minFilter!==void 0?f.minFilter:xt,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.encoding!==void 0&&(o.encoding=f.encoding),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Ar),f.mipmapCount===1&&(o.minFilter=xt),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f))},i,r),o}}class ky extends Un{constructor(e){super(e)}load(e,t,i,r){const s=new Zt,o=new kc(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class ar extends ht{constructor(e,t=1){super();this.type="Light",this.color=new ye(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}ar.prototype.isLight=!0;class Uy extends ar{constructor(e,t,i){super(e,i);this.type="HemisphereLight",this.position.copy(ht.DefaultUp),this.updateMatrix(),this.groundColor=new ye(t)}copy(e){return ar.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Uy.prototype.isHemisphereLight=!0;const lE=new Fe,uE=new P,cE=new P;class Gy{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ie(512,512),this.map=null,this.mapPass=null,this.matrix=new Fe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yc,this._frameExtents=new ie(1,1),this._viewportCount=1,this._viewports=[new Pt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;uE.setFromMatrixPosition(e.matrixWorld),t.position.copy(uE),cE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(cE),t.updateMatrixWorld(),lE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lE),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class fE extends Gy{constructor(){super(new cn(50,1,.5,500));this.focus=1}updateMatrices(e){const t=this.camera,i=fc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}fE.prototype.isSpotLightShadow=!0;class mp extends ar{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t);this.type="SpotLight",this.position.copy(ht.DefaultUp),this.updateMatrix(),this.target=new ht,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new fE}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}mp.prototype.isSpotLight=!0;const dE=new Fe,Uc=new P,Hy=new P;class hE extends Gy{constructor(){super(new cn(90,1,.5,500));this._frameExtents=new ie(4,2),this._viewportCount=6,this._viewports=[new Pt(2,1,1,1),new Pt(0,1,1,1),new Pt(3,1,1,1),new Pt(1,1,1,1),new Pt(3,0,1,1),new Pt(1,0,1,1)],this._cubeDirections=[new P(1,0,0),new P(-1,0,0),new P(0,0,1),new P(0,0,-1),new P(0,1,0),new P(0,-1,0)],this._cubeUps=[new P(0,1,0),new P(0,1,0),new P(0,1,0),new P(0,1,0),new P(0,0,1),new P(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Uc.setFromMatrixPosition(e.matrixWorld),i.position.copy(Uc),Hy.copy(i.position),Hy.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Hy),i.updateMatrixWorld(),r.makeTranslation(-Uc.x,-Uc.y,-Uc.z),dE.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dE)}}hE.prototype.isPointLightShadow=!0;class gp extends ar{constructor(e,t,i=0,r=1){super(e,t);this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new hE}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}gp.prototype.isPointLight=!0;class pE extends Gy{constructor(){super(new $o(-5,5,5,-5,.5,500))}}pE.prototype.isDirectionalLightShadow=!0;class yp extends ar{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(ht.DefaultUp),this.updateMatrix(),this.target=new ht,this.shadow=new pE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}yp.prototype.isDirectionalLight=!0;class zy extends ar{constructor(e,t){super(e,t);this.type="AmbientLight"}}zy.prototype.isAmbientLight=!0;class Vy extends ar{constructor(e,t,i=10,r=10){super(e,t);this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}Vy.prototype.isRectAreaLight=!0;class Wy{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new P)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}Wy.prototype.isSphericalHarmonics3=!0;class Gc extends ar{constructor(e=new Wy,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Gc.prototype.isLightProbe=!0;class mE extends Un{constructor(e){super(e);this.textures={}}load(e,t,i,r){const s=this,o=new hi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=new nN[e.type];if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ye().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.format!==void 0&&(r.format=e.format),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ye().setHex(o.value);break;case"v2":r.uniforms[s].value=new ie().fromArray(o.value);break;case"v3":r.uniforms[s].value=new P().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Pt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new _n().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Fe().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ie().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ie().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}}class lr{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Jy extends je{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}Jy.prototype.isInstancedBufferGeometry=!0;class gE extends Un{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new hi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(p,x){if(t[x]!==void 0)return t[x];const M=p.interleavedBuffers[x],v=s(p,M.buffer),y=ol(M.type,v),A=new qs(y,M.stride);return A.uuid=M.uuid,t[x]=A,A}function s(p,x){if(i[x]!==void 0)return i[x];const M=p.arrayBuffers[x],v=new Uint32Array(M).buffer;return i[x]=v,v}const o=e.isInstancedBufferGeometry?new Jy:new je,a=e.data.index;if(a!==void 0){const p=ol(a.type,a.array);o.setIndex(new lt(p,1))}const l=e.data.attributes;for(const p in l){const x=l[p];let _;if(x.isInterleavedBufferAttribute){const M=r(e.data,x.data);_=new us(M,x.itemSize,x.offset,x.normalized)}else{const M=ol(x.type,x.array),v=x.isInstancedBufferAttribute?ia:lt;_=new v(M,x.itemSize,x.normalized)}x.name!==void 0&&(_.name=x.name),x.usage!==void 0&&_.setUsage(x.usage),x.updateRange!==void 0&&(_.updateRange.offset=x.updateRange.offset,_.updateRange.count=x.updateRange.count),o.setAttribute(p,_)}const f=e.data.morphAttributes;if(f)for(const p in f){const x=f[p],_=[];for(let M=0,v=x.length;M<v;M++){const y=x[M];let A;if(y.isInterleavedBufferAttribute){const w=r(e.data,y.data);A=new us(w,y.itemSize,y.offset,y.normalized)}else{const w=ol(y.type,y.array);A=new lt(w,y.itemSize,y.normalized)}y.name!==void 0&&(A.name=y.name),_.push(A)}o.morphAttributes[p]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let p=0,x=m.length;p!==x;++p){const _=m[p];o.addGroup(_.start,_.count,_.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const p=new P;d.center!==void 0&&p.fromArray(d.center),o.boundingSphere=new ns(p,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class aN extends Un{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?lr.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new hi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let f=null;try{f=JSON.parse(l)}catch(m){r!==void 0&&r(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const h=f.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?lr.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new hi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),f=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,h),t!==void 0){let m=!1;for(const d in o)if(o[d]instanceof HTMLImageElement){m=!0;break}m===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),f=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,f),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Rr().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new bc().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new gE;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:l.type in tE?a=tE[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new mE;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l.type==="MultiMaterial"){const f=[];for(let h=0;h<l.materials.length;h++){const m=l.materials[h];i[m.uuid]===void 0&&(i[m.uuid]=s.parse(m)),f.push(i[m.uuid])}r[l.uuid]=f}else i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=jl.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const f=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return o(h)}else return l.data?{data:ol(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Oy(t);s=new kc(l),s.setCrossOrigin(this.crossOrigin);for(let f=0,h=e.length;f<h;f++){const m=e[f],d=m.url;if(Array.isArray(d)){r[m.uuid]=[];for(let p=0,x=d.length;p<x;p++){const _=d[p],M=a(_);M!==null&&(M instanceof HTMLImageElement?r[m.uuid].push(M):r[m.uuid].push(new na(M.data,M.width,M.height)))}}else{const p=a(m.url);p!==null&&(r[m.uuid]=p)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:ol(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new kc(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],f=l.url;if(Array.isArray(f)){i[l.uuid]=[];for(let h=0,m=f.length;h<m;h++){const d=f[h],p=await s(d);p!==null&&(p instanceof HTMLImageElement?i[l.uuid].push(p):i[l.uuid].push(new na(p.data,p.width,p.height)))}}else{const h=await s(l.url);h!==null&&(i[l.uuid]=h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);let l;const f=t[a.image];Array.isArray(f)?(l=new Ml(f),f.length===6&&(l.needsUpdate=!0)):(f&&f.data?l=new na(f.data,f.width,f.height):l=new Zt(f),f&&(l.needsUpdate=!0)),l.uuid=a.uuid,a.name!==void 0&&(l.name=a.name),a.mapping!==void 0&&(l.mapping=i(a.mapping,lN)),a.offset!==void 0&&l.offset.fromArray(a.offset),a.repeat!==void 0&&l.repeat.fromArray(a.repeat),a.center!==void 0&&l.center.fromArray(a.center),a.rotation!==void 0&&(l.rotation=a.rotation),a.wrap!==void 0&&(l.wrapS=i(a.wrap[0],yE),l.wrapT=i(a.wrap[1],yE)),a.format!==void 0&&(l.format=a.format),a.type!==void 0&&(l.type=a.type),a.encoding!==void 0&&(l.encoding=a.encoding),a.minFilter!==void 0&&(l.minFilter=i(a.minFilter,vE)),a.magFilter!==void 0&&(l.magFilter=i(a.magFilter,vE)),a.anisotropy!==void 0&&(l.anisotropy=a.anisotropy),a.flipY!==void 0&&(l.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(l.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(l.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(l.userData=a.userData),r[a.uuid]=l}return r}parseObject(e,t,i,r,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const p=[];for(let x=0,_=d.length;x<_;x++){const M=d[x];i[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),p.push(i[M])}return p}return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),i[d]}}function f(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let h,m;switch(e.type){case"Scene":o=new ls,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ye(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new wc(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Mc(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new cn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new $o(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new zy(e.color,e.intensity);break;case"DirectionalLight":o=new yp(e.color,e.intensity);break;case"PointLight":o=new gp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Vy(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new mp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Uy(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Gc().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),m=l(e.material),o=new Tc(h,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),m=l(e.material),o=new $t(h,m);break;case"InstancedMesh":h=a(e.geometry),m=l(e.material);const d=e.count,p=e.instanceMatrix,x=e.instanceColor;o=new dy(h,m,d),o.instanceMatrix=new ia(new Float32Array(p.array),16),x!==void 0&&(o.instanceColor=new ia(new Float32Array(x.array),x.itemSize));break;case"LOD":o=new CS;break;case"Line":o=new br(a(e.geometry),l(e.material));break;case"LineLoop":o=new ep(a(e.geometry),l(e.material));break;case"LineSegments":o=new ti(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Pl(a(e.geometry),l(e.material));break;case"Sprite":o=new Qh(l(e.material));break;case"Group":o=new sr;break;case"Bone":o=new Cc;break;default:o=new ht}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let p=0;p<d.length;p++)o.add(this.parseObject(d[p],t,i,r,s))}if(e.animations!==void 0){const d=e.animations;for(let p=0;p<d.length;p++){const x=d[p];o.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let p=0;p<d.length;p++){const x=d[p],_=o.getObjectByProperty("uuid",x.object);_!==void 0&&o.addLevel(_,x.distance)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const lN={UVMapping:ch,CubeReflectionMapping:Go,CubeRefractionMapping:Ho,EquirectangularReflectionMapping:sc,EquirectangularRefractionMapping:oc,CubeUVReflectionMapping:el,CubeUVRefractionMapping:ac},yE={RepeatWrapping:Ds,ClampToEdgeWrapping:Cn,MirroredRepeatWrapping:tl},vE={NearestFilter:Ht,NearestMipmapNearestFilter:lc,NearestMipmapLinearFilter:uc,LinearFilter:xt,LinearMipmapNearestFilter:fh,LinearMipmapLinearFilter:Ar};class jy extends Un{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ca.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){ca.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}jy.prototype.isImageBitmapLoader=!0;let vp;const Xy={getContext:function(){return vp===void 0&&(vp=new(window.AudioContext||window.webkitAudioContext)),vp},setContext:function(n){vp=n}};class xE extends Un{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new hi(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);Xy.getContext().decodeAudioData(l,function(h){t(h)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class _E extends Gc{constructor(e,t,i=1){super(void 0,i);const r=new ye().set(e),s=new ye().set(t),o=new P(r.r,r.g,r.b),a=new P(s.r,s.g,s.b),l=Math.sqrt(Math.PI),f=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(f)}}_E.prototype.isHemisphereLightProbe=!0;class ME extends Gc{constructor(e,t=1){super(void 0,t);const i=new ye().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}ME.prototype.isAmbientLightProbe=!0;const wE=new Fe,AE=new Fe,fa=new Fe;class uN{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new cn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new cn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,fa.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Jo*t.fov*.5)/t.zoom;let a,l;AE.elements[12]=-r,wE.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,fa.elements[0]=2*t.near/(l-a),fa.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(fa),a=-o*t.aspect-s,l=o*t.aspect-s,fa.elements[0]=2*t.near/(l-a),fa.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(fa)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(AE),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(wE)}}class Ky{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=SE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=SE();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function SE(){return(typeof performance=="undefined"?Date:performance).now()}const da=new P,EE=new Mn,cN=new P,ha=new P;class fN extends ht{constructor(){super();this.type="AudioListener",this.context=Xy.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ky}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(da,EE,cN),ha.set(0,0,-1).applyQuaternion(EE),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(da.x,r),t.positionY.linearRampToValueAtTime(da.y,r),t.positionZ.linearRampToValueAtTime(da.z,r),t.forwardX.linearRampToValueAtTime(ha.x,r),t.forwardY.linearRampToValueAtTime(ha.y,r),t.forwardZ.linearRampToValueAtTime(ha.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(da.x,da.y,da.z),t.setOrientation(ha.x,ha.y,ha.z,i.x,i.y,i.z)}}class Qy extends ht{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const pa=new P,TE=new Mn,dN=new P,ma=new P;class hN extends Qy{constructor(e){super(e);this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(pa,TE,dN),ma.set(0,0,1).applyQuaternion(TE);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(pa.x,i),t.positionY.linearRampToValueAtTime(pa.y,i),t.positionZ.linearRampToValueAtTime(pa.z,i),t.orientationX.linearRampToValueAtTime(ma.x,i),t.orientationY.linearRampToValueAtTime(ma.y,i),t.orientationZ.linearRampToValueAtTime(ma.z,i)}else t.setPosition(pa.x,pa.y,pa.z),t.setOrientation(ma.x,ma.y,ma.z)}}class CE{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class bE{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,f=t+t;l!==f;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Mn.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Mn.multiplyQuaternionsFlat(e,o,e,t,e,i),Mn.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const Yy="\\[\\]\\.:\\/",pN=new RegExp("["+Yy+"]","g"),qy="[^"+Yy+"]",mN="[^"+Yy.replace("\\.","")+"]",gN=/((?:WC+[\/:])*)/.source.replace("WC",qy),yN=/(WCOD+)?/.source.replace("WCOD",mN),vN=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qy),xN=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qy),_N=new RegExp("^"+gN+yN+vN+xN+"$"),MN=["material","materials","bones"];class wN{constructor(e,t,i){const r=i||St.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class St{constructor(e,t,i){this.path=t,this.parsedPath=i||St.parseTrackName(t),this.node=St.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new St.Composite(e,t,i):new St(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(pN,"")}static parseTrackName(e){const t=_N.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);MN.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=St.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[r];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}St.Composite=wN;St.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};St.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};St.prototype.GetterByBindingType=[St.prototype._getValue_direct,St.prototype._getValue_array,St.prototype._getValue_arrayElement,St.prototype._getValue_toArray];St.prototype.SetterByBindingTypeAndVersioning=[[St.prototype._setValue_direct,St.prototype._setValue_direct_setNeedsUpdate,St.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[St.prototype._setValue_array,St.prototype._setValue_array_setNeedsUpdate,St.prototype._setValue_array_setMatrixWorldNeedsUpdate],[St.prototype._setValue_arrayElement,St.prototype._setValue_arrayElement_setNeedsUpdate,St.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[St.prototype._setValue_fromArray,St.prototype._setValue_fromArray_setNeedsUpdate,St.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class BE{constructor(){this.uuid=Mi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,f=this.nCachedObjects_;for(let h=0,m=arguments.length;h!==m;++h){const d=arguments[h],p=d.uuid;let x=t[p];if(x===void 0){x=l++,t[p]=x,e.push(d);for(let _=0,M=o;_!==M;++_)s[_].push(new St(d,i[_],r[_]))}else if(x<f){a=e[x];const _=--f,M=e[_];t[M.uuid]=x,e[x]=M,t[p]=_,e[_]=d;for(let v=0,y=o;v!==y;++v){const A=s[v],w=A[_];let T=A[x];A[x]=w,T===void 0&&(T=new St(d,i[v],r[v])),A[_]=T}}else e[x]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],f=l.uuid,h=t[f];if(h!==void 0&&h>=s){const m=s++,d=e[m];t[d.uuid]=h,e[h]=d,t[f]=m,e[m]=l;for(let p=0,x=r;p!==x;++p){const _=i[p],M=_[m],v=_[h];_[h]=M,_[m]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const f=arguments[a],h=f.uuid,m=t[h];if(m!==void 0)if(delete t[h],m<s){const d=--s,p=e[d],x=--o,_=e[x];t[p.uuid]=m,e[m]=p,t[_.uuid]=d,e[d]=_,e.pop();for(let M=0,v=r;M!==v;++M){const y=i[M],A=y[d],w=y[x];y[m]=A,y[d]=w,y.pop()}}else{const d=--o,p=e[d];d>0&&(t[p.uuid]=m),e[m]=p,e.pop();for(let x=0,_=r;x!==_;++x){const M=i[x];M[m]=M[d],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,f=l.length,h=this.nCachedObjects_,m=new Array(f);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(m);for(let d=h,p=l.length;d!==p;++d){const x=l[d];m[d]=new St(x,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],f=e[a];t[f]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}BE.prototype.isAnimationObjectGroup=!0;class AN{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Vo,endingEnd:Vo};for(let f=0;f!==o;++f){const h=s[f].createInterpolant(null);a[f]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=uA,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,f=a.sampleValues;return l[0]=s,l[1]=s+i,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;if(l<0||i===0)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case b0:for(let h=0,m=l.length;h!==m;++h)l[h].evaluate(o),f[h].accumulateAdditive(a);break;case hh:default:for(let h=0,m=l.length;h!==m;++h)l[h].evaluate(o),f[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===cA;if(e===0)return s===-1?r:o&&(s&1)==1?t-r:r;if(i===lA){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)==1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Wo,r.endingEnd=Wo):(e?r.endingStart=this.zeroSlopeAtStart?Wo:Vo:r.endingStart=cc,t?r.endingEnd=this.zeroSlopeAtEnd?Wo:Vo:r.endingEnd=cc)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}class RE extends Er{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,f=this._bindingsByRootAndName;let h=f[l];h===void 0&&(h={},f[l]=h);for(let m=0;m!==s;++m){const d=r[m],p=d.name;let x=h[p];if(x!==void 0)o[m]=x;else{if(x=o[m],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,l,p));continue}const _=t&&t._propertyBindings[m].binding.parsedPath;x=new bE(St.create(i,p,_),d.ValueTypeName,d.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,l,p),o[m]=x}a[m].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++==0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount==0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,f=l[l.length-1],h=e._byClipCacheIndex;f._byClipCacheIndex=h,l[h]=f,l.pop(),e._byClipCacheIndex=null;const m=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete m[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount==0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],f=e._cacheIndex;l._cacheIndex=f,t[f]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Fy(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?jl.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let f=null;if(i===void 0&&(o!==null?i=o.blendMode:i=hh),l!==void 0){const m=l.actionByRoot[s];if(m!==void 0&&m.blendMode===i)return m;f=l.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const h=new AN(this,o,t,i);return this._bindAction(h,f),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?jl.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let f=0;f!==l;++f)a[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const f=o[a];this._deactivateAction(f);const h=f._cacheIndex,m=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,m._cacheIndex=h,t[h]=m,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}RE.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class ze{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new ze(this.value.clone===void 0?this.value:this.value.clone())}}class LE extends qs{constructor(e,t,i=1){super(e,t);this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}LE.prototype.isInstancedInterleavedBuffer=!0;class PE{constructor(e,t,i,r,s){this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}PE.prototype.isGLBufferAttribute=!0;class IE{constructor(e,t,i=0,r=1/0){this.ray=new Vs(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new qo,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Zy(e,this,i,t),i.sort(DE),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Zy(e[r],this,i,t);return i.sort(DE),i}}function DE(n,e){return n.distance-e.distance}function Zy(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)Zy(r[s],e,t,!0)}}class SN{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(kn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class EN{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const FE=new ie;class Xl{constructor(e=new ie(1/0,1/0),t=new ie(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=FE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return FE.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Xl.prototype.isBox2=!0;const NE=new P,xp=new P;class OE{constructor(e=new P,t=new P){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){NE.subVectors(e,this.start),xp.subVectors(this.end,this.start);const i=xp.dot(xp);let s=xp.dot(NE)/i;return t&&(s=kn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const kE=new P;class TN extends ht{constructor(e,t){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const i=new je,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const f=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Ge(r,3));const s=new wn({fog:!1,toneMapped:!1});this.cone=new ti(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),kE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(kE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const no=new P,_p=new Fe,$y=new Fe;class UE extends ti{constructor(e){const t=GE(e),i=new je,r=[],s=[],o=new ye(0,0,1),a=new ye(0,1,0);for(let f=0;f<t.length;f++){const h=t[f];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ge(r,3)),i.setAttribute("color",new Ge(s,3));const l=new wn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");$y.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(_p.multiplyMatrices($y,a.matrixWorld),no.setFromMatrixPosition(_p),r.setXYZ(o,no.x,no.y,no.z),_p.multiplyMatrices($y,a.parent.matrixWorld),no.setFromMatrixPosition(_p),r.setXYZ(o+1,no.x,no.y,no.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function GE(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,GE(n.children[t]));return e}class CN extends $t{constructor(e,t,i){const r=new oa(t,4,2),s=new fi({wireframe:!0,fog:!1,toneMapped:!1});super(r,s);this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const bN=new P,HE=new ye,zE=new ye;class BN extends ht{constructor(e,t,i){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const r=new ra(t);r.rotateY(Math.PI*.5),this.material=new fi({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new lt(o,3)),this.add(new $t(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");HE.copy(this.light.color),zE.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?HE:zE;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}e.lookAt(bN.setFromMatrixPosition(this.light.matrixWorld).negate())}}class VE extends ti{constructor(e=10,t=10,i=4473924,r=8947848){i=new ye(i),r=new ye(r);const s=t/2,o=e/t,a=e/2,l=[],f=[];for(let d=0,p=0,x=-a;d<=t;d++,x+=o){l.push(-a,0,x,a,0,x),l.push(x,0,-a,x,0,a);const _=d===s?i:r;_.toArray(f,p),p+=3,_.toArray(f,p),p+=3,_.toArray(f,p),p+=3,_.toArray(f,p),p+=3}const h=new je;h.setAttribute("position",new Ge(l,3)),h.setAttribute("color",new Ge(f,3));const m=new wn({vertexColors:!0,toneMapped:!1});super(h,m);this.type="GridHelper"}}class RN extends ti{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new ye(s),o=new ye(o);const a=[],l=[];for(let m=0;m<=t;m++){const d=m/t*(Math.PI*2),p=Math.sin(d)*e,x=Math.cos(d)*e;a.push(0,0,0),a.push(p,0,x);const _=m&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let m=0;m<=i;m++){const d=m&1?s:o,p=e-e/i*m;for(let x=0;x<r;x++){let _=x/r*(Math.PI*2),M=Math.sin(_)*p,v=Math.cos(_)*p;a.push(M,0,v),l.push(d.r,d.g,d.b),_=(x+1)/r*(Math.PI*2),M=Math.sin(_)*p,v=Math.cos(_)*p,a.push(M,0,v),l.push(d.r,d.g,d.b)}}const f=new je;f.setAttribute("position",new Ge(a,3)),f.setAttribute("color",new Ge(l,3));const h=new wn({vertexColors:!0,toneMapped:!1});super(f,h);this.type="PolarGridHelper"}}const WE=new P,Mp=new P,JE=new P;class LN extends ht{constructor(e,t,i){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let r=new je;r.setAttribute("position",new Ge([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new wn({fog:!1,toneMapped:!1});this.lightPlane=new br(r,s),this.add(this.lightPlane),r=new je,r.setAttribute("position",new Ge([0,0,0,0,0,1],3)),this.targetLine=new br(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){WE.setFromMatrixPosition(this.light.matrixWorld),Mp.setFromMatrixPosition(this.light.target.matrixWorld),JE.subVectors(Mp,WE),this.lightPlane.lookAt(Mp),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Mp),this.targetLine.scale.z=JE.length()}}const wp=new P,nn=new Ks;class PN extends ti{constructor(e){const t=new je,i=new wn({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={},a=new ye(16755200),l=new ye(16711680),f=new ye(43775),h=new ye(16777215),m=new ye(3355443);d("n1","n2",a),d("n2","n4",a),d("n4","n3",a),d("n3","n1",a),d("f1","f2",a),d("f2","f4",a),d("f4","f3",a),d("f3","f1",a),d("n1","f1",a),d("n2","f2",a),d("n3","f3",a),d("n4","f4",a),d("p","n1",l),d("p","n2",l),d("p","n3",l),d("p","n4",l),d("u1","u2",f),d("u2","u3",f),d("u3","u1",f),d("c","t",h),d("p","c",m),d("cn1","cn2",m),d("cn3","cn4",m),d("cf1","cf2",m),d("cf3","cf4",m);function d(x,_,M){p(x,M),p(_,M)}function p(x,_){r.push(0,0,0),s.push(_.r,_.g,_.b),o[x]===void 0&&(o[x]=[]),o[x].push(r.length/3-1)}t.setAttribute("position",new Ge(r,3)),t.setAttribute("color",new Ge(s,3));super(t,i);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;nn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),dn("c",t,e,nn,0,0,-1),dn("t",t,e,nn,0,0,1),dn("n1",t,e,nn,-i,-r,-1),dn("n2",t,e,nn,i,-r,-1),dn("n3",t,e,nn,-i,r,-1),dn("n4",t,e,nn,i,r,-1),dn("f1",t,e,nn,-i,-r,1),dn("f2",t,e,nn,i,-r,1),dn("f3",t,e,nn,-i,r,1),dn("f4",t,e,nn,i,r,1),dn("u1",t,e,nn,i*.7,r*1.1,-1),dn("u2",t,e,nn,-i*.7,r*1.1,-1),dn("u3",t,e,nn,0,r*2,-1),dn("cf1",t,e,nn,-i,0,1),dn("cf2",t,e,nn,i,0,1),dn("cf3",t,e,nn,0,-r,1),dn("cf4",t,e,nn,0,r,1),dn("cn1",t,e,nn,-i,0,-1),dn("cn2",t,e,nn,i,0,-1),dn("cn3",t,e,nn,0,-r,-1),dn("cn4",t,e,nn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function dn(n,e,t,i,r,s,o){wp.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let f=0,h=a.length;f<h;f++)l.setXYZ(a[f],wp.x,wp.y,wp.z)}}const Ap=new ci;class jE extends ti{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new je;s.setIndex(new lt(i,1)),s.setAttribute("position",new lt(r,3));super(s,new wn({color:t,toneMapped:!1}));this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Ap.setFromObject(this.object),Ap.isEmpty())return;const t=Ap.min,i=Ap.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return ti.prototype.copy.call(this,e),this.object=e.object,this}}class IN extends ti{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new je;s.setIndex(new lt(i,1)),s.setAttribute("position",new Ge(r,3));super(s,new wn({color:t,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class DN extends br{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new je;o.setAttribute("position",new Ge(s,3)),o.computeBoundingSphere();super(o,new wn({color:r,toneMapped:!1}));this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],l=new je;l.setAttribute("position",new Ge(a,3)),l.computeBoundingSphere(),this.add(new $t(l,new fi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Wt:$r,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const XE=new P;let Sp,ev;class FN extends ht{constructor(e=new P(0,0,1),t=new P(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super();this.type="ArrowHelper",Sp===void 0&&(Sp=new je,Sp.setAttribute("position",new Ge([0,0,0,0,1,0],3)),ev=new $s(0,.5,1,5,1),ev.translate(0,-.5,0)),this.position.copy(t),this.line=new br(Sp,new wn({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $t(ev,new fi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{XE.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(XE,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class KE extends ti{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new je;r.setAttribute("position",new Ge(t,3)),r.setAttribute("color",new Ge(i,3));const s=new wn({vertexColors:!0,toneMapped:!1});super(r,s);this.type="AxesHelper"}setColors(e,t,i){const r=new ye,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class NN{constructor(){this.type="ShapePath",this.color=new ye,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Dc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(y){const A=[];for(let w=0,T=y.length;w<T;w++){const C=y[w],B=new Rr;B.curves=C.curves,A.push(B)}return A}function r(y,A){const w=A.length;let T=!1;for(let C=w-1,B=0;B<w;C=B++){let I=A[C],k=A[B],G=k.x-I.x,O=k.y-I.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(I=A[B],G=-G,k=A[C],O=-O),y.y<I.y||y.y>k.y)continue;if(y.y===I.y){if(y.x===I.x)return!0}else{const R=O*(y.x-I.x)-G*(y.y-I.y);if(R===0)return!0;if(R<0)continue;T=!T}}else{if(y.y!==I.y)continue;if(k.x<=y.x&&y.x<=I.x||I.x<=y.x&&y.x<=k.x)return!0}}return T}const s=Lr.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return i(o);let a,l,f;const h=[];if(o.length===1)return l=o[0],f=new Rr,f.curves=l.curves,h.push(f),h;let m=!s(o[0].getPoints());m=e?!m:m;const d=[],p=[];let x=[],_=0,M;p[_]=void 0,x[_]=[];for(let y=0,A=o.length;y<A;y++)l=o[y],M=l.getPoints(),a=s(M),a=e?!a:a,a?(!m&&p[_]&&_++,p[_]={s:new Rr,p:M},p[_].s.curves=l.curves,m&&_++,x[_]=[]):x[_].push({h:l,p:M[0]});if(!p[0])return i(o);if(p.length>1){let y=!1;const A=[];for(let w=0,T=p.length;w<T;w++)d[w]=[];for(let w=0,T=p.length;w<T;w++){const C=x[w];for(let B=0;B<C.length;B++){const I=C[B];let k=!0;for(let G=0;G<p.length;G++)r(I.p,p[G].p)&&(w!==G&&A.push({froms:w,tos:G,hole:B}),k?(k=!1,d[G].push(I)):y=!0);k&&d[w].push(I)}}A.length>0&&(y||(x=d))}let v;for(let y=0,A=p.length;y<A;y++){f=p[y].s,h.push(f),v=x[y];for(let w=0,T=v.length;w<T;w++)f.holes.push(v[w].h)}return h}}const QE=new Float32Array(1),ON=new Int32Array(QE.buffer);class kN{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),QE[0]=e;const t=ON[0];let i=t>>16&32768,r=t>>12&2047;const s=t>>23&255;return s<103?i:s>142?(i|=31744,i|=(s==255?0:1)&&t&8388607,i):s<113?(r|=2048,i|=(r>>114-s)+(r>>113-s&1),i):(i|=s-112<<10|r>>1,i+=r&1,i)}}const UN=0,GN=1,HN=0,zN=1,VN=2;function WN(n){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),n}function JN(n=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),n.isMultiMaterial=!0,n.materials=n,n.clone=function(){return n.slice()},n}function jN(n,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Pl(n,e)}function XN(n){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Qh(n)}function KN(n,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Pl(n,e)}function QN(n){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Zs(n)}function YN(n){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Zs(n)}function qN(n){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Zs(n)}function ZN(n,e,t){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new P(n,e,t)}function $N(n,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new lt(n,e).setUsage(Us)}function eO(n,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new LA(n,e)}function tO(n,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new PA(n,e)}function nO(n,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new IA(n,e)}function iO(n,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new DA(n,e)}function rO(n,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Th(n,e)}function sO(n,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new FA(n,e)}function oO(n,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ch(n,e)}function aO(n,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ge(n,e)}function lO(n,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new OA(n,e)}Si.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Si.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};Dc.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};function uO(n){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new KE(n)}function cO(n,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new jE(n,e)}function fO(n,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ti(new yy(n.geometry),new wn({color:e!==void 0?e:16777215}))}VE.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};UE.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function dO(n,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ti(new by(n.geometry),new wn({color:e!==void 0?e:16777215}))}Un.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),lr.extractUrlBase(n)};Un.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function hO(n){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new hi(n)}function pO(n){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new aE(n)}Xl.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)};Xl.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Xl.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Xl.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)};ci.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};ci.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};ci.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};ci.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};ci.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};ns.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};yc.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};OE.prototype.center=function(n){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(n)};_n.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};_n.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};_n.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};_n.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};_n.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};_n.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Fe.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};Fe.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Fe.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new P().setFromMatrixColumn(this,3)};Fe.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};Fe.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Fe.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Fe.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Fe.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Fe.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};Fe.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Fe.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Fe.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Fe.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Fe.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Fe.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Fe.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Fe.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Fe.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)};Fe.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Tr.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};Mn.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};Mn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Vs.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Vs.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};Vs.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};ln.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};ln.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};ln.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};ln.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};ln.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};ln.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ln.getBarycoord(n,e,t,i,r)};ln.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ln.getNormal(n,e,t,i)};Rr.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};Rr.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Pr(this,n)};Rr.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new sa(this,n)};ie.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};ie.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};ie.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};P.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};P.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};P.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};P.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};P.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};P.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};P.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};P.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};P.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Pt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Pt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};ht.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};ht.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};ht.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};ht.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};ht.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(ht.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});$t.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties($t.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),fA},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Tc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};cn.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(ar.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(lt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Us},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Us)}}});lt.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Us:sl),this};lt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},lt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};je.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};je.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new lt(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};je.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};je.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};je.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};je.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};je.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(je.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});qs.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Us:sl),this};qs.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Pr.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Pr.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Pr.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};ls.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};ze.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(un.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ye}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===l0}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(di.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});Rt.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)};Rt.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};Rt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Rt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Rt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Rt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Rt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Rt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Rt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Rt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Rt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Rt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Rt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Rt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Rt.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};Rt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Rt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Rt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Rt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Rt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Rt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Rt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Rt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Rt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Rt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Rt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?Fi:ui}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(_S.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function mO(n,e,t){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Oh(n,t)}Object.defineProperties(an.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});Qy.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new xE().load(n,function(i){e.setBuffer(i)}),this};CE.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};Nh.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};Nh.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)};Xo.crossOrigin=void 0;Xo.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new ky;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Xo.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new oE;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Xo.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Xo.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function gO(){console.error("THREE.CanvasRenderer has been removed")}function yO(){console.error("THREE.JSONLoader has been removed.")}const vO={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function xO(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function _O(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new je}function MO(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new je}function wO(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function AO(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function SO(){console.error("THREE.ImmediateRenderObject has been removed.")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:lh}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=lh);var YE=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ACESFilmicToneMapping:g0,AddEquation:Uo,AddOperation:h1,AdditiveAnimationBlendMode:b0,AdditiveBlending:u0,AlphaFormat:S1,AlwaysDepth:o1,AlwaysStencilFunc:mA,AmbientLight:zy,AmbientLightProbe:ME,AnimationClip:jl,AnimationLoader:sN,AnimationMixer:RE,AnimationObjectGroup:BE,AnimationUtils:Jt,ArcCurve:vy,ArrayCamera:uy,ArrowHelper:FN,Audio:Qy,AudioAnalyser:CE,AudioContext:Xy,AudioListener:fN,AudioLoader:xE,AxesHelper:KE,AxisHelper:uO,BackSide:Wt,BasicDepthPacking:R0,BasicShadowMap:lP,BinaryTextureLoader:pO,Bone:Cc,BooleanKeyframeTrack:la,BoundingBoxHelper:cO,Box2:Xl,Box3:ci,Box3Helper:IN,BoxBufferGeometry:as,BoxGeometry:as,BoxHelper:jE,BufferAttribute:lt,BufferGeometry:je,BufferGeometryLoader:gE,ByteType:v1,Cache:ca,Camera:Ks,CameraHelper:PN,CanvasRenderer:gO,CanvasTexture:WS,CatmullRomCurve3:Ay,CineonToneMapping:g1,CircleBufferGeometry:Il,CircleGeometry:Il,ClampToEdgeWrapping:Cn,Clock:Ky,Color:ye,ColorKeyframeTrack:Ny,CompressedTexture:my,CompressedTextureLoader:oN,ConeBufferGeometry:Dl,ConeGeometry:Dl,CubeCamera:Nh,CubeReflectionMapping:Go,CubeRefractionMapping:Ho,CubeTexture:Ml,CubeTextureLoader:oE,CubeUVReflectionMapping:el,CubeUVRefractionMapping:ac,CubicBezierCurve:ap,CubicBezierCurve3:Sy,CubicInterpolant:nE,CullFaceBack:s0,CullFaceFront:jw,CullFaceFrontBack:aP,CullFaceNone:Jw,Curve:Si,CurvePath:XS,CustomBlending:Xw,CustomToneMapping:y1,CylinderBufferGeometry:$s,CylinderGeometry:$s,Cylindrical:EN,DataTexture:na,DataTexture2DArray:zh,DataTexture3D:oy,DataTextureLoader:aE,DataUtils:kN,DecrementStencilOp:yP,DecrementWrapStencilOp:xP,DefaultLoadingManager:sE,DepthFormat:Ns,DepthStencilFormat:Os,DepthTexture:_c,DirectionalLight:yp,DirectionalLightHelper:LN,DiscreteInterpolant:iE,DodecahedronBufferGeometry:Fl,DodecahedronGeometry:Fl,DoubleSide:Di,DstAlphaFactor:e1,DstColorFactor:n1,DynamicBufferAttribute:$N,DynamicCopyUsage:IP,DynamicDrawUsage:Us,DynamicReadUsage:RP,EdgesGeometry:yy,EdgesHelper:fO,EllipseCurve:Rc,EqualDepth:l1,EqualStencilFunc:AP,EquirectangularReflectionMapping:sc,EquirectangularRefractionMapping:oc,Euler:Yo,EventDispatcher:Er,ExtrudeBufferGeometry:Pr,ExtrudeGeometry:Pr,FaceColors:zN,FileLoader:hi,FlatShading:l0,Float16BufferAttribute:NA,Float32Attribute:aO,Float32BufferAttribute:Ge,Float64Attribute:lO,Float64BufferAttribute:OA,FloatType:Sr,Fog:wc,FogExp2:Mc,Font:AO,FontLoader:wO,FramebufferTexture:VS,FrontSide:$r,Frustum:yc,GLBufferAttribute:PE,GLSL1:FP,GLSL3:L0,GreaterDepth:c1,GreaterEqualDepth:u1,GreaterEqualStencilFunc:CP,GreaterStencilFunc:EP,GridHelper:VE,Group:sr,HalfFloatType:es,HemisphereLight:Uy,HemisphereLightHelper:BN,HemisphereLightProbe:_E,IcosahedronBufferGeometry:Ol,IcosahedronGeometry:Ol,ImageBitmapLoader:jy,ImageLoader:kc,ImageUtils:Xo,ImmediateRenderObject:SO,IncrementStencilOp:gP,IncrementWrapStencilOp:vP,InstancedBufferAttribute:ia,InstancedBufferGeometry:Jy,InstancedInterleavedBuffer:LE,InstancedMesh:dy,Int16Attribute:iO,Int16BufferAttribute:DA,Int32Attribute:sO,Int32BufferAttribute:FA,Int8Attribute:eO,Int8BufferAttribute:LA,IntType:_1,InterleavedBuffer:qs,InterleavedBufferAttribute:us,Interpolant:Ir,InterpolateDiscrete:rl,InterpolateLinear:zo,InterpolateSmooth:dh,InvertStencilOp:_P,JSONLoader:yO,KeepStencilOp:ph,KeyframeTrack:or,LOD:CS,LatheBufferGeometry:kl,LatheGeometry:kl,Layers:qo,LensFlare:xO,LessDepth:a1,LessEqualDepth:uh,LessEqualStencilFunc:SP,LessStencilFunc:wP,Light:ar,LightProbe:Gc,Line:br,Line3:OE,LineBasicMaterial:wn,LineCurve:Ic,LineCurve3:jS,LineDashedMaterial:Dy,LineLoop:ep,LinePieces:GN,LineSegments:ti,LineStrip:UN,LinearEncoding:ui,LinearFilter:xt,LinearInterpolant:Fy,LinearMipMapLinearFilter:hP,LinearMipMapNearestFilter:dP,LinearMipmapLinearFilter:Ar,LinearMipmapNearestFilter:fh,LinearToneMapping:p1,Loader:Un,LoaderUtils:lr,LoadingManager:Oy,LoopOnce:lA,LoopPingPong:cA,LoopRepeat:uA,LuminanceAlphaFormat:E1,LuminanceFormat:y0,MOUSE:sP,Material:un,MaterialLoader:mE,Math:jo,MathUtils:jo,Matrix3:_n,Matrix4:Fe,MaxEquation:h0,Mesh:$t,MeshBasicMaterial:fi,MeshDepthMaterial:Wh,MeshDistanceMaterial:Jh,MeshFaceMaterial:WN,MeshLambertMaterial:Py,MeshMatcapMaterial:Iy,MeshNormalMaterial:pp,MeshPhongMaterial:Ry,MeshPhysicalMaterial:cs,MeshStandardMaterial:aa,MeshToonMaterial:Ly,MinEquation:d0,MirroredRepeatWrapping:tl,MixOperation:d1,MultiMaterial:JN,MultiplyBlending:f0,MultiplyOperation:rc,NearestFilter:Ht,NearestMipMapLinearFilter:fP,NearestMipMapNearestFilter:cP,NearestMipmapLinearFilter:uc,NearestMipmapNearestFilter:lc,NeverDepth:s1,NeverStencilFunc:MP,NoBlending:li,NoColors:HN,NoToneMapping:wr,NormalAnimationBlendMode:hh,NormalBlending:$a,NotEqualDepth:f1,NotEqualStencilFunc:TP,NumberKeyframeTrack:Wl,Object3D:ht,ObjectLoader:aN,ObjectSpaceNormalMap:pA,OctahedronBufferGeometry:ra,OctahedronGeometry:ra,OneFactor:qw,OneMinusDstAlphaFactor:t1,OneMinusDstColorFactor:i1,OneMinusSrcAlphaFactor:m0,OneMinusSrcColorFactor:$w,OrthographicCamera:$o,PCFShadowMap:o0,PCFSoftShadowMap:a0,PMREMGenerator:jA,ParametricGeometry:_O,Particle:XN,ParticleBasicMaterial:YN,ParticleSystem:KN,ParticleSystemMaterial:qN,Path:Dc,PerspectiveCamera:cn,Plane:Tr,PlaneBufferGeometry:Zo,PlaneGeometry:Zo,PlaneHelper:DN,PointCloud:jN,PointCloudMaterial:QN,PointLight:gp,PointLightHelper:CN,Points:Pl,PointsMaterial:Zs,PolarGridHelper:RN,PolyhedronBufferGeometry:Br,PolyhedronGeometry:Br,PositionalAudio:hN,PropertyBinding:St,PropertyMixer:bE,QuadraticBezierCurve:lp,QuadraticBezierCurve3:up,Quaternion:Mn,QuaternionKeyframeTrack:to,QuaternionLinearInterpolant:rE,REVISION:lh,RGBADepthPacking:hA,RGBAFormat:qt,RGBAIntegerFormat:L1,RGBA_ASTC_10x10_Format:W1,RGBA_ASTC_10x5_Format:H1,RGBA_ASTC_10x6_Format:z1,RGBA_ASTC_10x8_Format:V1,RGBA_ASTC_12x10_Format:J1,RGBA_ASTC_12x12_Format:j1,RGBA_ASTC_4x4_Format:I1,RGBA_ASTC_5x4_Format:D1,RGBA_ASTC_5x5_Format:F1,RGBA_ASTC_6x5_Format:N1,RGBA_ASTC_6x6_Format:O1,RGBA_ASTC_8x5_Format:k1,RGBA_ASTC_8x6_Format:U1,RGBA_ASTC_8x8_Format:G1,RGBA_BPTC_Format:X1,RGBA_ETC2_EAC_Format:C0,RGBA_PVRTC_2BPPV1_Format:E0,RGBA_PVRTC_4BPPV1_Format:S0,RGBA_S3TC_DXT1_Format:x0,RGBA_S3TC_DXT3_Format:_0,RGBA_S3TC_DXT5_Format:M0,RGBFormat:Jn,RGBIntegerFormat:R1,RGB_ETC1_Format:P1,RGB_ETC2_Format:T0,RGB_PVRTC_2BPPV1_Format:A0,RGB_PVRTC_4BPPV1_Format:w0,RGB_S3TC_DXT1_Format:v0,RGFormat:b1,RGIntegerFormat:B1,RawShaderMaterial:Al,Ray:Vs,Raycaster:IE,RectAreaLight:Vy,RedFormat:T1,RedIntegerFormat:C1,ReinhardToneMapping:m1,RepeatWrapping:Ds,ReplaceStencilOp:mP,ReverseSubtractEquation:Qw,RingBufferGeometry:Ul,RingGeometry:Ul,SRGB8_ALPHA8_ASTC_10x10_Format:sA,SRGB8_ALPHA8_ASTC_10x5_Format:nA,SRGB8_ALPHA8_ASTC_10x6_Format:iA,SRGB8_ALPHA8_ASTC_10x8_Format:rA,SRGB8_ALPHA8_ASTC_12x10_Format:oA,SRGB8_ALPHA8_ASTC_12x12_Format:aA,SRGB8_ALPHA8_ASTC_4x4_Format:K1,SRGB8_ALPHA8_ASTC_5x4_Format:Q1,SRGB8_ALPHA8_ASTC_5x5_Format:Y1,SRGB8_ALPHA8_ASTC_6x5_Format:q1,SRGB8_ALPHA8_ASTC_6x6_Format:Z1,SRGB8_ALPHA8_ASTC_8x5_Format:$1,SRGB8_ALPHA8_ASTC_8x6_Format:eA,SRGB8_ALPHA8_ASTC_8x8_Format:tA,Scene:ls,SceneUtils:vO,ShaderChunk:ft,ShaderLib:rr,ShaderMaterial:di,ShadowMaterial:By,Shape:Rr,ShapeBufferGeometry:sa,ShapeGeometry:sa,ShapePath:NN,ShapeUtils:Lr,ShortType:x1,Skeleton:bc,SkeletonHelper:UE,SkinnedMesh:Tc,SmoothShading:uP,Sphere:ns,SphereBufferGeometry:oa,SphereGeometry:oa,Spherical:SN,SphericalHarmonics3:Wy,SplineCurve:cp,SpotLight:mp,SpotLightHelper:TN,Sprite:Qh,SpriteMaterial:jh,SrcAlphaFactor:p0,SrcAlphaSaturateFactor:r1,SrcColorFactor:Zw,StaticCopyUsage:PP,StaticDrawUsage:sl,StaticReadUsage:BP,StereoCamera:uN,StreamCopyUsage:DP,StreamDrawUsage:bP,StreamReadUsage:LP,StringKeyframeTrack:ua,SubtractEquation:Kw,SubtractiveBlending:c0,TOUCH:oP,TangentSpaceNormalMap:ks,TetrahedronBufferGeometry:Gl,TetrahedronGeometry:Gl,TextGeometry:MO,Texture:Zt,TextureLoader:ky,TorusBufferGeometry:Hl,TorusGeometry:Hl,TorusKnotBufferGeometry:zl,TorusKnotGeometry:zl,Triangle:ln,TriangleFanDrawMode:B0,TriangleStripDrawMode:dA,TrianglesDrawMode:fA,TubeBufferGeometry:Vl,TubeGeometry:Vl,UVMapping:ch,Uint16Attribute:rO,Uint16BufferAttribute:Th,Uint32Attribute:oO,Uint32BufferAttribute:Ch,Uint8Attribute:tO,Uint8BufferAttribute:PA,Uint8ClampedAttribute:nO,Uint8ClampedBufferAttribute:IA,Uniform:ze,UniformsLib:be,UniformsUtils:UA,UnsignedByteType:xn,UnsignedInt248Type:Fs,UnsignedIntType:il,UnsignedShort4444Type:M1,UnsignedShort5551Type:w1,UnsignedShort565Type:A1,UnsignedShortType:nl,VSMShadowMap:Za,Vector2:ie,Vector3:P,Vector4:Pt,VectorKeyframeTrack:Jl,Vertex:ZN,VertexColors:VN,VideoTexture:zS,WebGL1Renderer:wS,WebGLCubeRenderTarget:Oh,WebGLMultipleRenderTargets:xA,WebGLMultisampleRenderTarget:ll,WebGLRenderTarget:an,WebGLRenderTargetCube:mO,WebGLRenderer:Rt,WebGLUtils:MS,WireframeGeometry:by,WireframeHelper:dO,WrapAroundEnding:cc,XHRLoader:hO,ZeroCurvatureEnding:Vo,ZeroFactor:Yw,ZeroSlopeEnding:Wo,ZeroStencilOp:pP,sRGBEncoding:Fi}),re={exports:{}},Et={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var qE=Object.getOwnPropertySymbols,EO=Object.prototype.hasOwnProperty,TO=Object.prototype.propertyIsEnumerable;function CO(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function bO(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var i=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(i.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(s){r[s]=s}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var tv=bO()?Object.assign:function(n,e){for(var t,i=CO(n),r,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)EO.call(t,o)&&(i[o]=t[o]);if(qE){r=qE(t);for(var a=0;a<r.length;a++)TO.call(t,r[a])&&(i[r[a]]=t[r[a]])}}return i};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv=tv,Kl=60103,ZE=60106;Et.Fragment=60107;Et.StrictMode=60108;Et.Profiler=60114;var $E=60109,eT=60110,tT=60112;Et.Suspense=60113;var nT=60115,iT=60116;if(typeof Symbol=="function"&&Symbol.for){var ur=Symbol.for;Kl=ur("react.element"),ZE=ur("react.portal"),Et.Fragment=ur("react.fragment"),Et.StrictMode=ur("react.strict_mode"),Et.Profiler=ur("react.profiler"),$E=ur("react.provider"),eT=ur("react.context"),tT=ur("react.forward_ref"),Et.Suspense=ur("react.suspense"),nT=ur("react.memo"),iT=ur("react.lazy")}var rT=typeof Symbol=="function"&&Symbol.iterator;function BO(n){return n===null||typeof n!="object"?null:(n=rT&&n[rT]||n["@@iterator"],typeof n=="function"?n:null)}function Hc(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oT={};function Ql(n,e,t){this.props=n,this.context=e,this.refs=oT,this.updater=t||sT}Ql.prototype.isReactComponent={};Ql.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error(Hc(85));this.updater.enqueueSetState(this,n,e,"setState")};Ql.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function aT(){}aT.prototype=Ql.prototype;function iv(n,e,t){this.props=n,this.context=e,this.refs=oT,this.updater=t||sT}var rv=iv.prototype=new aT;rv.constructor=iv;nv(rv,Ql.prototype);rv.isPureReactComponent=!0;var sv={current:null},lT=Object.prototype.hasOwnProperty,uT={key:!0,ref:!0,__self:!0,__source:!0};function cT(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)lT.call(e,i)&&!uT.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Kl,type:n,key:s,ref:o,props:r,_owner:sv.current}}function RO(n,e){return{$$typeof:Kl,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ov(n){return typeof n=="object"&&n!==null&&n.$$typeof===Kl}function LO(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var fT=/\/+/g;function av(n,e){return typeof n=="object"&&n!==null&&n.key!=null?LO(""+n.key):e.toString(36)}function Ep(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Kl:case ZE:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+av(o,0):i,Array.isArray(r)?(t="",n!=null&&(t=n.replace(fT,"$&/")+"/"),Ep(r,e,t,"",function(f){return f})):r!=null&&(ov(r)&&(r=RO(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(fT,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Array.isArray(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+av(s,a);o+=Ep(s,e,t,l,r)}else if(l=BO(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+av(s,a++),o+=Ep(s,e,t,l,r);else if(s==="object")throw e=""+n,Error(Hc(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e));return o}function Tp(n,e,t){if(n==null)return n;var i=[],r=0;return Ep(n,i,"","",function(s){return e.call(t,s,r++)}),i}function PO(n){if(n._status===-1){var e=n._result;e=e(),n._status=0,n._result=e,e.then(function(t){n._status===0&&(t=t.default,n._status=1,n._result=t)},function(t){n._status===0&&(n._status=2,n._result=t)})}if(n._status===1)return n._result;throw n._result}var dT={current:null};function ds(){var n=dT.current;if(n===null)throw Error(Hc(321));return n}var IO={ReactCurrentDispatcher:dT,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:sv,IsSomeRendererActing:{current:!1},assign:nv};Et.Children={map:Tp,forEach:function(n,e,t){Tp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Tp(n,function(){e++}),e},toArray:function(n){return Tp(n,function(e){return e})||[]},only:function(n){if(!ov(n))throw Error(Hc(143));return n}};Et.Component=Ql;Et.PureComponent=iv;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IO;Et.cloneElement=function(n,e,t){if(n==null)throw Error(Hc(267,n));var i=nv({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=sv.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)lT.call(e,l)&&!uT.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];i.children=a}return{$$typeof:Kl,type:n.type,key:r,ref:s,props:i,_owner:o}};Et.createContext=function(n,e){return e===void 0&&(e=null),n={$$typeof:eT,_calculateChangedBits:e,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider={$$typeof:$E,_context:n},n.Consumer=n};Et.createElement=cT;Et.createFactory=function(n){var e=cT.bind(null,n);return e.type=n,e};Et.createRef=function(){return{current:null}};Et.forwardRef=function(n){return{$$typeof:tT,render:n}};Et.isValidElement=ov;Et.lazy=function(n){return{$$typeof:iT,_payload:{_status:-1,_result:n},_init:PO}};Et.memo=function(n,e){return{$$typeof:nT,type:n,compare:e===void 0?null:e}};Et.useCallback=function(n,e){return ds().useCallback(n,e)};Et.useContext=function(n,e){return ds().useContext(n,e)};Et.useDebugValue=function(){};Et.useEffect=function(n,e){return ds().useEffect(n,e)};Et.useImperativeHandle=function(n,e,t){return ds().useImperativeHandle(n,e,t)};Et.useLayoutEffect=function(n,e){return ds().useLayoutEffect(n,e)};Et.useMemo=function(n,e){return ds().useMemo(n,e)};Et.useReducer=function(n,e,t){return ds().useReducer(n,e,t)};Et.useRef=function(n){return ds().useRef(n)};Et.useState=function(n){return ds().useState(n)};Et.version="17.0.2";re.exports=Et;var Cp=re.exports,DO={exports:{}},Oi={},Yl={exports:{}},hT={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){var e,t,i,r;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var l=null,f=null,h=function(){if(l!==null)try{var H=n.unstable_now();l(!0,H),l=null}catch(q){throw setTimeout(h,0),q}};e=function(H){l!==null?setTimeout(e,0,H):(l=H,setTimeout(h,0))},t=function(H,q){f=setTimeout(H,q)},i=function(){clearTimeout(f)},n.unstable_shouldYield=function(){return!1},r=n.unstable_forceFrameRate=function(){}}else{var m=window.setTimeout,d=window.clearTimeout;if(typeof console!="undefined"){var p=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof p!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var x=!1,_=null,M=-1,v=5,y=0;n.unstable_shouldYield=function(){return n.unstable_now()>=y},r=function(){},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<H?Math.floor(1e3/H):5};var A=new MessageChannel,w=A.port2;A.port1.onmessage=function(){if(_!==null){var H=n.unstable_now();y=H+v;try{_(!0,H)?w.postMessage(null):(x=!1,_=null)}catch(q){throw w.postMessage(null),q}}else x=!1},e=function(H){_=H,x||(x=!0,w.postMessage(null))},t=function(H,q){M=m(function(){H(n.unstable_now())},q)},i=function(){d(M),M=-1}}function T(H,q){var ee=H.length;H.push(q);e:for(;;){var ce=ee-1>>>1,Ie=H[ce];if(Ie!==void 0&&0<I(Ie,q))H[ce]=q,H[ee]=Ie,ee=ce;else break e}}function C(H){return H=H[0],H===void 0?null:H}function B(H){var q=H[0];if(q!==void 0){var ee=H.pop();if(ee!==q){H[0]=ee;e:for(var ce=0,Ie=H.length;ce<Ie;){var ae=2*(ce+1)-1,Ue=H[ae],Be=ae+1,Ae=H[Be];if(Ue!==void 0&&0>I(Ue,ee))Ae!==void 0&&0>I(Ae,Ue)?(H[ce]=Ae,H[Be]=ee,ce=Be):(H[ce]=Ue,H[ae]=ee,ce=ae);else if(Ae!==void 0&&0>I(Ae,ee))H[ce]=Ae,H[Be]=ee,ce=Be;else break e}}return q}return null}function I(H,q){var ee=H.sortIndex-q.sortIndex;return ee!==0?ee:H.id-q.id}var k=[],G=[],O=1,R=null,L=3,W=!1,j=!1,J=!1;function K(H){for(var q=C(G);q!==null;){if(q.callback===null)B(G);else if(q.startTime<=H)B(G),q.sortIndex=q.expirationTime,T(k,q);else break;q=C(G)}}function de(H){if(J=!1,K(H),!j)if(C(k)!==null)j=!0,e(we);else{var q=C(G);q!==null&&t(de,q.startTime-H)}}function we(H,q){j=!1,J&&(J=!1,i()),W=!0;var ee=L;try{for(K(q),R=C(k);R!==null&&(!(R.expirationTime>q)||H&&!n.unstable_shouldYield());){var ce=R.callback;if(typeof ce=="function"){R.callback=null,L=R.priorityLevel;var Ie=ce(R.expirationTime<=q);q=n.unstable_now(),typeof Ie=="function"?R.callback=Ie:R===C(k)&&B(k),K(q)}else B(k);R=C(k)}if(R!==null)var ae=!0;else{var Ue=C(G);Ue!==null&&t(de,Ue.startTime-q),ae=!1}return ae}finally{R=null,L=ee,W=!1}}var $=r;n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){j||W||(j=!0,e(we))},n.unstable_getCurrentPriorityLevel=function(){return L},n.unstable_getFirstCallbackNode=function(){return C(k)},n.unstable_next=function(H){switch(L){case 1:case 2:case 3:var q=3;break;default:q=L}var ee=L;L=q;try{return H()}finally{L=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=$,n.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ee=L;L=H;try{return q()}finally{L=ee}},n.unstable_scheduleCallback=function(H,q,ee){var ce=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ce+ee:ce):ee=ce,H){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=ee+Ie,H={id:O++,callback:q,priorityLevel:H,startTime:ee,expirationTime:Ie,sortIndex:-1},ee>ce?(H.sortIndex=ee,T(G,H),C(k)===null&&H===C(G)&&(J?i():J=!0,t(de,ee-ce))):(H.sortIndex=Ie,T(k,H),j||W||(j=!0,e(we))),H},n.unstable_wrapCallback=function(H){var q=L;return function(){var ee=L;L=q;try{return H.apply(this,arguments)}finally{L=ee}}}})(hT);Yl.exports=hT;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp=re.exports,Qt=tv,Bn=Yl.exports;function _e(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!bp)throw Error(_e(227));var pT=new Set,zc={};function ga(n,e){ql(n,e),ql(n+"Capture",e)}function ql(n,e){for(zc[n]=e,n=0;n<e.length;n++)pT.add(e[n])}var hs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),FO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mT=Object.prototype.hasOwnProperty,gT={},yT={};function NO(n){return mT.call(yT,n)?!0:mT.call(gT,n)?!1:FO.test(n)?yT[n]=!0:(gT[n]=!0,!1)}function OO(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function kO(n,e,t,i){if(e===null||typeof e=="undefined"||OO(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ni(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Gn[n]=new ni(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Gn[e]=new ni(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Gn[n]=new ni(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Gn[n]=new ni(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Gn[n]=new ni(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Gn[n]=new ni(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Gn[n]=new ni(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Gn[n]=new ni(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Gn[n]=new ni(n,5,!1,n.toLowerCase(),null,!1,!1)});var lv=/[\-:]([a-z])/g;function uv(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(lv,uv);Gn[e]=new ni(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(lv,uv);Gn[e]=new ni(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(lv,uv);Gn[e]=new ni(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Gn[n]=new ni(n,1,!1,n.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Gn[n]=new ni(n,1,!1,n.toLowerCase(),null,!0,!0)});function cv(n,e,t,i){var r=Gn.hasOwnProperty(e)?Gn[e]:null,s=r!==null?r.type===0:i?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(kO(e,t,r,i)&&(t=null),i||r===null?NO(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ya=bp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vc=60103,va=60106,io=60107,fv=60108,Wc=60114,dv=60109,hv=60110,Bp=60112,Jc=60113,Rp=60120,Lp=60115,pv=60116,mv=60121,gv=60128,vT=60129,yv=60130,vv=60131;if(typeof Symbol=="function"&&Symbol.for){var Rn=Symbol.for;Vc=Rn("react.element"),va=Rn("react.portal"),io=Rn("react.fragment"),fv=Rn("react.strict_mode"),Wc=Rn("react.profiler"),dv=Rn("react.provider"),hv=Rn("react.context"),Bp=Rn("react.forward_ref"),Jc=Rn("react.suspense"),Rp=Rn("react.suspense_list"),Lp=Rn("react.memo"),pv=Rn("react.lazy"),mv=Rn("react.block"),Rn("react.scope"),gv=Rn("react.opaque.id"),vT=Rn("react.debug_trace_mode"),yv=Rn("react.offscreen"),vv=Rn("react.legacy_hidden")}var xT=typeof Symbol=="function"&&Symbol.iterator;function jc(n){return n===null||typeof n!="object"?null:(n=xT&&n[xT]||n["@@iterator"],typeof n=="function"?n:null)}var xv;function Xc(n){if(xv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);xv=e&&e[1]||""}return`
`+xv+n}var _v=!1;function Pp(n,e){if(!n||_v)return"";_v=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var i=l}Reflect.construct(n,[],e)}else{try{e.call()}catch(l){i=l}n.call(e.prototype)}else{try{throw Error()}catch(l){i=l}n()}}catch(l){if(l&&i&&typeof l.stack=="string"){for(var r=l.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a])return`
`+r[o].replace(" at new "," at ");while(1<=o&&0<=a);break}}}finally{_v=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Xc(n):""}function UO(n){switch(n.tag){case 5:return Xc(n.type);case 16:return Xc("Lazy");case 13:return Xc("Suspense");case 19:return Xc("SuspenseList");case 0:case 2:case 15:return n=Pp(n.type,!1),n;case 11:return n=Pp(n.type.render,!1),n;case 22:return n=Pp(n.type._render,!1),n;case 1:return n=Pp(n.type,!0),n;default:return""}}function Zl(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case io:return"Fragment";case va:return"Portal";case Wc:return"Profiler";case fv:return"StrictMode";case Jc:return"Suspense";case Rp:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case hv:return(n.displayName||"Context")+".Consumer";case dv:return(n._context.displayName||"Context")+".Provider";case Bp:var e=n.render;return e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case Lp:return Zl(n.type);case mv:return Zl(n._render);case pv:e=n._payload,n=n._init;try{return Zl(n(e))}catch{}}return null}function ro(n){switch(typeof n){case"boolean":case"number":case"object":case"string":case"undefined":return n;default:return""}}function _T(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function GO(n){var e=_T(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Ip(n){n._valueTracker||(n._valueTracker=GO(n))}function MT(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=_T(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Dp(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch{return n.body}}function Mv(n,e){var t=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function wT(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ro(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AT(n,e){e=e.checked,e!=null&&cv(n,"checked",e,!1)}function wv(n,e){AT(n,e);var t=ro(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Av(n,e.type,t):e.hasOwnProperty("defaultValue")&&Av(n,e.type,ro(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function ST(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Av(n,e,t){(e!=="number"||Dp(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}function HO(n){var e="";return bp.Children.forEach(n,function(t){t!=null&&(e+=t)}),e}function Sv(n,e){return n=Qt({children:void 0},e),(e=HO(e.children))&&(n.children=e),n}function $l(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ro(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function Ev(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_e(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ET(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(_e(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(_e(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ro(t)}}function TT(n,e){var t=ro(e.value),i=ro(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function CT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}var Tv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function bT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cv(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?bT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Fp,BT=function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!==Tv.svg||"innerHTML"in n)n.innerHTML=e;else{for(Fp=Fp||document.createElement("div"),Fp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Kc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Qc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zO=["Webkit","ms","Moz","O"];Object.keys(Qc).forEach(function(n){zO.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Qc[e]=Qc[n]})});function RT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Qc.hasOwnProperty(n)&&Qc[n]?(""+e).trim():e+"px"}function LT(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=RT(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var VO=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bv(n,e){if(e){if(VO[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_e(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_e(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(_e(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_e(62))}}function Bv(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Rv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Lv=null,eu=null,tu=null;function PT(n){if(n=mf(n)){if(typeof Lv!="function")throw Error(_e(280));var e=n.stateNode;e&&(e=$p(e),Lv(n.stateNode,n.type,e))}}function IT(n){eu?tu?tu.push(n):tu=[n]:eu=n}function DT(){if(eu){var n=eu,e=tu;if(tu=eu=null,PT(n),e)for(n=0;n<e.length;n++)PT(e[n])}}function Pv(n,e){return n(e)}function FT(n,e,t,i,r){return n(e,t,i,r)}function Iv(){}var NT=Pv,xa=!1,Dv=!1;function Fv(){(eu!==null||tu!==null)&&(Iv(),DT())}function WO(n,e,t){if(Dv)return n(e,t);Dv=!0;try{return NT(n,e,t)}finally{Dv=!1,Fv()}}function Yc(n,e){var t=n.stateNode;if(t===null)return null;var i=$p(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(_e(231,e,typeof t));return t}var Nv=!1;if(hs)try{var qc={};Object.defineProperty(qc,"passive",{get:function(){Nv=!0}}),window.addEventListener("test",qc,qc),window.removeEventListener("test",qc,qc)}catch{Nv=!1}function JO(n,e,t,i,r,s,o,a,l){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(h){this.onError(h)}}var Zc=!1,Np=null,Op=!1,Ov=null,jO={onError:function(n){Zc=!0,Np=n}};function XO(n,e,t,i,r,s,o,a,l){Zc=!1,Np=null,JO.apply(jO,arguments)}function KO(n,e,t,i,r,s,o,a,l){if(XO.apply(this,arguments),Zc){if(Zc){var f=Np;Zc=!1,Np=null}else throw Error(_e(198));Op||(Op=!0,Ov=f)}}function _a(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&1026)!=0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function OT(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function kT(n){if(_a(n)!==n)throw Error(_e(188))}function QO(n){var e=n.alternate;if(!e){if(e=_a(n),e===null)throw Error(_e(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return kT(r),n;if(s===i)return kT(r),e;s=s.sibling}throw Error(_e(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(_e(189))}}if(t.alternate!==i)throw Error(_e(190))}if(t.tag!==3)throw Error(_e(188));return t.stateNode.current===t?n:e}function UT(n){if(n=QO(n),!n)return null;for(var e=n;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===n)break;for(;!e.sibling;){if(!e.return||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function GT(n,e){for(var t=n.alternate;e!==null;){if(e===n||e===t)return!0;e=e.return}return!1}var HT,kv,zT,VT,Uv=!1,Dr=[],so=null,oo=null,ao=null,$c=new Map,ef=new Map,tf=[],WT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gv(n,e,t,i,r){return{blockedOn:n,domEventName:e,eventSystemFlags:t|16,nativeEvent:r,targetContainers:[i]}}function JT(n,e){switch(n){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":$c.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(e.pointerId)}}function nf(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n=Gv(e,t,i,r,s),e!==null&&(e=mf(e),e!==null&&kv(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function YO(n,e,t,i,r){switch(e){case"focusin":return so=nf(so,n,e,t,i,r),!0;case"dragenter":return oo=nf(oo,n,e,t,i,r),!0;case"mouseover":return ao=nf(ao,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return $c.set(s,nf($c.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ef.set(s,nf(ef.get(s)||null,n,e,t,i,r)),!0}return!1}function qO(n){var e=Ma(n.target);if(e!==null){var t=_a(e);if(t!==null){if(e=t.tag,e===13){if(e=OT(t),e!==null){n.blockedOn=e,VT(n.lanePriority,function(){Bn.unstable_runWithPriority(n.priority,function(){zT(t)})});return}}else if(e===3&&t.stateNode.hydrate){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function kp(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=jv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t!==null)return e=mf(t),e!==null&&kv(e),n.blockedOn=t,!1;e.shift()}return!0}function jT(n,e,t){kp(n)&&t.delete(e)}function ZO(){for(Uv=!1;0<Dr.length;){var n=Dr[0];if(n.blockedOn!==null){n=mf(n.blockedOn),n!==null&&HT(n);break}for(var e=n.targetContainers;0<e.length;){var t=jv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t!==null){n.blockedOn=t;break}e.shift()}n.blockedOn===null&&Dr.shift()}so!==null&&kp(so)&&(so=null),oo!==null&&kp(oo)&&(oo=null),ao!==null&&kp(ao)&&(ao=null),$c.forEach(jT),ef.forEach(jT)}function rf(n,e){n.blockedOn===e&&(n.blockedOn=null,Uv||(Uv=!0,Bn.unstable_scheduleCallback(Bn.unstable_NormalPriority,ZO)))}function XT(n){function e(r){return rf(r,n)}if(0<Dr.length){rf(Dr[0],n);for(var t=1;t<Dr.length;t++){var i=Dr[t];i.blockedOn===n&&(i.blockedOn=null)}}for(so!==null&&rf(so,n),oo!==null&&rf(oo,n),ao!==null&&rf(ao,n),$c.forEach(e),ef.forEach(e),t=0;t<tf.length;t++)i=tf[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<tf.length&&(t=tf[0],t.blockedOn===null);)qO(t),t.blockedOn===null&&tf.shift()}function Up(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var nu={animationend:Up("Animation","AnimationEnd"),animationiteration:Up("Animation","AnimationIteration"),animationstart:Up("Animation","AnimationStart"),transitionend:Up("Transition","TransitionEnd")},Hv={},KT={};hs&&(KT=document.createElement("div").style,"AnimationEvent"in window||(delete nu.animationend.animation,delete nu.animationiteration.animation,delete nu.animationstart.animation),"TransitionEvent"in window||delete nu.transitionend.transition);function Gp(n){if(Hv[n])return Hv[n];if(!nu[n])return n;var e=nu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in KT)return Hv[n]=e[t];return n}var QT=Gp("animationend"),YT=Gp("animationiteration"),qT=Gp("animationstart"),ZT=Gp("transitionend"),$T=new Map,zv=new Map,$O=["abort","abort",QT,"animationEnd",YT,"animationIteration",qT,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ZT,"transitionEnd","waiting","waiting"];function Vv(n,e){for(var t=0;t<n.length;t+=2){var i=n[t],r=n[t+1];r="on"+(r[0].toUpperCase()+r.slice(1)),zv.set(i,e),$T.set(i,r),ga(r,[i])}}var ek=Bn.unstable_now;ek();var Vt=8;function iu(n){if((1&n)!=0)return Vt=15,1;if((2&n)!=0)return Vt=14,2;if((4&n)!=0)return Vt=13,4;var e=24&n;return e!==0?(Vt=12,e):(n&32)!=0?(Vt=11,32):(e=192&n,e!==0?(Vt=10,e):(n&256)!=0?(Vt=9,256):(e=3584&n,e!==0?(Vt=8,e):(n&4096)!=0?(Vt=7,4096):(e=4186112&n,e!==0?(Vt=6,e):(e=62914560&n,e!==0?(Vt=5,e):n&67108864?(Vt=4,67108864):(n&134217728)!=0?(Vt=3,134217728):(e=805306368&n,e!==0?(Vt=2,e):(1073741824&n)!=0?(Vt=1,1073741824):(Vt=8,n))))))}function tk(n){switch(n){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function nk(n){switch(n){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(_e(358,n))}}function sf(n,e){var t=n.pendingLanes;if(t===0)return Vt=0;var i=0,r=0,s=n.expiredLanes,o=n.suspendedLanes,a=n.pingedLanes;if(s!==0)i=s,r=Vt=15;else if(s=t&134217727,s!==0){var l=s&~o;l!==0?(i=iu(l),r=Vt):(a&=s,a!==0&&(i=iu(a),r=Vt))}else s=t&~o,s!==0?(i=iu(s),r=Vt):a!==0&&(i=iu(a),r=Vt);if(i===0)return 0;if(i=31-lo(i),i=t&((0>i?0:1<<i)<<1)-1,e!==0&&e!==i&&(e&o)==0){if(iu(e),r<=Vt)return e;Vt=r}if(e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-lo(e),r=1<<t,i|=n[t],e&=~r;return i}function eC(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Hp(n,e){switch(n){case 15:return 1;case 14:return 2;case 12:return n=ru(24&~e),n===0?Hp(10,e):n;case 10:return n=ru(192&~e),n===0?Hp(8,e):n;case 8:return n=ru(3584&~e),n===0&&(n=ru(4186112&~e),n===0&&(n=512)),n;case 2:return e=ru(805306368&~e),e===0&&(e=268435456),e}throw Error(_e(358,n))}function ru(n){return n&-n}function Wv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function zp(n,e,t){n.pendingLanes|=e;var i=e-1;n.suspendedLanes&=i,n.pingedLanes&=i,n=n.eventTimes,e=31-lo(e),n[e]=t}var lo=Math.clz32?Math.clz32:sk,ik=Math.log,rk=Math.LN2;function sk(n){return n===0?32:31-(ik(n)/rk|0)|0}var ok=Bn.unstable_UserBlockingPriority,ak=Bn.unstable_runWithPriority,Vp=!0;function lk(n,e,t,i){xa||Iv();var r=Jv,s=xa;xa=!0;try{FT(r,n,e,t,i)}finally{(xa=s)||Fv()}}function uk(n,e,t,i){ak(ok,Jv.bind(null,n,e,t,i))}function Jv(n,e,t,i){if(Vp){var r;if((r=(e&4)==0)&&0<Dr.length&&-1<WT.indexOf(n))n=Gv(null,n,e,t,i),Dr.push(n);else{var s=jv(n,e,t,i);if(s===null)r&&JT(n,i);else{if(r){if(-1<WT.indexOf(n)){n=Gv(s,n,e,t,i),Dr.push(n);return}if(YO(s,n,e,t,i))return;JT(n,i)}RC(n,e,i,null,t)}}}}function jv(n,e,t,i){var r=Rv(i);if(r=Ma(r),r!==null){var s=_a(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=OT(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return RC(n,e,i,r,t),null}var uo=null,Xv=null,Wp=null;function tC(){if(Wp)return Wp;var n,e=Xv,t=e.length,i,r="value"in uo?uo.value:uo.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Wp=r.slice(n,1<i?1-i:void 0)}function Jp(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function jp(){return!0}function nC(){return!1}function Ei(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jp:nC,this.isPropagationStopped=nC,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=jp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=jp)},persist:function(){},isPersistent:jp}),e}var su={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kv=Ei(su),of=Qt({},su,{view:0,detail:0}),ck=Ei(of),Qv,Yv,af,Xp=Qt({},of,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==af&&(af&&n.type==="mousemove"?(Qv=n.screenX-af.screenX,Yv=n.screenY-af.screenY):Yv=Qv=0,af=n),Qv)},movementY:function(n){return"movementY"in n?n.movementY:Yv}}),iC=Ei(Xp),fk=Qt({},Xp,{dataTransfer:0}),dk=Ei(fk),hk=Qt({},of,{relatedTarget:0}),qv=Ei(hk),pk=Qt({},su,{animationName:0,elapsedTime:0,pseudoElement:0}),mk=Ei(pk),gk=Qt({},su,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),yk=Ei(gk),vk=Qt({},su,{data:0}),rC=Ei(vk),xk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_k={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Mk[n])?!!e[n]:!1}function Zv(){return wk}var Ak=Qt({},of,{key:function(n){if(n.key){var e=xk[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Jp(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?_k[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zv,charCode:function(n){return n.type==="keypress"?Jp(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Jp(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Sk=Ei(Ak),Ek=Qt({},Xp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sC=Ei(Ek),Tk=Qt({},of,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zv}),Ck=Ei(Tk),bk=Qt({},su,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bk=Ei(bk),Rk=Qt({},Xp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Lk=Ei(Rk),Pk=[9,13,27,32],$v=hs&&"CompositionEvent"in window,lf=null;hs&&"documentMode"in document&&(lf=document.documentMode);var Ik=hs&&"TextEvent"in window&&!lf,oC=hs&&(!$v||lf&&8<lf&&11>=lf),aC=String.fromCharCode(32),lC=!1;function uC(n,e){switch(n){case"keyup":return Pk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cC(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ou=!1;function Dk(n,e){switch(n){case"compositionend":return cC(e);case"keypress":return e.which!==32?null:(lC=!0,aC);case"textInput":return n=e.data,n===aC&&lC?null:n;default:return null}}function Fk(n,e){if(ou)return n==="compositionend"||!$v&&uC(n,e)?(n=tC(),Wp=Xv=uo=null,ou=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oC&&e.locale!=="ko"?null:e.data;default:return null}}var Nk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Nk[n.type]:e==="textarea"}function dC(n,e,t,i){IT(i),e=Qp(e,"onChange"),0<e.length&&(t=new Kv("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var uf=null,cf=null;function Ok(n){EC(n,0)}function Kp(n){var e=fu(n);if(MT(e))return n}function kk(n,e){if(n==="change")return e}var hC=!1;if(hs){var ex;if(hs){var tx="oninput"in document;if(!tx){var pC=document.createElement("div");pC.setAttribute("oninput","return;"),tx=typeof pC.oninput=="function"}ex=tx}else ex=!1;hC=ex&&(!document.documentMode||9<document.documentMode)}function mC(){uf&&(uf.detachEvent("onpropertychange",gC),cf=uf=null)}function gC(n){if(n.propertyName==="value"&&Kp(cf)){var e=[];if(dC(e,cf,n,Rv(n)),n=Ok,xa)n(e);else{xa=!0;try{Pv(n,e)}finally{xa=!1,Fv()}}}}function Uk(n,e,t){n==="focusin"?(mC(),uf=e,cf=t,uf.attachEvent("onpropertychange",gC)):n==="focusout"&&mC()}function Gk(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Kp(cf)}function Hk(n,e){if(n==="click")return Kp(e)}function zk(n,e){if(n==="input"||n==="change")return Kp(e)}function Vk(n,e){return n===e&&(n!==0||1/n==1/e)||n!==n&&e!==e}var ki=typeof Object.is=="function"?Object.is:Vk,Wk=Object.prototype.hasOwnProperty;function ff(n,e){if(ki(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++)if(!Wk.call(e,t[i])||!ki(n[t[i]],e[t[i]]))return!1;return!0}function yC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vC(n,e){var t=yC(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=yC(t)}}function xC(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?xC(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function _C(){for(var n=window,e=Dp();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Dp(n.document)}return e}function nx(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}var Jk=hs&&"documentMode"in document&&11>=document.documentMode,au=null,ix=null,df=null,rx=!1;function MC(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;rx||au==null||au!==Dp(i)||(i=au,"selectionStart"in i&&nx(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),df&&ff(df,i)||(df=i,i=Qp(ix,"onSelect"),0<i.length&&(e=new Kv("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=au)))}Vv("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Vv("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Vv($O,2);for(var wC="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),sx=0;sx<wC.length;sx++)zv.set(wC[sx],0);ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ga("onBeforeInput",["compositionend","keypress","textInput","paste"]);ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("cancel close invalid load scroll toggle".split(" ").concat(hf));function SC(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,KO(i,e,void 0,n),n.currentTarget=null}function EC(n,e){e=(e&4)!=0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,f=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;SC(r,a,f),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,f=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;SC(r,a,f),s=l}}}if(Op)throw n=Ov,Op=!1,Ov=null,n}function jt(n,e){var t=NC(e),i=n+"__bubble";t.has(i)||(BC(e,n,2,!1),t.add(i))}var TC="_reactListening"+Math.random().toString(36).slice(2);function CC(n){n[TC]||(n[TC]=!0,pT.forEach(function(e){AC.has(e)||bC(e,!1,n,null),bC(e,!0,n,null)}))}function bC(n,e,t,i){var r=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=t;if(n==="selectionchange"&&t.nodeType!==9&&(s=t.ownerDocument),i!==null&&!e&&AC.has(n)){if(n!=="scroll")return;r|=2,s=i}var o=NC(s),a=n+"__"+(e?"capture":"bubble");o.has(a)||(e&&(r|=4),BC(s,n,r,e),o.add(a))}function BC(n,e,t,i){var r=zv.get(e);switch(r===void 0?2:r){case 0:r=lk;break;case 1:r=uk;break;default:r=Jv}t=r.bind(null,e,t,n),r=void 0,!Nv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function RC(n,e,t,i,r){var s=i;if((e&1)==0&&(e&2)==0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ma(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}WO(function(){var f=s,h=Rv(t),m=[];e:{var d=$T.get(n);if(d!==void 0){var p=Kv,x=n;switch(n){case"keypress":if(Jp(t)===0)break e;case"keydown":case"keyup":p=Sk;break;case"focusin":x="focus",p=qv;break;case"focusout":x="blur",p=qv;break;case"beforeblur":case"afterblur":p=qv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=iC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Ck;break;case QT:case YT:case qT:p=mk;break;case ZT:p=Bk;break;case"scroll":p=ck;break;case"wheel":p=Lk;break;case"copy":case"cut":case"paste":p=yk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=sC}var _=(e&4)!=0,M=!_&&n==="scroll",v=_?d!==null?d+"Capture":null:d;_=[];for(var y=f,A;y!==null;){A=y;var w=A.stateNode;if(A.tag===5&&w!==null&&(A=w,v!==null&&(w=Yc(y,v),w!=null&&_.push(pf(y,w,A)))),M)break;y=y.return}0<_.length&&(d=new p(d,x,null,t,h),m.push({event:d,listeners:_}))}}if((e&7)==0){e:{if(d=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",d&&(e&16)==0&&(x=t.relatedTarget||t.fromElement)&&(Ma(x)||x[cu]))break e;if((p||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,p?(x=t.relatedTarget||t.toElement,p=f,x=x?Ma(x):null,x!==null&&(M=_a(x),x!==M||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=f),p!==x)){if(_=iC,w="onMouseLeave",v="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(_=sC,w="onPointerLeave",v="onPointerEnter",y="pointer"),M=p==null?d:fu(p),A=x==null?d:fu(x),d=new _(w,y+"leave",p,t,h),d.target=M,d.relatedTarget=A,w=null,Ma(h)===f&&(_=new _(v,y+"enter",x,t,h),_.target=A,_.relatedTarget=M,w=_),M=w,p&&x)t:{for(_=p,v=x,y=0,A=_;A;A=lu(A))y++;for(A=0,w=v;w;w=lu(w))A++;for(;0<y-A;)_=lu(_),y--;for(;0<A-y;)v=lu(v),A--;for(;y--;){if(_===v||v!==null&&_===v.alternate)break t;_=lu(_),v=lu(v)}_=null}else _=null;p!==null&&LC(m,d,p,_,!1),x!==null&&M!==null&&LC(m,M,x,_,!0)}}e:{if(d=f?fu(f):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var T=kk;else if(fC(d))if(hC)T=zk;else{T=Gk;var C=Uk}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=Hk);if(T&&(T=T(n,f))){dC(m,T,t,h);break e}C&&C(n,d,f),n==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&Av(d,"number",d.value)}switch(C=f?fu(f):window,n){case"focusin":(fC(C)||C.contentEditable==="true")&&(au=C,ix=f,df=null);break;case"focusout":df=ix=au=null;break;case"mousedown":rx=!0;break;case"contextmenu":case"mouseup":case"dragend":rx=!1,MC(m,t,h);break;case"selectionchange":if(Jk)break;case"keydown":case"keyup":MC(m,t,h)}var B;if($v)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ou?uC(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(oC&&t.locale!=="ko"&&(ou||I!=="onCompositionStart"?I==="onCompositionEnd"&&ou&&(B=tC()):(uo=h,Xv="value"in uo?uo.value:uo.textContent,ou=!0)),C=Qp(f,I),0<C.length&&(I=new rC(I,n,null,t,h),m.push({event:I,listeners:C}),B?I.data=B:(B=cC(t),B!==null&&(I.data=B)))),(B=Ik?Dk(n,t):Fk(n,t))&&(f=Qp(f,"onBeforeInput"),0<f.length&&(h=new rC("onBeforeInput","beforeinput",null,t,h),m.push({event:h,listeners:f}),h.data=B))}EC(m,e)})}function pf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Qp(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Yc(n,t),s!=null&&i.unshift(pf(n,s,r)),s=Yc(n,e),s!=null&&i.push(pf(n,s,r))),n=n.return}return i}function lu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function LC(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,f=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&f!==null&&(a=f,r?(l=Yc(t,s),l!=null&&o.unshift(pf(t,l,a))):r||(l=Yc(t,s),l!=null&&o.push(pf(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}function Yp(){}var ox=null,ax=null;function PC(n,e){switch(n){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function lx(n,e){return n==="textarea"||n==="option"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var IC=typeof setTimeout=="function"?setTimeout:void 0,jk=typeof clearTimeout=="function"?clearTimeout:void 0;function ux(n){n.nodeType===1?n.textContent="":n.nodeType===9&&(n=n.body,n!=null&&(n.textContent=""))}function uu(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break}return n}function DC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var cx=0;function Xk(n){return{$$typeof:gv,toString:n,valueOf:n}}var qp=Math.random().toString(36).slice(2),co="__reactFiber$"+qp,Zp="__reactProps$"+qp,cu="__reactContainer$"+qp,FC="__reactEvents$"+qp;function Ma(n){var e=n[co];if(e)return e;for(var t=n.parentNode;t;){if(e=t[cu]||t[co]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=DC(n);n!==null;){if(t=n[co])return t;n=DC(n)}return e}n=t,t=n.parentNode}return null}function mf(n){return n=n[co]||n[cu],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function fu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(_e(33))}function $p(n){return n[Zp]||null}function NC(n){var e=n[FC];return e===void 0&&(e=n[FC]=new Set),e}var fx=[],du=-1;function fo(n){return{current:n}}function Xt(n){0>du||(n.current=fx[du],fx[du]=null,du--)}function rn(n,e){du++,fx[du]=n.current,n.current=e}var ho={},Kn=fo(ho),pi=fo(!1),wa=ho;function hu(n,e){var t=n.type.contextTypes;if(!t)return ho;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function mi(n){return n=n.childContextTypes,n!=null}function em(){Xt(pi),Xt(Kn)}function OC(n,e,t){if(Kn.current!==ho)throw Error(_e(168));rn(Kn,e),rn(pi,t)}function kC(n,e,t){var i=n.stateNode;if(n=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in n))throw Error(_e(108,Zl(e)||"Unknown",r));return Qt({},t,i)}function tm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ho,wa=Kn.current,rn(Kn,n),rn(pi,pi.current),!0}function UC(n,e,t){var i=n.stateNode;if(!i)throw Error(_e(169));t?(n=kC(n,e,wa),i.__reactInternalMemoizedMergedChildContext=n,Xt(pi),Xt(Kn),rn(Kn,n)):Xt(pi),rn(pi,t)}var dx=null,Aa=null,Kk=Bn.unstable_runWithPriority,hx=Bn.unstable_scheduleCallback,px=Bn.unstable_cancelCallback,Qk=Bn.unstable_shouldYield,GC=Bn.unstable_requestPaint,mx=Bn.unstable_now,Yk=Bn.unstable_getCurrentPriorityLevel,nm=Bn.unstable_ImmediatePriority,HC=Bn.unstable_UserBlockingPriority,zC=Bn.unstable_NormalPriority,VC=Bn.unstable_LowPriority,WC=Bn.unstable_IdlePriority,gx={},qk=GC!==void 0?GC:function(){},ps=null,im=null,yx=!1,JC=mx(),Qn=1e4>JC?mx:function(){return mx()-JC};function pu(){switch(Yk()){case nm:return 99;case HC:return 98;case zC:return 97;case VC:return 96;case WC:return 95;default:throw Error(_e(332))}}function jC(n){switch(n){case 99:return nm;case 98:return HC;case 97:return zC;case 96:return VC;case 95:return WC;default:throw Error(_e(332))}}function Sa(n,e){return n=jC(n),Kk(n,e)}function gf(n,e,t){return n=jC(n),hx(n,e,t)}function Fr(){if(im!==null){var n=im;im=null,px(n)}XC()}function XC(){if(!yx&&ps!==null){yx=!0;var n=0;try{var e=ps;Sa(99,function(){for(;n<e.length;n++){var t=e[n];do t=t(!0);while(t!==null)}}),ps=null}catch(t){throw ps!==null&&(ps=ps.slice(n+1)),hx(nm,Fr),t}finally{yx=!1}}}var Zk=ya.ReactCurrentBatchConfig;function cr(n,e){if(n&&n.defaultProps){e=Qt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var rm=fo(null),sm=null,mu=null,om=null;function vx(){om=mu=sm=null}function xx(n){var e=rm.current;Xt(rm),n.type._context._currentValue=e}function KC(n,e){for(;n!==null;){var t=n.alternate;if((n.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else n.childLanes|=e,t!==null&&(t.childLanes|=e);n=n.return}}function gu(n,e){sm=n,om=mu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!=0&&(fr=!0),n.firstContext=null)}function Ui(n,e){if(om!==n&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(om=n,e=1073741823),e={context:n,observedBits:e,next:null},mu===null){if(sm===null)throw Error(_e(308));mu=e,sm.dependencies={lanes:0,firstContext:e,responders:null}}else mu=mu.next=e;return n._currentValue}var po=!1;function _x(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function QC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function mo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function go(n,e){if(n=n.updateQueue,n!==null){n=n.shared;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}}function YC(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function yf(n,e,t,i){var r=n.updateQueue;po=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var h=n.alternate;if(h!==null){h=h.updateQueue;var m=h.lastBaseUpdate;m!==o&&(m===null?h.firstBaseUpdate=f:m.next=f,h.lastBaseUpdate=l)}}if(s!==null){m=r.baseState,o=0,h=f=l=null;do{a=s.lane;var d=s.eventTime;if((i&a)===a){h!==null&&(h=h.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=n,x=s;switch(a=e,d=t,x.tag){case 1:if(p=x.payload,typeof p=="function"){m=p.call(d,m,a);break e}m=p;break e;case 3:p.flags=p.flags&-4097|64;case 0:if(p=x.payload,a=typeof p=="function"?p.call(d,m,a):p,a==null)break e;m=Qt({},m,a);break e;case 2:po=!0}}s.callback!==null&&(n.flags|=32,a=r.effects,a===null?r.effects=[s]:a.push(s))}else d={eventTime:d,lane:a,tag:s.tag,payload:s.payload,callback:s.callback,next:null},h===null?(f=h=d,l=m):h=h.next=d,o|=a;if(s=s.next,s===null){if(a=r.shared.pending,a===null)break;s=a.next,a.next=null,r.lastBaseUpdate=a,r.shared.pending=null}}while(1);h===null&&(l=m),r.baseState=l,r.firstBaseUpdate=f,r.lastBaseUpdate=h,Bf|=o,n.lanes=o,n.memoizedState=m}}function qC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(_e(191,r));r.call(i)}}}var ZC=new bp.Component().refs;function am(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Qt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var lm={isMounted:function(n){return(n=n._reactInternals)?_a(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Ti(),r=xo(n),s=mo(i,r);s.payload=e,t!=null&&(s.callback=t),go(n,s),_o(n,r,i)},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Ti(),r=xo(n),s=mo(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),go(n,s),_o(n,r,i)},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ti(),i=xo(n),r=mo(t,i);r.tag=2,e!=null&&(r.callback=e),go(n,r),_o(n,i,t)}};function $C(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ff(t,i)||!ff(r,s):!0}function eb(n,e,t){var i=!1,r=ho,s=e.contextType;return typeof s=="object"&&s!==null?s=Ui(s):(r=mi(e)?wa:Kn.current,i=e.contextTypes,s=(i=i!=null)?hu(n,r):ho),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lm,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function tb(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&lm.enqueueReplaceState(e,e.state,null)}function Mx(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=ZC,_x(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ui(s):(s=mi(e)?wa:Kn.current,r.context=hu(n,s)),yf(n,t,r,i),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(am(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&lm.enqueueReplaceState(r,r.state,null),yf(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4)}var um=Array.isArray;function vf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(_e(309));var i=t.stateNode}if(!i)throw Error(_e(147,n));var r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(s){var o=i.refs;o===ZC&&(o=i.refs={}),s===null?delete o[r]:o[r]=s},e._stringRef=r,e)}if(typeof n!="string")throw Error(_e(284));if(!t._owner)throw Error(_e(290,n))}return n}function cm(n,e){if(n.type!=="textarea")throw Error(_e(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function nb(n){function e(M,v){if(n){var y=M.lastEffect;y!==null?(y.nextEffect=v,M.lastEffect=v):M.firstEffect=M.lastEffect=v,v.nextEffect=null,v.flags=8}}function t(M,v){if(!n)return null;for(;v!==null;)e(M,v),v=v.sibling;return null}function i(M,v){for(M=new Map;v!==null;)v.key!==null?M.set(v.key,v):M.set(v.index,v),v=v.sibling;return M}function r(M,v){return M=Ao(M,v),M.index=0,M.sibling=null,M}function s(M,v,y){return M.index=y,n?(y=M.alternate,y!==null?(y=y.index,y<v?(M.flags=2,v):y):(M.flags=2,v)):v}function o(M){return n&&M.alternate===null&&(M.flags=2),M}function a(M,v,y,A){return v===null||v.tag!==6?(v=i_(y,M.mode,A),v.return=M,v):(v=r(v,y),v.return=M,v)}function l(M,v,y,A){return v!==null&&v.elementType===y.type?(A=r(v,y.props),A.ref=vf(M,v,y),A.return=M,A):(A=bm(y.type,y.key,y.props,null,M.mode,A),A.ref=vf(M,v,y),A.return=M,A)}function f(M,v,y,A){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=r_(y,M.mode,A),v.return=M,v):(v=r(v,y.children||[]),v.return=M,v)}function h(M,v,y,A,w){return v===null||v.tag!==7?(v=Su(y,M.mode,A,w),v.return=M,v):(v=r(v,y),v.return=M,v)}function m(M,v,y){if(typeof v=="string"||typeof v=="number")return v=i_(""+v,M.mode,y),v.return=M,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Vc:return y=bm(v.type,v.key,v.props,null,M.mode,y),y.ref=vf(M,null,v),y.return=M,y;case va:return v=r_(v,M.mode,y),v.return=M,v}if(um(v)||jc(v))return v=Su(v,M.mode,y,null),v.return=M,v;cm(M,v)}return null}function d(M,v,y,A){var w=v!==null?v.key:null;if(typeof y=="string"||typeof y=="number")return w!==null?null:a(M,v,""+y,A);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vc:return y.key===w?y.type===io?h(M,v,y.props.children,A,w):l(M,v,y,A):null;case va:return y.key===w?f(M,v,y,A):null}if(um(y)||jc(y))return w!==null?null:h(M,v,y,A,null);cm(M,y)}return null}function p(M,v,y,A,w){if(typeof A=="string"||typeof A=="number")return M=M.get(y)||null,a(v,M,""+A,w);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Vc:return M=M.get(A.key===null?y:A.key)||null,A.type===io?h(v,M,A.props.children,w,A.key):l(v,M,A,w);case va:return M=M.get(A.key===null?y:A.key)||null,f(v,M,A,w)}if(um(A)||jc(A))return M=M.get(y)||null,h(v,M,A,w,null);cm(v,A)}return null}function x(M,v,y,A){for(var w=null,T=null,C=v,B=v=0,I=null;C!==null&&B<y.length;B++){C.index>B?(I=C,C=null):I=C.sibling;var k=d(M,C,y[B],A);if(k===null){C===null&&(C=I);break}n&&C&&k.alternate===null&&e(M,C),v=s(k,v,B),T===null?w=k:T.sibling=k,T=k,C=I}if(B===y.length)return t(M,C),w;if(C===null){for(;B<y.length;B++)C=m(M,y[B],A),C!==null&&(v=s(C,v,B),T===null?w=C:T.sibling=C,T=C);return w}for(C=i(M,C);B<y.length;B++)I=p(C,M,B,y[B],A),I!==null&&(n&&I.alternate!==null&&C.delete(I.key===null?B:I.key),v=s(I,v,B),T===null?w=I:T.sibling=I,T=I);return n&&C.forEach(function(G){return e(M,G)}),w}function _(M,v,y,A){var w=jc(y);if(typeof w!="function")throw Error(_e(150));if(y=w.call(y),y==null)throw Error(_e(151));for(var T=w=null,C=v,B=v=0,I=null,k=y.next();C!==null&&!k.done;B++,k=y.next()){C.index>B?(I=C,C=null):I=C.sibling;var G=d(M,C,k.value,A);if(G===null){C===null&&(C=I);break}n&&C&&G.alternate===null&&e(M,C),v=s(G,v,B),T===null?w=G:T.sibling=G,T=G,C=I}if(k.done)return t(M,C),w;if(C===null){for(;!k.done;B++,k=y.next())k=m(M,k.value,A),k!==null&&(v=s(k,v,B),T===null?w=k:T.sibling=k,T=k);return w}for(C=i(M,C);!k.done;B++,k=y.next())k=p(C,M,B,k.value,A),k!==null&&(n&&k.alternate!==null&&C.delete(k.key===null?B:k.key),v=s(k,v,B),T===null?w=k:T.sibling=k,T=k);return n&&C.forEach(function(O){return e(M,O)}),w}return function(M,v,y,A){var w=typeof y=="object"&&y!==null&&y.type===io&&y.key===null;w&&(y=y.props.children);var T=typeof y=="object"&&y!==null;if(T)switch(y.$$typeof){case Vc:e:{for(T=y.key,w=v;w!==null;){if(w.key===T){switch(w.tag){case 7:if(y.type===io){t(M,w.sibling),v=r(w,y.props.children),v.return=M,M=v;break e}break;default:if(w.elementType===y.type){t(M,w.sibling),v=r(w,y.props),v.ref=vf(M,w,y),v.return=M,M=v;break e}}t(M,w);break}else e(M,w);w=w.sibling}y.type===io?(v=Su(y.props.children,M.mode,A,y.key),v.return=M,M=v):(A=bm(y.type,y.key,y.props,null,M.mode,A),A.ref=vf(M,v,y),A.return=M,M=A)}return o(M);case va:e:{for(w=y.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){t(M,v.sibling),v=r(v,y.children||[]),v.return=M,M=v;break e}else{t(M,v);break}else e(M,v);v=v.sibling}v=r_(y,M.mode,A),v.return=M,M=v}return o(M)}if(typeof y=="string"||typeof y=="number")return y=""+y,v!==null&&v.tag===6?(t(M,v.sibling),v=r(v,y),v.return=M,M=v):(t(M,v),v=i_(y,M.mode,A),v.return=M,M=v),o(M);if(um(y))return x(M,v,y,A);if(jc(y))return _(M,v,y,A);if(T&&cm(M,y),typeof y=="undefined"&&!w)switch(M.tag){case 1:case 22:case 0:case 11:case 15:throw Error(_e(152,Zl(M.type)||"Component"))}return t(M,v)}}var fm=nb(!0),ib=nb(!1),xf={},Nr=fo(xf),_f=fo(xf),Mf=fo(xf);function Ea(n){if(n===xf)throw Error(_e(174));return n}function wx(n,e){switch(rn(Mf,e),rn(_f,n),rn(Nr,xf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cv(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Cv(e,n)}Xt(Nr),rn(Nr,e)}function yu(){Xt(Nr),Xt(_f),Xt(Mf)}function rb(n){Ea(Mf.current);var e=Ea(Nr.current),t=Cv(e,n.type);e!==t&&(rn(_f,n),rn(Nr,t))}function Ax(n){_f.current===n&&(Xt(Nr),Xt(_f))}var sn=fo(0);function dm(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!=0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ms=null,yo=null,Or=!1;function sb(n,e){var t=zi(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=e,t.return=n,t.flags=8,n.lastEffect!==null?(n.lastEffect.nextEffect=t,n.lastEffect=t):n.firstEffect=n.lastEffect=t}function ob(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function Sx(n){if(Or){var e=yo;if(e){var t=e;if(!ob(n,e)){if(e=uu(t.nextSibling),!e||!ob(n,e)){n.flags=n.flags&-1025|2,Or=!1,ms=n;return}sb(ms,t)}ms=n,yo=uu(e.firstChild)}else n.flags=n.flags&-1025|2,Or=!1,ms=n}}function ab(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ms=n}function hm(n){if(n!==ms)return!1;if(!Or)return ab(n),Or=!0,!1;var e=n.type;if(n.tag!==5||e!=="head"&&e!=="body"&&!lx(e,n.memoizedProps))for(e=yo;e;)sb(n,e),e=uu(e.nextSibling);if(ab(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(_e(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){yo=uu(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}yo=null}}else yo=ms?uu(n.stateNode.nextSibling):null;return!0}function Ex(){yo=ms=null,Or=!1}var vu=[];function Tx(){for(var n=0;n<vu.length;n++)vu[n]._workInProgressVersionPrimary=null;vu.length=0}var wf=ya.ReactCurrentDispatcher,Gi=ya.ReactCurrentBatchConfig,Af=0,hn=null,Yn=null,Hn=null,pm=!1,Sf=!1;function gi(){throw Error(_e(321))}function Cx(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ki(n[t],e[t]))return!1;return!0}function bx(n,e,t,i,r,s){if(Af=s,hn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wf.current=n===null||n.memoizedState===null?eU:tU,n=t(i,r),Sf){s=0;do{if(Sf=!1,!(25>s))throw Error(_e(301));s+=1,Hn=Yn=null,e.updateQueue=null,wf.current=nU,n=t(i,r)}while(Sf)}if(wf.current=vm,e=Yn!==null&&Yn.next!==null,Af=0,Hn=Yn=hn=null,pm=!1,e)throw Error(_e(300));return n}function Ta(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?hn.memoizedState=Hn=n:Hn=Hn.next=n,Hn}function Ca(){if(Yn===null){var n=hn.alternate;n=n!==null?n.memoizedState:null}else n=Yn.next;var e=Hn===null?hn.memoizedState:Hn.next;if(e!==null)Hn=e,Yn=n;else{if(n===null)throw Error(_e(310));Yn=n,n={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},Hn===null?hn.memoizedState=Hn=n:Hn=Hn.next=n}return Hn}function kr(n,e){return typeof e=="function"?e(n):e}function Ef(n){var e=Ca(),t=e.queue;if(t===null)throw Error(_e(311));t.lastRenderedReducer=n;var i=Yn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){r=r.next,i=i.baseState;var a=o=s=null,l=r;do{var f=l.lane;if((Af&f)===f)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),i=l.eagerReducer===n?l.eagerState:n(i,l.action);else{var h={lane:f,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(o=a=h,s=i):a=a.next=h,hn.lanes|=f,Bf|=f}l=l.next}while(l!==null&&l!==r);a===null?s=i:a.next=o,ki(i,e.memoizedState)||(fr=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=a,t.lastRenderedState=i}return[e.memoizedState,t.dispatch]}function Tf(n){var e=Ca(),t=e.queue;if(t===null)throw Error(_e(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);ki(s,e.memoizedState)||(fr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function lb(n,e,t){var i=e._getVersion;i=i(e._source);var r=e._workInProgressVersionPrimary;if(r!==null?n=r===i:(n=n.mutableReadLanes,(n=(Af&n)===n)&&(e._workInProgressVersionPrimary=i,vu.push(e))),n)return t(e._source);throw vu.push(e),Error(_e(350))}function ub(n,e,t,i){var r=ii;if(r===null)throw Error(_e(349));var s=e._getVersion,o=s(e._source),a=wf.current,l=a.useState(function(){return lb(r,e,t)}),f=l[1],h=l[0];l=Hn;var m=n.memoizedState,d=m.refs,p=d.getSnapshot,x=m.source;m=m.subscribe;var _=hn;return n.memoizedState={refs:d,source:e,subscribe:i},a.useEffect(function(){d.getSnapshot=t,d.setSnapshot=f;var M=s(e._source);if(!ki(o,M)){M=t(e._source),ki(h,M)||(f(M),M=xo(_),r.mutableReadLanes|=M&r.pendingLanes),M=r.mutableReadLanes,r.entangledLanes|=M;for(var v=r.entanglements,y=M;0<y;){var A=31-lo(y),w=1<<A;v[A]|=M,y&=~w}}},[t,e,i]),a.useEffect(function(){return i(e._source,function(){var M=d.getSnapshot,v=d.setSnapshot;try{v(M(e._source));var y=xo(_);r.mutableReadLanes|=y&r.pendingLanes}catch(A){v(function(){throw A})}})},[e,i]),ki(p,t)&&ki(x,e)&&ki(m,i)||(n={pending:null,dispatch:null,lastRenderedReducer:kr,lastRenderedState:h},n.dispatch=f=Px.bind(null,hn,n),l.queue=n,l.baseQueue=null,h=lb(r,e,t),l.memoizedState=l.baseState=h),h}function cb(n,e,t){var i=Ca();return ub(i,n,e,t)}function Cf(n){var e=Ta();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n=e.queue={pending:null,dispatch:null,lastRenderedReducer:kr,lastRenderedState:n},n=n.dispatch=Px.bind(null,hn,n),[e.memoizedState,n]}function mm(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=hn.updateQueue,e===null?(e={lastEffect:null},hn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function fb(n){var e=Ta();return n={current:n},e.memoizedState=n}function gm(){return Ca().memoizedState}function Bx(n,e,t,i){var r=Ta();hn.flags|=n,r.memoizedState=mm(1|e,t,void 0,i===void 0?null:i)}function Rx(n,e,t,i){var r=Ca();i=i===void 0?null:i;var s=void 0;if(Yn!==null){var o=Yn.memoizedState;if(s=o.destroy,i!==null&&Cx(i,o.deps)){mm(e,t,s,i);return}}hn.flags|=n,r.memoizedState=mm(1|e,t,s,i)}function db(n,e){return Bx(516,4,n,e)}function ym(n,e){return Rx(516,4,n,e)}function hb(n,e){return Rx(4,2,n,e)}function pb(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function mb(n,e,t){return t=t!=null?t.concat([n]):null,Rx(4,2,pb.bind(null,e,n),t)}function Lx(){}function gb(n,e){var t=Ca();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Cx(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function yb(n,e){var t=Ca();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Cx(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function $k(n,e){var t=pu();Sa(98>t?98:t,function(){n(!0)}),Sa(97<t?97:t,function(){var i=Gi.transition;Gi.transition=1;try{n(!1),e()}finally{Gi.transition=i}})}function Px(n,e,t){var i=Ti(),r=xo(n),s={lane:r,action:t,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=n.alternate,n===hn||o!==null&&o===hn)Sf=pm=!0;else{if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,t);if(s.eagerReducer=o,s.eagerState=l,ki(l,a))return}catch{}finally{}_o(n,r,i)}}var vm={readContext:Ui,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useOpaqueIdentifier:gi,unstable_isNewReconciler:!1},eU={readContext:Ui,useCallback:function(n,e){return Ta().memoizedState=[n,e===void 0?null:e],n},useContext:Ui,useEffect:db,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Bx(4,2,pb.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Bx(4,2,n,e)},useMemo:function(n,e){var t=Ta();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ta();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n=i.queue={pending:null,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},n=n.dispatch=Px.bind(null,hn,n),[i.memoizedState,n]},useRef:fb,useState:Cf,useDebugValue:Lx,useDeferredValue:function(n){var e=Cf(n),t=e[0],i=e[1];return db(function(){var r=Gi.transition;Gi.transition=1;try{i(n)}finally{Gi.transition=r}},[n]),t},useTransition:function(){var n=Cf(!1),e=n[0];return n=$k.bind(null,n[1]),fb(n),[n,e]},useMutableSource:function(n,e,t){var i=Ta();return i.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:n,subscribe:t},ub(i,n,e,t)},useOpaqueIdentifier:function(){if(Or){var n=!1,e=Xk(function(){throw n||(n=!0,t("r:"+(cx++).toString(36))),Error(_e(355))}),t=Cf(e)[1];return(hn.mode&2)==0&&(hn.flags|=516,mm(5,function(){t("r:"+(cx++).toString(36))},void 0,null)),e}return e="r:"+(cx++).toString(36),Cf(e),e},unstable_isNewReconciler:!1},tU={readContext:Ui,useCallback:gb,useContext:Ui,useEffect:ym,useImperativeHandle:mb,useLayoutEffect:hb,useMemo:yb,useReducer:Ef,useRef:gm,useState:function(){return Ef(kr)},useDebugValue:Lx,useDeferredValue:function(n){var e=Ef(kr),t=e[0],i=e[1];return ym(function(){var r=Gi.transition;Gi.transition=1;try{i(n)}finally{Gi.transition=r}},[n]),t},useTransition:function(){var n=Ef(kr)[0];return[gm().current,n]},useMutableSource:cb,useOpaqueIdentifier:function(){return Ef(kr)[0]},unstable_isNewReconciler:!1},nU={readContext:Ui,useCallback:gb,useContext:Ui,useEffect:ym,useImperativeHandle:mb,useLayoutEffect:hb,useMemo:yb,useReducer:Tf,useRef:gm,useState:function(){return Tf(kr)},useDebugValue:Lx,useDeferredValue:function(n){var e=Tf(kr),t=e[0],i=e[1];return ym(function(){var r=Gi.transition;Gi.transition=1;try{i(n)}finally{Gi.transition=r}},[n]),t},useTransition:function(){var n=Tf(kr)[0];return[gm().current,n]},useMutableSource:cb,useOpaqueIdentifier:function(){return Tf(kr)[0]},unstable_isNewReconciler:!1},iU=ya.ReactCurrentOwner,fr=!1;function yi(n,e,t,i){e.child=n===null?ib(e,null,t,i):fm(e,n.child,t,i)}function vb(n,e,t,i,r){t=t.render;var s=e.ref;return gu(e,r),i=bx(n,e,t,i,s,r),n!==null&&!fr?(e.updateQueue=n.updateQueue,e.flags&=-517,n.lanes&=~r,gs(n,e,r)):(e.flags|=1,yi(n,e,i,r),e.child)}function xb(n,e,t,i,r,s){if(n===null){var o=t.type;return typeof o=="function"&&!t_(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,_b(n,e,o,i,r,s)):(n=bm(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}return o=n.child,(r&s)==0&&(r=o.memoizedProps,t=t.compare,t=t!==null?t:ff,t(r,i)&&n.ref===e.ref)?gs(n,e,s):(e.flags|=1,n=Ao(o,i),n.ref=e.ref,n.return=e,e.child=n)}function _b(n,e,t,i,r,s){if(n!==null&&ff(n.memoizedProps,i)&&n.ref===e.ref)if(fr=!1,(s&r)!=0)(n.flags&16384)!=0&&(fr=!0);else return e.lanes=n.lanes,gs(n,e,s);return Dx(n,e,t,i,s)}function Ix(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden"||i.mode==="unstable-defer-without-hiding")if((e.mode&4)==0)e.memoizedState={baseLanes:0},Cm(e,t);else if((t&1073741824)!=0)e.memoizedState={baseLanes:0},Cm(e,s!==null?s.baseLanes:t);else return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n},Cm(e,n),null;else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Cm(e,i);return yi(n,e,r,t),e.child}function Mb(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=128)}function Dx(n,e,t,i,r){var s=mi(t)?wa:Kn.current;return s=hu(e,s),gu(e,r),t=bx(n,e,t,i,s,r),n!==null&&!fr?(e.updateQueue=n.updateQueue,e.flags&=-517,n.lanes&=~r,gs(n,e,r)):(e.flags|=1,yi(n,e,t,r),e.child)}function wb(n,e,t,i,r){if(mi(t)){var s=!0;tm(e)}else s=!1;if(gu(e,r),e.stateNode===null)n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),eb(e,t,i),Mx(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=Ui(f):(f=mi(t)?wa:Kn.current,f=hu(e,f));var h=t.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==f)&&tb(e,o,i,f),po=!1;var d=e.memoizedState;o.state=d,yf(e,i,o,r),l=e.memoizedState,a!==i||d!==l||pi.current||po?(typeof h=="function"&&(am(e,t,h,i),l=e.memoizedState),(a=po||$C(e,t,a,i,d,l,f))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=f,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4),i=!1)}else{o=e.stateNode,QC(n,e),a=e.memoizedProps,f=e.type===e.elementType?a:cr(e.type,a),o.props=f,m=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ui(l):(l=mi(t)?wa:Kn.current,l=hu(e,l));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||d!==l)&&tb(e,o,i,l),po=!1,d=e.memoizedState,o.state=d,yf(e,i,o,r);var x=e.memoizedState;a!==m||d!==x||pi.current||po?(typeof p=="function"&&(am(e,t,p,i),x=e.memoizedState),(f=po||$C(e,t,f,i,d,x,l))?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=256),e.memoizedProps=i,e.memoizedState=x),o.props=i,o.state=x,o.context=l,i=f):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=256),i=!1)}return Fx(n,e,t,i,s,r)}function Fx(n,e,t,i,r,s){Mb(n,e);var o=(e.flags&64)!=0;if(!i&&!o)return r&&UC(e,t,!1),gs(n,e,s);i=e.stateNode,iU.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=fm(e,n.child,null,s),e.child=fm(e,null,a,s)):yi(n,e,a,s),e.memoizedState=i.state,r&&UC(e,t,!0),e.child}function Ab(n){var e=n.stateNode;e.pendingContext?OC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&OC(n,e.context,!1),wx(n,e.containerInfo)}var xm={dehydrated:null,retryLane:0};function Sb(n,e,t){var i=e.pendingProps,r=sn.current,s=!1,o;return(o=(e.flags&64)!=0)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!=0),o?(s=!0,e.flags&=-65):n!==null&&n.memoizedState===null||i.fallback===void 0||i.unstable_avoidThisFallback===!0||(r|=1),rn(sn,r&1),n===null?(i.fallback!==void 0&&Sx(e),n=i.children,r=i.fallback,s?(n=Eb(e,n,r,t),e.child.memoizedState={baseLanes:t},e.memoizedState=xm,n):typeof i.unstable_expectedLoadTime=="number"?(n=Eb(e,n,r,t),e.child.memoizedState={baseLanes:t},e.memoizedState=xm,e.lanes=33554432,n):(t=n_({mode:"visible",children:n},e.mode,t,null),t.return=e,e.child=t)):n.memoizedState!==null?s?(i=Cb(n,e,i.children,i.fallback,t),s=e.child,r=n.child.memoizedState,s.memoizedState=r===null?{baseLanes:t}:{baseLanes:r.baseLanes|t},s.childLanes=n.childLanes&~t,e.memoizedState=xm,i):(t=Tb(n,e,i.children,t),e.memoizedState=null,t):s?(i=Cb(n,e,i.children,i.fallback,t),s=e.child,r=n.child.memoizedState,s.memoizedState=r===null?{baseLanes:t}:{baseLanes:r.baseLanes|t},s.childLanes=n.childLanes&~t,e.memoizedState=xm,i):(t=Tb(n,e,i.children,t),e.memoizedState=null,t)}function Eb(n,e,t,i){var r=n.mode,s=n.child;return e={mode:"hidden",children:e},(r&2)==0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=n_(e,r,0,null),t=Su(t,r,i,null),s.return=n,t.return=n,s.sibling=t,n.child=s,t}function Tb(n,e,t,i){var r=n.child;return n=r.sibling,t=Ao(r,{mode:"visible",children:t}),(e.mode&2)==0&&(t.lanes=i),t.return=e,t.sibling=null,n!==null&&(n.nextEffect=null,n.flags=8,e.firstEffect=e.lastEffect=n),e.child=t}function Cb(n,e,t,i,r){var s=e.mode,o=n.child;n=o.sibling;var a={mode:"hidden",children:t};return(s&2)==0&&e.child!==o?(t=e.child,t.childLanes=0,t.pendingProps=a,o=t.lastEffect,o!==null?(e.firstEffect=t.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):t=Ao(o,a),n!==null?i=Ao(n,i):(i=Su(i,s,r,null),i.flags|=2),i.return=e,t.return=e,t.sibling=i,e.child=t,i}function bb(n,e){n.lanes|=e;var t=n.alternate;t!==null&&(t.lanes|=e),KC(n.return,e)}function Nx(n,e,t,i,r,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=r,o.lastEffect=s)}function Bb(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(yi(n,e,i.children,t),i=sn.current,(i&2)!=0)i=i&1|2,e.flags|=64;else{if(n!==null&&(n.flags&64)!=0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&bb(n,t);else if(n.tag===19)bb(n,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(rn(sn,i),(e.mode&2)==0)e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&dm(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Nx(e,!1,r,t,s,e.lastEffect);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&dm(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Nx(e,!0,t,null,s,e.lastEffect);break;case"together":Nx(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function gs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Bf|=e.lanes,(t&e.childLanes)!=0){if(n!==null&&e.child!==n.child)throw Error(_e(153));if(e.child!==null){for(n=e.child,t=Ao(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ao(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}return null}var Rb,Ox,Lb,Pb;Rb=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Ox=function(){};Lb=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Ea(Nr.current);var s=null;switch(t){case"input":r=Mv(n,r),i=Mv(n,i),s=[];break;case"option":r=Sv(n,r),i=Sv(n,i),s=[];break;case"select":r=Qt({},r,{value:void 0}),i=Qt({},i,{value:void 0}),s=[];break;case"textarea":r=Ev(n,r),i=Ev(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Yp)}bv(t,i);var o;t=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var a=r[f];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(zc.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var l=i[f];if(a=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&l!==a&&(l!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(f,t)),t=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(zc.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&jt("scroll",n),s||a===l||(s=[])):typeof l=="object"&&l!==null&&l.$$typeof===gv?l.toString():(s=s||[]).push(f,l))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};Pb=function(n,e,t,i){t!==i&&(e.flags|=4)};function bf(n,e){if(!Or)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function rU(n,e,t){var i=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mi(e.type)&&em(),null;case 3:return yu(),Xt(pi),Xt(Kn),Tx(),i=e.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(hm(e)?e.flags|=4:i.hydrate||(e.flags|=256)),Ox(e),null;case 5:Ax(e);var r=Ea(Mf.current);if(t=e.type,n!==null&&e.stateNode!=null)Lb(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=128);else{if(!i){if(e.stateNode===null)throw Error(_e(166));return null}if(n=Ea(Nr.current),hm(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[co]=e,i[Zp]=s,t){case"dialog":jt("cancel",i),jt("close",i);break;case"iframe":case"object":case"embed":jt("load",i);break;case"video":case"audio":for(n=0;n<hf.length;n++)jt(hf[n],i);break;case"source":jt("error",i);break;case"img":case"image":case"link":jt("error",i),jt("load",i);break;case"details":jt("toggle",i);break;case"input":wT(i,s),jt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},jt("invalid",i);break;case"textarea":ET(i,s),jt("invalid",i)}bv(t,s),n=null;for(var o in s)s.hasOwnProperty(o)&&(r=s[o],o==="children"?typeof r=="string"?i.textContent!==r&&(n=["children",r]):typeof r=="number"&&i.textContent!==""+r&&(n=["children",""+r]):zc.hasOwnProperty(o)&&r!=null&&o==="onScroll"&&jt("scroll",i));switch(t){case"input":Ip(i),ST(i,s,!0);break;case"textarea":Ip(i),CT(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Yp)}i=n,e.updateQueue=i,i!==null&&(e.flags|=4)}else{switch(o=r.nodeType===9?r:r.ownerDocument,n===Tv.html&&(n=bT(t)),n===Tv.html?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[co]=e,n[Zp]=i,Rb(n,e,!1,!1),e.stateNode=n,o=Bv(t,i),t){case"dialog":jt("cancel",n),jt("close",n),r=i;break;case"iframe":case"object":case"embed":jt("load",n),r=i;break;case"video":case"audio":for(r=0;r<hf.length;r++)jt(hf[r],n);r=i;break;case"source":jt("error",n),r=i;break;case"img":case"image":case"link":jt("error",n),jt("load",n),r=i;break;case"details":jt("toggle",n),r=i;break;case"input":wT(n,i),r=Mv(n,i),jt("invalid",n);break;case"option":r=Sv(n,i);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Qt({},i,{value:void 0}),jt("invalid",n);break;case"textarea":ET(n,i),r=Ev(n,i),jt("invalid",n);break;default:r=i}bv(t,r);var a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LT(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BT(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Kc(n,l):typeof l=="number"&&Kc(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&jt("scroll",n):l!=null&&cv(n,s,l,o))}switch(t){case"input":Ip(n),ST(n,i,!1);break;case"textarea":Ip(n),CT(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ro(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?$l(n,!!i.multiple,s,!1):i.defaultValue!=null&&$l(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Yp)}PC(t,i)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(n&&e.stateNode!=null)Pb(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(_e(166));t=Ea(Mf.current),Ea(Nr.current),hm(e)?(i=e.stateNode,t=e.memoizedProps,i[co]=e,i.nodeValue!==t&&(e.flags|=4)):(i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[co]=e,e.stateNode=i)}return null;case 13:return Xt(sn),i=e.memoizedState,(e.flags&64)!=0?(e.lanes=t,e):(i=i!==null,t=!1,n===null?e.memoizedProps.fallback!==void 0&&hm(e):t=n.memoizedState!==null,i&&!t&&(e.mode&2)!=0&&(n===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(sn.current&1)!=0?zn===0&&(zn=3):((zn===0||zn===3)&&(zn=4),ii===null||(Bf&134217727)==0&&(_u&134217727)==0||wu(ii,qn))),(i||t)&&(e.flags|=4),null);case 4:return yu(),Ox(e),n===null&&CC(e.stateNode.containerInfo),null;case 10:return xx(e),null;case 17:return mi(e.type)&&em(),null;case 19:if(Xt(sn),i=e.memoizedState,i===null)return null;if(s=(e.flags&64)!=0,o=i.rendering,o===null)if(s)bf(i,!1);else{if(zn!==0||n!==null&&(n.flags&64)!=0)for(n=e.child;n!==null;){if(o=dm(n),o!==null){for(e.flags|=64,bf(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),i.lastEffect===null&&(e.firstEffect=null),e.lastEffect=i.lastEffect,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return rn(sn,sn.current&1|2),e.child}n=n.sibling}i.tail!==null&&Qn()>Kx&&(e.flags|=64,s=!0,bf(i,!1),e.lanes=33554432)}else{if(!s)if(n=dm(o),n!==null){if(e.flags|=64,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),bf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Or)return e=e.lastEffect=i.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Qn()-i.renderingStartTime>Kx&&t!==1073741824&&(e.flags|=64,s=!0,bf(i,!1),e.lanes=33554432);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.lastEffect=e.lastEffect,i.renderingStartTime=Qn(),t.sibling=null,e=sn.current,rn(sn,s?e&1|2:e&1),t):null;case 23:case 24:return e_(),n!==null&&n.memoizedState!==null!=(e.memoizedState!==null)&&i.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(_e(156,e.tag))}function sU(n){switch(n.tag){case 1:mi(n.type)&&em();var e=n.flags;return e&4096?(n.flags=e&-4097|64,n):null;case 3:if(yu(),Xt(pi),Xt(Kn),Tx(),e=n.flags,(e&64)!=0)throw Error(_e(285));return n.flags=e&-4097|64,n;case 5:return Ax(n),null;case 13:return Xt(sn),e=n.flags,e&4096?(n.flags=e&-4097|64,n):null;case 19:return Xt(sn),null;case 4:return yu(),null;case 10:return xx(n),null;case 23:case 24:return e_(),null;default:return null}}function kx(n,e){try{var t="",i=e;do t+=UO(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r}}function Ux(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var oU=typeof WeakMap=="function"?WeakMap:Map;function Ib(n,e,t){t=mo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){wm||(wm=!0,Qx=i),Ux(n,e)},t}function Db(n,e,t){t=mo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return Ux(n,e),i(r)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){typeof i!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this),Ux(n,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}var aU=typeof WeakSet=="function"?WeakSet:Set;function Fb(n){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){wo(n,t)}else e.current=null}function lU(n,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&n!==null){var t=n.memoizedProps,i=n.memoizedState;n=e.stateNode,e=n.getSnapshotBeforeUpdate(e.elementType===e.type?t:cr(e.type,t),i),n.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&ux(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(_e(163))}function uU(n,e,t){switch(t.tag){case 0:case 11:case 15:case 22:if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){n=e=e.next;do{if((n.tag&3)==3){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){n=e=e.next;do{var r=n;i=r.next,r=r.tag,(r&4)!=0&&(r&1)!=0&&(Yb(t,n),yU(t,n)),n=i}while(n!==e)}return;case 1:n=t.stateNode,t.flags&4&&(e===null?n.componentDidMount():(i=t.elementType===t.type?e.memoizedProps:cr(t.type,e.memoizedProps),n.componentDidUpdate(i,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate))),e=t.updateQueue,e!==null&&qC(t,e,n);return;case 3:if(e=t.updateQueue,e!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qC(t,e,n)}return;case 5:n=t.stateNode,e===null&&t.flags&4&&PC(t.type,t.memoizedProps)&&n.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&XT(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(_e(163))}function Nb(n,e){for(var t=n;;){if(t.tag===5){var i=t.stateNode;if(e)i=i.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{i=t.stateNode;var r=t.memoizedProps.style;r=r!=null&&r.hasOwnProperty("display")?r.display:null,i.style.display=RT("display",r)}}else if(t.tag===6)t.stateNode.nodeValue=e?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function Ob(n,e){if(Aa&&typeof Aa.onCommitFiberUnmount=="function")try{Aa.onCommitFiberUnmount(dx,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null)){var t=n=n.next;do{var i=t,r=i.destroy;if(i=i.tag,r!==void 0)if((i&4)!=0)Yb(e,t);else{i=e;try{r()}catch(s){wo(i,s)}}t=t.next}while(t!==n)}break;case 1:if(Fb(e),n=e.stateNode,typeof n.componentWillUnmount=="function")try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(s){wo(e,s)}break;case 5:Fb(e);break;case 4:Hb(n,e)}}function kb(n){n.alternate=null,n.child=null,n.dependencies=null,n.firstEffect=null,n.lastEffect=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.return=null,n.updateQueue=null}function Ub(n){return n.tag===5||n.tag===3||n.tag===4}function Gb(n){e:{for(var e=n.return;e!==null;){if(Ub(e))break e;e=e.return}throw Error(_e(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var i=!1;break;case 3:e=e.containerInfo,i=!0;break;case 4:e=e.containerInfo,i=!0;break;default:throw Error(_e(161))}t.flags&16&&(Kc(e,""),t.flags&=-17);e:t:for(t=n;;){for(;t.sibling===null;){if(t.return===null||Ub(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}i?Gx(n,t,e):Hx(n,t,e)}function Gx(n,e,t){var i=n.tag,r=i===5||i===6;if(r)n=r?n.stateNode:n.stateNode.instance,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Yp));else if(i!==4&&(n=n.child,n!==null))for(Gx(n,e,t),n=n.sibling;n!==null;)Gx(n,e,t),n=n.sibling}function Hx(n,e,t){var i=n.tag,r=i===5||i===6;if(r)n=r?n.stateNode:n.stateNode.instance,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Hx(n,e,t),n=n.sibling;n!==null;)Hx(n,e,t),n=n.sibling}function Hb(n,e){for(var t=e,i=!1,r,s;;){if(!i){i=t.return;e:for(;;){if(i===null)throw Error(_e(160));switch(r=i.stateNode,i.tag){case 5:s=!1;break e;case 3:r=r.containerInfo,s=!0;break e;case 4:r=r.containerInfo,s=!0;break e}i=i.return}i=!0}if(t.tag===5||t.tag===6){e:for(var o=n,a=t,l=a;;)if(Ob(o,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}s?(o=r,a=t.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):r.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){r=t.stateNode.containerInfo,s=!0,t.child.return=t,t=t.child;continue}}else if(Ob(n,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return,t.tag===4&&(i=!1)}t.sibling.return=t.return,t=t.sibling}}function zx(n,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var t=e.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do(i.tag&3)==3&&(n=i.destroy,i.destroy=void 0,n!==void 0&&n()),i=i.next;while(i!==t)}return;case 1:return;case 5:if(t=e.stateNode,t!=null){i=e.memoizedProps;var r=n!==null?n.memoizedProps:i;n=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(t[Zp]=i,n==="input"&&i.type==="radio"&&i.name!=null&&AT(t,i),Bv(n,r),e=Bv(n,i),r=0;r<s.length;r+=2){var o=s[r],a=s[r+1];o==="style"?LT(t,a):o==="dangerouslySetInnerHTML"?BT(t,a):o==="children"?Kc(t,a):cv(t,o,a,e)}switch(n){case"input":wv(t,i);break;case"textarea":TT(t,i);break;case"select":n=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,s=i.value,s!=null?$l(t,!!i.multiple,s,!1):n!==!!i.multiple&&(i.defaultValue!=null?$l(t,!!i.multiple,i.defaultValue,!0):$l(t,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(_e(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.hydrate&&(t.hydrate=!1,XT(t.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(Xx=Qn(),Nb(e.child,!0)),zb(e);return;case 19:zb(e);return;case 17:return;case 23:case 24:Nb(e,e.memoizedState!==null);return}throw Error(_e(163))}function zb(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new aU),e.forEach(function(i){var r=_U.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function cU(n,e){return n!==null&&(n=n.memoizedState,n===null||n.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var fU=Math.ceil,_m=ya.ReactCurrentDispatcher,Vx=ya.ReactCurrentOwner,tt=0,ii=null,An=null,qn=0,ba=0,Wx=fo(0),zn=0,Mm=null,xu=0,Bf=0,_u=0,Jx=0,jx=null,Xx=0,Kx=1/0;function Mu(){Kx=Qn()+500}var Oe=null,wm=!1,Qx=null,Ur=null,vo=!1,Rf=null,Lf=90,Yx=[],qx=[],ys=null,Pf=0,Zx=null,Am=-1,vs=0,Sm=0,If=null,Em=!1;function Ti(){return(tt&48)!=0?Qn():Am!==-1?Am:Am=Qn()}function xo(n){if(n=n.mode,(n&2)==0)return 1;if((n&4)==0)return pu()===99?1:2;if(vs===0&&(vs=xu),Zk.transition!==0){Sm!==0&&(Sm=jx!==null?jx.pendingLanes:0),n=vs;var e=4186112&~Sm;return e&=-e,e===0&&(n=4186112&~n,e=n&-n,e===0&&(e=8192)),e}return n=pu(),(tt&4)!=0&&n===98?n=Hp(12,vs):(n=tk(n),n=Hp(n,vs)),n}function _o(n,e,t){if(50<Pf)throw Pf=0,Zx=null,Error(_e(185));if(n=Tm(n,e),n===null)return null;zp(n,e,t),n===ii&&(_u|=e,zn===4&&wu(n,qn));var i=pu();e===1?(tt&8)!=0&&(tt&48)==0?$x(n):(Hi(n,t),tt===0&&(Mu(),Fr())):((tt&4)==0||i!==98&&i!==99||(ys===null?ys=new Set([n]):ys.add(n)),Hi(n,t)),jx=n}function Tm(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}function Hi(n,e){for(var t=n.callbackNode,i=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-lo(o),l=1<<a,f=s[a];if(f===-1){if((l&i)==0||(l&r)!=0){f=e,iu(l);var h=Vt;s[a]=10<=h?f+250:6<=h?f+5e3:-1}}else f<=e&&(n.expiredLanes|=l);o&=~l}if(i=sf(n,n===ii?qn:0),e=Vt,i===0)t!==null&&(t!==gx&&px(t),n.callbackNode=null,n.callbackPriority=0);else{if(t!==null){if(n.callbackPriority===e)return;t!==gx&&px(t)}e===15?(t=$x.bind(null,n),ps===null?(ps=[t],im=hx(nm,XC)):ps.push(t),t=gx):e===14?t=gf(99,$x.bind(null,n)):(t=nk(e),t=gf(t,Vb.bind(null,n))),n.callbackPriority=e,n.callbackNode=t}}function Vb(n){if(Am=-1,Sm=vs=0,(tt&48)!=0)throw Error(_e(327));var e=n.callbackNode;if(Mo()&&n.callbackNode!==e)return null;var t=sf(n,n===ii?qn:0);if(t===0)return null;var i=t,r=tt;tt|=16;var s=Xb();(ii!==n||qn!==i)&&(Mu(),Au(n,i));do try{pU();break}catch(a){jb(n,a)}while(1);if(vx(),_m.current=s,tt=r,An!==null?i=0:(ii=null,qn=0,i=zn),(xu&_u)!=0)Au(n,0);else if(i!==0){if(i===2&&(tt|=64,n.hydrate&&(n.hydrate=!1,ux(n.containerInfo)),t=eC(n),t!==0&&(i=Df(n,t))),i===1)throw e=Mm,Au(n,0),wu(n,t),Hi(n,Qn()),e;switch(n.finishedWork=n.current.alternate,n.finishedLanes=t,i){case 0:case 1:throw Error(_e(345));case 2:Ba(n);break;case 3:if(wu(n,t),(t&62914560)===t&&(i=Xx+500-Qn(),10<i)){if(sf(n,0)!==0)break;if(r=n.suspendedLanes,(r&t)!==t){Ti(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=IC(Ba.bind(null,n),i);break}Ba(n);break;case 4:if(wu(n,t),(t&4186112)===t)break;for(i=n.eventTimes,r=-1;0<t;){var o=31-lo(t);s=1<<o,o=i[o],o>r&&(r=o),t&=~s}if(t=r,t=Qn()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*fU(t/1960))-t,10<t){n.timeoutHandle=IC(Ba.bind(null,n),t);break}Ba(n);break;case 5:Ba(n);break;default:throw Error(_e(329))}}return Hi(n,Qn()),n.callbackNode===e?Vb.bind(null,n):null}function wu(n,e){for(e&=~Jx,e&=~_u,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-lo(e),i=1<<t;n[t]=-1,e&=~i}}function $x(n){if((tt&48)!=0)throw Error(_e(327));if(Mo(),n===ii&&(n.expiredLanes&qn)!=0){var e=qn,t=Df(n,e);(xu&_u)!=0&&(e=sf(n,e),t=Df(n,e))}else e=sf(n,0),t=Df(n,e);if(n.tag!==0&&t===2&&(tt|=64,n.hydrate&&(n.hydrate=!1,ux(n.containerInfo)),e=eC(n),e!==0&&(t=Df(n,e))),t===1)throw t=Mm,Au(n,0),wu(n,e),Hi(n,Qn()),t;return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ba(n),Hi(n,Qn()),null}function dU(){if(ys!==null){var n=ys;ys=null,n.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Hi(e,Qn())})}Fr()}function Wb(n,e){var t=tt;tt|=1;try{return n(e)}finally{tt=t,tt===0&&(Mu(),Fr())}}function Jb(n,e){var t=tt;tt&=-2,tt|=8;try{return n(e)}finally{tt=t,tt===0&&(Mu(),Fr())}}function Cm(n,e){rn(Wx,ba),ba|=e,xu|=e}function e_(){ba=Wx.current,Xt(Wx)}function Au(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,jk(t)),An!==null)for(t=An.return;t!==null;){var i=t;switch(i.tag){case 1:i=i.type.childContextTypes,i!=null&&em();break;case 3:yu(),Xt(pi),Xt(Kn),Tx();break;case 5:Ax(i);break;case 4:yu();break;case 13:Xt(sn);break;case 19:Xt(sn);break;case 10:xx(i);break;case 23:case 24:e_()}t=t.return}ii=n,An=Ao(n.current,null),qn=ba=xu=e,zn=0,Mm=null,Jx=_u=Bf=0}function jb(n,e){do{var t=An;try{if(vx(),wf.current=vm,pm){for(var i=hn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}pm=!1}if(Af=0,Hn=Yn=hn=null,Sf=!1,Vx.current=null,t===null||t.return===null){zn=1,Mm=e,An=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=qn,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l;if((a.mode&2)==0){var h=a.alternate;h?(a.updateQueue=h.updateQueue,a.memoizedState=h.memoizedState,a.lanes=h.lanes):(a.updateQueue=null,a.memoizedState=null)}var m=(sn.current&1)!=0,d=o;do{var p;if(p=d.tag===13){var x=d.memoizedState;if(x!==null)p=x.dehydrated!==null;else{var _=d.memoizedProps;p=_.fallback===void 0?!1:_.unstable_avoidThisFallback!==!0?!0:!m}}if(p){var M=d.updateQueue;if(M===null){var v=new Set;v.add(f),d.updateQueue=v}else M.add(f);if((d.mode&2)==0){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var y=mo(-1,1);y.tag=2,go(a,y)}a.lanes|=1;break e}l=void 0,a=e;var A=s.pingCache;if(A===null?(A=s.pingCache=new oU,l=new Set,A.set(f,l)):(l=A.get(f),l===void 0&&(l=new Set,A.set(f,l))),!l.has(a)){l.add(a);var w=xU.bind(null,s,f,a);f.then(w,w)}d.flags|=4096,d.lanes=e;break e}d=d.return}while(d!==null);l=Error((Zl(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}zn!==5&&(zn=2),l=kx(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,e&=-e,d.lanes|=e;var T=Ib(d,s,e);YC(d,T);break e;case 1:s=l;var C=d.type,B=d.stateNode;if((d.flags&64)==0&&(typeof C.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Ur===null||!Ur.has(B)))){d.flags|=4096,e&=-e,d.lanes|=e;var I=Db(d,s,e);YC(d,I);break e}}d=d.return}while(d!==null)}Qb(t)}catch(k){e=k,An===t&&t!==null&&(An=t=t.return);continue}break}while(1)}function Xb(){var n=_m.current;return _m.current=vm,n===null?vm:n}function Df(n,e){var t=tt;tt|=16;var i=Xb();ii===n&&qn===e||Au(n,e);do try{hU();break}catch(r){jb(n,r)}while(1);if(vx(),tt=t,_m.current=i,An!==null)throw Error(_e(261));return ii=null,qn=0,zn}function hU(){for(;An!==null;)Kb(An)}function pU(){for(;An!==null&&!Qk();)Kb(An)}function Kb(n){var e=Zb(n.alternate,n,ba);n.memoizedProps=n.pendingProps,e===null?Qb(n):An=e,Vx.current=null}function Qb(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&2048)==0){if(t=rU(t,e,ba),t!==null){An=t;return}if(t=e,t.tag!==24&&t.tag!==23||t.memoizedState===null||(ba&1073741824)!=0||(t.mode&4)==0){for(var i=0,r=t.child;r!==null;)i|=r.lanes|r.childLanes,r=r.sibling;t.childLanes=i}n!==null&&(n.flags&2048)==0&&(n.firstEffect===null&&(n.firstEffect=e.firstEffect),e.lastEffect!==null&&(n.lastEffect!==null&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.flags&&(n.lastEffect!==null?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(t=sU(e),t!==null){t.flags&=2047,An=t;return}n!==null&&(n.firstEffect=n.lastEffect=null,n.flags|=2048)}if(e=e.sibling,e!==null){An=e;return}An=e=n}while(e!==null);zn===0&&(zn=5)}function Ba(n){var e=pu();return Sa(99,mU.bind(null,n,e)),null}function mU(n,e){do Mo();while(Rf!==null);if((tt&48)!=0)throw Error(_e(327));var t=n.finishedWork;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(_e(177));n.callbackNode=null;var i=t.lanes|t.childLanes,r=i,s=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;for(var o=n.eventTimes,a=n.expirationTimes;0<s;){var l=31-lo(s),f=1<<l;r[l]=0,o[l]=-1,a[l]=-1,s&=~f}if(ys!==null&&(i&24)==0&&ys.has(n)&&ys.delete(n),n===ii&&(An=ii=null,qn=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,i=t.firstEffect):i=t:i=t.firstEffect,i!==null){if(r=tt,tt|=32,Vx.current=null,ox=Vp,o=_C(),nx(o)){if("selectionStart"in o)a={start:o.selectionStart,end:o.selectionEnd};else e:if(a=(a=o.ownerDocument)&&a.defaultView||window,(f=a.getSelection&&a.getSelection())&&f.rangeCount!==0){a=f.anchorNode,s=f.anchorOffset,l=f.focusNode,f=f.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var h=0,m=-1,d=-1,p=0,x=0,_=o,M=null;t:for(;;){for(var v;_!==a||s!==0&&_.nodeType!==3||(m=h+s),_!==l||f!==0&&_.nodeType!==3||(d=h+f),_.nodeType===3&&(h+=_.nodeValue.length),(v=_.firstChild)!==null;)M=_,_=v;for(;;){if(_===o)break t;if(M===a&&++p===s&&(m=h),M===l&&++x===f&&(d=h),(v=_.nextSibling)!==null)break;_=M,M=_.parentNode}_=v}a=m===-1||d===-1?null:{start:m,end:d}}else a=null;a=a||{start:0,end:0}}else a=null;ax={focusedElem:o,selectionRange:a},Vp=!1,If=null,Em=!1,Oe=i;do try{gU()}catch(k){if(Oe===null)throw Error(_e(330));wo(Oe,k),Oe=Oe.nextEffect}while(Oe!==null);If=null,Oe=i;do try{for(o=n;Oe!==null;){var y=Oe.flags;if(y&16&&Kc(Oe.stateNode,""),y&128){var A=Oe.alternate;if(A!==null){var w=A.ref;w!==null&&(typeof w=="function"?w(null):w.current=null)}}switch(y&1038){case 2:Gb(Oe),Oe.flags&=-3;break;case 6:Gb(Oe),Oe.flags&=-3,zx(Oe.alternate,Oe);break;case 1024:Oe.flags&=-1025;break;case 1028:Oe.flags&=-1025,zx(Oe.alternate,Oe);break;case 4:zx(Oe.alternate,Oe);break;case 8:a=Oe,Hb(o,a);var T=a.alternate;kb(a),T!==null&&kb(T)}Oe=Oe.nextEffect}}catch(k){if(Oe===null)throw Error(_e(330));wo(Oe,k),Oe=Oe.nextEffect}while(Oe!==null);if(w=ax,A=_C(),y=w.focusedElem,o=w.selectionRange,A!==y&&y&&y.ownerDocument&&xC(y.ownerDocument.documentElement,y)){for(o!==null&&nx(y)&&(A=o.start,w=o.end,w===void 0&&(w=A),"selectionStart"in y?(y.selectionStart=A,y.selectionEnd=Math.min(w,y.value.length)):(w=(A=y.ownerDocument||document)&&A.defaultView||window,w.getSelection&&(w=w.getSelection(),a=y.textContent.length,T=Math.min(o.start,a),o=o.end===void 0?T:Math.min(o.end,a),!w.extend&&T>o&&(a=o,o=T,T=a),a=vC(y,T),s=vC(y,o),a&&s&&(w.rangeCount!==1||w.anchorNode!==a.node||w.anchorOffset!==a.offset||w.focusNode!==s.node||w.focusOffset!==s.offset)&&(A=A.createRange(),A.setStart(a.node,a.offset),w.removeAllRanges(),T>o?(w.addRange(A),w.extend(s.node,s.offset)):(A.setEnd(s.node,s.offset),w.addRange(A)))))),A=[],w=y;w=w.parentNode;)w.nodeType===1&&A.push({element:w,left:w.scrollLeft,top:w.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<A.length;y++)w=A[y],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}Vp=!!ox,ax=ox=null,n.current=t,Oe=i;do try{for(y=n;Oe!==null;){var C=Oe.flags;if(C&36&&uU(y,Oe.alternate,Oe),C&128){A=void 0;var B=Oe.ref;if(B!==null){var I=Oe.stateNode;switch(Oe.tag){case 5:A=I;break;default:A=I}typeof B=="function"?B(A):B.current=A}}Oe=Oe.nextEffect}}catch(k){if(Oe===null)throw Error(_e(330));wo(Oe,k),Oe=Oe.nextEffect}while(Oe!==null);Oe=null,qk(),tt=r}else n.current=t;if(vo)vo=!1,Rf=n,Lf=e;else for(Oe=i;Oe!==null;)e=Oe.nextEffect,Oe.nextEffect=null,Oe.flags&8&&(C=Oe,C.sibling=null,C.stateNode=null),Oe=e;if(i=n.pendingLanes,i===0&&(Ur=null),i===1?n===Zx?Pf++:(Pf=0,Zx=n):Pf=0,t=t.stateNode,Aa&&typeof Aa.onCommitFiberRoot=="function")try{Aa.onCommitFiberRoot(dx,t,void 0,(t.current.flags&64)==64)}catch{}if(Hi(n,Qn()),wm)throw wm=!1,n=Qx,Qx=null,n;return(tt&8)!=0||Fr(),null}function gU(){for(;Oe!==null;){var n=Oe.alternate;Em||If===null||((Oe.flags&8)!=0?GT(Oe,If)&&(Em=!0):Oe.tag===13&&cU(n,Oe)&&GT(Oe,If)&&(Em=!0));var e=Oe.flags;(e&256)!=0&&lU(n,Oe),(e&512)==0||vo||(vo=!0,gf(97,function(){return Mo(),null})),Oe=Oe.nextEffect}}function Mo(){if(Lf!==90){var n=97<Lf?97:Lf;return Lf=90,Sa(n,vU)}return!1}function yU(n,e){Yx.push(e,n),vo||(vo=!0,gf(97,function(){return Mo(),null}))}function Yb(n,e){qx.push(e,n),vo||(vo=!0,gf(97,function(){return Mo(),null}))}function vU(){if(Rf===null)return!1;var n=Rf;if(Rf=null,(tt&48)!=0)throw Error(_e(331));var e=tt;tt|=32;var t=qx;qx=[];for(var i=0;i<t.length;i+=2){var r=t[i],s=t[i+1],o=r.destroy;if(r.destroy=void 0,typeof o=="function")try{o()}catch(l){if(s===null)throw Error(_e(330));wo(s,l)}}for(t=Yx,Yx=[],i=0;i<t.length;i+=2){r=t[i],s=t[i+1];try{var a=r.create;r.destroy=a()}catch(l){if(s===null)throw Error(_e(330));wo(s,l)}}for(a=n.current.firstEffect;a!==null;)n=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=n;return tt=e,Fr(),!0}function qb(n,e,t){e=kx(t,e),e=Ib(n,e,1),go(n,e),e=Ti(),n=Tm(n,1),n!==null&&(zp(n,1,e),Hi(n,e))}function wo(n,e){if(n.tag===3)qb(n,n,e);else for(var t=n.return;t!==null;){if(t.tag===3){qb(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ur===null||!Ur.has(i))){n=kx(e,n);var r=Db(t,n,1);if(go(t,r),r=Ti(),t=Tm(t,1),t!==null)zp(t,1,r),Hi(t,r);else if(typeof i.componentDidCatch=="function"&&(Ur===null||!Ur.has(i)))try{i.componentDidCatch(e,n)}catch{}break}}t=t.return}}function xU(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Ti(),n.pingedLanes|=n.suspendedLanes&t,ii===n&&(qn&t)===t&&(zn===4||zn===3&&(qn&62914560)===qn&&500>Qn()-Xx?Au(n,0):Jx|=t),Hi(n,e)}function _U(n,e){var t=n.stateNode;t!==null&&t.delete(e),e=0,e===0&&(e=n.mode,(e&2)==0?e=1:(e&4)==0?e=pu()===99?1:2:(vs===0&&(vs=xu),e=ru(62914560&~vs),e===0&&(e=4194304))),t=Ti(),n=Tm(n,e),n!==null&&(zp(n,e,t),Hi(n,t))}var Zb;Zb=function(n,e,t){var i=e.lanes;if(n!==null)if(n.memoizedProps!==e.pendingProps||pi.current)fr=!0;else if((t&i)!=0)fr=(n.flags&16384)!=0;else{switch(fr=!1,e.tag){case 3:Ab(e),Ex();break;case 5:rb(e);break;case 1:mi(e.type)&&tm(e);break;case 4:wx(e,e.stateNode.containerInfo);break;case 10:i=e.memoizedProps.value;var r=e.type._context;rn(rm,r._currentValue),r._currentValue=i;break;case 13:if(e.memoizedState!==null)return(t&e.child.childLanes)!=0?Sb(n,e,t):(rn(sn,sn.current&1),e=gs(n,e,t),e!==null?e.sibling:null);rn(sn,sn.current&1);break;case 19:if(i=(t&e.childLanes)!=0,(n.flags&64)!=0){if(i)return Bb(n,e,t);e.flags|=64}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),rn(sn,sn.current),i)break;return null;case 23:case 24:return e.lanes=0,Ix(n,e,t)}return gs(n,e,t)}else fr=!1;switch(e.lanes=0,e.tag){case 2:if(i=e.type,n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,r=hu(e,Kn.current),gu(e,t),r=bx(null,e,i,n,r,t),e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,mi(i)){var s=!0;tm(e)}else s=!1;e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,_x(e);var o=i.getDerivedStateFromProps;typeof o=="function"&&am(e,i,o,n),r.updater=lm,e.stateNode=r,r._reactInternals=e,Mx(e,i,n,t),e=Fx(null,e,i,!0,s,t)}else e.tag=0,yi(null,e,r,t),e=e.child;return e;case 16:r=e.elementType;e:{switch(n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wU(r),n=cr(r,n),s){case 0:e=Dx(null,e,r,n,t);break e;case 1:e=wb(null,e,r,n,t);break e;case 11:e=vb(null,e,r,n,t);break e;case 14:e=xb(null,e,r,cr(r.type,n),i,t);break e}throw Error(_e(306,r,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cr(i,r),Dx(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cr(i,r),wb(n,e,i,r,t);case 3:if(Ab(e),i=e.updateQueue,n===null||i===null)throw Error(_e(282));if(i=e.pendingProps,r=e.memoizedState,r=r!==null?r.element:null,QC(n,e),yf(e,i,null,t),i=e.memoizedState.element,i===r)Ex(),e=gs(n,e,t);else{if(r=e.stateNode,(s=r.hydrate)&&(yo=uu(e.stateNode.containerInfo.firstChild),ms=e,s=Or=!0),s){if(n=r.mutableSourceEagerHydrationData,n!=null)for(r=0;r<n.length;r+=2)s=n[r],s._workInProgressVersionPrimary=n[r+1],vu.push(s);for(t=ib(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else yi(n,e,i,t),Ex();e=e.child}return e;case 5:return rb(e),n===null&&Sx(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,lx(i,r)?o=null:s!==null&&lx(i,s)&&(e.flags|=16),Mb(n,e),yi(n,e,o,t),e.child;case 6:return n===null&&Sx(e),null;case 13:return Sb(n,e,t);case 4:return wx(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=fm(e,null,i,t):yi(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cr(i,r),vb(n,e,i,r,t);case 7:return yi(n,e,e.pendingProps,t),e.child;case 8:return yi(n,e,e.pendingProps.children,t),e.child;case 12:return yi(n,e,e.pendingProps.children,t),e.child;case 10:e:{i=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value;var a=e.type._context;if(rn(rm,a._currentValue),a._currentValue=s,o!==null)if(a=o.value,s=ki(a,s)?0:(typeof i._calculateChangedBits=="function"?i._calculateChangedBits(a,s):1073741823)|0,s===0){if(o.children===r.children&&!pi.current){e=gs(n,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var f=l.firstContext;f!==null;){if(f.context===i&&(f.observedBits&s)!=0){a.tag===1&&(f=mo(-1,t&-t),f.tag=2,go(a,f)),a.lanes|=t,f=a.alternate,f!==null&&(f.lanes|=t),KC(a.return,t),l.lanes|=t;break}f=f.next}}else o=a.tag===10&&a.type===e.type?null:a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}yi(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps,i=s.children,gu(e,t),r=Ui(r,s.unstable_observedBits),i=i(r),e.flags|=1,yi(n,e,i,t),e.child;case 14:return r=e.type,s=cr(r,e.pendingProps),s=cr(r.type,s),xb(n,e,r,s,i,t);case 15:return _b(n,e,e.type,e.pendingProps,i,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cr(i,r),n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,mi(i)?(n=!0,tm(e)):n=!1,gu(e,t),eb(e,i,r),Mx(e,i,r,t),Fx(null,e,i,!0,n,t);case 19:return Bb(n,e,t);case 23:return Ix(n,e,t);case 24:return Ix(n,e,t)}throw Error(_e(156,e.tag))};function MU(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(n,e,t,i){return new MU(n,e,t,i)}function t_(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wU(n){if(typeof n=="function")return t_(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Bp)return 11;if(n===Lp)return 14}return 2}function Ao(n,e){var t=n.alternate;return t===null?(t=zi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function bm(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")t_(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case io:return Su(t.children,r,s,e);case vT:o=8,r|=16;break;case fv:o=8,r|=1;break;case Wc:return n=zi(12,t,e,r|8),n.elementType=Wc,n.type=Wc,n.lanes=s,n;case Jc:return n=zi(13,t,e,r),n.type=Jc,n.elementType=Jc,n.lanes=s,n;case Rp:return n=zi(19,t,e,r),n.elementType=Rp,n.lanes=s,n;case yv:return n_(t,r,s,e);case vv:return n=zi(24,t,e,r),n.elementType=vv,n.lanes=s,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case dv:o=10;break e;case hv:o=9;break e;case Bp:o=11;break e;case Lp:o=14;break e;case pv:o=16,i=null;break e;case mv:o=22;break e}throw Error(_e(130,n==null?n:typeof n,""))}return e=zi(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Su(n,e,t,i){return n=zi(7,n,i,e),n.lanes=t,n}function n_(n,e,t,i){return n=zi(23,n,i,e),n.elementType=yv,n.lanes=t,n}function i_(n,e,t){return n=zi(6,n,null,e),n.lanes=t,n}function r_(n,e,t){return e=zi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function AU(n,e,t){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Wv(0),this.expirationTimes=Wv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wv(0),this.mutableSourceEagerHydrationData=null}function SU(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:va,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function Bm(n,e,t,i){var r=e.current,s=Ti(),o=xo(r);e:if(t){t=t._reactInternals;t:{if(_a(t)!==t||t.tag!==1)throw Error(_e(170));var a=t;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(mi(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(_e(171))}if(t.tag===1){var l=t.type;if(mi(l)){t=kC(t,l,a);break e}}t=a}else t=ho;return e.context===null?e.context=t:e.pendingContext=t,e=mo(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),go(r,e),_o(r,o,s),o}function s_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function $b(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function o_(n,e){$b(n,e),(n=n.alternate)&&$b(n,e)}function EU(){return null}function a_(n,e,t){var i=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new AU(n,e,t!=null&&t.hydrate===!0),e=zi(3,null,null,e===2?7:e===1?3:0),t.current=e,e.stateNode=t,_x(e),n[cu]=t.current,CC(n.nodeType===8?n.parentNode:n),i)for(n=0;n<i.length;n++){e=i[n];var r=e._getVersion;r=r(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,r]:t.mutableSourceEagerHydrationData.push(e,r)}this._internalRoot=t}a_.prototype.render=function(n){Bm(n,this._internalRoot,null,null)};a_.prototype.unmount=function(){var n=this._internalRoot,e=n.containerInfo;Bm(null,n,null,function(){e[cu]=null})};function Ff(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function TU(n,e){if(e||(e=n?n.nodeType===9?n.documentElement:n.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var t;t=n.lastChild;)n.removeChild(t);return new a_(n,0,e?{hydrate:!0}:void 0)}function Rm(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s._internalRoot;if(typeof r=="function"){var a=r;r=function(){var f=s_(o);a.call(f)}}Bm(e,o,n,r)}else{if(s=t._reactRootContainer=TU(t,i),o=s._internalRoot,typeof r=="function"){var l=r;r=function(){var f=s_(o);l.call(f)}}Jb(function(){Bm(e,o,n,r)})}return s_(o)}HT=function(n){if(n.tag===13){var e=Ti();_o(n,4,e),o_(n,4)}};kv=function(n){if(n.tag===13){var e=Ti();_o(n,67108864,e),o_(n,67108864)}};zT=function(n){if(n.tag===13){var e=Ti(),t=xo(n);_o(n,t,e),o_(n,t)}};VT=function(n,e){return e()};Lv=function(n,e,t){switch(e){case"input":if(wv(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=$p(i);if(!r)throw Error(_e(90));MT(i),wv(i,r)}}}break;case"textarea":TT(n,t);break;case"select":e=t.value,e!=null&&$l(n,!!t.multiple,e,!1)}};Pv=Wb;FT=function(n,e,t,i,r){var s=tt;tt|=4;try{return Sa(98,n.bind(null,e,t,i,r))}finally{tt=s,tt===0&&(Mu(),Fr())}};Iv=function(){(tt&49)==0&&(dU(),Mo())};NT=function(n,e){var t=tt;tt|=2;try{return n(e)}finally{tt=t,tt===0&&(Mu(),Fr())}};function eB(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(e))throw Error(_e(200));return SU(n,e,null,t)}var CU={Events:[mf,fu,$p,IT,DT,Mo,{current:!1}]},Nf={findFiberByHostInstance:Ma,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},bU={bundleType:Nf.bundleType,version:Nf.version,rendererPackageName:Nf.rendererPackageName,rendererConfig:Nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ya.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=UT(n),n===null?null:n.stateNode},findFiberByHostInstance:Nf.findFiberByHostInstance||EU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lm.isDisabled&&Lm.supportsFiber)try{dx=Lm.inject(bU),Aa=Lm}catch{}}Oi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CU;Oi.createPortal=eB;Oi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(_e(188)):Error(_e(268,Object.keys(n)));return n=UT(e),n=n===null?null:n.stateNode,n};Oi.flushSync=function(n,e){var t=tt;if((t&48)!=0)return n(e);tt|=1;try{if(n)return Sa(99,n.bind(null,e))}finally{tt=t,Fr()}};Oi.hydrate=function(n,e,t){if(!Ff(e))throw Error(_e(200));return Rm(null,n,e,!0,t)};Oi.render=function(n,e,t){if(!Ff(e))throw Error(_e(200));return Rm(null,n,e,!1,t)};Oi.unmountComponentAtNode=function(n){if(!Ff(n))throw Error(_e(40));return n._reactRootContainer?(Jb(function(){Rm(null,null,n,!1,function(){n._reactRootContainer=null,n[cu]=null})}),!0):!1};Oi.unstable_batchedUpdates=Wb;Oi.unstable_createPortal=function(n,e){return eB(n,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Oi.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Ff(t))throw Error(_e(200));if(n==null||n._reactInternals===void 0)throw Error(_e(38));return Rm(n,e,t,!1,i)};Oi.version="17.0.2";function tB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tB)}catch(n){console.error(n)}}tB(),DO.exports=Oi;function BU(n){let e;const t=new Set,i=(f,h)=>{const m=typeof f=="function"?f(e):f;if(m!==e){const d=e;e=h?m:Object.assign({},e,m),t.forEach(p=>p(e,d))}},r=()=>e,s=(f,h=r,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=h(e);function p(){const x=h(e);if(!m(d,x)){const _=d;f(d=x,_)}}return t.add(p),()=>t.delete(p)},l={setState:i,getState:r,subscribe:(f,h,m)=>h||m?s(f,h,m):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,l),l}const RU=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),nB=RU?re.exports.useEffect:re.exports.useLayoutEffect;function LU(n){const e=typeof n=="function"?BU(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=re.exports.useReducer(M=>M+1,0),o=e.getState(),a=re.exports.useRef(o),l=re.exports.useRef(i),f=re.exports.useRef(r),h=re.exports.useRef(!1),m=re.exports.useRef();m.current===void 0&&(m.current=i(o));let d,p=!1;(a.current!==o||l.current!==i||f.current!==r||h.current)&&(d=i(o),p=!r(m.current,d)),nB(()=>{p&&(m.current=d),a.current=o,l.current=i,f.current=r,h.current=!1});const x=re.exports.useRef(o);nB(()=>{const M=()=>{try{const y=e.getState(),A=l.current(y);f.current(m.current,A)||(a.current=y,m.current=A,s())}catch{h.current=!0,s()}},v=e.subscribe(M);return e.getState()!==x.current&&M(),v},[]);const _=p?d:m.current;return re.exports.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var iB={exports:{}},rB={exports:{}};/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){n.exports=function(t){var i={},r=tv,s=re.exports,o=Yl.exports;function a(u){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+u,g=1;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=60103,h=60106,m=60107,d=60108,p=60114,x=60109,_=60110,M=60112,v=60113,y=60120,A=60115,w=60116,T=60121,C=60129,B=60130,I=60131;if(typeof Symbol=="function"&&Symbol.for){var k=Symbol.for;f=k("react.element"),h=k("react.portal"),m=k("react.fragment"),d=k("react.strict_mode"),p=k("react.profiler"),x=k("react.provider"),_=k("react.context"),M=k("react.forward_ref"),v=k("react.suspense"),y=k("react.suspense_list"),A=k("react.memo"),w=k("react.lazy"),T=k("react.block"),k("react.scope"),C=k("react.debug_trace_mode"),B=k("react.offscreen"),I=k("react.legacy_hidden")}var G=typeof Symbol=="function"&&Symbol.iterator;function O(u){return u===null||typeof u!="object"?null:(u=G&&u[G]||u["@@iterator"],typeof u=="function"?u:null)}function R(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case m:return"Fragment";case h:return"Portal";case p:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case y:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case _:return(u.displayName||"Context")+".Consumer";case x:return(u._context.displayName||"Context")+".Provider";case M:var c=u.render;return c=c.displayName||c.name||"",u.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case A:return R(u.type);case T:return R(u._render);case w:c=u._payload,u=u._init;try{return R(u(c))}catch{}}return null}function L(u){var c=u,g=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,(c.flags&1026)!=0&&(g=c.return),u=c.return;while(u)}return c.tag===3?g:null}function W(u){if(L(u)!==u)throw Error(a(188))}function j(u){var c=u.alternate;if(!c){if(c=L(u),c===null)throw Error(a(188));return c!==u?null:u}for(var g=u,S=c;;){var E=g.return;if(E===null)break;var b=E.alternate;if(b===null){if(S=E.return,S!==null){g=S;continue}break}if(E.child===b.child){for(b=E.child;b;){if(b===g)return W(E),u;if(b===S)return W(E),c;b=b.sibling}throw Error(a(188))}if(g.return!==S.return)g=E,S=b;else{for(var N=!1,V=E.child;V;){if(V===g){N=!0,g=E,S=b;break}if(V===S){N=!0,S=E,g=b;break}V=V.sibling}if(!N){for(V=b.child;V;){if(V===g){N=!0,g=b,S=E;break}if(V===S){N=!0,S=b,g=E;break}V=V.sibling}if(!N)throw Error(a(189))}}if(g.alternate!==S)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?u:c}function J(u){if(u=j(u),!u)return null;for(var c=u;;){if(c.tag===5||c.tag===6)return c;if(c.child)c.child.return=c,c=c.child;else{if(c===u)break;for(;!c.sibling;){if(!c.return||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}}return null}function K(u){if(u=j(u),!u)return null;for(var c=u;;){if(c.tag===5||c.tag===6)return c;if(c.child&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===u)break;for(;!c.sibling;){if(!c.return||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}}return null}function de(u,c){for(var g=u.alternate;c!==null;){if(c===u||c===g)return!0;c=c.return}return!1}var we=t.getPublicInstance,$=t.getRootHostContext,H=t.getChildHostContext,q=t.prepareForCommit,ee=t.resetAfterCommit,ce=t.createInstance,Ie=t.appendInitialChild,ae=t.finalizeInitialChildren,Ue=t.prepareUpdate,Be=t.shouldSetTextContent,Ae=t.createTextInstance,De=t.scheduleTimeout,nt=t.cancelTimeout,oe=t.noTimeout,fe=t.isPrimaryRenderer,pe=t.supportsMutation,Re=t.supportsPersistence,ve=t.supportsHydration,Ke=t.getInstanceFromNode,Qe=t.makeOpaqueHydratingObject,Ze=t.makeClientId,Ct=t.beforeActiveInstanceBlur,U=t.afterActiveInstanceBlur,D=t.preparePortalMount,le=t.supportsTestSelectors,me=t.findFiberRoot,Se=t.getBoundingRect,he=t.getTextContent,Ve=t.isHiddenSubtree,He=t.matchAccessibilityRole,Me=t.setFocusIfFocusable,z=t.setupIntersectionObserver,xe=t.appendChild,ge=t.appendChildToContainer,Ye=t.commitTextUpdate,ke=t.commitMount,at=t.commitUpdate,Ce=t.insertBefore,it=t.insertInContainerBefore,Mt=t.removeChild,pt=t.removeChildFromContainer,gn=t.resetTextContent,En=t.hideInstance,Zn=t.hideTextInstance,cd=t.unhideInstance,fd=t.unhideTextInstance,Du=t.clearContainer,ka=t.cloneInstance,dd=t.createContainerChildSet,Ua=t.appendChildToContainerChildSet,hd=t.finalizeContainerChildren,pd=t.replaceContainerChildren,md=t.cloneHiddenInstance,gd=t.cloneHiddenTextInstance,F=t.canHydrateInstance,Y=t.canHydrateTextInstance,te=t.isSuspenseInstancePending,Z=t.isSuspenseInstanceFallback,ue=t.getNextHydratableSibling,qe=t.getFirstHydratableChild,rt=t.hydrateInstance,ut=t.hydrateTextInstance,$e=t.getNextHydratableInstanceAfterSuspenseInstance,mt=t.commitHydratedContainer,ct=t.commitHydratedSuspenseInstance,dt;function It(u){if(dt===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);dt=c&&c[1]||""}return`
`+dt+u}var qi=!1;function Zi(u,c){if(!u||qi)return"";qi=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ne){var S=ne}Reflect.construct(u,[],c)}else{try{c.call()}catch(ne){S=ne}u.call(c.prototype)}else{try{throw Error()}catch(ne){S=ne}u()}}catch(ne){if(ne&&S&&typeof ne.stack=="string"){for(var E=ne.stack.split(`
`),b=S.stack.split(`
`),N=E.length-1,V=b.length-1;1<=N&&0<=V&&E[N]!==b[V];)V--;for(;1<=N&&0<=V;N--,V--)if(E[N]!==b[V]){if(N!==1||V!==1)do if(N--,V--,0>V||E[N]!==b[V])return`
`+E[N].replace(" at new "," at ");while(1<=N&&0<=V);break}}}finally{qi=!1,Error.prepareStackTrace=g}return(u=u?u.displayName||u.name:"")?It(u):""}var vt=[],Pn=-1;function Dt(u){return{current:u}}function gt(u){0>Pn||(u.current=vt[Pn],vt[Pn]=null,Pn--)}function Ft(u,c){Pn++,vt[Pn]=u.current,u.current=c}var yn={},kt=Dt(yn),bt=Dt(!1),vi=yn;function Tn(u,c){var g=u.type.contextTypes;if(!g)return yn;var S=u.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===c)return S.__reactInternalMemoizedMaskedChildContext;var E={},b;for(b in g)E[b]=c[b];return S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=c,u.__reactInternalMemoizedMaskedChildContext=E),E}function ri(u){return u=u.childContextTypes,u!=null}function yd(){gt(bt),gt(kt)}function vM(u,c,g){if(kt.current!==yn)throw Error(a(168));Ft(kt,c),Ft(bt,g)}function xM(u,c,g){var S=u.stateNode;if(u=c.childContextTypes,typeof S.getChildContext!="function")return g;S=S.getChildContext();for(var E in S)if(!(E in u))throw Error(a(108,R(c)||"Unknown",E));return r({},g,S)}function vd(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||yn,vi=kt.current,Ft(kt,u),Ft(bt,bt.current),!0}function _M(u,c,g){var S=u.stateNode;if(!S)throw Error(a(169));g?(u=xM(u,c,vi),S.__reactInternalMemoizedMergedChildContext=u,gt(bt),gt(kt),Ft(kt,u)):gt(bt),Ft(bt,g)}var sg=null,Po=null,hL=o.unstable_now;hL();var xd=0,Ut=8;function Io(u){if((1&u)!=0)return Ut=15,1;if((2&u)!=0)return Ut=14,2;if((4&u)!=0)return Ut=13,4;var c=24&u;return c!==0?(Ut=12,c):(u&32)!=0?(Ut=11,32):(c=192&u,c!==0?(Ut=10,c):(u&256)!=0?(Ut=9,256):(c=3584&u,c!==0?(Ut=8,c):(u&4096)!=0?(Ut=7,4096):(c=4186112&u,c!==0?(Ut=6,c):(c=62914560&u,c!==0?(Ut=5,c):u&67108864?(Ut=4,67108864):(u&134217728)!=0?(Ut=3,134217728):(c=805306368&u,c!==0?(Ut=2,c):(1073741824&u)!=0?(Ut=1,1073741824):(Ut=8,u))))))}function pL(u){switch(u){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function mL(u){switch(u){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,u))}}function Fu(u,c){var g=u.pendingLanes;if(g===0)return Ut=0;var S=0,E=0,b=u.expiredLanes,N=u.suspendedLanes,V=u.pingedLanes;if(b!==0)S=b,E=Ut=15;else if(b=g&134217727,b!==0){var ne=b&~N;ne!==0?(S=Io(ne),E=Ut):(V&=b,V!==0&&(S=Io(V),E=Ut))}else b=g&~N,b!==0?(S=Io(b),E=Ut):V!==0&&(S=Io(V),E=Ut);if(S===0)return 0;if(S=31-Ss(S),S=g&((0>S?0:1<<S)<<1)-1,c!==0&&c!==S&&(c&N)==0){if(Io(c),E<=Ut)return c;Ut=E}if(c=u.entangledLanes,c!==0)for(u=u.entanglements,c&=S;0<c;)g=31-Ss(c),E=1<<g,S|=u[g],c&=~E;return S}function MM(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function _d(u,c){switch(u){case 15:return 1;case 14:return 2;case 12:return u=Ga(24&~c),u===0?_d(10,c):u;case 10:return u=Ga(192&~c),u===0?_d(8,c):u;case 8:return u=Ga(3584&~c),u===0&&(u=Ga(4186112&~c),u===0&&(u=512)),u;case 2:return c=Ga(805306368&~c),c===0&&(c=268435456),c}throw Error(a(358,u))}function Ga(u){return u&-u}function og(u){for(var c=[],g=0;31>g;g++)c.push(u);return c}function Md(u,c,g){u.pendingLanes|=c;var S=c-1;u.suspendedLanes&=S,u.pingedLanes&=S,u=u.eventTimes,c=31-Ss(c),u[c]=g}var Ss=Math.clz32?Math.clz32:vL,gL=Math.log,yL=Math.LN2;function vL(u){return u===0?32:31-(gL(u)/yL|0)|0}var xL=o.unstable_runWithPriority,ag=o.unstable_scheduleCallback,lg=o.unstable_cancelCallback,_L=o.unstable_shouldYield,wM=o.unstable_requestPaint,ug=o.unstable_now,ML=o.unstable_getCurrentPriorityLevel,wd=o.unstable_ImmediatePriority,AM=o.unstable_UserBlockingPriority,SM=o.unstable_NormalPriority,EM=o.unstable_LowPriority,TM=o.unstable_IdlePriority,cg={},wL=wM!==void 0?wM:function(){},Jr=null,Ad=null,fg=!1,CM=ug(),In=1e4>CM?ug:function(){return ug()-CM};function Ha(){switch(ML()){case wd:return 99;case AM:return 98;case SM:return 97;case EM:return 96;case TM:return 95;default:throw Error(a(332))}}function bM(u){switch(u){case 99:return wd;case 98:return AM;case 97:return SM;case 96:return EM;case 95:return TM;default:throw Error(a(332))}}function jr(u,c){return u=bM(u),xL(u,c)}function Nu(u,c,g){return u=bM(u),ag(u,c,g)}function Ci(){if(Ad!==null){var u=Ad;Ad=null,lg(u)}BM()}function BM(){if(!fg&&Jr!==null){fg=!0;var u=0;try{var c=Jr;jr(99,function(){for(;u<c.length;u++){var g=c[u];do g=g(!0);while(g!==null)}}),Jr=null}catch(g){throw Jr!==null&&(Jr=Jr.slice(u+1)),ag(wd,Ci),g}finally{fg=!1}}}var AL=l.ReactCurrentBatchConfig;function SL(u,c){return u===c&&(u!==0||1/u==1/c)||u!==u&&c!==c}var bi=typeof Object.is=="function"?Object.is:SL,EL=Object.prototype.hasOwnProperty;function Sd(u,c){if(bi(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var g=Object.keys(u),S=Object.keys(c);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++)if(!EL.call(c,g[S])||!bi(u[g[S]],c[g[S]]))return!1;return!0}function TL(u){switch(u.tag){case 5:return It(u.type);case 16:return It("Lazy");case 13:return It("Suspense");case 19:return It("SuspenseList");case 0:case 2:case 15:return u=Zi(u.type,!1),u;case 11:return u=Zi(u.type.render,!1),u;case 22:return u=Zi(u.type._render,!1),u;case 1:return u=Zi(u.type,!0),u;default:return""}}function $i(u,c){if(u&&u.defaultProps){c=r({},c),u=u.defaultProps;for(var g in u)c[g]===void 0&&(c[g]=u[g]);return c}return c}var Ed=Dt(null),Td=null,za=null,Cd=null;function dg(){Cd=za=Td=null}function RM(u,c){u=u.type._context,fe?(Ft(Ed,u._currentValue),u._currentValue=c):(Ft(Ed,u._currentValue2),u._currentValue2=c)}function hg(u){var c=Ed.current;gt(Ed),u=u.type._context,fe?u._currentValue=c:u._currentValue2=c}function LM(u,c){for(;u!==null;){var g=u.alternate;if((u.childLanes&c)===c){if(g===null||(g.childLanes&c)===c)break;g.childLanes|=c}else u.childLanes|=c,g!==null&&(g.childLanes|=c);u=u.return}}function Va(u,c){Td=u,Cd=za=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&c)!=0&&(er=!0),u.firstContext=null)}function Bi(u,c){if(Cd!==u&&c!==!1&&c!==0)if((typeof c!="number"||c===1073741823)&&(Cd=u,c=1073741823),c={context:u,observedBits:c,next:null},za===null){if(Td===null)throw Error(a(308));za=c,Td.dependencies={lanes:0,firstContext:c,responders:null}}else za=za.next=c;return fe?u._currentValue:u._currentValue2}var Es=!1;function pg(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function PM(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Ts(u,c){return{eventTime:u,lane:c,tag:0,payload:null,callback:null,next:null}}function Cs(u,c){if(u=u.updateQueue,u!==null){u=u.shared;var g=u.pending;g===null?c.next=c:(c.next=g.next,g.next=c),u.pending=c}}function IM(u,c){var g=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var E=null,b=null;if(g=g.firstBaseUpdate,g!==null){do{var N={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};b===null?E=b=N:b=b.next=N,g=g.next}while(g!==null);b===null?E=b=c:b=b.next=c}else E=b=c;g={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:b,shared:S.shared,effects:S.effects},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=c:u.next=c,g.lastBaseUpdate=c}function Ou(u,c,g,S){var E=u.updateQueue;Es=!1;var b=E.firstBaseUpdate,N=E.lastBaseUpdate,V=E.shared.pending;if(V!==null){E.shared.pending=null;var ne=V,Te=ne.next;ne.next=null,N===null?b=Te:N.next=Te,N=ne;var We=u.alternate;if(We!==null){We=We.updateQueue;var et=We.lastBaseUpdate;et!==N&&(et===null?We.firstBaseUpdate=Te:et.next=Te,We.lastBaseUpdate=ne)}}if(b!==null){et=E.baseState,N=0,We=Te=ne=null;do{V=b.lane;var Pe=b.eventTime;if((S&V)===V){We!==null&&(We=We.next={eventTime:Pe,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var Nt=u,Kt=b;switch(V=c,Pe=g,Kt.tag){case 1:if(Nt=Kt.payload,typeof Nt=="function"){et=Nt.call(Pe,et,V);break e}et=Nt;break e;case 3:Nt.flags=Nt.flags&-4097|64;case 0:if(Nt=Kt.payload,V=typeof Nt=="function"?Nt.call(Pe,et,V):Nt,V==null)break e;et=r({},et,V);break e;case 2:Es=!0}}b.callback!==null&&(u.flags|=32,V=E.effects,V===null?E.effects=[b]:V.push(b))}else Pe={eventTime:Pe,lane:V,tag:b.tag,payload:b.payload,callback:b.callback,next:null},We===null?(Te=We=Pe,ne=et):We=We.next=Pe,N|=V;if(b=b.next,b===null){if(V=E.shared.pending,V===null)break;b=V.next,V.next=null,E.lastBaseUpdate=V,E.shared.pending=null}}while(1);We===null&&(ne=et),E.baseState=ne,E.firstBaseUpdate=Te,E.lastBaseUpdate=We,qu|=N,u.lanes=N,u.memoizedState=et}}function DM(u,c,g){if(u=c.effects,c.effects=null,u!==null)for(c=0;c<u.length;c++){var S=u[c],E=S.callback;if(E!==null){if(S.callback=null,S=g,typeof E!="function")throw Error(a(191,E));E.call(S)}}}var FM=new s.Component().refs;function bd(u,c,g,S){c=u.memoizedState,g=g(S,c),g=g==null?c:r({},c,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var Bd={isMounted:function(u){return(u=u._reactInternals)?L(u)===u:!1},enqueueSetState:function(u,c,g){u=u._reactInternals;var S=ai(),E=Rs(u),b=Ts(S,E);b.payload=c,g!=null&&(b.callback=g),Cs(u,b),qr(u,E,S)},enqueueReplaceState:function(u,c,g){u=u._reactInternals;var S=ai(),E=Rs(u),b=Ts(S,E);b.tag=1,b.payload=c,g!=null&&(b.callback=g),Cs(u,b),qr(u,E,S)},enqueueForceUpdate:function(u,c){u=u._reactInternals;var g=ai(),S=Rs(u),E=Ts(g,S);E.tag=2,c!=null&&(E.callback=c),Cs(u,E),qr(u,S,g)}};function NM(u,c,g,S,E,b,N){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,b,N):c.prototype&&c.prototype.isPureReactComponent?!Sd(g,S)||!Sd(E,b):!0}function OM(u,c,g){var S=!1,E=yn,b=c.contextType;return typeof b=="object"&&b!==null?b=Bi(b):(E=ri(c)?vi:kt.current,S=c.contextTypes,b=(S=S!=null)?Tn(u,E):yn),c=new c(g,b),u.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Bd,u.stateNode=c,c._reactInternals=u,S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=b),c}function kM(u,c,g,S){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,S),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,S),c.state!==u&&Bd.enqueueReplaceState(c,c.state,null)}function mg(u,c,g,S){var E=u.stateNode;E.props=g,E.state=u.memoizedState,E.refs=FM,pg(u);var b=c.contextType;typeof b=="object"&&b!==null?E.context=Bi(b):(b=ri(c)?vi:kt.current,E.context=Tn(u,b)),Ou(u,g,E,S),E.state=u.memoizedState,b=c.getDerivedStateFromProps,typeof b=="function"&&(bd(u,c,b,g),E.state=u.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(c=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),c!==E.state&&Bd.enqueueReplaceState(E,E.state,null),Ou(u,g,E,S),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4)}var Rd=Array.isArray;function ku(u,c,g){if(u=g.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(a(309));var S=g.stateNode}if(!S)throw Error(a(147,u));var E=""+u;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===E?c.ref:(c=function(b){var N=S.refs;N===FM&&(N=S.refs={}),b===null?delete N[E]:N[E]=b},c._stringRef=E,c)}if(typeof u!="string")throw Error(a(284));if(!g._owner)throw Error(a(290,u))}return u}function Ld(u,c){if(u.type!=="textarea")throw Error(a(31,Object.prototype.toString.call(c)==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":c))}function UM(u){function c(Q,X){if(u){var se=Q.lastEffect;se!==null?(se.nextEffect=X,Q.lastEffect=X):Q.firstEffect=Q.lastEffect=X,X.nextEffect=null,X.flags=8}}function g(Q,X){if(!u)return null;for(;X!==null;)c(Q,X),X=X.sibling;return null}function S(Q,X){for(Q=new Map;X!==null;)X.key!==null?Q.set(X.key,X):Q.set(X.index,X),X=X.sibling;return Q}function E(Q,X){return Q=Ps(Q,X),Q.index=0,Q.sibling=null,Q}function b(Q,X,se){return Q.index=se,u?(se=Q.alternate,se!==null?(se=se.index,se<X?(Q.flags=2,X):se):(Q.flags=2,X)):X}function N(Q){return u&&Q.alternate===null&&(Q.flags=2),Q}function V(Q,X,se,Le){return X===null||X.tag!==6?(X=i0(se,Q.mode,Le),X.return=Q,X):(X=E(X,se),X.return=Q,X)}function ne(Q,X,se,Le){return X!==null&&X.elementType===se.type?(Le=E(X,se.props),Le.ref=ku(Q,X,se),Le.return=Q,Le):(Le=sh(se.type,se.key,se.props,null,Q.mode,Le),Le.ref=ku(Q,X,se),Le.return=Q,Le)}function Te(Q,X,se,Le){return X===null||X.tag!==4||X.stateNode.containerInfo!==se.containerInfo||X.stateNode.implementation!==se.implementation?(X=r0(se,Q.mode,Le),X.return=Q,X):(X=E(X,se.children||[]),X.return=Q,X)}function We(Q,X,se,Le,Je){return X===null||X.tag!==7?(X=qa(se,Q.mode,Le,Je),X.return=Q,X):(X=E(X,se),X.return=Q,X)}function et(Q,X,se){if(typeof X=="string"||typeof X=="number")return X=i0(""+X,Q.mode,se),X.return=Q,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case f:return se=sh(X.type,X.key,X.props,null,Q.mode,se),se.ref=ku(Q,null,X),se.return=Q,se;case h:return X=r0(X,Q.mode,se),X.return=Q,X}if(Rd(X)||O(X))return X=qa(X,Q.mode,se,null),X.return=Q,X;Ld(Q,X)}return null}function Pe(Q,X,se,Le){var Je=X!==null?X.key:null;if(typeof se=="string"||typeof se=="number")return Je!==null?null:V(Q,X,""+se,Le);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case f:return se.key===Je?se.type===m?We(Q,X,se.props.children,Le,Je):ne(Q,X,se,Le):null;case h:return se.key===Je?Te(Q,X,se,Le):null}if(Rd(se)||O(se))return Je!==null?null:We(Q,X,se,Le,null);Ld(Q,se)}return null}function Nt(Q,X,se,Le,Je){if(typeof Le=="string"||typeof Le=="number")return Q=Q.get(se)||null,V(X,Q,""+Le,Je);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case f:return Q=Q.get(Le.key===null?se:Le.key)||null,Le.type===m?We(X,Q,Le.props.children,Je,Le.key):ne(X,Q,Le,Je);case h:return Q=Q.get(Le.key===null?se:Le.key)||null,Te(X,Q,Le,Je)}if(Rd(Le)||O(Le))return Q=Q.get(se)||null,We(X,Q,Le,Je,null);Ld(X,Le)}return null}function Kt(Q,X,se,Le){for(var Je=null,Gt=null,st=X,Bt=X=0,pn=null;st!==null&&Bt<se.length;Bt++){st.index>Bt?(pn=st,st=null):pn=st.sibling;var wt=Pe(Q,st,se[Bt],Le);if(wt===null){st===null&&(st=pn);break}u&&st&&wt.alternate===null&&c(Q,st),X=b(wt,X,Bt),Gt===null?Je=wt:Gt.sibling=wt,Gt=wt,st=pn}if(Bt===se.length)return g(Q,st),Je;if(st===null){for(;Bt<se.length;Bt++)st=et(Q,se[Bt],Le),st!==null&&(X=b(st,X,Bt),Gt===null?Je=st:Gt.sibling=st,Gt=st);return Je}for(st=S(Q,st);Bt<se.length;Bt++)pn=Nt(st,Q,Bt,se[Bt],Le),pn!==null&&(u&&pn.alternate!==null&&st.delete(pn.key===null?Bt:pn.key),X=b(pn,X,Bt),Gt===null?Je=pn:Gt.sibling=pn,Gt=pn);return u&&st.forEach(function(Is){return c(Q,Is)}),Je}function Ii(Q,X,se,Le){var Je=O(se);if(typeof Je!="function")throw Error(a(150));if(se=Je.call(se),se==null)throw Error(a(151));for(var Gt=Je=null,st=X,Bt=X=0,pn=null,wt=se.next();st!==null&&!wt.done;Bt++,wt=se.next()){st.index>Bt?(pn=st,st=null):pn=st.sibling;var Is=Pe(Q,st,wt.value,Le);if(Is===null){st===null&&(st=pn);break}u&&st&&Is.alternate===null&&c(Q,st),X=b(Is,X,Bt),Gt===null?Je=Is:Gt.sibling=Is,Gt=Is,st=pn}if(wt.done)return g(Q,st),Je;if(st===null){for(;!wt.done;Bt++,wt=se.next())wt=et(Q,wt.value,Le),wt!==null&&(X=b(wt,X,Bt),Gt===null?Je=wt:Gt.sibling=wt,Gt=wt);return Je}for(st=S(Q,st);!wt.done;Bt++,wt=se.next())wt=Nt(st,Q,Bt,wt.value,Le),wt!==null&&(u&&wt.alternate!==null&&st.delete(wt.key===null?Bt:wt.key),X=b(wt,X,Bt),Gt===null?Je=wt:Gt.sibling=wt,Gt=wt);return u&&st.forEach(function(tP){return c(Q,tP)}),Je}return function(Q,X,se,Le){var Je=typeof se=="object"&&se!==null&&se.type===m&&se.key===null;Je&&(se=se.props.children);var Gt=typeof se=="object"&&se!==null;if(Gt)switch(se.$$typeof){case f:e:{for(Gt=se.key,Je=X;Je!==null;){if(Je.key===Gt){switch(Je.tag){case 7:if(se.type===m){g(Q,Je.sibling),X=E(Je,se.props.children),X.return=Q,Q=X;break e}break;default:if(Je.elementType===se.type){g(Q,Je.sibling),X=E(Je,se.props),X.ref=ku(Q,Je,se),X.return=Q,Q=X;break e}}g(Q,Je);break}else c(Q,Je);Je=Je.sibling}se.type===m?(X=qa(se.props.children,Q.mode,Le,se.key),X.return=Q,Q=X):(Le=sh(se.type,se.key,se.props,null,Q.mode,Le),Le.ref=ku(Q,X,se),Le.return=Q,Q=Le)}return N(Q);case h:e:{for(Je=se.key;X!==null;){if(X.key===Je)if(X.tag===4&&X.stateNode.containerInfo===se.containerInfo&&X.stateNode.implementation===se.implementation){g(Q,X.sibling),X=E(X,se.children||[]),X.return=Q,Q=X;break e}else{g(Q,X);break}else c(Q,X);X=X.sibling}X=r0(se,Q.mode,Le),X.return=Q,Q=X}return N(Q)}if(typeof se=="string"||typeof se=="number")return se=""+se,X!==null&&X.tag===6?(g(Q,X.sibling),X=E(X,se),X.return=Q,Q=X):(g(Q,X),X=i0(se,Q.mode,Le),X.return=Q,Q=X),N(Q);if(Rd(se))return Kt(Q,X,se,Le);if(O(se))return Ii(Q,X,se,Le);if(Gt&&Ld(Q,se),typeof se=="undefined"&&!Je)switch(Q.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,R(Q.type)||"Component"))}return g(Q,X)}}var Pd=UM(!0),GM=UM(!1),Uu={},Ri=Dt(Uu),Gu=Dt(Uu),Wa=Dt(Uu);function yr(u){if(u===Uu)throw Error(a(174));return u}function gg(u,c){Ft(Wa,c),Ft(Gu,u),Ft(Ri,Uu),u=$(c),gt(Ri),Ft(Ri,u)}function Ja(){gt(Ri),gt(Gu),gt(Wa)}function HM(u){var c=yr(Wa.current),g=yr(Ri.current);c=H(g,u.type,c),g!==c&&(Ft(Gu,u),Ft(Ri,c))}function yg(u){Gu.current===u&&(gt(Ri),gt(Gu))}var tn=Dt(0);function Id(u){for(var c=u;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||te(g)||Z(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&64)!=0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Xr=null,Do=null,vr=!1;function zM(u,c){var g=Pi(5,null,null,0);g.elementType="DELETED",g.type="DELETED",g.stateNode=c,g.return=u,g.flags=8,u.lastEffect!==null?(u.lastEffect.nextEffect=g,u.lastEffect=g):u.firstEffect=u.lastEffect=g}function VM(u,c){switch(u.tag){case 5:return c=F(c,u.type,u.pendingProps),c!==null?(u.stateNode=c,!0):!1;case 6:return c=Y(c,u.pendingProps),c!==null?(u.stateNode=c,!0):!1;case 13:return!1;default:return!1}}function vg(u){if(vr){var c=Do;if(c){var g=c;if(!VM(u,c)){if(c=ue(g),!c||!VM(u,c)){u.flags=u.flags&-1025|2,vr=!1,Xr=u;return}zM(Xr,g)}Xr=u,Do=qe(c)}else u.flags=u.flags&-1025|2,vr=!1,Xr=u}}function WM(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Xr=u}function Dd(u){if(!ve||u!==Xr)return!1;if(!vr)return WM(u),vr=!0,!1;var c=u.type;if(u.tag!==5||c!=="head"&&c!=="body"&&!Be(c,u.memoizedProps))for(c=Do;c;)zM(u,c),c=ue(c);if(WM(u),u.tag===13){if(!ve)throw Error(a(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));Do=$e(u)}else Do=Xr?ue(u.stateNode):null;return!0}function xg(){ve&&(Do=Xr=null,vr=!1)}var ja=[];function _g(){for(var u=0;u<ja.length;u++){var c=ja[u];fe?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}ja.length=0}var Hu=l.ReactCurrentDispatcher,Li=l.ReactCurrentBatchConfig,zu=0,on=null,Vn=null,Dn=null,Fd=!1,Vu=!1;function si(){throw Error(a(321))}function Mg(u,c){if(c===null)return!1;for(var g=0;g<c.length&&g<u.length;g++)if(!bi(u[g],c[g]))return!1;return!0}function wg(u,c,g,S,E,b){if(zu=b,on=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Hu.current=u===null||u.memoizedState===null?bL:BL,u=g(S,E),Vu){b=0;do{if(Vu=!1,!(25>b))throw Error(a(301));b+=1,Dn=Vn=null,c.updateQueue=null,Hu.current=RL,u=g(S,E)}while(Vu)}if(Hu.current=Ud,c=Vn!==null&&Vn.next!==null,zu=0,Dn=Vn=on=null,Fd=!1,c)throw Error(a(300));return u}function Fo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?on.memoizedState=Dn=u:Dn=Dn.next=u,Dn}function No(){if(Vn===null){var u=on.alternate;u=u!==null?u.memoizedState:null}else u=Vn.next;var c=Dn===null?on.memoizedState:Dn.next;if(c!==null)Dn=c,Vn=u;else{if(u===null)throw Error(a(310));Vn=u,u={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Dn===null?on.memoizedState=Dn=u:Dn=Dn.next=u}return Dn}function xr(u,c){return typeof c=="function"?c(u):c}function Wu(u){var c=No(),g=c.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=u;var S=Vn,E=S.baseQueue,b=g.pending;if(b!==null){if(E!==null){var N=E.next;E.next=b.next,b.next=N}S.baseQueue=E=b,g.pending=null}if(E!==null){E=E.next,S=S.baseState;var V=N=b=null,ne=E;do{var Te=ne.lane;if((zu&Te)===Te)V!==null&&(V=V.next={lane:0,action:ne.action,eagerReducer:ne.eagerReducer,eagerState:ne.eagerState,next:null}),S=ne.eagerReducer===u?ne.eagerState:u(S,ne.action);else{var We={lane:Te,action:ne.action,eagerReducer:ne.eagerReducer,eagerState:ne.eagerState,next:null};V===null?(N=V=We,b=S):V=V.next=We,on.lanes|=Te,qu|=Te}ne=ne.next}while(ne!==null&&ne!==E);V===null?b=S:V.next=N,bi(S,c.memoizedState)||(er=!0),c.memoizedState=S,c.baseState=b,c.baseQueue=V,g.lastRenderedState=S}return[c.memoizedState,g.dispatch]}function Ju(u){var c=No(),g=c.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=u;var S=g.dispatch,E=g.pending,b=c.memoizedState;if(E!==null){g.pending=null;var N=E=E.next;do b=u(b,N.action),N=N.next;while(N!==E);bi(b,c.memoizedState)||(er=!0),c.memoizedState=b,c.baseQueue===null&&(c.baseState=b),g.lastRenderedState=b}return[b,S]}function JM(u,c,g){var S=c._getVersion;S=S(c._source);var E=fe?c._workInProgressVersionPrimary:c._workInProgressVersionSecondary;if(E!==null?u=E===S:(u=u.mutableReadLanes,(u=(zu&u)===u)&&(fe?c._workInProgressVersionPrimary=S:c._workInProgressVersionSecondary=S,ja.push(c))),u)return g(c._source);throw ja.push(c),Error(a(350))}function jM(u,c,g,S){var E=$n;if(E===null)throw Error(a(349));var b=c._getVersion,N=b(c._source),V=Hu.current,ne=V.useState(function(){return JM(E,c,g)}),Te=ne[1],We=ne[0];ne=Dn;var et=u.memoizedState,Pe=et.refs,Nt=Pe.getSnapshot,Kt=et.source;et=et.subscribe;var Ii=on;return u.memoizedState={refs:Pe,source:c,subscribe:S},V.useEffect(function(){Pe.getSnapshot=g,Pe.setSnapshot=Te;var Q=b(c._source);if(!bi(N,Q)){Q=g(c._source),bi(We,Q)||(Te(Q),Q=Rs(Ii),E.mutableReadLanes|=Q&E.pendingLanes),Q=E.mutableReadLanes,E.entangledLanes|=Q;for(var X=E.entanglements,se=Q;0<se;){var Le=31-Ss(se),Je=1<<Le;X[Le]|=Q,se&=~Je}}},[g,c,S]),V.useEffect(function(){return S(c._source,function(){var Q=Pe.getSnapshot,X=Pe.setSnapshot;try{X(Q(c._source));var se=Rs(Ii);E.mutableReadLanes|=se&E.pendingLanes}catch(Le){X(function(){throw Le})}})},[c,S]),bi(Nt,g)&&bi(Kt,c)&&bi(et,S)||(u={pending:null,dispatch:null,lastRenderedReducer:xr,lastRenderedState:We},u.dispatch=Te=Tg.bind(null,on,u),ne.queue=u,ne.baseQueue=null,We=JM(E,c,g),ne.memoizedState=ne.baseState=We),We}function XM(u,c,g){var S=No();return jM(S,u,c,g)}function ju(u){var c=Fo();return typeof u=="function"&&(u=u()),c.memoizedState=c.baseState=u,u=c.queue={pending:null,dispatch:null,lastRenderedReducer:xr,lastRenderedState:u},u=u.dispatch=Tg.bind(null,on,u),[c.memoizedState,u]}function Nd(u,c,g,S){return u={tag:u,create:c,destroy:g,deps:S,next:null},c=on.updateQueue,c===null?(c={lastEffect:null},on.updateQueue=c,c.lastEffect=u.next=u):(g=c.lastEffect,g===null?c.lastEffect=u.next=u:(S=g.next,g.next=u,u.next=S,c.lastEffect=u)),u}function KM(u){var c=Fo();return u={current:u},c.memoizedState=u}function Od(){return No().memoizedState}function Ag(u,c,g,S){var E=Fo();on.flags|=u,E.memoizedState=Nd(1|c,g,void 0,S===void 0?null:S)}function Sg(u,c,g,S){var E=No();S=S===void 0?null:S;var b=void 0;if(Vn!==null){var N=Vn.memoizedState;if(b=N.destroy,S!==null&&Mg(S,N.deps)){Nd(c,g,b,S);return}}on.flags|=u,E.memoizedState=Nd(1|c,g,b,S)}function QM(u,c){return Ag(516,4,u,c)}function kd(u,c){return Sg(516,4,u,c)}function YM(u,c){return Sg(4,2,u,c)}function qM(u,c){if(typeof c=="function")return u=u(),c(u),function(){c(null)};if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function ZM(u,c,g){return g=g!=null?g.concat([u]):null,Sg(4,2,qM.bind(null,c,u),g)}function Eg(){}function $M(u,c){var g=No();c=c===void 0?null:c;var S=g.memoizedState;return S!==null&&c!==null&&Mg(c,S[1])?S[0]:(g.memoizedState=[u,c],u)}function ew(u,c){var g=No();c=c===void 0?null:c;var S=g.memoizedState;return S!==null&&c!==null&&Mg(c,S[1])?S[0]:(u=u(),g.memoizedState=[u,c],u)}function CL(u,c){var g=Ha();jr(98>g?98:g,function(){u(!0)}),jr(97<g?97:g,function(){var S=Li.transition;Li.transition=1;try{u(!1),c()}finally{Li.transition=S}})}function Tg(u,c,g){var S=ai(),E=Rs(u),b={lane:E,action:g,eagerReducer:null,eagerState:null,next:null},N=c.pending;if(N===null?b.next=b:(b.next=N.next,N.next=b),c.pending=b,N=u.alternate,u===on||N!==null&&N===on)Vu=Fd=!0;else{if(u.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var V=c.lastRenderedState,ne=N(V,g);if(b.eagerReducer=N,b.eagerState=ne,bi(ne,V))return}catch{}finally{}qr(u,E,S)}}var Ud={readContext:Bi,useCallback:si,useContext:si,useEffect:si,useImperativeHandle:si,useLayoutEffect:si,useMemo:si,useReducer:si,useRef:si,useState:si,useDebugValue:si,useDeferredValue:si,useTransition:si,useMutableSource:si,useOpaqueIdentifier:si,unstable_isNewReconciler:!1},bL={readContext:Bi,useCallback:function(u,c){return Fo().memoizedState=[u,c===void 0?null:c],u},useContext:Bi,useEffect:QM,useImperativeHandle:function(u,c,g){return g=g!=null?g.concat([u]):null,Ag(4,2,qM.bind(null,c,u),g)},useLayoutEffect:function(u,c){return Ag(4,2,u,c)},useMemo:function(u,c){var g=Fo();return c=c===void 0?null:c,u=u(),g.memoizedState=[u,c],u},useReducer:function(u,c,g){var S=Fo();return c=g!==void 0?g(c):c,S.memoizedState=S.baseState=c,u=S.queue={pending:null,dispatch:null,lastRenderedReducer:u,lastRenderedState:c},u=u.dispatch=Tg.bind(null,on,u),[S.memoizedState,u]},useRef:KM,useState:ju,useDebugValue:Eg,useDeferredValue:function(u){var c=ju(u),g=c[0],S=c[1];return QM(function(){var E=Li.transition;Li.transition=1;try{S(u)}finally{Li.transition=E}},[u]),g},useTransition:function(){var u=ju(!1),c=u[0];return u=CL.bind(null,u[1]),KM(u),[u,c]},useMutableSource:function(u,c,g){var S=Fo();return S.memoizedState={refs:{getSnapshot:c,setSnapshot:null},source:u,subscribe:g},jM(S,u,c,g)},useOpaqueIdentifier:function(){if(vr){var u=!1,c=Qe(function(){throw u||(u=!0,g(Ze())),Error(a(355))}),g=ju(c)[1];return(on.mode&2)==0&&(on.flags|=516,Nd(5,function(){g(Ze())},void 0,null)),c}return c=Ze(),ju(c),c},unstable_isNewReconciler:!1},BL={readContext:Bi,useCallback:$M,useContext:Bi,useEffect:kd,useImperativeHandle:ZM,useLayoutEffect:YM,useMemo:ew,useReducer:Wu,useRef:Od,useState:function(){return Wu(xr)},useDebugValue:Eg,useDeferredValue:function(u){var c=Wu(xr),g=c[0],S=c[1];return kd(function(){var E=Li.transition;Li.transition=1;try{S(u)}finally{Li.transition=E}},[u]),g},useTransition:function(){var u=Wu(xr)[0];return[Od().current,u]},useMutableSource:XM,useOpaqueIdentifier:function(){return Wu(xr)[0]},unstable_isNewReconciler:!1},RL={readContext:Bi,useCallback:$M,useContext:Bi,useEffect:kd,useImperativeHandle:ZM,useLayoutEffect:YM,useMemo:ew,useReducer:Ju,useRef:Od,useState:function(){return Ju(xr)},useDebugValue:Eg,useDeferredValue:function(u){var c=Ju(xr),g=c[0],S=c[1];return kd(function(){var E=Li.transition;Li.transition=1;try{S(u)}finally{Li.transition=E}},[u]),g},useTransition:function(){var u=Ju(xr)[0];return[Od().current,u]},useMutableSource:XM,useOpaqueIdentifier:function(){return Ju(xr)[0]},unstable_isNewReconciler:!1},LL=l.ReactCurrentOwner,er=!1;function oi(u,c,g,S){c.child=u===null?GM(c,null,g,S):Pd(c,u.child,g,S)}function tw(u,c,g,S,E){g=g.render;var b=c.ref;return Va(c,E),S=wg(u,c,g,S,b,E),u!==null&&!er?(c.updateQueue=u.updateQueue,c.flags&=-517,u.lanes&=~E,Kr(u,c,E)):(c.flags|=1,oi(u,c,S,E),c.child)}function nw(u,c,g,S,E,b){if(u===null){var N=g.type;return typeof N=="function"&&!t0(N)&&N.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(c.tag=15,c.type=N,iw(u,c,N,S,E,b)):(u=sh(g.type,null,S,c,c.mode,b),u.ref=c.ref,u.return=c,c.child=u)}return N=u.child,(E&b)==0&&(E=N.memoizedProps,g=g.compare,g=g!==null?g:Sd,g(E,S)&&u.ref===c.ref)?Kr(u,c,b):(c.flags|=1,u=Ps(N,S),u.ref=c.ref,u.return=c,c.child=u)}function iw(u,c,g,S,E,b){if(u!==null&&Sd(u.memoizedProps,S)&&u.ref===c.ref)if(er=!1,(b&E)!=0)(u.flags&16384)!=0&&(er=!0);else return c.lanes=u.lanes,Kr(u,c,b);return bg(u,c,g,S,b)}function Cg(u,c,g){var S=c.pendingProps,E=S.children,b=u!==null?u.memoizedState:null;if(S.mode==="hidden"||S.mode==="unstable-defer-without-hiding")if((c.mode&4)==0)c.memoizedState={baseLanes:0},nh(c,g);else if((g&1073741824)!=0)c.memoizedState={baseLanes:0},nh(c,b!==null?b.baseLanes:g);else return u=b!==null?b.baseLanes|g:g,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:u},nh(c,u),null;else b!==null?(S=b.baseLanes|g,c.memoizedState=null):S=g,nh(c,S);return oi(u,c,E,g),c.child}function rw(u,c){var g=c.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(c.flags|=128)}function bg(u,c,g,S,E){var b=ri(g)?vi:kt.current;return b=Tn(c,b),Va(c,E),g=wg(u,c,g,S,b,E),u!==null&&!er?(c.updateQueue=u.updateQueue,c.flags&=-517,u.lanes&=~E,Kr(u,c,E)):(c.flags|=1,oi(u,c,g,E),c.child)}function sw(u,c,g,S,E){if(ri(g)){var b=!0;vd(c)}else b=!1;if(Va(c,E),c.stateNode===null)u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),OM(c,g,S),mg(c,g,S,E),S=!0;else if(u===null){var N=c.stateNode,V=c.memoizedProps;N.props=V;var ne=N.context,Te=g.contextType;typeof Te=="object"&&Te!==null?Te=Bi(Te):(Te=ri(g)?vi:kt.current,Te=Tn(c,Te));var We=g.getDerivedStateFromProps,et=typeof We=="function"||typeof N.getSnapshotBeforeUpdate=="function";et||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(V!==S||ne!==Te)&&kM(c,N,S,Te),Es=!1;var Pe=c.memoizedState;N.state=Pe,Ou(c,S,N,E),ne=c.memoizedState,V!==S||Pe!==ne||bt.current||Es?(typeof We=="function"&&(bd(c,g,We,S),ne=c.memoizedState),(V=Es||NM(c,g,V,S,Pe,ne,Te))?(et||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(c.flags|=4)):(typeof N.componentDidMount=="function"&&(c.flags|=4),c.memoizedProps=S,c.memoizedState=ne),N.props=S,N.state=ne,N.context=Te,S=V):(typeof N.componentDidMount=="function"&&(c.flags|=4),S=!1)}else{N=c.stateNode,PM(u,c),V=c.memoizedProps,Te=c.type===c.elementType?V:$i(c.type,V),N.props=Te,et=c.pendingProps,Pe=N.context,ne=g.contextType,typeof ne=="object"&&ne!==null?ne=Bi(ne):(ne=ri(g)?vi:kt.current,ne=Tn(c,ne));var Nt=g.getDerivedStateFromProps;(We=typeof Nt=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(V!==et||Pe!==ne)&&kM(c,N,S,ne),Es=!1,Pe=c.memoizedState,N.state=Pe,Ou(c,S,N,E);var Kt=c.memoizedState;V!==et||Pe!==Kt||bt.current||Es?(typeof Nt=="function"&&(bd(c,g,Nt,S),Kt=c.memoizedState),(Te=Es||NM(c,g,Te,S,Pe,Kt,ne))?(We||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(S,Kt,ne),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(S,Kt,ne)),typeof N.componentDidUpdate=="function"&&(c.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(c.flags|=256)):(typeof N.componentDidUpdate!="function"||V===u.memoizedProps&&Pe===u.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||V===u.memoizedProps&&Pe===u.memoizedState||(c.flags|=256),c.memoizedProps=S,c.memoizedState=Kt),N.props=S,N.state=Kt,N.context=ne,S=Te):(typeof N.componentDidUpdate!="function"||V===u.memoizedProps&&Pe===u.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||V===u.memoizedProps&&Pe===u.memoizedState||(c.flags|=256),S=!1)}return Bg(u,c,g,S,b,E)}function Bg(u,c,g,S,E,b){rw(u,c);var N=(c.flags&64)!=0;if(!S&&!N)return E&&_M(c,g,!1),Kr(u,c,b);S=c.stateNode,LL.current=c;var V=N&&typeof g.getDerivedStateFromError!="function"?null:S.render();return c.flags|=1,u!==null&&N?(c.child=Pd(c,u.child,null,b),c.child=Pd(c,null,V,b)):oi(u,c,V,b),c.memoizedState=S.state,E&&_M(c,g,!0),c.child}function ow(u){var c=u.stateNode;c.pendingContext?vM(u,c.pendingContext,c.pendingContext!==c.context):c.context&&vM(u,c.context,!1),gg(u,c.containerInfo)}var Gd={dehydrated:null,retryLane:0};function aw(u,c,g){var S=c.pendingProps,E=tn.current,b=!1,N;return(N=(c.flags&64)!=0)||(N=u!==null&&u.memoizedState===null?!1:(E&2)!=0),N?(b=!0,c.flags&=-65):u!==null&&u.memoizedState===null||S.fallback===void 0||S.unstable_avoidThisFallback===!0||(E|=1),Ft(tn,E&1),u===null?(S.fallback!==void 0&&vg(c),u=S.children,E=S.fallback,b?(u=lw(c,u,E,g),c.child.memoizedState={baseLanes:g},c.memoizedState=Gd,u):typeof S.unstable_expectedLoadTime=="number"?(u=lw(c,u,E,g),c.child.memoizedState={baseLanes:g},c.memoizedState=Gd,c.lanes=33554432,u):(g=n0({mode:"visible",children:u},c.mode,g,null),g.return=c,c.child=g)):u.memoizedState!==null?b?(S=cw(u,c,S.children,S.fallback,g),b=c.child,E=u.child.memoizedState,b.memoizedState=E===null?{baseLanes:g}:{baseLanes:E.baseLanes|g},b.childLanes=u.childLanes&~g,c.memoizedState=Gd,S):(g=uw(u,c,S.children,g),c.memoizedState=null,g):b?(S=cw(u,c,S.children,S.fallback,g),b=c.child,E=u.child.memoizedState,b.memoizedState=E===null?{baseLanes:g}:{baseLanes:E.baseLanes|g},b.childLanes=u.childLanes&~g,c.memoizedState=Gd,S):(g=uw(u,c,S.children,g),c.memoizedState=null,g)}function lw(u,c,g,S){var E=u.mode,b=u.child;return c={mode:"hidden",children:c},(E&2)==0&&b!==null?(b.childLanes=0,b.pendingProps=c):b=n0(c,E,0,null),g=qa(g,E,S,null),b.return=u,g.return=u,b.sibling=g,u.child=b,g}function uw(u,c,g,S){var E=u.child;return u=E.sibling,g=Ps(E,{mode:"visible",children:g}),(c.mode&2)==0&&(g.lanes=S),g.return=c,g.sibling=null,u!==null&&(u.nextEffect=null,u.flags=8,c.firstEffect=c.lastEffect=u),c.child=g}function cw(u,c,g,S,E){var b=c.mode,N=u.child;u=N.sibling;var V={mode:"hidden",children:g};return(b&2)==0&&c.child!==N?(g=c.child,g.childLanes=0,g.pendingProps=V,N=g.lastEffect,N!==null?(c.firstEffect=g.firstEffect,c.lastEffect=N,N.nextEffect=null):c.firstEffect=c.lastEffect=null):g=Ps(N,V),u!==null?S=Ps(u,S):(S=qa(S,b,E,null),S.flags|=2),S.return=c,g.return=c,g.sibling=S,c.child=g,S}function fw(u,c){u.lanes|=c;var g=u.alternate;g!==null&&(g.lanes|=c),LM(u.return,c)}function Rg(u,c,g,S,E,b){var N=u.memoizedState;N===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:E,lastEffect:b}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=S,N.tail=g,N.tailMode=E,N.lastEffect=b)}function dw(u,c,g){var S=c.pendingProps,E=S.revealOrder,b=S.tail;if(oi(u,c,S.children,g),S=tn.current,(S&2)!=0)S=S&1|2,c.flags|=64;else{if(u!==null&&(u.flags&64)!=0)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&fw(u,g);else if(u.tag===19)fw(u,g);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}if(Ft(tn,S),(c.mode&2)==0)c.memoizedState=null;else switch(E){case"forwards":for(g=c.child,E=null;g!==null;)u=g.alternate,u!==null&&Id(u)===null&&(E=g),g=g.sibling;g=E,g===null?(E=c.child,c.child=null):(E=g.sibling,g.sibling=null),Rg(c,!1,E,g,b,c.lastEffect);break;case"backwards":for(g=null,E=c.child,c.child=null;E!==null;){if(u=E.alternate,u!==null&&Id(u)===null){c.child=E;break}u=E.sibling,E.sibling=g,g=E,E=u}Rg(c,!0,g,null,b,c.lastEffect);break;case"together":Rg(c,!1,null,null,void 0,c.lastEffect);break;default:c.memoizedState=null}return c.child}function Kr(u,c,g){if(u!==null&&(c.dependencies=u.dependencies),qu|=c.lanes,(g&c.childLanes)!=0){if(u!==null&&c.child!==u.child)throw Error(a(153));if(c.child!==null){for(u=c.child,g=Ps(u,u.pendingProps),c.child=g,g.return=c;u.sibling!==null;)u=u.sibling,g=g.sibling=Ps(u,u.pendingProps),g.return=c;g.sibling=null}return c.child}return null}function _r(u){u.flags|=4}var Xu,Ku,Hd,zd;if(pe)Xu=function(u,c){for(var g=c.child;g!==null;){if(g.tag===5||g.tag===6)Ie(u,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Ku=function(){},Hd=function(u,c,g,S,E){if(u=u.memoizedProps,u!==S){var b=c.stateNode,N=yr(Ri.current);g=Ue(b,g,u,S,E,N),(c.updateQueue=g)&&_r(c)}},zd=function(u,c,g,S){g!==S&&_r(c)};else if(Re){Xu=function(u,c,g,S){for(var E=c.child;E!==null;){if(E.tag===5){var b=E.stateNode;g&&S&&(b=md(b,E.type,E.memoizedProps,E)),Ie(u,b)}else if(E.tag===6)b=E.stateNode,g&&S&&(b=gd(b,E.memoizedProps,E)),Ie(u,b);else if(E.tag!==4){if(E.tag===13&&(E.flags&4)!=0&&(b=E.memoizedState!==null)){var N=E.child;if(N!==null&&(N.child!==null&&(N.child.return=N,Xu(u,N,!0,b)),b=N.sibling,b!==null)){b.return=E,E=b;continue}}if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var hw=function(u,c,g,S){for(var E=c.child;E!==null;){if(E.tag===5){var b=E.stateNode;g&&S&&(b=md(b,E.type,E.memoizedProps,E)),Ua(u,b)}else if(E.tag===6)b=E.stateNode,g&&S&&(b=gd(b,E.memoizedProps,E)),Ua(u,b);else if(E.tag!==4){if(E.tag===13&&(E.flags&4)!=0&&(b=E.memoizedState!==null)){var N=E.child;if(N!==null&&(N.child!==null&&(N.child.return=N,hw(u,N,!0,b)),b=N.sibling,b!==null)){b.return=E,E=b;continue}}if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Ku=function(u){var c=u.stateNode;if(u.firstEffect!==null){var g=c.containerInfo,S=dd(g);hw(S,u,!1,!1),c.pendingChildren=S,_r(u),hd(g,S)}},Hd=function(u,c,g,S,E){var b=u.stateNode,N=u.memoizedProps;if((u=c.firstEffect===null)&&N===S)c.stateNode=b;else{var V=c.stateNode,ne=yr(Ri.current),Te=null;N!==S&&(Te=Ue(V,g,N,S,E,ne)),u&&Te===null?c.stateNode=b:(b=ka(b,Te,g,N,S,c,u,V),ae(b,g,S,E,ne)&&_r(c),c.stateNode=b,u?_r(c):Xu(b,c,!1,!1))}},zd=function(u,c,g,S){g!==S?(u=yr(Wa.current),g=yr(Ri.current),c.stateNode=Ae(S,u,g,c),_r(c)):c.stateNode=u.stateNode}}else Ku=function(){},Hd=function(){},zd=function(){};function Qu(u,c){if(!vr)switch(u.tailMode){case"hidden":c=u.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function PL(u,c,g){var S=c.pendingProps;switch(c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ri(c.type)&&yd(),null;case 3:return Ja(),gt(bt),gt(kt),_g(),S=c.stateNode,S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(u===null||u.child===null)&&(Dd(c)?_r(c):S.hydrate||(c.flags|=256)),Ku(c),null;case 5:yg(c);var E=yr(Wa.current);if(g=c.type,u!==null&&c.stateNode!=null)Hd(u,c,g,S,E),u.ref!==c.ref&&(c.flags|=128);else{if(!S){if(c.stateNode===null)throw Error(a(166));return null}if(u=yr(Ri.current),Dd(c)){if(!ve)throw Error(a(175));u=rt(c.stateNode,c.type,c.memoizedProps,E,u,c),c.updateQueue=u,u!==null&&_r(c)}else{var b=ce(g,S,E,u,c);Xu(b,c,!1,!1),c.stateNode=b,ae(b,g,S,E,u)&&_r(c)}c.ref!==null&&(c.flags|=128)}return null;case 6:if(u&&c.stateNode!=null)zd(u,c,u.memoizedProps,S);else{if(typeof S!="string"&&c.stateNode===null)throw Error(a(166));if(u=yr(Wa.current),E=yr(Ri.current),Dd(c)){if(!ve)throw Error(a(176));ut(c.stateNode,c.memoizedProps,c)&&_r(c)}else c.stateNode=Ae(S,u,E,c)}return null;case 13:return gt(tn),S=c.memoizedState,(c.flags&64)!=0?(c.lanes=g,c):(S=S!==null,E=!1,u===null?c.memoizedProps.fallback!==void 0&&Dd(c):E=u.memoizedState!==null,S&&!E&&(c.mode&2)!=0&&(u===null&&c.memoizedProps.unstable_avoidThisFallback!==!0||(tn.current&1)!=0?Fn===0&&(Fn=3):((Fn===0||Fn===3)&&(Fn=4),$n===null||(qu&134217727)==0&&(Ka&134217727)==0||Qa($n,Wn))),Re&&S&&(c.flags|=4),pe&&(S||E)&&(c.flags|=4),null);case 4:return Ja(),Ku(c),u===null&&D(c.stateNode.containerInfo),null;case 10:return hg(c),null;case 17:return ri(c.type)&&yd(),null;case 19:if(gt(tn),S=c.memoizedState,S===null)return null;if(E=(c.flags&64)!=0,b=S.rendering,b===null)if(E)Qu(S,!1);else{if(Fn!==0||u!==null&&(u.flags&64)!=0)for(u=c.child;u!==null;){if(b=Id(u),b!==null){for(c.flags|=64,Qu(S,!1),u=b.updateQueue,u!==null&&(c.updateQueue=u,c.flags|=4),S.lastEffect===null&&(c.firstEffect=null),c.lastEffect=S.lastEffect,u=g,S=c.child;S!==null;)E=S,g=u,E.flags&=2,E.nextEffect=null,E.firstEffect=null,E.lastEffect=null,b=E.alternate,b===null?(E.childLanes=0,E.lanes=g,E.child=null,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=b.childLanes,E.lanes=b.lanes,E.child=b.child,E.memoizedProps=b.memoizedProps,E.memoizedState=b.memoizedState,E.updateQueue=b.updateQueue,E.type=b.type,g=b.dependencies,E.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),S=S.sibling;return Ft(tn,tn.current&1|2),c.child}u=u.sibling}S.tail!==null&&In()>jg&&(c.flags|=64,E=!0,Qu(S,!1),c.lanes=33554432)}else{if(!E)if(u=Id(b),u!==null){if(c.flags|=64,E=!0,u=u.updateQueue,u!==null&&(c.updateQueue=u,c.flags|=4),Qu(S,!0),S.tail===null&&S.tailMode==="hidden"&&!b.alternate&&!vr)return c=c.lastEffect=S.lastEffect,c!==null&&(c.nextEffect=null),null}else 2*In()-S.renderingStartTime>jg&&g!==1073741824&&(c.flags|=64,E=!0,Qu(S,!1),c.lanes=33554432);S.isBackwards?(b.sibling=c.child,c.child=b):(u=S.last,u!==null?u.sibling=b:c.child=b,S.last=b)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.lastEffect=c.lastEffect,S.renderingStartTime=In(),u.sibling=null,c=tn.current,Ft(tn,E?c&1|2:c&1),u):null;case 23:case 24:return Zg(),u!==null&&u.memoizedState!==null!=(c.memoizedState!==null)&&S.mode!=="unstable-defer-without-hiding"&&(c.flags|=4),null}throw Error(a(156,c.tag))}function IL(u){switch(u.tag){case 1:ri(u.type)&&yd();var c=u.flags;return c&4096?(u.flags=c&-4097|64,u):null;case 3:if(Ja(),gt(bt),gt(kt),_g(),c=u.flags,(c&64)!=0)throw Error(a(285));return u.flags=c&-4097|64,u;case 5:return yg(u),null;case 13:return gt(tn),c=u.flags,c&4096?(u.flags=c&-4097|64,u):null;case 19:return gt(tn),null;case 4:return Ja(),null;case 10:return hg(u),null;case 23:case 24:return Zg(),null;default:return null}}function Lg(u,c){try{var g="",S=c;do g+=TL(S),S=S.return;while(S);var E=g}catch(b){E=`
Error generating stack: `+b.message+`
`+b.stack}return{value:u,source:c,stack:E}}function Pg(u,c){try{console.error(c.value)}catch(g){setTimeout(function(){throw g})}}var DL=typeof WeakMap=="function"?WeakMap:Map;function pw(u,c,g){g=Ts(-1,g),g.tag=3,g.payload={element:null};var S=c.value;return g.callback=function(){Zd||(Zd=!0,Xg=S),Pg(u,c)},g}function mw(u,c,g){g=Ts(-1,g),g.tag=3;var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var E=c.value;g.payload=function(){return Pg(u,c),S(E)}}var b=u.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(g.callback=function(){typeof S!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this),Pg(u,c));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})}),g}var FL=typeof WeakSet=="function"?WeakSet:Set;function gw(u){var c=u.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(g){Ls(u,g)}else c.current=null}function NL(u,c){switch(c.tag){case 0:case 11:case 15:case 22:return;case 1:if(c.flags&256&&u!==null){var g=u.memoizedProps,S=u.memoizedState;u=c.stateNode,c=u.getSnapshotBeforeUpdate(c.elementType===c.type?g:$i(c.type,g),S),u.__reactInternalSnapshotBeforeUpdate=c}return;case 3:pe&&c.flags&256&&Du(c.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(a(163))}function yw(u,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var g=c=c.next;do{if((g.tag&u)===u){var S=g.destroy;g.destroy=void 0,S!==void 0&&S()}g=g.next}while(g!==c)}}function OL(u,c,g){switch(g.tag){case 0:case 11:case 15:case 22:if(c=g.updateQueue,c=c!==null?c.lastEffect:null,c!==null){u=c=c.next;do{if((u.tag&3)==3){var S=u.create;u.destroy=S()}u=u.next}while(u!==c)}if(c=g.updateQueue,c=c!==null?c.lastEffect:null,c!==null){u=c=c.next;do{var E=u;S=E.next,E=E.tag,(E&4)!=0&&(E&1)!=0&&(Dw(g,u),jL(g,u)),u=S}while(u!==c)}return;case 1:u=g.stateNode,g.flags&4&&(c===null?u.componentDidMount():(S=g.elementType===g.type?c.memoizedProps:$i(g.type,c.memoizedProps),u.componentDidUpdate(S,c.memoizedState,u.__reactInternalSnapshotBeforeUpdate))),c=g.updateQueue,c!==null&&DM(g,c,u);return;case 3:if(c=g.updateQueue,c!==null){if(u=null,g.child!==null)switch(g.child.tag){case 5:u=we(g.child.stateNode);break;case 1:u=g.child.stateNode}DM(g,c,u)}return;case 5:u=g.stateNode,c===null&&g.flags&4&&ke(u,g.type,g.memoizedProps,g);return;case 6:return;case 4:return;case 12:return;case 13:ve&&g.memoizedState===null&&(g=g.alternate,g!==null&&(g=g.memoizedState,g!==null&&(g=g.dehydrated,g!==null&&ct(g))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function vw(u,c){if(pe)for(var g=u;;){if(g.tag===5){var S=g.stateNode;c?En(S):cd(g.stateNode,g.memoizedProps)}else if(g.tag===6)S=g.stateNode,c?Zn(S):fd(S,g.memoizedProps);else if((g.tag!==23&&g.tag!==24||g.memoizedState===null||g===u)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}}function xw(u,c){if(Po&&typeof Po.onCommitFiberUnmount=="function")try{Po.onCommitFiberUnmount(sg,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:case 22:if(u=c.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var g=u=u.next;do{var S=g,E=S.destroy;if(S=S.tag,E!==void 0)if((S&4)!=0)Dw(c,g);else{S=c;try{E()}catch(b){Ls(S,b)}}g=g.next}while(g!==u)}break;case 1:if(gw(c),u=c.stateNode,typeof u.componentWillUnmount=="function")try{u.props=c.memoizedProps,u.state=c.memoizedState,u.componentWillUnmount()}catch(b){Ls(c,b)}break;case 5:gw(c);break;case 4:pe?Sw(u,c):Re&&Re&&(c=c.stateNode.containerInfo,u=dd(c),pd(c,u))}}function _w(u,c){for(var g=c;;)if(xw(u,g),g.child===null||pe&&g.tag===4){if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else g.child.return=g,g=g.child}function Mw(u){u.alternate=null,u.child=null,u.dependencies=null,u.firstEffect=null,u.lastEffect=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.return=null,u.updateQueue=null}function ww(u){return u.tag===5||u.tag===3||u.tag===4}function Aw(u){if(pe){e:{for(var c=u.return;c!==null;){if(ww(c))break e;c=c.return}throw Error(a(160))}var g=c;switch(c=g.stateNode,g.tag){case 5:var S=!1;break;case 3:c=c.containerInfo,S=!0;break;case 4:c=c.containerInfo,S=!0;break;default:throw Error(a(161))}g.flags&16&&(gn(c),g.flags&=-17);e:t:for(g=u;;){for(;g.sibling===null;){if(g.return===null||ww(g.return)){g=null;break e}g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue t;g.child.return=g,g=g.child}if(!(g.flags&2)){g=g.stateNode;break e}}S?Ig(u,g,c):Dg(u,g,c)}}function Ig(u,c,g){var S=u.tag,E=S===5||S===6;if(E)u=E?u.stateNode:u.stateNode.instance,c?it(g,u,c):ge(g,u);else if(S!==4&&(u=u.child,u!==null))for(Ig(u,c,g),u=u.sibling;u!==null;)Ig(u,c,g),u=u.sibling}function Dg(u,c,g){var S=u.tag,E=S===5||S===6;if(E)u=E?u.stateNode:u.stateNode.instance,c?Ce(g,u,c):xe(g,u);else if(S!==4&&(u=u.child,u!==null))for(Dg(u,c,g),u=u.sibling;u!==null;)Dg(u,c,g),u=u.sibling}function Sw(u,c){for(var g=c,S=!1,E,b;;){if(!S){S=g.return;e:for(;;){if(S===null)throw Error(a(160));switch(E=S.stateNode,S.tag){case 5:b=!1;break e;case 3:E=E.containerInfo,b=!0;break e;case 4:E=E.containerInfo,b=!0;break e}S=S.return}S=!0}if(g.tag===5||g.tag===6)_w(u,g),b?pt(E,g.stateNode):Mt(E,g.stateNode);else if(g.tag===4){if(g.child!==null){E=g.stateNode.containerInfo,b=!0,g.child.return=g,g=g.child;continue}}else if(xw(u,g),g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return,g.tag===4&&(S=!1)}g.sibling.return=g.return,g=g.sibling}}function Fg(u,c){if(pe){switch(c.tag){case 0:case 11:case 14:case 15:case 22:yw(3,c);return;case 1:return;case 5:var g=c.stateNode;if(g!=null){var S=c.memoizedProps;u=u!==null?u.memoizedProps:S;var E=c.type,b=c.updateQueue;c.updateQueue=null,b!==null&&at(g,b,E,u,S,c)}return;case 6:if(c.stateNode===null)throw Error(a(162));g=c.memoizedProps,Ye(c.stateNode,u!==null?u.memoizedProps:g,g);return;case 3:ve&&(c=c.stateNode,c.hydrate&&(c.hydrate=!1,mt(c.containerInfo)));return;case 12:return;case 13:Ew(c),Vd(c);return;case 19:Vd(c);return;case 17:return;case 23:case 24:vw(c,c.memoizedState!==null);return}throw Error(a(163))}switch(c.tag){case 0:case 11:case 14:case 15:case 22:yw(3,c);return;case 12:return;case 13:Ew(c),Vd(c);return;case 19:Vd(c);return;case 3:ve&&(g=c.stateNode,g.hydrate&&(g.hydrate=!1,mt(g.containerInfo)));break;case 23:case 24:return}e:if(Re){switch(c.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:c=c.stateNode,pd(c.containerInfo,c.pendingChildren);break e}throw Error(a(163))}}function Ew(u){u.memoizedState!==null&&(Jg=In(),pe&&vw(u.child,!0))}function Vd(u){var c=u.updateQueue;if(c!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new FL),c.forEach(function(S){var E=QL.bind(null,u,S);g.has(S)||(g.add(S),S.then(E,E))})}}function kL(u,c){return u!==null&&(u=u.memoizedState,u===null||u.dehydrated!==null)?(c=c.memoizedState,c!==null&&c.dehydrated===null):!1}var Wd=0,Jd=1,jd=2,Xd=3,Kd=4;if(typeof Symbol=="function"&&Symbol.for){var Yu=Symbol.for;Wd=Yu("selector.component"),Jd=Yu("selector.has_pseudo_class"),jd=Yu("selector.role"),Xd=Yu("selector.test_id"),Kd=Yu("selector.text")}function Ng(u){var c=Ke(u);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(a(364));return c}if(u=me(u),u===null)throw Error(a(362));return u.stateNode.current}function Og(u,c){switch(c.$$typeof){case Wd:if(u.type===c.value)return!0;break;case Jd:e:{c=c.value,u=[u,0];for(var g=0;g<u.length;){var S=u[g++],E=u[g++],b=c[E];if(S.tag!==5||!Ve(S)){for(;b!=null&&Og(S,b);)E++,b=c[E];if(E===c.length){c=!0;break e}else for(S=S.child;S!==null;)u.push(S,E),S=S.sibling}}c=!1}return c;case jd:if(u.tag===5&&He(u.stateNode,c.value))return!0;break;case Kd:if((u.tag===5||u.tag===6)&&(u=he(u),u!==null&&0<=u.indexOf(c.value)))return!0;break;case Xd:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(a(365,c))}return!1}function kg(u){switch(u.$$typeof){case Wd:return"<"+(R(u.value)||"Unknown")+">";case Jd:return":has("+(kg(u)||"")+")";case jd:return'[role="'+u.value+'"]';case Kd:return'"'+u.value+'"';case Xd:return'[data-testname="'+u.value+'"]';default:throw Error(a(365,u))}}function Tw(u,c){var g=[];u=[u,0];for(var S=0;S<u.length;){var E=u[S++],b=u[S++],N=c[b];if(E.tag!==5||!Ve(E)){for(;N!=null&&Og(E,N);)b++,N=c[b];if(b===c.length)g.push(E);else for(E=E.child;E!==null;)u.push(E,b),E=E.sibling}}return g}function Ug(u,c){if(!le)throw Error(a(363));u=Ng(u),u=Tw(u,c),c=[],u=Array.from(u);for(var g=0;g<u.length;){var S=u[g++];if(S.tag===5)Ve(S)||c.push(S.stateNode);else for(S=S.child;S!==null;)u.push(S),S=S.sibling}return c}var Qd=null;function UL(u){if(Qd===null)try{var c=("require"+Math.random()).slice(0,7);Qd=(n&&n[c]).call(n,"timers").setImmediate}catch{Qd=function(S){var E=new MessageChannel;E.port1.onmessage=S,E.port2.postMessage(void 0)}}return Qd(u)}var GL=Math.ceil,Yd=l.ReactCurrentDispatcher,Gg=l.ReactCurrentOwner,Hg=l.IsSomeRendererActing,Xe=0,$n=null,vn=null,Wn=0,Oo=0,zg=Dt(0),Fn=0,qd=null,Xa=0,qu=0,Ka=0,Vg=0,Wg=null,Jg=0,jg=1/0;function bs(){jg=In()+500}var Ne=null,Zd=!1,Xg=null,Mr=null,Bs=!1,Zu=null,$u=90,Kg=[],Qg=[],Qr=null,ec=0,Yg=null,$d=-1,Yr=0,eh=0,tc=null,nc=!1;function ai(){return(Xe&48)!=0?In():$d!==-1?$d:$d=In()}function Rs(u){if(u=u.mode,(u&2)==0)return 1;if((u&4)==0)return Ha()===99?1:2;if(Yr===0&&(Yr=Xa),AL.transition!==0){eh!==0&&(eh=Wg!==null?Wg.pendingLanes:0),u=Yr;var c=4186112&~eh;return c&=-c,c===0&&(u=4186112&~u,c=u&-u,c===0&&(c=8192)),c}return u=Ha(),(Xe&4)!=0&&u===98?u=_d(12,Yr):(u=pL(u),u=_d(u,Yr)),u}function qr(u,c,g){if(50<ec)throw ec=0,Yg=null,Error(a(185));if(u=th(u,c),u===null)return null;Md(u,c,g),u===$n&&(Ka|=c,Fn===4&&Qa(u,Wn));var S=Ha();c===1?(Xe&8)!=0&&(Xe&48)==0?qg(u):(xi(u,g),Xe===0&&(bs(),Ci())):((Xe&4)==0||S!==98&&S!==99||(Qr===null?Qr=new Set([u]):Qr.add(u)),xi(u,g)),Wg=u}function th(u,c){u.lanes|=c;var g=u.alternate;for(g!==null&&(g.lanes|=c),g=u,u=u.return;u!==null;)u.childLanes|=c,g=u.alternate,g!==null&&(g.childLanes|=c),g=u,u=u.return;return g.tag===3?g.stateNode:null}function xi(u,c){for(var g=u.callbackNode,S=u.suspendedLanes,E=u.pingedLanes,b=u.expirationTimes,N=u.pendingLanes;0<N;){var V=31-Ss(N),ne=1<<V,Te=b[V];if(Te===-1){if((ne&S)==0||(ne&E)!=0){Te=c,Io(ne);var We=Ut;b[V]=10<=We?Te+250:6<=We?Te+5e3:-1}}else Te<=c&&(u.expiredLanes|=ne);N&=~ne}if(S=Fu(u,u===$n?Wn:0),c=Ut,S===0)g!==null&&(g!==cg&&lg(g),u.callbackNode=null,u.callbackPriority=0);else{if(g!==null){if(u.callbackPriority===c)return;g!==cg&&lg(g)}c===15?(g=qg.bind(null,u),Jr===null?(Jr=[g],Ad=ag(wd,BM)):Jr.push(g),g=cg):c===14?g=Nu(99,qg.bind(null,u)):(g=mL(c),g=Nu(g,Cw.bind(null,u))),u.callbackPriority=c,u.callbackNode=g}}function Cw(u){if($d=-1,eh=Yr=0,(Xe&48)!=0)throw Error(a(327));var c=u.callbackNode;if(Zr()&&u.callbackNode!==c)return null;var g=Fu(u,u===$n?Wn:0);if(g===0)return null;var S=g,E=Xe;Xe|=16;var b=Lw();($n!==u||Wn!==S)&&(bs(),Ya(u,S));do try{VL();break}catch(V){Rw(u,V)}while(1);if(dg(),Yd.current=b,Xe=E,vn!==null?S=0:($n=null,Wn=0,S=Fn),(Xa&Ka)!=0)Ya(u,0);else if(S!==0){if(S===2&&(Xe|=64,u.hydrate&&(u.hydrate=!1,Du(u.containerInfo)),g=MM(u),g!==0&&(S=ic(u,g))),S===1)throw c=qd,Ya(u,0),Qa(u,g),xi(u,In()),c;switch(u.finishedWork=u.current.alternate,u.finishedLanes=g,S){case 0:case 1:throw Error(a(345));case 2:ko(u);break;case 3:if(Qa(u,g),(g&62914560)===g&&(S=Jg+500-In(),10<S)){if(Fu(u,0)!==0)break;if(E=u.suspendedLanes,(E&g)!==g){ai(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=De(ko.bind(null,u),S);break}ko(u);break;case 4:if(Qa(u,g),(g&4186112)===g)break;for(S=u.eventTimes,E=-1;0<g;){var N=31-Ss(g);b=1<<N,N=S[N],N>E&&(E=N),g&=~b}if(g=E,g=In()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*GL(g/1960))-g,10<g){u.timeoutHandle=De(ko.bind(null,u),g);break}ko(u);break;case 5:ko(u);break;default:throw Error(a(329))}}return xi(u,In()),u.callbackNode===c?Cw.bind(null,u):null}function Qa(u,c){for(c&=~Vg,c&=~Ka,u.suspendedLanes|=c,u.pingedLanes&=~c,u=u.expirationTimes;0<c;){var g=31-Ss(c),S=1<<g;u[g]=-1,c&=~S}}function qg(u){if((Xe&48)!=0)throw Error(a(327));if(Zr(),u===$n&&(u.expiredLanes&Wn)!=0){var c=Wn,g=ic(u,c);(Xa&Ka)!=0&&(c=Fu(u,c),g=ic(u,c))}else c=Fu(u,0),g=ic(u,c);if(u.tag!==0&&g===2&&(Xe|=64,u.hydrate&&(u.hydrate=!1,Du(u.containerInfo)),c=MM(u),c!==0&&(g=ic(u,c))),g===1)throw g=qd,Ya(u,0),Qa(u,c),xi(u,In()),g;return u.finishedWork=u.current.alternate,u.finishedLanes=c,ko(u),xi(u,In()),null}function HL(){if(Qr!==null){var u=Qr;Qr=null,u.forEach(function(c){c.expiredLanes|=24&c.pendingLanes,xi(c,In())})}Ci()}function bw(u,c){var g=Xe;Xe|=1;try{return u(c)}finally{Xe=g,Xe===0&&(bs(),Ci())}}function Bw(u,c){var g=Xe;if((g&48)!=0)return u(c);Xe|=1;try{if(u)return jr(99,u.bind(null,c))}finally{Xe=g,Ci()}}function nh(u,c){Ft(zg,Oo),Oo|=c,Xa|=c}function Zg(){Oo=zg.current,gt(zg)}function Ya(u,c){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;if(g!==oe&&(u.timeoutHandle=oe,nt(g)),vn!==null)for(g=vn.return;g!==null;){var S=g;switch(S.tag){case 1:S=S.type.childContextTypes,S!=null&&yd();break;case 3:Ja(),gt(bt),gt(kt),_g();break;case 5:yg(S);break;case 4:Ja();break;case 13:gt(tn);break;case 19:gt(tn);break;case 10:hg(S);break;case 23:case 24:Zg()}g=g.return}$n=u,vn=Ps(u.current,null),Wn=Oo=Xa=c,Fn=0,qd=null,Vg=Ka=qu=0}function Rw(u,c){do{var g=vn;try{if(dg(),Hu.current=Ud,Fd){for(var S=on.memoizedState;S!==null;){var E=S.queue;E!==null&&(E.pending=null),S=S.next}Fd=!1}if(zu=0,Dn=Vn=on=null,Vu=!1,Gg.current=null,g===null||g.return===null){Fn=1,qd=c,vn=null;break}e:{var b=u,N=g.return,V=g,ne=c;if(c=Wn,V.flags|=2048,V.firstEffect=V.lastEffect=null,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Te=ne;if((V.mode&2)==0){var We=V.alternate;We?(V.updateQueue=We.updateQueue,V.memoizedState=We.memoizedState,V.lanes=We.lanes):(V.updateQueue=null,V.memoizedState=null)}var et=(tn.current&1)!=0,Pe=N;do{var Nt;if(Nt=Pe.tag===13){var Kt=Pe.memoizedState;if(Kt!==null)Nt=Kt.dehydrated!==null;else{var Ii=Pe.memoizedProps;Nt=Ii.fallback===void 0?!1:Ii.unstable_avoidThisFallback!==!0?!0:!et}}if(Nt){var Q=Pe.updateQueue;if(Q===null){var X=new Set;X.add(Te),Pe.updateQueue=X}else Q.add(Te);if((Pe.mode&2)==0){if(Pe.flags|=64,V.flags|=16384,V.flags&=-2981,V.tag===1)if(V.alternate===null)V.tag=17;else{var se=Ts(-1,1);se.tag=2,Cs(V,se)}V.lanes|=1;break e}ne=void 0,V=c;var Le=b.pingCache;if(Le===null?(Le=b.pingCache=new DL,ne=new Set,Le.set(Te,ne)):(ne=Le.get(Te),ne===void 0&&(ne=new Set,Le.set(Te,ne))),!ne.has(V)){ne.add(V);var Je=KL.bind(null,b,Te,V);Te.then(Je,Je)}Pe.flags|=4096,Pe.lanes=c;break e}Pe=Pe.return}while(Pe!==null);ne=Error((R(V.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Fn!==5&&(Fn=2),ne=Lg(ne,V),Pe=N;do{switch(Pe.tag){case 3:b=ne,Pe.flags|=4096,c&=-c,Pe.lanes|=c;var Gt=pw(Pe,b,c);IM(Pe,Gt);break e;case 1:b=ne;var st=Pe.type,Bt=Pe.stateNode;if((Pe.flags&64)==0&&(typeof st.getDerivedStateFromError=="function"||Bt!==null&&typeof Bt.componentDidCatch=="function"&&(Mr===null||!Mr.has(Bt)))){Pe.flags|=4096,c&=-c,Pe.lanes|=c;var pn=mw(Pe,b,c);IM(Pe,pn);break e}}Pe=Pe.return}while(Pe!==null)}Iw(g)}catch(wt){c=wt,vn===g&&g!==null&&(vn=g=g.return);continue}break}while(1)}function Lw(){var u=Yd.current;return Yd.current=Ud,u===null?Ud:u}function ic(u,c){var g=Xe;Xe|=16;var S=Lw();$n===u&&Wn===c||Ya(u,c);do try{zL();break}catch(E){Rw(u,E)}while(1);if(dg(),Xe=g,Yd.current=S,vn!==null)throw Error(a(261));return $n=null,Wn=0,Fn}function zL(){for(;vn!==null;)Pw(vn)}function VL(){for(;vn!==null&&!_L();)Pw(vn)}function Pw(u){var c=Nw(u.alternate,u,Oo);u.memoizedProps=u.pendingProps,c===null?Iw(u):vn=c,Gg.current=null}function Iw(u){var c=u;do{var g=c.alternate;if(u=c.return,(c.flags&2048)==0){if(g=PL(g,c,Oo),g!==null){vn=g;return}if(g=c,g.tag!==24&&g.tag!==23||g.memoizedState===null||(Oo&1073741824)!=0||(g.mode&4)==0){for(var S=0,E=g.child;E!==null;)S|=E.lanes|E.childLanes,E=E.sibling;g.childLanes=S}u!==null&&(u.flags&2048)==0&&(u.firstEffect===null&&(u.firstEffect=c.firstEffect),c.lastEffect!==null&&(u.lastEffect!==null&&(u.lastEffect.nextEffect=c.firstEffect),u.lastEffect=c.lastEffect),1<c.flags&&(u.lastEffect!==null?u.lastEffect.nextEffect=c:u.firstEffect=c,u.lastEffect=c))}else{if(g=IL(c),g!==null){g.flags&=2047,vn=g;return}u!==null&&(u.firstEffect=u.lastEffect=null,u.flags|=2048)}if(c=c.sibling,c!==null){vn=c;return}vn=c=u}while(c!==null);Fn===0&&(Fn=5)}function ko(u){var c=Ha();return jr(99,WL.bind(null,u,c)),null}function WL(u,c){do Zr();while(Zu!==null);if((Xe&48)!=0)throw Error(a(327));var g=u.finishedWork;if(g===null)return null;if(u.finishedWork=null,u.finishedLanes=0,g===u.current)throw Error(a(177));u.callbackNode=null;var S=g.lanes|g.childLanes,E=S,b=u.pendingLanes&~E;u.pendingLanes=E,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=E,u.mutableReadLanes&=E,u.entangledLanes&=E,E=u.entanglements;for(var N=u.eventTimes,V=u.expirationTimes;0<b;){var ne=31-Ss(b),Te=1<<ne;E[ne]=0,N[ne]=-1,V[ne]=-1,b&=~Te}if(Qr!==null&&(S&24)==0&&Qr.has(u)&&Qr.delete(u),u===$n&&(vn=$n=null,Wn=0),1<g.flags?g.lastEffect!==null?(g.lastEffect.nextEffect=g,S=g.firstEffect):S=g:S=g.firstEffect,S!==null){E=Xe,Xe|=32,Gg.current=null,tc=q(u.containerInfo),nc=!1,Ne=S;do try{JL()}catch(X){if(Ne===null)throw Error(a(330));Ls(Ne,X),Ne=Ne.nextEffect}while(Ne!==null);tc=null,Ne=S;do try{for(N=u;Ne!==null;){var We=Ne.flags;if(We&16&&pe&&gn(Ne.stateNode),We&128){var et=Ne.alternate;if(et!==null){var Pe=et.ref;Pe!==null&&(typeof Pe=="function"?Pe(null):Pe.current=null)}}switch(We&1038){case 2:Aw(Ne),Ne.flags&=-3;break;case 6:Aw(Ne),Ne.flags&=-3,Fg(Ne.alternate,Ne);break;case 1024:Ne.flags&=-1025;break;case 1028:Ne.flags&=-1025,Fg(Ne.alternate,Ne);break;case 4:Fg(Ne.alternate,Ne);break;case 8:V=N,b=Ne,pe?Sw(V,b):_w(V,b);var Nt=b.alternate;Mw(b),Nt!==null&&Mw(Nt)}Ne=Ne.nextEffect}}catch(X){if(Ne===null)throw Error(a(330));Ls(Ne,X),Ne=Ne.nextEffect}while(Ne!==null);nc&&U(),ee(u.containerInfo),u.current=g,Ne=S;do try{for(We=u;Ne!==null;){var Kt=Ne.flags;if(Kt&36&&OL(We,Ne.alternate,Ne),Kt&128){et=void 0;var Ii=Ne.ref;if(Ii!==null){var Q=Ne.stateNode;switch(Ne.tag){case 5:et=we(Q);break;default:et=Q}typeof Ii=="function"?Ii(et):Ii.current=et}}Ne=Ne.nextEffect}}catch(X){if(Ne===null)throw Error(a(330));Ls(Ne,X),Ne=Ne.nextEffect}while(Ne!==null);Ne=null,wL(),Xe=E}else u.current=g;if(Bs)Bs=!1,Zu=u,$u=c;else for(Ne=S;Ne!==null;)c=Ne.nextEffect,Ne.nextEffect=null,Ne.flags&8&&(Kt=Ne,Kt.sibling=null,Kt.stateNode=null),Ne=c;if(S=u.pendingLanes,S===0&&(Mr=null),S===1?u===Yg?ec++:(ec=0,Yg=u):ec=0,g=g.stateNode,Po&&typeof Po.onCommitFiberRoot=="function")try{Po.onCommitFiberRoot(sg,g,void 0,(g.current.flags&64)==64)}catch{}if(xi(u,In()),Zd)throw Zd=!1,u=Xg,Xg=null,u;return(Xe&8)!=0||Ci(),null}function JL(){for(;Ne!==null;){var u=Ne.alternate;nc||tc===null||((Ne.flags&8)!=0?de(Ne,tc)&&(nc=!0,Ct()):Ne.tag===13&&kL(u,Ne)&&de(Ne,tc)&&(nc=!0,Ct()));var c=Ne.flags;(c&256)!=0&&NL(u,Ne),(c&512)==0||Bs||(Bs=!0,Nu(97,function(){return Zr(),null})),Ne=Ne.nextEffect}}function Zr(){if($u!==90){var u=97<$u?97:$u;return $u=90,jr(u,XL)}return!1}function jL(u,c){Kg.push(c,u),Bs||(Bs=!0,Nu(97,function(){return Zr(),null}))}function Dw(u,c){Qg.push(c,u),Bs||(Bs=!0,Nu(97,function(){return Zr(),null}))}function XL(){if(Zu===null)return!1;var u=Zu;if(Zu=null,(Xe&48)!=0)throw Error(a(331));var c=Xe;Xe|=32;var g=Qg;Qg=[];for(var S=0;S<g.length;S+=2){var E=g[S],b=g[S+1],N=E.destroy;if(E.destroy=void 0,typeof N=="function")try{N()}catch(ne){if(b===null)throw Error(a(330));Ls(b,ne)}}for(g=Kg,Kg=[],S=0;S<g.length;S+=2){E=g[S],b=g[S+1];try{var V=E.create;E.destroy=V()}catch(ne){if(b===null)throw Error(a(330));Ls(b,ne)}}for(V=u.current.firstEffect;V!==null;)u=V.nextEffect,V.nextEffect=null,V.flags&8&&(V.sibling=null,V.stateNode=null),V=u;return Xe=c,Ci(),!0}function Fw(u,c,g){c=Lg(g,c),c=pw(u,c,1),Cs(u,c),c=ai(),u=th(u,1),u!==null&&(Md(u,1,c),xi(u,c))}function Ls(u,c){if(u.tag===3)Fw(u,u,c);else for(var g=u.return;g!==null;){if(g.tag===3){Fw(g,u,c);break}else if(g.tag===1){var S=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Mr===null||!Mr.has(S))){u=Lg(c,u);var E=mw(g,u,1);if(Cs(g,E),E=ai(),g=th(g,1),g!==null)Md(g,1,E),xi(g,E);else if(typeof S.componentDidCatch=="function"&&(Mr===null||!Mr.has(S)))try{S.componentDidCatch(c,u)}catch{}break}}g=g.return}}function KL(u,c,g){var S=u.pingCache;S!==null&&S.delete(c),c=ai(),u.pingedLanes|=u.suspendedLanes&g,$n===u&&(Wn&g)===g&&(Fn===4||Fn===3&&(Wn&62914560)===Wn&&500>In()-Jg?Ya(u,0):Vg|=g),xi(u,c)}function QL(u,c){var g=u.stateNode;g!==null&&g.delete(c),c=0,c===0&&(c=u.mode,(c&2)==0?c=1:(c&4)==0?c=Ha()===99?1:2:(Yr===0&&(Yr=Xa),c=Ga(62914560&~Yr),c===0&&(c=4194304))),g=ai(),u=th(u,c),u!==null&&(Md(u,c,g),xi(u,g))}var Nw;Nw=function(u,c,g){var S=c.lanes;if(u!==null)if(u.memoizedProps!==c.pendingProps||bt.current)er=!0;else if((g&S)!=0)er=(u.flags&16384)!=0;else{switch(er=!1,c.tag){case 3:ow(c),xg();break;case 5:HM(c);break;case 1:ri(c.type)&&vd(c);break;case 4:gg(c,c.stateNode.containerInfo);break;case 10:RM(c,c.memoizedProps.value);break;case 13:if(c.memoizedState!==null)return(g&c.child.childLanes)!=0?aw(u,c,g):(Ft(tn,tn.current&1),c=Kr(u,c,g),c!==null?c.sibling:null);Ft(tn,tn.current&1);break;case 19:if(S=(g&c.childLanes)!=0,(u.flags&64)!=0){if(S)return dw(u,c,g);c.flags|=64}var E=c.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Ft(tn,tn.current),S)break;return null;case 23:case 24:return c.lanes=0,Cg(u,c,g)}return Kr(u,c,g)}else er=!1;switch(c.lanes=0,c.tag){case 2:if(S=c.type,u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),u=c.pendingProps,E=Tn(c,kt.current),Va(c,g),E=wg(null,c,S,u,E,g),c.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0){if(c.tag=1,c.memoizedState=null,c.updateQueue=null,ri(S)){var b=!0;vd(c)}else b=!1;c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,pg(c);var N=S.getDerivedStateFromProps;typeof N=="function"&&bd(c,S,N,u),E.updater=Bd,c.stateNode=E,E._reactInternals=c,mg(c,S,u,g),c=Bg(null,c,S,!0,b,g)}else c.tag=0,oi(null,c,E,g),c=c.child;return c;case 16:E=c.elementType;e:{switch(u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),u=c.pendingProps,b=E._init,E=b(E._payload),c.type=E,b=c.tag=qL(E),u=$i(E,u),b){case 0:c=bg(null,c,E,u,g);break e;case 1:c=sw(null,c,E,u,g);break e;case 11:c=tw(null,c,E,u,g);break e;case 14:c=nw(null,c,E,$i(E.type,u),S,g);break e}throw Error(a(306,E,""))}return c;case 0:return S=c.type,E=c.pendingProps,E=c.elementType===S?E:$i(S,E),bg(u,c,S,E,g);case 1:return S=c.type,E=c.pendingProps,E=c.elementType===S?E:$i(S,E),sw(u,c,S,E,g);case 3:if(ow(c),S=c.updateQueue,u===null||S===null)throw Error(a(282));if(S=c.pendingProps,E=c.memoizedState,E=E!==null?E.element:null,PM(u,c),Ou(c,S,null,g),S=c.memoizedState.element,S===E)xg(),c=Kr(u,c,g);else{if(E=c.stateNode,(b=E.hydrate)&&(ve?(Do=qe(c.stateNode.containerInfo),Xr=c,b=vr=!0):b=!1),b){if(ve&&(u=E.mutableSourceEagerHydrationData,u!=null))for(E=0;E<u.length;E+=2)b=u[E],N=u[E+1],fe?b._workInProgressVersionPrimary=N:b._workInProgressVersionSecondary=N,ja.push(b);for(g=GM(c,null,S,g),c.child=g;g;)g.flags=g.flags&-3|1024,g=g.sibling}else oi(u,c,S,g),xg();c=c.child}return c;case 5:return HM(c),u===null&&vg(c),S=c.type,E=c.pendingProps,b=u!==null?u.memoizedProps:null,N=E.children,Be(S,E)?N=null:b!==null&&Be(S,b)&&(c.flags|=16),rw(u,c),oi(u,c,N,g),c.child;case 6:return u===null&&vg(c),null;case 13:return aw(u,c,g);case 4:return gg(c,c.stateNode.containerInfo),S=c.pendingProps,u===null?c.child=Pd(c,null,S,g):oi(u,c,S,g),c.child;case 11:return S=c.type,E=c.pendingProps,E=c.elementType===S?E:$i(S,E),tw(u,c,S,E,g);case 7:return oi(u,c,c.pendingProps,g),c.child;case 8:return oi(u,c,c.pendingProps.children,g),c.child;case 12:return oi(u,c,c.pendingProps.children,g),c.child;case 10:e:{if(S=c.type._context,E=c.pendingProps,N=c.memoizedProps,b=E.value,RM(c,b),N!==null){var V=N.value;if(b=bi(V,b)?0:(typeof S._calculateChangedBits=="function"?S._calculateChangedBits(V,b):1073741823)|0,b===0){if(N.children===E.children&&!bt.current){c=Kr(u,c,g);break e}}else for(V=c.child,V!==null&&(V.return=c);V!==null;){var ne=V.dependencies;if(ne!==null){N=V.child;for(var Te=ne.firstContext;Te!==null;){if(Te.context===S&&(Te.observedBits&b)!=0){V.tag===1&&(Te=Ts(-1,g&-g),Te.tag=2,Cs(V,Te)),V.lanes|=g,Te=V.alternate,Te!==null&&(Te.lanes|=g),LM(V.return,g),ne.lanes|=g;break}Te=Te.next}}else N=V.tag===10&&V.type===c.type?null:V.child;if(N!==null)N.return=V;else for(N=V;N!==null;){if(N===c){N=null;break}if(V=N.sibling,V!==null){V.return=N.return,N=V;break}N=N.return}V=N}}oi(u,c,E.children,g),c=c.child}return c;case 9:return E=c.type,b=c.pendingProps,S=b.children,Va(c,g),E=Bi(E,b.unstable_observedBits),S=S(E),c.flags|=1,oi(u,c,S,g),c.child;case 14:return E=c.type,b=$i(E,c.pendingProps),b=$i(E.type,b),nw(u,c,E,b,S,g);case 15:return iw(u,c,c.type,c.pendingProps,S,g);case 17:return S=c.type,E=c.pendingProps,E=c.elementType===S?E:$i(S,E),u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,ri(S)?(u=!0,vd(c)):u=!1,Va(c,g),OM(c,S,E),mg(c,S,E,g),Bg(null,c,S,!0,u,g);case 19:return dw(u,c,g);case 23:return Cg(u,c,g);case 24:return Cg(u,c,g)}throw Error(a(156,c.tag))};var ih={current:!1},$g=o.unstable_flushAllWithoutAsserting,Ow=typeof $g=="function";function e0(){if($g!==void 0)return $g();for(var u=!1;Zr();)u=!0;return u}function kw(u){try{e0(),UL(function(){e0()?kw(u):u()})}catch(c){u(c)}}var rh=0,Uw=!1;function YL(u,c,g,S){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(u,c,g,S){return new YL(u,c,g,S)}function t0(u){return u=u.prototype,!(!u||!u.isReactComponent)}function qL(u){if(typeof u=="function")return t0(u)?1:0;if(u!=null){if(u=u.$$typeof,u===M)return 11;if(u===A)return 14}return 2}function Ps(u,c){var g=u.alternate;return g===null?(g=Pi(u.tag,c,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=c,g.type=u.type,g.flags=0,g.nextEffect=null,g.firstEffect=null,g.lastEffect=null),g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,c=u.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g}function sh(u,c,g,S,E,b){var N=2;if(S=u,typeof u=="function")t0(u)&&(N=1);else if(typeof u=="string")N=5;else e:switch(u){case m:return qa(g.children,E,b,c);case C:N=8,E|=16;break;case d:N=8,E|=1;break;case p:return u=Pi(12,g,c,E|8),u.elementType=p,u.type=p,u.lanes=b,u;case v:return u=Pi(13,g,c,E),u.type=v,u.elementType=v,u.lanes=b,u;case y:return u=Pi(19,g,c,E),u.elementType=y,u.lanes=b,u;case B:return n0(g,E,b,c);case I:return u=Pi(24,g,c,E),u.elementType=I,u.lanes=b,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case x:N=10;break e;case _:N=9;break e;case M:N=11;break e;case A:N=14;break e;case w:N=16,S=null;break e;case T:N=22;break e}throw Error(a(130,u==null?u:typeof u,""))}return c=Pi(N,g,c,E),c.elementType=u,c.type=S,c.lanes=b,c}function qa(u,c,g,S){return u=Pi(7,u,S,c),u.lanes=g,u}function n0(u,c,g,S){return u=Pi(23,u,S,c),u.elementType=B,u.lanes=g,u}function i0(u,c,g){return u=Pi(6,u,null,c),u.lanes=g,u}function r0(u,c,g){return c=Pi(4,u.children!==null?u.children:[],u.key,c),c.lanes=g,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}function ZL(u,c,g){this.tag=c,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=oe,this.pendingContext=this.context=null,this.hydrate=g,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=og(0),this.expirationTimes=og(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=og(0),ve&&(this.mutableSourceEagerHydrationData=null)}function Gw(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(a(188)):Error(a(268,Object.keys(u)));return u=J(c),u===null?null:u.stateNode}function Hw(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<c?g:c}}function oh(u,c){Hw(u,c),(u=u.alternate)&&Hw(u,c)}function $L(u){return u=J(u),u===null?null:u.stateNode}function eP(){return null}return i.IsThisRendererActing=ih,i.act=function(u){function c(){rh--,Hg.current=g,ih.current=S}Uw===!1&&(Uw=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),rh++;var g=Hg.current,S=ih.current;Hg.current=!0,ih.current=!0;try{var E=bw(u)}catch(b){throw c(),b}if(E!==null&&typeof E=="object"&&typeof E.then=="function")return{then:function(b,N){E.then(function(){1<rh||Ow===!0&&g===!0?(c(),b()):kw(function(V){c(),V?N(V):b()})},function(V){c(),N(V)})}};try{rh!==1||Ow!==!1&&g!==!1||e0(),c()}catch(b){throw c(),b}return{then:function(b){b()}}},i.attemptContinuousHydration=function(u){if(u.tag===13){var c=ai();qr(u,67108864,c),oh(u,67108864)}},i.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var c=ai(),g=Rs(u);qr(u,g,c),oh(u,g)}},i.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var c=u.stateNode;if(c.hydrate){var g=Io(c.pendingLanes);c.expiredLanes|=g&c.pendingLanes,xi(c,In()),(Xe&48)==0&&(bs(),Ci())}break;case 13:var S=ai();Bw(function(){return qr(u,1,S)}),oh(u,4)}},i.attemptUserBlockingHydration=function(u){if(u.tag===13){var c=ai();qr(u,4,c),oh(u,4)}},i.batchedEventUpdates=function(u,c){var g=Xe;Xe|=2;try{return u(c)}finally{Xe=g,Xe===0&&(bs(),Ci())}},i.batchedUpdates=bw,i.createComponentSelector=function(u){return{$$typeof:Wd,value:u}},i.createContainer=function(u,c,g){return u=new ZL(u,c,g),c=Pi(3,null,null,c===2?7:c===1?3:0),u.current=c,c.stateNode=u,pg(c),u},i.createHasPsuedoClassSelector=function(u){return{$$typeof:Jd,value:u}},i.createPortal=function(u,c,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:S==null?null:""+S,children:u,containerInfo:c,implementation:g}},i.createRoleSelector=function(u){return{$$typeof:jd,value:u}},i.createTestNameSelector=function(u){return{$$typeof:Xd,value:u}},i.createTextSelector=function(u){return{$$typeof:Kd,value:u}},i.deferredUpdates=function(u){return jr(97,u)},i.discreteUpdates=function(u,c,g,S,E){var b=Xe;Xe|=4;try{return jr(98,u.bind(null,c,g,S,E))}finally{Xe=b,Xe===0&&(bs(),Ci())}},i.findAllNodes=Ug,i.findBoundingRects=function(u,c){if(!le)throw Error(a(363));c=Ug(u,c),u=[];for(var g=0;g<c.length;g++)u.push(Se(c[g]));for(c=u.length-1;0<c;c--){g=u[c];for(var S=g.x,E=S+g.width,b=g.y,N=b+g.height,V=c-1;0<=V;V--)if(c!==V){var ne=u[V],Te=ne.x,We=Te+ne.width,et=ne.y,Pe=et+ne.height;if(S>=Te&&b>=et&&E<=We&&N<=Pe){u.splice(c,1);break}else if(S!==Te||g.width!==ne.width||Pe<b||et>N){if(!(b!==et||g.height!==ne.height||We<S||Te>E)){Te>S&&(ne.width+=Te-S,ne.x=S),We<E&&(ne.width=E-Te),u.splice(c,1);break}}else{et>b&&(ne.height+=et-b,ne.y=b),Pe<N&&(ne.height=N-et),u.splice(c,1);break}}}return u},i.findHostInstance=Gw,i.findHostInstanceWithNoPortals=function(u){return u=K(u),u===null?null:u.tag===20?u.stateNode.instance:u.stateNode},i.findHostInstanceWithWarning=function(u){return Gw(u)},i.flushControlled=function(u){var c=Xe;Xe|=1;try{jr(99,u)}finally{Xe=c,Xe===0&&(bs(),Ci())}},i.flushDiscreteUpdates=function(){(Xe&49)==0&&(HL(),Zr())},i.flushPassiveEffects=Zr,i.flushSync=Bw,i.focusWithin=function(u,c){if(!le)throw Error(a(363));for(u=Ng(u),c=Tw(u,c),c=Array.from(c),u=0;u<c.length;){var g=c[u++];if(!Ve(g)){if(g.tag===5&&Me(g.stateNode))return!0;for(g=g.child;g!==null;)c.push(g),g=g.sibling}}return!1},i.getCurrentUpdateLanePriority=function(){return xd},i.getFindAllNodesFailureDescription=function(u,c){if(!le)throw Error(a(363));var g=0,S=[];u=[Ng(u),0];for(var E=0;E<u.length;){var b=u[E++],N=u[E++],V=c[N];if((b.tag!==5||!Ve(b))&&(Og(b,V)&&(S.push(kg(V)),N++,N>g&&(g=N)),N<c.length))for(b=b.child;b!==null;)u.push(b,N),b=b.sibling}if(g<c.length){for(u=[];g<c.length;g++)u.push(kg(c[g]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},i.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return we(u.child.stateNode);default:return u.child.stateNode}},i.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:$L,findFiberByHostInstance:u.findFiberByHostInstance||eP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")u=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!c.isDisabled&&c.supportsFiber)try{sg=c.inject(u),Po=c}catch{}u=!0}return u},i.observeVisibleRects=function(u,c,g,S){if(!le)throw Error(a(363));u=Ug(u,c);var E=z(u,g,S).disconnect;return{disconnect:function(){E()}}},i.registerMutableSourceForHydration=function(u,c){var g=c._getVersion;g=g(c._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[c,g]:u.mutableSourceEagerHydrationData.push(c,g)},i.runWithPriority=function(u,c){var g=xd;try{return xd=u,c()}finally{xd=g}},i.shouldSuspend=function(){return!1},i.unbatchedUpdates=function(u,c){var g=Xe;Xe&=-2,Xe|=8;try{return u(c)}finally{Xe=g,Xe===0&&(bs(),Ci())}},i.updateContainer=function(u,c,g,S){var E=c.current,b=ai(),N=Rs(E);e:if(g){g=g._reactInternals;t:{if(L(g)!==g||g.tag!==1)throw Error(a(170));var V=g;do{switch(V.tag){case 3:V=V.stateNode.context;break t;case 1:if(ri(V.type)){V=V.stateNode.__reactInternalMemoizedMergedChildContext;break t}}V=V.return}while(V!==null);throw Error(a(171))}if(g.tag===1){var ne=g.type;if(ri(ne)){g=xM(g,ne,V);break e}}g=V}else g=yn;return c.context===null?c.context=g:c.pendingContext=g,c=Ts(b,N),c.payload={element:u},S=S===void 0?null:S,S!==null&&(c.callback=S),Cs(E,c),qr(E,N,b),N},i}})(rB);iB.exports=rB.exports;var PU=iB.exports,l_=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,r,s;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(r=i;r--!=0;)if(!n(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(r=i;r--!=0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=i;r--!=0;){var o=s[r];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const Pm=[];function sB(n,e,t,i=0,r=!1){for(const o of e)if(l_(t,o.args)){if(r)return;if(o.error)throw o.error;if(o.response)return o.response;throw o.promise}const s={args:t,promise:n(...t).then(o=>s.response=o!=null?o:!0).catch(o=>s.error=o!=null?o:"unknown error").then(()=>{i>0&&setTimeout(()=>{const o=e.indexOf(s);o!==-1&&e.splice(o,1)},i)})};if(e.push(s),!r)throw s.promise}function IU(n,...e){if(e===void 0||e.length===0)n.splice(0,n.length);else{const t=n.find(i=>l_(e,i.args));if(t){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}}function xs(n,...e){return sB(n,Pm,e,xs.lifespan)}xs.lifespan=0;xs.clear=(...n)=>IU(Pm,...n);xs.preload=(n,...e)=>void sB(n,Pm,e,xs.lifespan,!0);xs.peek=(...n)=>{var e;return(e=Pm.find(t=>l_(n,t.args)))==null?void 0:e.response};function u_(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function c_(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(l,e-h):(i=null,t||(a=n.apply(s,r),s=r=null))}var f=function(){s=this,r=arguments,o=Date.now();var h=t&&!i;return i||(i=setTimeout(l,e)),h&&(a=n.apply(s,r),s=r=null),a};return f.clear=function(){i&&(clearTimeout(i),i=null)},f.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},f}c_.debounce=c_;var oB=c_;function DU(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=re.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=re.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,m=re.exports.useRef(!1);re.exports.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[d,p,x]=re.exports.useMemo(()=>{const y=()=>{if(!l.current.element)return;const{left:A,top:w,width:T,height:C,bottom:B,right:I,x:k,y:G}=l.current.element.getBoundingClientRect(),O={left:A,top:w,width:T,height:C,bottom:B,right:I,x:k,y:G};l.current.element instanceof HTMLElement&&r&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),m.current&&!kU(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[y,h?oB(y,h):y,f?oB(y,f):y]},[a,r,f,h]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function M(){!l.current.element||(l.current.resizeObserver=new s(x),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(y=>y.addEventListener("scroll",x,{capture:!0,passive:!0})))}const v=y=>{!y||y===l.current.element||(_(),l.current.element=y,l.current.scrollContainers=aB(y),M())};return NU(x,Boolean(t)),FU(p),re.exports.useEffect(()=>{_(),M()},[t,x,p]),re.exports.useEffect(()=>_,[]),[v,o,d]}function FU(n){re.exports.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function NU(n,e){re.exports.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function aB(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...aB(n.parentElement)]}const OU=["x","y","top","bottom","left","right","width","height"],kU=(n,e)=>OU.every(t=>n[t]===e[t]),Ot={obj:n=>n===Object(n)&&!Ot.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ot.str(n)||Ot.num(n)||Ot.obj(n))return n===e;if(Ot.arr(n)&&n==e)return!0;let t;for(t in n)if(!(t in e))return!1;for(t in e)if(n[t]!==e[t])return!1;return Ot.und(t)?n===e:!0}};function f_(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function lB(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function UU(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{lB(t.capturedMap,e,i,r)})}function GU(n){const e=new P;function t(m){var d;const p=n.getState(),{raycaster:x,mouse:_,camera:M,size:v}=p,{offsetX:y,offsetY:A}=(d=x.computeOffsets==null?void 0:x.computeOffsets(m,p))!=null?d:m,{width:w,height:T}=v;_.set(y/w*2-1,-(A/T)*2+1),x.setFromCamera(_,M)}function i(m){const{internal:d}=n.getState(),p=m.offsetX-d.initialClick[0],x=m.offsetY-d.initialClick[1];return Math.round(Math.sqrt(p*p+x*x))}function r(m){return m.filter(d=>["Move","Over","Enter","Out","Leave"].some(p=>{var x;return(x=d.__r3f)==null?void 0:x.handlers["onPointer"+p]}))}function s(m){const d=n.getState(),{raycaster:p,internal:x}=d;if(!p.enabled)return[];const _=new Set,M=[],v=m?m(x.interaction):x.interaction;let y=p.intersectObjects(v,!0).filter(w=>{const T=f_(w);return _.has(T)?!1:(_.add(T),!0)});p.filter&&(y=p.filter(y,d));for(const w of y){let T=w.object;for(;T;){var A;(A=T.__r3f)!=null&&A.eventCount&&M.push(Nn(At({},w),{eventObject:T})),T=T.parent}}return M}function o(m,d){const{internal:p}=n.getState();if("pointerId"in d&&p.capturedMap.has(d.pointerId))for(let x of p.capturedMap.get(d.pointerId).values())m.push(x.intersection);return m}function a(m,d,p,x){const{raycaster:_,mouse:M,camera:v,internal:y}=n.getState();if(m.length){const A=e.set(M.x,M.y,0).unproject(v),w={stopped:!1};for(const T of m){const C=O=>{var R,L;return(R=(L=y.capturedMap.get(O))==null?void 0:L.has(T.eventObject))!=null?R:!1},B=O=>{const R={intersection:T,target:d.target};y.capturedMap.has(O)?y.capturedMap.get(O).set(T.eventObject,R):y.capturedMap.set(O,new Map([[T.eventObject,R]])),d.target.setPointerCapture(O)},I=O=>{const R=y.capturedMap.get(O);R&&lB(y.capturedMap,T.eventObject,R,O)};let k={};for(let O in d){let R=d[O];typeof R!="function"&&(k[O]=R)}let G=Nn(At(At({},T),k),{spaceX:M.x,spaceY:M.y,intersections:m,stopped:w.stopped,delta:p,unprojectedPoint:A,ray:_.ray,camera:v,stopPropagation:()=>{const O="pointerId"in d&&y.capturedMap.get(d.pointerId);if((!O||O.has(T.eventObject))&&(G.stopped=w.stopped=!0,y.hovered.size&&Array.from(y.hovered.values()).find(R=>R.eventObject===T.eventObject))){const R=m.slice(0,m.indexOf(T));l([...R,T])}},target:{hasPointerCapture:C,setPointerCapture:B,releasePointerCapture:I},currentTarget:{hasPointerCapture:C,setPointerCapture:B,releasePointerCapture:I},sourceEvent:d,nativeEvent:d});if(x(G),w.stopped===!0)break}}return m}function l(m){const{internal:d}=n.getState();Array.from(d.hovered.values()).forEach(p=>{if(!m.length||!m.find(x=>x.object===p.object&&x.index===p.index&&x.instanceId===p.instanceId)){const _=p.eventObject.__r3f,M=_==null?void 0:_.handlers;if(d.hovered.delete(f_(p)),_!=null&&_.eventCount){const v=Nn(At({},p),{intersections:m||[]});M.onPointerOut==null||M.onPointerOut(v),M.onPointerLeave==null||M.onPointerLeave(v)}}})}const f=m=>{switch(m){case"onPointerLeave":case"onPointerCancel":return()=>l([]);case"onLostPointerCapture":return d=>{const{internal:p}=n.getState();"pointerId"in d&&!p.capturedMap.has(d.pointerId)&&(p.capturedMap.delete(d.pointerId),l([]))}}return d=>{const{onPointerMissed:p,internal:x}=n.getState();t(d),x.lastEvent.current=d;const _=m==="onPointerMove",M=m==="onClick"||m==="onContextMenu"||m==="onDoubleClick",y=o(s(_?r:void 0),d),A=M?i(d):0;m==="onPointerDown"&&(x.initialClick=[d.offsetX,d.offsetY],x.initialHits=y.map(w=>w.eventObject)),M&&!y.length&&A<=2&&(h(d,x.interaction),p&&p(d)),_&&l(y),a(y,d,A,w=>{const T=w.eventObject,C=T.__r3f,B=C==null?void 0:C.handlers;if(!!(C!=null&&C.eventCount))if(_){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const I=f_(w),k=x.hovered.get(I);k?k.stopped&&w.stopPropagation():(x.hovered.set(I,w),B.onPointerOver==null||B.onPointerOver(w),B.onPointerEnter==null||B.onPointerEnter(w))}B.onPointerMove==null||B.onPointerMove(w)}else{const I=B[m];I?(!M||x.initialHits.includes(T))&&(h(d,x.interaction.filter(k=>!x.initialHits.includes(k))),I(w)):M&&x.initialHits.includes(T)&&h(d,x.interaction.filter(k=>!x.initialHits.includes(k)))}})}};function h(m,d){d.forEach(p=>{var x;return(x=p.__r3f)==null||x.handlers.onPointerMissed==null?void 0:x.handlers.onPointerMissed(m)})}return{handlePointer:f}}const HU=n=>n&&!!n.memoized&&!!n.changes,Im=n=>n&&!!n.getState,d_=(n,e)=>{var t,i;return{root:Im(n)?n:(t=(i=n.__r3f)==null?void 0:i.root)!=null?t:e.__r3f.root,container:Im(n)?n.getState().scene:n}},uB="__default",zU={};let h_={},VU=n=>void(h_=At(At({},h_),n));function WU(n,e){return!!(Ot.arr(n)&&Ot.equ(n,e)||n===e)}function Eu(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f=At({root:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},e)),n}function JU(n){function e(d,C,I={},T=!1){var B=C,{children:p,key:x,ref:_}=B,M=_i(B,["children","key","ref"]);var k=I,{children:v,key:y,ref:A}=k,w=_i(k,["children","key","ref"]);var G;const O=(G=d==null?void 0:d.__r3f)!=null?G:{},R=Object.entries(M),L=[];if(T){const j=Object.keys(w);for(let J=0;J<j.length;J++)M.hasOwnProperty(j[J])||R.unshift([j[J],uB+"remove"])}R.forEach(([j,J])=>{var K;if((K=d.__r3f)!=null&&K.primitive&&j==="object"||WU(J,w[j]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(j))return L.push([j,J,!0,[]]);let de=[];j.includes("-")&&(de=j.split("-")),L.push([j,J,!1,de])});const W=At({},M);return O.memoizedProps&&O.memoizedProps.args&&(W.args=O.memoizedProps.args),O.memoizedProps&&O.memoizedProps.attach&&(W.attach=O.memoizedProps.attach),{accumulative:T,memoized:W,changes:L}}function t(d,p){var x,_,M;const v=(x=d==null?void 0:d.__r3f)!=null?x:{},y=v.root,A=(_=y==null||y.getState==null?void 0:y.getState())!=null?_:{},{memoized:w,changes:T}=HU(p)?p:e(d,p),C=v.eventCount;if(d.__r3f&&(d.__r3f.memoizedProps=w),T.forEach(([B,I,k,G])=>{var O;let R=d,L=R[B];if(G.length&&(L=G.reduce((j,J)=>j[J],d),!(L&&L.set))){const[j,...J]=G.reverse();R=J.reverse().reduce((K,de)=>K[de],d),B=j}if(I===uB+"remove")if(L&&L.constructor)I=new L.constructor(w.args);else if(R.constructor){const j=new R.constructor(R.__r3f.memoizedProps.args);I=j[L],j.dispose&&j.dispose()}else I=0;const W=(A==null||(O=A.gl)==null?void 0:O.outputEncoding)===ui;if(k)I?v.handlers[B]=I:delete v.handlers[B],v.eventCount=Object.keys(v.handlers).length;else if(L&&L.set&&(L.copy||L instanceof qo)){if(Array.isArray(I))L.fromArray?L.fromArray(I):L.set(...I);else if(L.copy&&I&&I.constructor&&L.constructor.name===I.constructor.name)L.copy(I);else if(I!==void 0){const j=L instanceof ye;!j&&L.setScalar?L.setScalar(I):L instanceof qo&&I instanceof qo?L.mask=I.mask:L.set(I),!W&&j&&L.convertSRGBToLinear()}}else R[B]=I,!W&&R[B]instanceof Zt&&(R[B].encoding=Fi);i(d)}),v.parent&&A.internal&&d.raycast&&C!==v.eventCount){const B=A.internal.interaction.indexOf(d);B>-1&&A.internal.interaction.splice(B,1),v.eventCount&&A.internal.interaction.push(d)}return T.length&&(M=d.__r3f)!=null&&M.parent&&r(d),d}function i(d){var p,x;const _=(p=d.__r3f)==null||(x=p.root)==null||x.getState==null?void 0:x.getState();_&&_.internal.frames===0&&_.invalidate()}function r(d){d.onUpdate==null||d.onUpdate(d)}function s(d,y,_,M,v){var A=y,{args:p=[]}=A,x=_i(A,["args"]);let w=`${d[0].toUpperCase()}${d.slice(1)}`,T;if(!Im(_)&&v){const C=B=>B.return?C(B.return):B.stateNode&&B.stateNode.containerInfo;_=C(v)}if(!_||!Im(_))throw`No valid root for ${w}!`;if(d==="primitive"){if(x.object===void 0)throw"Primitives without 'object' are invalid!";const C=x.object;T=Eu(C,{root:_,primitive:!0})}else{const C=h_[w]||YE[w];if(!C)throw`${w} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;if(!Array.isArray(p))throw"The args prop must be an array!";T=Eu(new C(...p),{root:_,memoizedProps:{args:p.length===0?null:p}})}return"attachFns"in x||(w.endsWith("Geometry")?x=At({attach:"geometry"},x):w.endsWith("Material")&&(x=At({attach:"material"},x))),t(T,x),T}function o(d,p){let x=!1;if(p){if(p.attachArray)Ot.arr(d[p.attachArray])||(d[p.attachArray]=[]),d[p.attachArray].push(p);else if(p.attachObject)Ot.obj(d[p.attachObject[0]])||(d[p.attachObject[0]]={}),d[p.attachObject[0]][p.attachObject[1]]=p;else if(p.attach&&!Ot.fun(p.attach))d[p.attach]=p;else if(Ot.arr(p.attachFns)){const[_]=p.attachFns;Ot.str(_)&&Ot.fun(d[_])?d[_](p):Ot.fun(_)&&_(p,d)}else p.isObject3D&&d.isObject3D&&(d.add(p),x=!0);x||d.__r3f.objects.push(p),p.__r3f||Eu(p,{}),p.__r3f.parent=d,r(p),i(p)}}function a(d,p,x){let _=!1;if(p){if(p.attachArray){const M=d[p.attachArray];Ot.arr(M)||(d[p.attachArray]=[]),M.splice(M.indexOf(x),0,p)}else{if(p.attachObject||p.attach&&!Ot.fun(p.attach))return o(d,p);if(p.isObject3D&&d.isObject3D){p.parent=d,p.dispatchEvent({type:"added"});const M=d.children.filter(y=>y!==p),v=M.indexOf(x);d.children=[...M.slice(0,v),p,...M.slice(v)],_=!0}}_||d.__r3f.objects.push(p),p.__r3f||Eu(p,{}),p.__r3f.parent=d,r(p),i(p)}}function l(d,p,x=!1){d&&[...d].forEach(_=>f(p,_,x))}function f(d,p,x){if(p){var _,M;if(p.__r3f&&(p.__r3f.parent=null),(_=d.__r3f)!=null&&_.objects&&(d.__r3f.objects=d.__r3f.objects.filter(T=>T!==p)),p.attachArray)d[p.attachArray]=d[p.attachArray].filter(T=>T!==p);else if(p.attachObject)delete d[p.attachObject[0]][p.attachObject[1]];else if(p.attach&&!Ot.fun(p.attach)&&d[p.attach]===p)d[p.attach]=null;else if(Ot.arr(p.attachFns)){const[,T]=p.attachFns;Ot.str(T)&&Ot.fun(d[T])?d[T](p):Ot.fun(T)&&T(p,d)}else if(p.isObject3D&&d.isObject3D){var v;d.remove(p),(v=p.__r3f)!=null&&v.root&&UU(p.__r3f.root,p)}const A=(M=p.__r3f)==null?void 0:M.primitive,w=x===void 0?p.dispose!==null&&!A:x;if(!A){var y;l((y=p.__r3f)==null?void 0:y.objects,p,w),l(p.children,p,w)}p.__r3f&&(delete p.__r3f.root,delete p.__r3f.objects,delete p.__r3f.handlers,delete p.__r3f.memoizedProps,A||delete p.__r3f),w&&p.dispose&&p.type!=="Scene"&&Yl.exports.unstable_runWithPriority(Yl.exports.unstable_IdlePriority,()=>{try{p.dispose()}catch{}}),i(d)}}function h(d,p,x,_){var M;const v=(M=d.__r3f)==null?void 0:M.parent;if(!v)return;const y=s(p,x,d.__r3f.root);p!=="primitive"&&d.children&&(d.children.forEach(A=>o(y,A)),d.children=[]),d.__r3f.objects.forEach(A=>o(y,A)),d.__r3f.objects=[],f(v,d),o(v,y),y.raycast&&y.__r3f.eventCount&&y.__r3f.root.getState().internal.interaction.push(y),[_,_.alternate].forEach(A=>{A!==null&&(A.stateNode=y,A.ref&&(typeof A.ref=="function"?A.ref(y):A.ref.current=y))})}return{reconciler:PU({now:Yl.exports.unstable_now,createInstance:s,removeChild:f,appendChild:o,appendInitialChild:o,insertBefore:a,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:Ot.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ot.fun(clearTimeout)?clearTimeout:void 0,setTimeout:Ot.fun(setTimeout)?setTimeout:void 0,clearTimeout:Ot.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:(d,p)=>{const{container:x,root:_}=d_(d,p);x.__r3f.root=_,o(x,p)},removeChildFromContainer:(d,p)=>f(d_(d,p).container,p),insertInContainerBefore:(d,p,x)=>a(d_(d,p).container,p,x),prepareUpdate(d,p,x,_){if(d.__r3f.primitive&&_.object&&_.object!==d)return[!0];{const M=_,{args:y=[],children:A}=M,w=_i(M,["args","children"]),v=x,{args:T=[],children:C}=v,B=_i(v,["args","children"]);if(!Array.isArray(y))throw"The args prop must be an array!";if(y.some((k,G)=>k!==T[G]))return[!0];const I=e(d,w,B,!0);if(I.changes.length)return[!1,I];if(d.attach&&typeof d.attach!="function"){const G=d.__r3f.parent;G&&G[d.attach]!==d&&o(G,d)}return null}},commitUpdate(d,[p,x],_,M,v,y){p?h(d,_,v,y):t(d,x)},hideInstance(d){d.isObject3D&&(d.visible=!1,i(d))},unhideInstance(d,p){(d.isObject3D&&p.visible==null||p.visible)&&(d.visible=!0,i(d))},hideTextInstance(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance(d){return d},getRootHostContext(d){return zU},getChildHostContext(d){return d},createTextInstance(){},finalizeInitialChildren(d){var p;return!!((p=d==null?void 0:d.__r3f)!=null?p:{}).handlers},commitMount(d){var p;const x=(p=d==null?void 0:d.__r3f)!=null?p:{};d.raycast&&x.handlers&&x.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},shouldDeprioritizeSubtree(){return!1},prepareForCommit(){return null},preparePortalMount(d){Eu(d)},resetAfterCommit(){},shouldSetTextContent(){return!1},clearContainer(){return!1}}),applyProps:t}}const jU=n=>!!(n!=null&&n.render),cB=n=>n&&n.isOrthographicCamera;function p_(n){return Array.isArray(n)?Math.min(Math.max(n[0],window.devicePixelRatio),n[1]):n}const fB=re.exports.createContext(null),XU=(n,e,t,i)=>{const{gl:r,size:s,shadows:o=!1,linear:a=!1,flat:l=!1,vr:f=!1,orthographic:h=!1,frameloop:m="always",dpr:d=1,performance:p,clock:x=new Ky,raycaster:_,camera:M,onPointerMissed:v}=i;o&&(r.shadowMap.enabled=!0,typeof o=="object"?Object.assign(r.shadowMap,o):r.shadowMap.type=a0),a&&(r.outputEncoding=ui),l&&(r.toneMapping=wr),m==="never"&&(x.stop(),x.elapsedTime=0);const y=LU((C,B)=>{const I=new IE,$=_||{},{params:k}=$,G=_i($,["params"]);n(I,Nn(At({enabled:!0},G),{params:At(At({},I.params),k)}));const O=M instanceof Ks,R=O?M:h?new $o(0,0,0,0,.1,1e3):new cn(75,0,.1,1e3);O||(R.position.z=5,M&&n(R,M),M!=null&&M.rotation||R.lookAt(0,0,0));const L=p_(d),W=new P,j=new P,J=new P;function K(H=B().camera,q=j,ee=B().size){const{width:ce,height:Ie}=ee,ae=ce/Ie;q instanceof P?J.copy(q):J.set(...q);const Ue=H.getWorldPosition(W).distanceTo(J);if(cB(H))return{width:ce/H.zoom,height:Ie/H.zoom,factor:1,distance:Ue,aspect:ae};{const Be=H.fov*Math.PI/180,Ae=2*Math.tan(Be/2)*Ue,De=Ae*(ce/Ie);return{width:De,height:Ae,factor:ce/De,distance:Ue,aspect:ae}}}let de;const we=H=>C(q=>({performance:Nn(At({},q.performance),{current:H})}));return{gl:r,set:C,get:B,invalidate:()=>e(B()),advance:(H,q)=>t(H,q,B()),linear:a,flat:l,scene:Eu(new ls),camera:R,controls:null,raycaster:I,clock:x,mouse:new ie,vr:f,frameloop:m,onPointerMissed:v,performance:Nn(At({current:1,min:.5,max:1,debounce:200},p),{regress:()=>{const H=B();de&&clearTimeout(de),H.performance.current!==H.performance.min&&we(H.performance.min),de=setTimeout(()=>we(B().performance.max),H.performance.debounce)}}),size:{width:0,height:0},viewport:{initialDpr:L,dpr:L,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:K},setSize:(H,q)=>{const ee={width:H,height:q};C(ce=>({size:ee,viewport:At(At({},ce.viewport),K(R,j,ee))}))},setDpr:H=>C(q=>({viewport:Nn(At({},q.viewport),{dpr:p_(H)})})),setFrameloop:(H="always")=>C(()=>({frameloop:H})),events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:i,lastEvent:re.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(H,q=0)=>(C(({internal:ee})=>({internal:Nn(At({},ee),{priority:ee.priority+(q>0?1:0),subscribers:[...ee.subscribers,{ref:H,priority:q}].sort((ce,Ie)=>ce.priority-Ie.priority)})})),()=>{C(({internal:ee})=>({internal:Nn(At({},ee),{priority:ee.priority-(q>0?1:0),subscribers:ee.subscribers.filter(ce=>ce.ref!==H)})}))})}}}),A=y.getState();let w=A.size,T=A.viewport.dpr;return y.subscribe(()=>{const{camera:C,size:B,viewport:I,internal:k}=y.getState();(B!==w||I.dpr!==T)&&(!C.manual&&!(k.lastProps.camera instanceof Ks)&&(cB(C)?(C.left=B.width/-2,C.right=B.width/2,C.top=B.height/2,C.bottom=B.height/-2):C.aspect=B.width/B.height,C.updateProjectionMatrix(),C.updateMatrixWorld()),r.setPixelRatio(I.dpr),r.setSize(B.width,B.height),w=B,T=I.dpr)}),s&&A.setSize(s.width,s.height),y.subscribe(C=>e(C)),y};function dB(n,e){const t=e.length;return e.push(n),()=>void e.splice(t,1)}let So,m_=[],g_=[],KU=[];const QU=n=>dB(n,m_),I9=n=>dB(n,g_);function Of(n,e){for(So=0;So<n.length;So++)n[So](e)}function y_(n,e){let t=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(t=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),So=0;So<e.internal.subscribers.length;So++)e.internal.subscribers[So].ref.current(e,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function YU(n){let e=!1,t;function i(o){if(e=!0,t=0,Of(m_,o),n.forEach(a=>{const l=a.store.getState();l.internal.active&&(l.frameloop==="always"||l.internal.frames>0)&&(t+=y_(o,l))}),Of(g_,o),t>0)return requestAnimationFrame(i);Of(KU,o),e=!1}function r(o){if(!o)return n.forEach(a=>r(a.store.getState()));o.vr||!o.internal.active||o.frameloop==="never"||(o.internal.frames=Math.min(60,o.internal.frames+1),e||(e=!0,requestAnimationFrame(i)))}function s(o,a=!0,l){a&&Of(m_,o),l?y_(o,l):n.forEach(f=>y_(o,f.store.getState())),a&&Of(g_,o)}return{loop:i,invalidate:r,advance:s}}function qU(n){const{handlePointer:e}=GU(n),t={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};return{connected:!1,handlers:Object.keys(t).reduce((i,r)=>Nn(At({},i),{[r]:e(r)}),{}),connect:i=>{var r;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(a=>({events:Nn(At({},a.events),{connected:i})})),Object.entries((r=o==null?void 0:o.handlers)!=null?r:[]).forEach(([a,l])=>{const[f,h]=t[a];i.addEventListener(f,l,{passive:h})})},disconnect:()=>{const{set:i,events:r}=n.getState();if(r.connected){var s;Object.entries((s=r.handlers)!=null?s:[]).forEach(([o,a])=>{if(r&&r.connected instanceof HTMLElement){const[l]=t[o];r.connected.removeEventListener(l,a)}}),i(o=>({events:Nn(At({},o.events),{connected:!1})}))}}}}const v_=typeof window!="undefined"?re.exports.useLayoutEffect:re.exports.useEffect;function ZU({set:n}){return v_(()=>(n(new Promise(()=>null)),()=>n(!1)),[]),null}class hB extends re.exports.Component{constructor(...e){super(...e);this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}hB.getDerivedStateFromError=()=>({error:!0});const D9=re.exports.forwardRef(function(m,h){var d=m,{children:e,fallback:t,tabIndex:i,resize:r,id:s,style:o,className:a,events:l}=d,f=_i(d,["children","fallback","tabIndex","resize","id","style","className","events"]);const[p,{width:x,height:_}]=DU(At({scroll:!0,debounce:{scroll:50,resize:0}},r)),M=re.exports.useRef(null),[v,y]=re.exports.useState(!1),[A,w]=re.exports.useState(!1);if(v)throw v;if(A)throw A;return v_(()=>{x>0&&_>0&&nG(re.exports.createElement(hB,{set:w},re.exports.createElement(re.exports.Suspense,{fallback:re.exports.createElement(ZU,{set:y})},e)),M.current,Nn(At({},f),{size:{width:x,height:_},events:l||qU}))},[x,_,e]),v_(()=>{const T=M.current;return()=>vB(T)},[]),re.exports.createElement("div",{ref:p,id:s,className:a,tabIndex:i,style:At({position:"relative",width:"100%",height:"100%",overflow:"hidden"},o)},re.exports.createElement("canvas",{ref:u_([M,h]),style:{display:"block"}},t))});function pB(){const n=re.exports.useContext(fB);if(!n)throw"R3F hooks can only be used within the Canvas component!";return n}function dr(n=t=>t,e){return pB()(n,e)}function x_(n,e=0){const t=pB().getState().internal.subscribe,i=re.exports.useRef(n);return re.exports.useLayoutEffect(()=>void(i.current=n),[n]),re.exports.useLayoutEffect(()=>t(i,e),[e,t]),null}function $U(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function mB(n,e){return function(t,...i){const r=new t;return n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,$U(l.scene)),o(l)},e,l=>a(`Could not load ${s}: ${l.message}`)))))}}function kf(n,e,t,i){const r=Array.isArray(e)?e:[e],s=xs(mB(t,i),n,...r);return Array.isArray(e)?s:s[0]}kf.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return xs.preload(mB(t),n,...i)};kf.clear=function(n,e){const t=Array.isArray(e)?e:[e];return xs.clear(n,...t)};const Uf=new Map,gB=["legacy","blocking","concurrent"],{invalidate:eG,advance:yB}=YU(Uf),{reconciler:Gf,applyProps:__}=JU(),tG=(n,e)=>{const t=typeof n=="function"?n(e):n;if(jU(t))return t;const i=new Rt(At({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0},n));return i.outputEncoding=Fi,i.toneMapping=g0,n&&__(i,n),i};function nG(n,e,l={}){var f=l,{gl:t,size:i,mode:r=gB[1],events:s,onCreated:o}=f,a=_i(f,["gl","size","mode","events","onCreated"]);var h;if(!i){var m,d,p,x;i={width:(m=(d=e.parentElement)==null?void 0:d.clientWidth)!=null?m:0,height:(p=(x=e.parentElement)==null?void 0:x.clientHeight)!=null?p:0}}let _=Uf.get(e),M=_==null?void 0:_.fiber,v=_==null?void 0:_.store,y=(h=v)==null?void 0:h.getState();if(M&&y&&(a.dpr!==void 0&&!Ot.equ(y.viewport.dpr,p_(a.dpr))&&y.setDpr(a.dpr),(y.size.width!==i.width||y.size.height!==i.height)&&y.setSize(i.width,i.height),y.frameloop!==a.frameloop&&y.setFrameloop(a.frameloop),a.linear!==y.internal.lastProps.linear&&(vB(e),M=void 0)),!M){const A=tG(t,e);a.vr&&(A.xr.enabled=!0,A.setAnimationLoop(T=>yB(T,!0))),v=XU(__,eG,yB,At({gl:A,size:i},a));const w=v.getState();M=Gf.createContainer(v,gB.indexOf(r),!1,null),Uf.set(e,{fiber:M,store:v}),s&&w.set({events:s(v)})}if(v&&M)return Gf.updateContainer(re.exports.createElement(iG,{store:v,element:n,onCreated:o,target:e}),M,null,()=>{}),v;throw"Error creating root!"}function iG({store:n,element:e,onCreated:t,target:i}){return re.exports.useEffect(()=>{const r=n.getState();r.set(s=>({internal:Nn(At({},s.internal),{active:!0})})),r.events.connect==null||r.events.connect(i),t&&t(r)},[]),re.exports.createElement(fB.Provider,{value:n},e)}function vB(n,e){const t=Uf.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Gf.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{var s,o,a;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),rG(r),Uf.delete(n),e&&e(n)},500)})}}function rG(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const i in n){var e,t;(e=(t=i).dispose)==null||e.call(t),delete n[i]}}Gf.act;Gf.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"});function Ra(){return Ra=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ra.apply(this,arguments)}let Dm=Gr();const ot=n=>Hf(n,Dm);let Fm=Gr();ot.write=n=>Hf(n,Fm);let Nm=Gr();ot.onStart=n=>Hf(n,Nm);let M_=Gr();ot.onFrame=n=>Hf(n,M_);let w_=Gr();ot.onFinish=n=>Hf(n,w_);let La=[];ot.setTimeout=(n,e)=>{let t=ot.now()+e,i=()=>{let s=La.findIndex(o=>o.cancel==i);~s&&La.splice(s,1),To.count-=~s?1:0},r={time:t,handler:n,cancel:i};return La.splice(xB(t),0,r),To.count+=1,_B(),r};let xB=n=>~(~La.findIndex(e=>e.time>n)||~La.length);ot.cancel=n=>{Dm.delete(n),Fm.delete(n)};ot.sync=n=>{S_=!0,ot.batchedUpdates(n),S_=!1};ot.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,ot.onStart(t)}return i.handler=n,i.cancel=()=>{Nm.delete(t),e=null},i};let A_=typeof window!="undefined"?window.requestAnimationFrame:()=>{};ot.use=n=>A_=n;ot.now=typeof performance!="undefined"?()=>performance.now():Date.now;ot.batchedUpdates=n=>n();ot.catch=console.error;ot.frameLoop="always";ot.advance=()=>{ot.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):wB()};let Eo=-1,S_=!1;function Hf(n,e){S_?(e.delete(n),n(0)):(e.add(n),_B())}function _B(){Eo<0&&(Eo=0,ot.frameLoop!=="demand"&&A_(MB))}function MB(){~Eo&&(A_(MB),ot.batchedUpdates(wB))}function wB(){let n=Eo;Eo=ot.now();let e=xB(Eo);e&&(AB(La.splice(0,e),t=>t.handler()),To.count-=e),Nm.flush(),Dm.flush(n?Math.min(64,Eo-n):16.667),M_.flush(),Fm.flush(),w_.flush()}function Gr(){let n=new Set,e=n;return{add(t){To.count+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return To.count-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,To.count-=e.size,AB(e,i=>i(t)&&n.add(i)),To.count+=n.size,e=n)}}}function AB(n,e){n.forEach(t=>{try{e(t)}catch(i){ot.catch(i)}})}const To={count:0,clear(){Eo=-1,La=[],Nm=Gr(),Dm=Gr(),M_=Gr(),Fm=Gr(),w_=Gr(),To.count=0}};function E_(){}const sG=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Ee={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function _s(n,e){if(Ee.arr(n)){if(!Ee.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}const Lt=(n,e)=>n.forEach(e);function Ms(n,e,t){if(Ee.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}const Vi=n=>Ee.und(n)?[]:Ee.arr(n)?n:[n];function zf(n,e){if(n.size){const t=Array.from(n);n.clear(),Lt(t,e)}}const Vf=(n,...e)=>zf(n,t=>t(...e));let T_,SB,Co=null,EB=!1,C_=E_;const oG=n=>{n.to&&(SB=n.to),n.now&&(ot.now=n.now),n.colors!==void 0&&(Co=n.colors),n.skipAnimation!=null&&(EB=n.skipAnimation),n.createStringInterpolator&&(T_=n.createStringInterpolator),n.requestAnimationFrame&&ot.use(n.requestAnimationFrame),n.batchedUpdates&&(ot.batchedUpdates=n.batchedUpdates),n.willAdvance&&(C_=n.willAdvance),n.frameLoop&&(ot.frameLoop=n.frameLoop)};var Hr=Object.freeze({__proto__:null,get createStringInterpolator(){return T_},get to(){return SB},get colors(){return Co},get skipAnimation(){return EB},get willAdvance(){return C_},assign:oG});const Wf=new Set;let Wi=[],b_=[],Om=0;const km={get idle(){return!Wf.size&&!Wi.length},start(n){Om>n.priority?(Wf.add(n),ot.onStart(aG)):(TB(n),ot(B_))},advance:B_,sort(n){if(Om)ot.onFrame(()=>km.sort(n));else{const e=Wi.indexOf(n);~e&&(Wi.splice(e,1),CB(n))}},clear(){Wi=[],Wf.clear()}};function aG(){Wf.forEach(TB),Wf.clear(),ot(B_)}function TB(n){Wi.includes(n)||CB(n)}function CB(n){Wi.splice(lG(Wi,e=>e.priority>n.priority),0,n)}function B_(n){const e=b_;for(let t=0;t<Wi.length;t++){const i=Wi[t];Om=i.priority,i.idle||(C_(i),i.advance(n),i.idle||e.push(i))}return Om=0,b_=Wi,b_.length=0,Wi=e,Wi.length>0}function lG(n,e){const t=n.findIndex(e);return t<0?n.length:t}const uG={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},hr="[-+]?\\d*\\.?\\d+",Um=hr+"%";function Gm(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}const cG=new RegExp("rgb"+Gm(hr,hr,hr)),fG=new RegExp("rgba"+Gm(hr,hr,hr,hr)),dG=new RegExp("hsl"+Gm(hr,Um,Um)),hG=new RegExp("hsla"+Gm(hr,Um,Um,hr)),pG=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mG=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,gG=/^#([0-9a-fA-F]{6})$/,yG=/^#([0-9a-fA-F]{8})$/;function vG(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=gG.exec(n))?parseInt(e[1]+"ff",16)>>>0:Co&&Co[n]!==void 0?Co[n]:(e=cG.exec(n))?(Tu(e[1])<<24|Tu(e[2])<<16|Tu(e[3])<<8|255)>>>0:(e=fG.exec(n))?(Tu(e[1])<<24|Tu(e[2])<<16|Tu(e[3])<<8|RB(e[4]))>>>0:(e=pG.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=yG.exec(n))?parseInt(e[1],16)>>>0:(e=mG.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=dG.exec(n))?(bB(BB(e[1]),Hm(e[2]),Hm(e[3]))|255)>>>0:(e=hG.exec(n))?(bB(BB(e[1]),Hm(e[2]),Hm(e[3]))|RB(e[4]))>>>0:null}function R_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function bB(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=R_(r,i,n+1/3),o=R_(r,i,n),a=R_(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Tu(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function BB(n){return(parseFloat(n)%360+360)%360/360}function RB(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function Hm(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function LB(n){let e=vG(n);if(e===null)return n;e=e||0;let t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}const Jf=(n,e,t)=>{if(Ee.fun(n))return n;if(Ee.arr(n))return Jf({range:n,output:e,extrapolate:t});if(Ee.str(n.output[0]))return T_(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(f=>f);return f=>{const h=_G(f,s);return xG(f,s[h],s[h+1],r[h],r[h+1],l,o,a,i.map)}};function xG(n,e,t,i,r,s,o,a,l){let f=l?l(n):n;if(f<e){if(o==="identity")return f;o==="clamp"&&(f=e)}if(f>t){if(a==="identity")return f;a==="clamp"&&(f=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?f=-f:t===1/0?f=f-e:f=(f-e)/(t-e),f=s(f),i===-1/0?f=-f:r===1/0?f=f+i:f=f*(r-i)+i,f)}function _G(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}function L_(){return L_=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},L_.apply(this,arguments)}const Cu=Symbol.for("FluidValue.get"),Pa=Symbol.for("FluidValue.observers"),zr=n=>Boolean(n&&n[Cu]),Ji=n=>n&&n[Cu]?n[Cu]():n,PB=n=>n[Pa]||null;function MG(n,e){n.eventObserved?n.eventObserved(e):n(e)}function zm(n,e){let t=n[Pa];t&&t.forEach(i=>{MG(i,e)})}class wG{constructor(e){if(this[Cu]=void 0,this[Pa]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");AG(this,e)}}const AG=(n,e)=>IB(n,Cu,e);function jf(n,e){if(n[Cu]){let t=n[Pa];t||IB(n,Pa,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function Vm(n,e){let t=n[Pa];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[Pa]=null,n.observerRemoved&&n.observerRemoved(i,e)}}const IB=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Wm=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,SG=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,DB=new RegExp(`(${Wm.source})(%|[a-z]+)`,"i");let P_;const EG=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,TG=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,FB=n=>{P_||(P_=Co?new RegExp(`(${Object.keys(Co).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>Ji(s).replace(SG,LB).replace(P_,LB)),t=e.map(s=>s.match(Wm).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Jf(L_({},n,{output:s})));return s=>{var o;const a=!DB.test(e[0])&&((o=e.find(f=>DB.test(f)))==null?void 0:o.replace(Wm,""));let l=0;return e[0].replace(Wm,()=>`${r[l++](s)}${a||""}`).replace(EG,TG)}},I_="react-spring: ",NB=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${I_}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},CG=NB(console.warn);function bG(){CG(`${I_}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const BG=NB(console.warn);function RG(){BG(`${I_}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Jm(n){return Ee.str(n)&&(n[0]=="#"||/\d/.test(n)||n in(Co||{}))}const D_=n=>re.exports.useEffect(n,LG),LG=[];function OB(){const n=re.exports.useState()[1],e=re.exports.useState(PG)[0];return D_(e.unmount),()=>{e.current&&n({})}}function PG(){const n={current:!0,unmount:()=>()=>{n.current=!1}};return n}function IG(n,e){const[t]=re.exports.useState(()=>({inputs:e,result:n()})),i=re.exports.useRef(),r=i.current;let s=r;return s?Boolean(e&&s.inputs&&DG(e,s.inputs))||(s={inputs:e,result:n()}):s=t,re.exports.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function DG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function kB(n){const e=re.exports.useRef();return re.exports.useEffect(()=>{e.current=n}),e.current}const UB=typeof window!="undefined"&&window.document&&window.document.createElement?re.exports.useLayoutEffect:re.exports.useEffect,Xf=Symbol.for("Animated:node"),FG=n=>!!n&&n[Xf]===n,Vr=n=>n&&n[Xf],F_=(n,e)=>sG(n,Xf,e),jm=n=>n&&n[Xf]&&n[Xf].getPayload();class GB{constructor(){this.payload=void 0,F_(this,this)}getPayload(){return this.payload||[]}}class bu extends GB{constructor(e){super();this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,Ee.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new bu(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Ee.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Ee.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class Bu extends bu{constructor(e){super(0);this._string=null,this._toString=void 0,this._toString=Jf({output:[e,e]})}static create(e){return new Bu(e)}getValue(){let e=this._string;return e==null?this._string=this._toString(this._value):e}setValue(e){if(Ee.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Jf({output:[this.getValue(),e]})),this._value=0,super.reset()}}const Xm={dependencies:null};class N_ extends GB{constructor(e){super();this.source=e,this.setValue(e)}getValue(e){const t={};return Ms(this.source,(i,r)=>{FG(i)?t[r]=i.getValue(e):zr(i)?t[r]=Ji(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Lt(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Ms(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Xm.dependencies&&zr(e)&&Xm.dependencies.add(e);const t=jm(e);t&&Lt(t,i=>this.add(i))}}class O_ extends N_{constructor(e){super(e)}static create(e){return new O_(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(NG)),!0)}}function NG(n){return(Jm(n)?Bu:bu).create(n)}function k_(n){const e=Vr(n);return e?e.constructor:Ee.arr(n)?O_:Jm(n)?Bu:bu}function Km(){return Km=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Km.apply(this,arguments)}const HB=(n,e)=>{const t=!Ee.fun(n)||n.prototype&&n.prototype.isReactComponent;return re.exports.forwardRef((i,r)=>{const s=re.exports.useRef(null),o=t&&re.exports.useCallback(x=>{s.current=UG(r,x)},[r]),[a,l]=kG(i,e),f=OB(),h=()=>{const x=s.current;if(t&&!x)return;(x?e.applyAnimatedValues(x,a.getValue(!0)):!1)===!1&&f()},m=new OG(h,l),d=re.exports.useRef();UB(()=>{const x=d.current;d.current=m,Lt(l,_=>jf(_,m)),x&&(Lt(x.deps,_=>Vm(_,x)),ot.cancel(x.update))}),re.exports.useEffect(h,[]),D_(()=>()=>{const x=d.current;Lt(x.deps,_=>Vm(_,x))});const p=e.getComponentProps(a.getValue());return re.exports.createElement(n,Km({},p,{ref:o}))})};class OG{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&ot.write(this.update)}}function kG(n,e){const t=new Set;return Xm.dependencies=t,n.style&&(n=Km({},n,{style:e.createAnimatedStyle(n.style)})),n=new N_(n),Xm.dependencies=null,[n,t]}function UG(n,e){return n&&(Ee.fun(n)?n(e):n.current=e),e}const zB=Symbol.for("AnimatedComponent"),GG=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new N_(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=VB(o)||"Anonymous";return Ee.str(o)?o=s[o]||(s[o]=HB(o,r)):o=o[zB]||(o[zB]=HB(o,r)),o.displayName=`Animated(${a})`,o};return Ms(n,(o,a)=>{Ee.arr(n)&&(a=VB(o)),s[a]=s(o)}),{animated:s}},VB=n=>Ee.str(n)?n:n&&Ee.str(n.displayName)?n.displayName:Ee.fun(n)&&n.name||null;function Ln(){return Ln=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ln.apply(this,arguments)}function Ia(n,...e){return Ee.fun(n)?n(...e):n}const Kf=(n,e)=>n===!0||!!(e&&n&&(Ee.fun(n)?n(e):Vi(n).includes(e))),WB=(n,e)=>Ee.obj(n)?e&&n[e]:n,JB=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,HG=n=>n,U_=(n,e=HG)=>{let t=zG;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);Ee.und(s)||(i[r]=s)}return i},zG=["config","onProps","onStart","onChange","onPause","onResume","onRest"],VG={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function WG(n){const e={};let t=0;if(Ms(n,(i,r)=>{VG[r]||(e[r]=i,t++)}),t)return e}function jB(n){const e=WG(n);if(e){const t={to:e};return Ms(n,(i,r)=>r in e||(t[r]=i)),t}return Ln({},n)}function Qf(n){return n=Ji(n),Ee.arr(n)?n.map(Qf):Jm(n)?Hr.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function JG(n){for(const e in n)return!0;return!1}function G_(n){return Ee.fun(n)||Ee.arr(n)&&Ee.obj(n[0])}function jG(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function XG(n,e){if(e&&n.ref!==e){var t;(t=n.ref)==null||t.delete(n),e.add(n),n.ref=e}}const KG={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},QG=n=>n,H_=Ln({},KG.default,{mass:1,damping:1,easing:QG,clamp:!1});class YG{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,H_)}}function qG(n,e,t){t&&(t=Ln({},t),XB(t,e),e=Ln({},t,e)),XB(n,e),Object.assign(n,e);for(const o in H_)n[o]==null&&(n[o]=H_[o]);let{mass:i,frequency:r,damping:s}=n;return Ee.und(r)||(r<.01&&(r=.01),s<0&&(s=0),n.tension=Math.pow(2*Math.PI/r,2)*i,n.friction=4*Math.PI*s*i/r),n}function XB(n,e){if(!Ee.und(e.decay))n.duration=void 0;else{const t=!Ee.und(e.tension)||!Ee.und(e.friction);(t||!Ee.und(e.frequency)||!Ee.und(e.damping)||!Ee.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}const KB=[];class ZG{constructor(){this.changed=!1,this.values=KB,this.toValues=null,this.fromValues=KB,this.to=void 0,this.from=void 0,this.config=new YG,this.immediate=!1}}function QB(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{var l;let f,h,m=Kf((l=t.cancel)!=null?l:i==null?void 0:i.cancel,e);if(m)x();else{Ee.und(t.pause)||(r.paused=Kf(t.pause,e));let _=i==null?void 0:i.pause;_!==!0&&(_=r.paused||Kf(_,e)),f=Ia(t.delay||0,e),_?(r.resumeQueue.add(p),s.pause()):(s.resume(),p())}function d(){r.resumeQueue.add(p),r.timeouts.delete(h),h.cancel(),f=h.time-ot.now()}function p(){f>0&&!Hr.skipAnimation?(h=ot.setTimeout(x,f),r.pauseQueue.add(d),r.timeouts.add(h)):x()}function x(){r.pauseQueue.delete(d),r.timeouts.delete(h),n<=(r.cancelId||0)&&(m=!0);try{s.start(Ln({},t,{callId:n,cancel:m}),o)}catch(_){a(_)}}})}const z_=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?Ru(n.get()):e.every(t=>t.noop)?YB(n.get()):pr(n.get(),e.every(t=>t.finished)),YB=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),pr=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),Ru=n=>({value:n,cancelled:!0,finished:!1});function qB(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const f=U_(e,(M,v)=>v==="onRest"?void 0:M);let h,m;const d=new Promise((M,v)=>(h=M,m=v)),p=M=>{const v=r<=(t.cancelId||0)&&Ru(i)||r!==t.asyncId&&pr(i,!1);if(v)throw M.result=v,m(M),M},x=(M,v)=>{const y=new ZB,A=new $B;return(async()=>{if(Hr.skipAnimation)throw Yf(t),A.result=pr(i,!1),m(A),A;p(y);const w=Ee.obj(M)?Ln({},M):Ln({},v,{to:M});w.parentId=r,Ms(f,(C,B)=>{Ee.und(w[B])&&(w[B]=C)});const T=await i.start(w);return p(y),t.paused&&await new Promise(C=>{t.resumeQueue.add(C)}),T})()};let _;if(Hr.skipAnimation)return Yf(t),pr(i,!1);try{let M;Ee.arr(n)?M=(async v=>{for(const y of v)await x(y)})(n):M=Promise.resolve(n(x,i.stop.bind(i))),await Promise.all([M.then(h),d]),_=pr(i.get(),!0,!1)}catch(M){if(M instanceof ZB)_=M.result;else if(M instanceof $B)_=M.result;else throw M}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return Ee.fun(o)&&ot.batchedUpdates(()=>{o(_,i,i.item)}),_})()}function Yf(n,e){zf(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}class ZB extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.");this.result=void 0}}class $B extends Error{constructor(){super("SkipAnimationSignal");this.result=void 0}}const V_=n=>n instanceof W_;let $G=1;class W_ extends wG{constructor(...e){super(...e);this.id=$G++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Vr(this);return e&&e.getValue()}to(...e){return Hr.to(this,e)}interpolate(...e){return bG(),Hr.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){zm(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||km.sort(this),zm(this,{type:"priority",parent:this,priority:e})}}const Da=Symbol.for("SpringPhase"),eR=1,J_=2,j_=4,X_=n=>(n[Da]&eR)>0,bo=n=>(n[Da]&J_)>0,qf=n=>(n[Da]&j_)>0,tR=(n,e)=>e?n[Da]|=J_|eR:n[Da]&=~J_,nR=(n,e)=>e?n[Da]|=j_:n[Da]&=~j_;class eH extends W_{constructor(e,t){super();if(this.key=void 0,this.animation=new ZG,this.queue=void 0,this.defaultProps={},this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Ee.und(e)||!Ee.und(t)){const i=Ee.obj(e)?Ln({},e):Ln({},t,{from:e});Ee.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(bo(this)||this._state.asyncTo)||qf(this)}get goal(){return Ji(this.animation.to)}get velocity(){const e=Vr(this);return e instanceof bu?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return X_(this)}get isAnimating(){return bo(this)}get isPaused(){return qf(this)}advance(e){let t=!0,i=!1;const r=this.animation;let{config:s,toValues:o}=r;const a=jm(r.to);!a&&zr(r.to)&&(o=Vi(Ji(r.to))),r.values.forEach((h,m)=>{if(h.done)return;const d=h.constructor==Bu?1:a?a[m].lastPosition:o[m];let p=r.immediate,x=d;if(!p){if(x=h.lastPosition,s.tension<=0){h.done=!0;return}let _=h.elapsedTime+=e;const M=r.fromValues[m],v=h.v0!=null?h.v0:h.v0=Ee.arr(s.velocity)?s.velocity[m]:s.velocity;let y;if(Ee.und(s.duration))if(s.decay){const A=s.decay===!0?.998:s.decay,w=Math.exp(-(1-A)*_);x=M+v/(1-A)*(1-w),p=Math.abs(h.lastPosition-x)<.1,y=v*w}else{y=h.lastVelocity==null?v:h.lastVelocity;const A=s.precision||(M==d?.005:Math.min(1,Math.abs(d-M)*.001)),w=s.restVelocity||A/10,T=s.clamp?0:s.bounce,C=!Ee.und(T),B=M==d?h.v0>0:M<d;let I,k=!1;const G=1,O=Math.ceil(e/G);for(let R=0;R<O&&(I=Math.abs(y)>w,!(!I&&(p=Math.abs(d-x)<=A,p)));++R){C&&(k=x==d||x>d==B,k&&(y=-y*T,x=d));const L=-s.tension*1e-6*(x-d),W=-s.friction*.001*y,j=(L+W)/s.mass;y=y+j*G,x=x+y*G}}else{let A=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,h.durationProgress>0&&(h.elapsedTime=s.duration*h.durationProgress,_=h.elapsedTime+=e)),A=(s.progress||0)+_/this._memoizedDuration,A=A>1?1:A<0?0:A,h.durationProgress=A),x=M+s.easing(A)*(d-M),y=(x-h.lastPosition)/e,p=A==1}h.lastVelocity=y,Number.isNaN(x)&&(console.warn("Got NaN while animating:",this),p=!0)}a&&!a[m].done&&(p=!1),p?h.done=!0:t=!1,h.setValue(x,s.round)&&(i=!0)});const l=Vr(this),f=l.getValue();if(t){const h=Ji(r.to);(f!==h||i)&&!s.decay?(l.setValue(h),this._onChange(h)):i&&s.decay&&this._onChange(f),this._stop()}else i&&this._onChange(f)}set(e){return ot.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(bo(this)){const{to:e,config:t}=this.animation;ot.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return Ee.und(e)?(i=this.queue||[],this.queue=[]):i=[Ee.obj(e)?e:Ln({},t,{to:e})],Promise.all(i.map(r=>this._update(r))).then(r=>z_(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Yf(this._state,e&&this._lastCallId),ot.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:r}=e;i=Ee.obj(i)?i[t]:i,(i==null||G_(i))&&(i=void 0),r=Ee.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:i,from:r};return X_(this)||(e.reverse&&([i,r]=[r,i]),r=Ji(r),Ee.und(r)?Vr(this)||this._set(i):this._set(r)),s}_update(e,t){let i=Ln({},e);const{key:r,defaultProps:s}=this;i.default&&Object.assign(s,U_(i,(l,f)=>/^on/.test(f)?WB(l,r):l)),sR(this,i,"onProps"),ed(this,"onProps",i,this);const o=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return QB(++this._lastCallId,{key:r,props:i,defaultProps:s,state:a,actions:{pause:()=>{qf(this)||(nR(this,!0),Vf(a.pauseQueue),ed(this,"onPause",pr(this,Zf(this,this.animation.to)),this))},resume:()=>{qf(this)&&(nR(this,!1),bo(this)&&this._resume(),Vf(a.resumeQueue),ed(this,"onResume",pr(this,Zf(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(i.loop&&l.finished&&!(t&&l.noop)){const f=iR(i);if(f)return this._update(f,!0)}return l})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(Ru(this));const r=!Ee.und(e.to),s=!Ee.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(Ru(this));const{key:o,defaultProps:a,animation:l}=this,{to:f,from:h}=l;let{to:m=f,from:d=h}=e;s&&!r&&(!t.default||Ee.und(m))&&(m=d),t.reverse&&([m,d]=[d,m]);const p=!_s(d,h);p&&(l.from=d),d=Ji(d);const x=!_s(m,f);x&&this._focus(m);const _=G_(t.to),{config:M}=l,{decay:v,velocity:y}=M;(r||s)&&(M.velocity=0),t.config&&!_&&qG(M,Ia(t.config,o),t.config!==a.config?Ia(a.config,o):void 0);let A=Vr(this);if(!A||Ee.und(m))return i(pr(this,!0));const w=Ee.und(t.reset)?s&&!t.default:!Ee.und(d)&&Kf(t.reset,o),T=w?d:this.get(),C=Qf(m),B=Ee.num(C)||Ee.arr(C)||Jm(C),I=!_&&(!B||Kf(a.immediate||t.immediate,o));if(x){const R=k_(m);if(R!==A.constructor)if(I)A=this._set(C);else throw Error(`Cannot animate between ${A.constructor.name} and ${R.name}, as the "to" prop suggests`)}const k=A.constructor;let G=zr(m),O=!1;if(!G){const R=w||!X_(this)&&p;(x||R)&&(O=_s(Qf(T),C),G=!O),(!_s(l.immediate,I)&&!I||!_s(M.decay,v)||!_s(M.velocity,y))&&(G=!0)}if(O&&bo(this)&&(l.changed&&!w?G=!0:G||this._stop(f)),!_&&((G||zr(f))&&(l.values=A.getPayload(),l.toValues=zr(m)?null:k==Bu?[1]:Vi(C)),l.immediate!=I&&(l.immediate=I,!I&&!w&&this._set(f)),G)){const{onRest:R}=l;Lt(nH,W=>sR(this,t,W));const L=pr(this,Zf(this,f));Vf(this._pendingCalls,L),this._pendingCalls.add(i),l.changed&&ot.batchedUpdates(()=>{l.changed=!w,R==null||R(L,this),w?Ia(a.onRest,L):l.onStart==null||l.onStart(L,this)})}w&&this._set(T),_?i(qB(t.to,t,this._state,this)):G?this._start():bo(this)&&!x?this._pendingCalls.add(i):i(YB(T))}_focus(e){const t=this.animation;e!==t.to&&(PB(this)&&this._detach(),t.to=e,PB(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;zr(t)&&(jf(t,this),V_(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;zr(e)&&Vm(e,this)}_set(e,t=!0){const i=Ji(e);if(!Ee.und(i)){const r=Vr(this);if(!r||!_s(i,r.getValue())){const s=k_(i);!r||r.constructor!=s?F_(this,s.create(i)):r.setValue(i),r&&ot.batchedUpdates(()=>{this._onChange(i,t)})}}return Vr(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,ed(this,"onStart",pr(this,Zf(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Ia(this.animation.onChange,e,this)),Ia(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Vr(this).reset(Ji(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),bo(this)||(tR(this,!0),qf(this)||this._resume())}_resume(){Hr.skipAnimation?this.finish():km.start(this)}_stop(e,t){if(bo(this)){tR(this,!1);const i=this.animation;Lt(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),zm(this,{type:"idle",parent:this});const r=t?Ru(this.get()):pr(this.get(),Zf(this,e!=null?e:i.to));Vf(this._pendingCalls,r),i.changed&&(i.changed=!1,ed(this,"onRest",r,this))}}}function Zf(n,e){const t=Qf(e),i=Qf(n.get());return _s(i,t)}function iR(n,e=n.loop,t=n.to){let i=Ia(e);if(i){const r=i!==!0&&jB(i),s=(r||n).reverse,o=!r||r.reset;return $f(Ln({},n,{loop:e,default:!1,pause:void 0,to:!s||G_(t)?t:void 0,from:o?n.from:void 0,reset:o},r))}}function $f(n){const{to:e,from:t}=n=jB(n),i=new Set;return Ee.obj(e)&&rR(e,i),Ee.obj(t)&&rR(t,i),n.keys=i.size?Array.from(i):null,n}function tH(n){const e=$f(n);return Ee.und(e.default)&&(e.default=U_(e)),e}function rR(n,e){Ms(n,(t,i)=>t!=null&&e.add(i))}const nH=["onStart","onRest","onChange","onPause","onResume"];function sR(n,e,t){n.animation[t]=e[t]!==JB(e,t)?WB(e[t],n.key):void 0}function ed(n,e,...t){var i,r,s,o;(i=(r=n.animation)[e])==null||i.call(r,...t),(s=(o=n.defaultProps)[e])==null||s.call(o,...t)}const iH=["onStart","onChange","onRest"];let rH=1;class sH{constructor(e,t){this.id=rH++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(Ln({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(const t in e){const i=e[t];Ee.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push($f(e)),this}start(e){let{queue:t}=this;return e?t=Vi(e).map($f):this.queue=[],this._flush?this._flush(this,t):(fR(this,t),K_(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const i=this.springs;Lt(Vi(t),r=>i[r].stop(!!e))}else Yf(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(Ee.und(e))this.start({pause:!0});else{const t=this.springs;Lt(Vi(e),i=>t[i].pause())}return this}resume(e){if(Ee.und(e))this.start({pause:!1});else{const t=this.springs;Lt(Vi(e),i=>t[i].resume())}return this}each(e){Ms(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,zf(e,([l,f])=>{f.value=this.get(),l(f,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&t.size&&zf(t,([l,f])=>{f.value=a,l(f,this,this._item)}),o&&(this._started=!1,zf(i,([l,f])=>{f.value=a,l(f,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;ot.onFrame(this._onFrame)}}function K_(n,e){return Promise.all(e.map(t=>oR(n,t))).then(t=>z_(n,t))}async function oR(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,f=Ee.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const h=Ee.arr(r)||Ee.fun(r)?r:void 0;h?(e.to=void 0,e.onRest=void 0,f&&(f.onRest=void 0)):Lt(iH,_=>{const M=e[_];if(Ee.fun(M)){const v=n._events[_];e[_]=({finished:y,cancelled:A})=>{const w=v.get(M);w?(y||(w.finished=!1),A&&(w.cancelled=!0)):v.set(M,{value:null,finished:y||!1,cancelled:A||!1})},f&&(f[_]=e[_])}});const m=n._state;e.pause===!m.paused?(m.paused=e.pause,Vf(e.pause?m.pauseQueue:m.resumeQueue)):m.paused&&(e.pause=!0);const d=(i||Object.keys(n.springs)).map(_=>n.springs[_].start(e)),p=e.cancel===!0||JB(e,"cancel")===!0;(h||p&&m.asyncId)&&d.push(QB(++n._lastAsyncId,{props:e,state:m,actions:{pause:E_,resume:E_,start(_,M){p?(Yf(m,n._lastAsyncId),M(Ru(n))):(_.onRest=a,M(qB(h,_,m,n)))}}})),m.paused&&await new Promise(_=>{m.resumeQueue.add(_)});const x=z_(n,await Promise.all(d));if(o&&x.finished&&!(t&&x.noop)){const _=iR(e,o,r);if(_)return fR(n,[_]),oR(n,_,!0)}return l&&ot.batchedUpdates(()=>l(x,n,n.item)),x}function aR(n,e){const t=Ln({},n.springs);return e&&Lt(Vi(e),i=>{Ee.und(i.keys)&&(i=$f(i)),Ee.obj(i.to)||(i=Ln({},i,{to:void 0})),cR(t,i,r=>uR(r))}),lR(n,t),t}function lR(n,e){Ms(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,jf(t,n))})}function uR(n,e){const t=new eH;return t.key=n,e&&jf(t,e),t}function cR(n,e,t){e.keys&&Lt(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function fR(n,e){Lt(e,t=>{cR(n.springs,t,i=>uR(i,n))})}function oH(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}const aH=["children"],Qm=n=>{let{children:e}=n,t=oH(n,aH);const i=re.exports.useContext(Ym),r=t.pause||!!i.pause,s=t.immediate||!!i.immediate;t=IG(()=>({pause:r,immediate:s}),[r,s]);const{Provider:o}=Ym;return re.exports.createElement(o,{value:t},e)},Ym=lH(Qm,{});Qm.Provider=Ym.Provider;Qm.Consumer=Ym.Consumer;function lH(n,e){return Object.assign(n,re.exports.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}const uH=()=>{const n=[],e=function(r){RG();const s=[];return Lt(n,(o,a)=>{if(Ee.und(r))s.push(o.start());else{const l=t(r,o,a);l&&s.push(o.start(l))}}),s};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return Lt(n,i=>i.pause(...arguments)),this},e.resume=function(){return Lt(n,i=>i.resume(...arguments)),this},e.set=function(i){Lt(n,r=>r.set(i))},e.start=function(i){const r=[];return Lt(n,(s,o)=>{if(Ee.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return Lt(n,i=>i.stop(...arguments)),this},e.update=function(i){return Lt(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(r,s,o){return Ee.fun(r)?r(o,s):r};return e._getProps=t,e};function cH(n,e,t){const i=Ee.fun(e)&&e;i&&!t&&(t=[]);const r=re.exports.useMemo(()=>i||arguments.length==3?uH():void 0,[]),s=re.exports.useRef(0),o=OB(),a=re.exports.useMemo(()=>({ctrls:[],queue:[],flush(v,y){const A=aR(v,y);return s.current>0&&!a.queue.length&&!Object.keys(A).some(T=>!v.springs[T])?K_(v,y):new Promise(T=>{lR(v,A),a.queue.push(()=>{T(K_(v,y))}),o()})}}),[]),l=re.exports.useRef([...a.ctrls]),f=[],h=kB(n)||0;re.exports.useMemo(()=>{Lt(l.current.slice(n,h),v=>{jG(v,r),v.stop(!0)}),l.current.length=n,m(h,n)},[n]),re.exports.useMemo(()=>{m(0,Math.min(h,n))},t);function m(v,y){for(let A=v;A<y;A++){const w=l.current[A]||(l.current[A]=new sH(null,a.flush)),T=i?i(A,w):e[A];T&&(f[A]=tH(T))}}const d=l.current.map((v,y)=>aR(v,f[y])),p=re.exports.useContext(Qm),x=kB(p),_=p!==x&&JG(p);UB(()=>{s.current++,a.ctrls=l.current;const{queue:v}=a;v.length&&(a.queue=[],Lt(v,y=>y())),Lt(l.current,(y,A)=>{r==null||r.add(y),_&&y.start({default:p});const w=f[A];w&&(XG(y,w.ref),y.ref?y.queue.push(w):y.start(w))})}),D_(()=>()=>{Lt(a.ctrls,v=>v.stop(!0))});const M=d.map(v=>Ln({},v));return r?[M,r]:M}function fH(n,e){const t=Ee.fun(n),[[i],r]=cH(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[i,r]:i}let dR;(function(n){n.MOUNT="mount",n.ENTER="enter",n.UPDATE="update",n.LEAVE="leave"})(dR||(dR={}));class dH extends W_{constructor(e,t){super();this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Jf(...t);const i=this._get(),r=k_(i);F_(this,r.create(i))}advance(e){const t=this._get(),i=this.get();_s(t,i)||(Vr(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&hR(this._active)&&Q_(this)}_get(){const e=Ee.arr(this.source)?this.source.map(Ji):Vi(Ji(this.source));return this.calc(...e)}_start(){this.idle&&!hR(this._active)&&(this.idle=!1,Lt(jm(this),e=>{e.done=!1}),Hr.skipAnimation?(ot.batchedUpdates(()=>this.advance()),Q_(this)):km.start(this))}_attach(){let e=1;Lt(Vi(this.source),t=>{zr(t)&&jf(t,this),V_(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Lt(Vi(this.source),e=>{zr(e)&&Vm(e,this)}),this._active.clear(),Q_(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Vi(this.source).reduce((t,i)=>Math.max(t,(V_(i)?i.priority:0)+1),0))}}function hH(n){return n.idle!==!1}function hR(n){return!n.size||Array.from(n).every(hH)}function Q_(n){n.idle||(n.idle=!0,Lt(jm(n),e=>{e.done=!0}),zm(n,{type:"idle",parent:n}))}Hr.assign({createStringInterpolator:FB,to:(n,e)=>new dH(n,e)});const pH=["primitive"].concat(Object.keys(YE).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Hr.assign({createStringInterpolator:FB,colors:uG,frameLoop:"demand"});QU(()=>{ot.advance()});const mH=GG(pH,{applyAnimatedValues:__}),gH=mH.animated;function yH(n,e,t){return Math.max(e,Math.min(n,t))}const Yt={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function pR(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function mR(n,e,t,i=.15){return i===0?yH(n,e,t):n<e?-pR(e-n,t-e,i)+e:n>t?+pR(n-t,t-e,i)+t:n}function vH(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[mR(e,s,o,i),mR(t,a,l,r)]}function mn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Sn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gR(Object(t),!0).forEach(function(i){mn(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gR(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const yR={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function vR(n){return n?n[0].toUpperCase()+n.slice(1):""}function xH(n,e="",t=!1){const i=yR[n],r=i&&i[e]||e;return"on"+vR(n)+vR(r)+(t?"Capture":"")}function _H(n,e=""){const t=yR[n],i=t&&t[e]||e;return n+i}function Y_(n){return"touches"in n}function MH(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function wH(n){return n.type==="touchend"?n.changedTouches:n.targetTouches}function xR(n){return Y_(n)?wH(n)[0]:n}function q_(n,e){const t=e.clientX-n.clientX,i=e.clientY-n.clientY,r=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,o=Math.hypot(t,i);return{angle:-(Math.atan2(t,i)*180)/Math.PI,distance:o,origin:[r,s]}}function AH(n){return MH(n).map(e=>e.identifier)}function _R(n,e){const[t,i]=Array.from(n.touches).filter(r=>e.includes(r.identifier));return q_(t,i)}function Z_(n){const e=xR(n);return Y_(n)?e.identifier:e.pointerId}function Lu(n){const e=xR(n);return[e.clientX,e.clientY]}const MR=40,wR=800;function AR(n){let{deltaX:e,deltaY:t,deltaMode:i}=n;return i===1?(e*=MR,t*=MR):i===2&&(e*=wR,t*=wR),[e,t]}function SH(n){var e,t;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:o}=n.currentTarget;return[(e=i!=null?i:s)!==null&&e!==void 0?e:0,(t=r!=null?r:o)!==null&&t!==void 0?t:0]}function EH(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function qm(n,...e){return typeof n=="function"?n(...e):n}function TH(){}function CH(...n){return n.length===0?TH:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function SR(n,e){return Object.assign({},e,n||{})}const bH=32;class ER{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?qm(i.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,EH(e)),r.down=r.pressed=r.buttons%2==1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const x=t._delta.map(Math.abs);Yt.addTo(t._distance,x)}const[o,a]=t._movement,[l,f]=i.threshold,{_step:h,values:m}=t;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(o)>=l&&m[0]),h[1]===!1&&(h[1]=Math.abs(a)>=f&&m[1])):(h[0]===!1&&(h[0]=Math.abs(o)>=l&&Math.sign(o)*l),h[1]===!1&&(h[1]=Math.abs(a)>=f&&Math.sign(a)*f)),t.intentional=h[0]!==!1||h[1]!==!1,!t.intentional)return;const d=[0,0];if(i.hasCustomTransform){const[x,_]=m;d[0]=h[0]!==!1?x-h[0]:0,d[1]=h[1]!==!1?_-h[1]:0}else d[0]=h[0]!==!1?o-h[0]:0,d[1]=h[1]!==!1?a-h[1]:0;if(this.intent&&this.intent(d),(t._active&&!t._blocked||t.active)&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e)){t.first&&("bounds"in i&&(t._bounds=qm(i.bounds,t)),this.setup&&this.setup()),t.movement=d;const x=t.offset;if(this.computeOffset(),!t.last||s>bH){t.delta=Yt.sub(t.offset,x);const _=t.delta.map(Math.abs);Yt.addTo(t.distance,_),t.direction=t.delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[_[0]/s,_[1]/s])}}const p=t._active?i.rubberband||[0,0]:[0,0];t.offset=vH(t._bounds,t.offset,p),this.computeMovement()}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Sn(Sn(Sn({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function BH([n,e]){const t=Math.abs(n)-Math.abs(e);if(t>0)return"x";if(t<0)return"y"}function RH(n,e){switch(e){case"x":n[1]=0;break;case"y":n[0]=0;break}}class td extends ER{constructor(...e){super(...e);mn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Yt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Yt.sub(this.state.offset,this.state.lastOffset)}intent(e){this.state.axis=this.state.axis||BH(e),this.state._blocked=(this.config.lockDirection||!!this.config.axis)&&!this.state.axis||!!this.config.axis&&this.config.axis!==this.state.axis,!this.state._blocked&&(this.config.axis||this.config.lockDirection)&&RH(e,this.state.axis)}}const LH=n=>n,TR=.15,CR={enabled(n=!0){return n},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[TR,TR];case!1:return[0,0];default:return Yt.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Yt.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||LH},threshold(n){return Yt.toVector(n,0)}},Fa=Sn(Sn({},CR),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},bounds(n={}){if(typeof n=="function")return s=>Fa.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),Zm=10,bR={ArrowRight:(n=1)=>[Zm*n,0],ArrowLeft:(n=1)=>[-Zm*n,0],ArrowUp:(n=1)=>[0,-Zm*n],ArrowDown:(n=1)=>[0,Zm*n]};class PH extends td{constructor(...e){super(...e);mn(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=Fa.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons)||(this.ctrl.setEventIds(e),t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!i._pointerActive&&(this.start(e),this.setupPointer(e),i._pointerId=Z_(e),i._pointerActive=!0,this.computeValues(Lu(e)),this.computeInitial(),t.preventScroll?this.setupScrollPrevention(e):t.delay>0?this.setupDelayTrigger(e):this.startPointerDrag(e)))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive||t.type===e.type&&e.timeStamp===t.timeStamp)return;const r=Z_(e);if(t._pointerId&&r!==t._pointerId)return;const s=Lu(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Yt.sub(s,t._values),this.computeValues(s)),Yt.addTo(t._movement,t._delta),this.compute(e),t._delayed){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScroll&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._pointerActive)return;const r=Z_(e);if(t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=3&&o<=3,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t.direction,[f,h]=t.velocity,[m,d]=t.movement,[p,x]=i.swipe.velocity,[_,M]=i.swipe.distance,v=i.swipe.duration;t.elapsedTime<v&&(Math.abs(f)>p&&Math.abs(m)>_&&(t.swipe[0]=a),Math.abs(h)>x&&Math.abs(d)>M&&(t.swipe[1]=l))}this.emit()}pointerClick(e){this.state.tap||(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config;let i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){IH(e),this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","end",this.clean.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","cancel",this.clean.bind(this),{passive:!1}),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScroll,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",this.startPointerDrag.bind(this),this.config.delay,e)}keyDown(e){const t=bR[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;i._delta=t(r),this.start(e),i._keyboardActive=!0,Yt.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in bR&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this))),e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this)),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0})}}function IH(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const nd=typeof window!="undefined"&&window.document&&window.document.createElement;function BR(){return nd&&"ontouchstart"in window}function DH(){return BR()||nd&&window.navigator.maxTouchPoints>1}function FH(){return nd&&"onpointerdown"in window}function NH(){return nd&&"exitPointerLock"in window.document}function OH(){try{return"constructor"in GestureEvent}catch{return!1}}const ji={isBrowser:nd,gesture:OH(),touch:BR(),touchscreen:DH(),pointer:FH(),pointerLock:NH()},kH=250,UH=180,GH=.5,HH=50,zH=250,VH=Sn(Sn({},Fa),{},{pointerLock(n,e,{pointer:{lock:t=!1,touch:i=!1}={}}){return this.useTouch=ji.touch&&i,ji.pointerLock&&t},device(n,e){return this.useTouch?"touch":this.pointerLock?"mouse":ji.pointer?"pointer":ji.touch?"touch":"mouse"},preventScroll(n=!1,e,{preventScrollAxis:t="y"}){return t&&(this.preventScrollAxis=t),ji.touchscreen?typeof n=="number"?n:n?kH:!1:!1},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1}={}}){return this.pointerButtons=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,axis:i=void 0}){const r=Yt.toVector(n,t?3:i?1:0);return this.filterTaps=t,r},swipe({velocity:n=GH,distance:e=HH,duration:t=zH}={}){return{velocity:this.transform(Yt.toVector(n)),distance:this.transform(Yt.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return UH;case!1:return 0;default:return n}}}),WH=30,JH=36;class jH extends ER{constructor(...e){super(...e);mn(this,"ingKey","pinching"),mn(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=Yt.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}intent(e){const t=this.state;if(!t.axis){const i=Math.abs(e[0])*WH-Math.abs(e[1]);i<0?t.axis="angle":i>0&&(t.axis="scale")}this.config.lockDirection&&(t.axis==="scale"?e[1]=0:t.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const r=_R(e,t._touchIds);this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(o=>r.has(o))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=q_(...Array.from(i.values()));this.pinchStart(e,s)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=_R(e,this.state._touchIds);this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=q_(...Array.from(t.values()));this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,r=i._values[1],s=t.angle-r;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),i.origin=t.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),!!this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),!!t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Yt.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){!this.state._active||(this.state._active=!1,this.compute(e),this.emit())}wheel(e){!e.ctrlKey||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-AR(e)[1]/JH*i.offset[0],0],Yt.addTo(i._movement,i._delta),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t?(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this))):e("wheel","",this.wheel.bind(this),{passive:!1})}}const XH=Sn(Sn({},CR),{},{useTouch(n,e,{pointer:{touch:t=!1}={}}){return ji.touch&&t},device(n,e,t){if(t.shared.target&&!ji.touch&&ji.gesture)return"gesture";if(this.useTouch)return"touch";if(ji.touchscreen){if(ji.pointer)return"pointer";if(ji.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=SR(qm(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=SR(qm(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Yt.toVector(n,this.lockDirection?[.1,3]:0)}});class KH extends td{constructor(...e){super(...e);mn(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Lu(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=Lu(e),i=this.state;i._delta=Yt.sub(t,i._values),Yt.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){!this.state._active||(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const QH=Sn(Sn({},Fa),{},{mouseOnly:(n=!0)=>n});class YH extends td{constructor(...e){super(...e);mn(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=SH(e);t._delta=Yt.sub(i,t._values),Yt.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const qH=Fa;class ZH extends td{constructor(...e){super(...e);mn(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=AR(e),Yt.addTo(this.state._movement,t._delta),this.compute(e),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const $H=Fa;class ez extends td{constructor(...e){super(...e);mn(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Lu(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=Lu(e);t._movement=t._delta=Yt.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const tz=Sn(Sn({},Fa),{},{mouseOnly:(n=!0)=>n}),$_=new Map,eM=new Map;function nz(n){$_.set(n.key,n.engine),eM.set(n.key,n.resolver)}const iz={key:"drag",engine:PH,resolver:VH},rz={key:"hover",engine:ez,resolver:tz},sz={key:"move",engine:KH,resolver:QH},oz={key:"pinch",engine:jH,resolver:XH},az={key:"scroll",engine:YH,resolver:qH},lz={key:"wheel",engine:ZH,resolver:$H};function uz(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function cz(n,e){if(n==null)return{};var t=uz(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,i)||(t[i]=n[i]))}return t}const fz={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=ji.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},dz=["target","eventOptions","window","enabled","transform"];function $m(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=$m(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function hz(n,e){const t=n,{target:i,eventOptions:r,window:s,enabled:o,transform:a}=t,l=cz(t,dz),f={shared:$m({target:i,eventOptions:r,window:s,enabled:o,transform:a},fz)};if(e){const h=eM.get(e);f[e]=$m(Sn({shared:f.shared},l),h)}else for(const h in l){const m=eM.get(h);m&&(f[h]=$m(Sn({shared:f.shared},l[h]),m))}return f}class RR{constructor(e){mn(this,"_listeners",[]),this._ctrl=e}add(e,t,i,r,s){const o=_H(t,i),a=Sn(Sn({},this._ctrl.config.shared.eventOptions),s);e.addEventListener(o,r,a),this._listeners.push(()=>e.removeEventListener(o,r,a))}clean(){this._listeners.forEach(e=>e()),this._listeners=[]}}class pz{constructor(){mn(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class mz{constructor(e){mn(this,"gestures",new Set),mn(this,"_targetEventStore",new RR(this)),mn(this,"gestureEventStores",{}),mn(this,"gestureTimeoutStores",{}),mn(this,"handlers",{}),mn(this,"config",{}),mn(this,"pointerIds",new Set),mn(this,"touchIds",new Set),mn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),gz(this,e)}setEventIds(e){Y_(e)?this.touchIds=new Set(AH(e)):"pointerId"in e&&(e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId))}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=hz(e,t)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i=t.eventOptions,r={};let s;if(t.target&&(s=t.target(),!s))return;const o=yz(r,i,!!s);if(t.enabled){for(const a of this.gestures)if(this.config[a].enabled){const l=$_.get(a);new l(this,e,a).bind(o)}for(const a in this.nativeHandlers)o(a,"",l=>this.nativeHandlers[a](Sn(Sn({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const a in r)r[a]=CH(...r[a]);if(!s)return r;for(const a in r){let l=a.substr(2).toLowerCase();const f=!!~l.indexOf("capture"),h=!!~l.indexOf("passive");(f||h)&&(l=l.replace(/capture|passive/g,"")),this._targetEventStore.add(s,l,"",r[a],{capture:f,passive:h})}}}function Pu(n,e){n.gestures.add(e),n.gestureEventStores[e]=new RR(n),n.gestureTimeoutStores[e]=new pz}function gz(n,e){e.drag&&Pu(n,"drag"),e.wheel&&Pu(n,"wheel"),e.scroll&&Pu(n,"scroll"),e.move&&Pu(n,"move"),e.pinch&&Pu(n,"pinch"),e.hover&&Pu(n,"hover")}const yz=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,f;const h=(l=o.capture)!==null&&l!==void 0?l:e.capture,m=(f=o.passive)!==null&&f!==void 0?f:e.passive;let d=a?i:xH(i,r,h);t&&m&&(d+="Passive"),n[d]=n[d]||[],n[d].push(s)},vz=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function xz(n){const e={},t={},i=new Set;for(let r in n)vz.test(r)?(i.add(RegExp.lastMatch),t[r]=n[r]):e[r]=n[r];return[t,e,i]}function Iu(n,e,t,i,r,s){if(!n.has(t)||!$_.has(i))return;const o=t+"Start",a=t+"End",l=f=>{let h;return f.first&&o in e&&e[o](f),t in e&&(h=e[t](f)),f.last&&a in e&&e[a](f),h};r[i]=l,s[i]=s[i]||{}}function _z(n,e){const[t,i,r]=xz(n),s={};return Iu(r,t,"onDrag","drag",s,e),Iu(r,t,"onWheel","wheel",s,e),Iu(r,t,"onScroll","scroll",s,e),Iu(r,t,"onPinch","pinch",s,e),Iu(r,t,"onMove","move",s,e),Iu(r,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function Mz(n,e={},t,i){const r=Cp.useMemo(()=>new mz(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),Cp.useEffect(r.effect.bind(r)),Cp.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function wz(n){return n.forEach(nz),function(t,i={}){const{handlers:r,nativeHandlers:s,config:o}=_z(t,i);return Mz(r,o,void 0,s)}}function Az(n,e={}){return wz([iz,oz,az,lz,sz,rz])(n,e)}function F9({snap:n,global:e,cursor:t=!0,children:i,speed:r=1,rotation:s=[0,0,0],zoom:o=1,polar:a=[0,Math.PI/2],azimuth:l=[-1/0,1/0],config:f={mass:1,tension:170,friction:26}}){const{size:h,gl:m}=dr(),d=re.exports.useMemo(()=>[s[0]+a[0],s[0]+a[1]],[s[0],a[0],a[1]]),p=re.exports.useMemo(()=>[s[1]+l[0],s[1]+l[1]],[s[1],l[0],l[1]]),x=re.exports.useMemo(()=>[jo.clamp(s[0],...d),jo.clamp(s[1],...p),s[2]],[s[0],s[1],s[2],d,p]),[_,M]=fH(()=>({scale:1,rotation:x,config:f}));re.exports.useEffect(()=>void M.start({scale:1,rotation:x,config:f}),[x]),re.exports.useEffect(()=>{e&&t&&(m.domElement.style.cursor="grab")},[e,t,m.domElement]);const v=Az({onHover:({last:y})=>{t&&!e&&(m.domElement.style.cursor=y?"auto":"grab")},onDrag:({down:y,delta:[A,w],memo:[T,C]=_.rotation.animation.to||x})=>{t&&(m.domElement.style.cursor=y?"grabbing":"grab"),A=jo.clamp(C+A/h.width*Math.PI*r,...p),w=jo.clamp(T+w/h.height*Math.PI*r,...d);const B=n&&!y&&typeof n!="boolean"?n:f;return M.start({scale:y&&w>d[1]/2?o:1,rotation:n&&!y?x:[w,A,0],config:I=>I==="scale"?Nn(At({},B),{friction:B.friction*3}):B}),[w,A]}},{target:e?m.domElement:void 0});return re.exports.createElement(gH.group,Ra({},v==null?void 0:v(),_),i)}let id;function Sz(){if(id!==void 0)return id;try{var n;let e;const t=document.createElement("canvas");return id=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),id}catch{return id=!1}}function mr(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class tM{constructor(e=Math){mr(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),mr(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),mr(this,"p",[]),mr(this,"perm",[]),mr(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),mr(this,"dot",(t,i,r)=>t[0]*i+t[1]*r),mr(this,"dot3",(t,i,r,s)=>t[0]*i+t[1]*r+t[2]*s),mr(this,"dot4",(t,i,r,s,o)=>t[0]*i+t[1]*r+t[2]*s+t[3]*o),mr(this,"noise",(t,i)=>{let r,s,o;const a=.5*(Math.sqrt(3)-1),l=(t+i)*a,f=Math.floor(t+l),h=Math.floor(i+l),m=(3-Math.sqrt(3))/6,d=(f+h)*m,p=f-d,x=h-d,_=t-p,M=i-x;let v=0,y=1;_>M&&(v=1,y=0);const A=_-v+m,w=M-y+m,T=_-1+2*m,C=M-1+2*m,B=f&255,I=h&255,k=this.perm[B+this.perm[I]]%12,G=this.perm[B+v+this.perm[I+y]]%12,O=this.perm[B+1+this.perm[I+1]]%12;let R=.5-_*_-M*M;R<0?r=0:(R*=R,r=R*R*this.dot(this.grad3[k],_,M));let L=.5-A*A-w*w;L<0?s=0:(L*=L,s=L*L*this.dot(this.grad3[G],A,w));let W=.5-T*T-C*C;return W<0?o=0:(W*=W,o=W*W*this.dot(this.grad3[O],T,C)),70*(r+s+o)}),mr(this,"noise3d",(t,i,r)=>{let s,o,a,l;const f=1/3,h=(t+i+r)*f,m=Math.floor(t+h),d=Math.floor(i+h),p=Math.floor(r+h),x=1/6,_=(m+d+p)*x,M=m-_,v=d-_,y=p-_,A=t-M,w=i-v,T=r-y;let C,B,I,k,G,O;A>=w?w>=T?(C=1,B=0,I=0,k=1,G=1,O=0):A>=T?(C=1,B=0,I=0,k=1,G=0,O=1):(C=0,B=0,I=1,k=1,G=0,O=1):w<T?(C=0,B=0,I=1,k=0,G=1,O=1):A<T?(C=0,B=1,I=0,k=0,G=1,O=1):(C=0,B=1,I=0,k=1,G=1,O=0);const R=A-C+x,L=w-B+x,W=T-I+x,j=A-k+2*x,J=w-G+2*x,K=T-O+2*x,de=A-1+3*x,we=w-1+3*x,$=T-1+3*x,H=m&255,q=d&255,ee=p&255,ce=this.perm[H+this.perm[q+this.perm[ee]]]%12,Ie=this.perm[H+C+this.perm[q+B+this.perm[ee+I]]]%12,ae=this.perm[H+k+this.perm[q+G+this.perm[ee+O]]]%12,Ue=this.perm[H+1+this.perm[q+1+this.perm[ee+1]]]%12;let Be=.6-A*A-w*w-T*T;Be<0?s=0:(Be*=Be,s=Be*Be*this.dot3(this.grad3[ce],A,w,T));let Ae=.6-R*R-L*L-W*W;Ae<0?o=0:(Ae*=Ae,o=Ae*Ae*this.dot3(this.grad3[Ie],R,L,W));let De=.6-j*j-J*J-K*K;De<0?a=0:(De*=De,a=De*De*this.dot3(this.grad3[ae],j,J,K));let nt=.6-de*de-we*we-$*$;return nt<0?l=0:(nt*=nt,l=nt*nt*this.dot3(this.grad3[Ue],de,we,$)),32*(s+o+a+l)}),mr(this,"noise4d",(t,i,r,s)=>{const o=this.grad4,a=this.simplex,l=this.perm,f=(Math.sqrt(5)-1)/4,h=(5-Math.sqrt(5))/20;let m,d,p,x,_;const M=(t+i+r+s)*f,v=Math.floor(t+M),y=Math.floor(i+M),A=Math.floor(r+M),w=Math.floor(s+M),T=(v+y+A+w)*h,C=v-T,B=y-T,I=A-T,k=w-T,G=t-C,O=i-B,R=r-I,L=s-k,W=G>O?32:0,j=G>R?16:0,J=O>R?8:0,K=G>L?4:0,de=O>L?2:0,we=R>L?1:0,$=W+j+J+K+de+we;let H,q,ee,ce,Ie,ae,Ue,Be,Ae,De,nt,oe;H=a[$][0]>=3?1:0,q=a[$][1]>=3?1:0,ee=a[$][2]>=3?1:0,ce=a[$][3]>=3?1:0,Ie=a[$][0]>=2?1:0,ae=a[$][1]>=2?1:0,Ue=a[$][2]>=2?1:0,Be=a[$][3]>=2?1:0,Ae=a[$][0]>=1?1:0,De=a[$][1]>=1?1:0,nt=a[$][2]>=1?1:0,oe=a[$][3]>=1?1:0;const fe=G-H+h,pe=O-q+h,Re=R-ee+h,ve=L-ce+h,Ke=G-Ie+2*h,Qe=O-ae+2*h,Ze=R-Ue+2*h,Ct=L-Be+2*h,U=G-Ae+3*h,D=O-De+3*h,le=R-nt+3*h,me=L-oe+3*h,Se=G-1+4*h,he=O-1+4*h,Ve=R-1+4*h,He=L-1+4*h,Me=v&255,z=y&255,xe=A&255,ge=w&255,Ye=l[Me+l[z+l[xe+l[ge]]]]%32,ke=l[Me+H+l[z+q+l[xe+ee+l[ge+ce]]]]%32,at=l[Me+Ie+l[z+ae+l[xe+Ue+l[ge+Be]]]]%32,Ce=l[Me+Ae+l[z+De+l[xe+nt+l[ge+oe]]]]%32,it=l[Me+1+l[z+1+l[xe+1+l[ge+1]]]]%32;let Mt=.6-G*G-O*O-R*R-L*L;Mt<0?m=0:(Mt*=Mt,m=Mt*Mt*this.dot4(o[Ye],G,O,R,L));let pt=.6-fe*fe-pe*pe-Re*Re-ve*ve;pt<0?d=0:(pt*=pt,d=pt*pt*this.dot4(o[ke],fe,pe,Re,ve));let gn=.6-Ke*Ke-Qe*Qe-Ze*Ze-Ct*Ct;gn<0?p=0:(gn*=gn,p=gn*gn*this.dot4(o[at],Ke,Qe,Ze,Ct));let En=.6-U*U-D*D-le*le-me*me;En<0?x=0:(En*=En,x=En*En*this.dot4(o[Ce],U,D,le,me));let Zn=.6-Se*Se-he*he-Ve*Ve-He*He;return Zn<0?_=0:(Zn*=Zn,_=Zn*Zn*this.dot4(o[it],Se,he,Ve,He)),27*(m+d+p+x+_)});for(let t=0;t<256;t++)this.p[t]=Math.floor(e.random()*256);for(let t=0;t<512;t++)this.perm[t]=this.p[t&255]}}class nM extends Un{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new bz(t)}),this.register(function(t){return new Dz(t)}),this.register(function(t){return new Fz(t)}),this.register(function(t){return new Bz(t)}),this.register(function(t){return new Rz(t)}),this.register(function(t){return new Lz(t)}),this.register(function(t){return new Pz(t)}),this.register(function(t){return new Iz(t)}),this.register(function(t){return new Tz(t)}),this.register(function(t){return new Nz(t)})}load(e,t,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=lr.extractUrlBase(e),this.manager.itemStart(e);const a=function(f){r?r(f):console.error(f),s.manager.itemError(e),s.manager.itemEnd(e)},l=new hi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){try{s.parse(f,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=e;else if(lr.decodeText(new Uint8Array(e,0,4))===LR){try{o[_t.KHR_BINARY_GLTF]=new Oz(e)}catch(m){r&&r(m);return}s=o[_t.KHR_BINARY_GLTF].content}else s=lr.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const f=new Qz(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const m=this.pluginCallbacks[h](f);a[m.name]=m,o[m.name]=!0}if(l.extensionsUsed)for(let h=0;h<l.extensionsUsed.length;++h){const m=l.extensionsUsed[h],d=l.extensionsRequired||[];switch(m){case _t.KHR_MATERIALS_UNLIT:o[m]=new Cz;break;case _t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[m]=new Gz;break;case _t.KHR_DRACO_MESH_COMPRESSION:o[m]=new kz(l,this.dracoLoader);break;case _t.KHR_TEXTURE_TRANSFORM:o[m]=new Uz;break;case _t.KHR_MESH_QUANTIZATION:o[m]=new Hz;break;default:d.indexOf(m)>=0&&a[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}f.setExtensions(o),f.setPlugins(a),f.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Ez(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const _t={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Tz{constructor(e){this.parser=e,this.name=_t.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let f;const h=new ye(16777215);l.color!==void 0&&h.fromArray(l.color);const m=l.range!==void 0?l.range:0;switch(l.type){case"directional":f=new yp(h),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new gp(h),f.distance=m;break;case"spot":f=new mp(h),f.distance=m,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,f.angle=l.spot.outerConeAngle,f.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return f.position.set(0,0,0),f.decay=2,l.intensity!==void 0&&(f.intensity=l.intensity),f.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(f),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class Cz{constructor(){this.name=_t.KHR_MATERIALS_UNLIT}getMaterialType(){return fi}extendParams(e,t,i){const r=[];e.color=new ye(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(r)}}class bz{constructor(e){this.parser=e,this.name=_t.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ie(a,a)}return Promise.all(s)}}class Bz{constructor(e){this.parser=e,this.name=_t.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new ye(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Rz{constructor(e){this.parser=e,this.name=_t.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Lz{constructor(e){this.parser=e,this.name=_t.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new ye(a[0],a[1],a[2]),Promise.all(s)}}class Pz{constructor(e){this.parser=e,this.name=_t.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Iz{constructor(e){this.parser=e,this.name=_t.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new ye(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture).then(function(l){l.encoding=Fi})),Promise.all(s)}}class Dz{constructor(e){this.parser=e,this.name=_t.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=i.images[s.source],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class Fz{constructor(e){this.parser=e,this.name=_t.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const f=i.options.manager.getHandler(a.uri);f!==null&&(l=f)}return this.detectSupport().then(function(f){if(f)return i.loadTextureImage(e,a,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Nz{constructor(e){this.name=_t.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const l=r.byteOffset||0,f=r.byteLength||0,h=r.count,m=r.byteStride,d=new ArrayBuffer(h*m),p=new Uint8Array(a[0],l,f);return o.decodeGltfBuffer(new Uint8Array(d),h,m,p,r.mode,r.filter),d})}else return null}}const LR="glTF",rd=12,PR={JSON:1313821514,BIN:5130562};class Oz{constructor(e){this.name=_t.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,rd);if(this.header={magic:lr.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==LR)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-rd,r=new DataView(e,rd);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===PR.JSON){const l=new Uint8Array(e,rd+s,o);this.content=lr.decodeText(l)}else if(a===PR.BIN){const l=rd+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class kz{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=_t.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},f={};for(const h in o){const m=rM[h]||h.toLowerCase();a[m]=o[h]}for(const h in e.attributes){const m=rM[h]||h.toLowerCase();if(o[h]!==void 0){const d=i.accessors[e.attributes[h]],p=sd[d.componentType];f[m]=p,l[m]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(m){r.decodeDracoFile(h,function(d){for(const p in d.attributes){const x=d.attributes[p],_=l[p];_!==void 0&&(x.normalized=_)}m(d)},a,f)})})}}class Uz{constructor(){this.name=_t.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class iM extends aa{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new ye().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const f in a)l.uniforms[f]=a[f];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Gz{constructor(){this.name=_t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return iM}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new ye(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(r.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new ye(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new ye(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o))}return Promise.all(s)}createMaterial(e){const t=new iM(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=ks,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class Hz{constructor(){this.name=_t.KHR_MESH_QUANTIZATION}}class Na extends Ir{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}}Na.prototype.beforeStart_=Na.prototype.copySampleValue_;Na.prototype.afterEnd_=Na.prototype.copySampleValue_;Na.prototype.interpolate_=function(n,e,t,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=o*2,l=o*3,f=i-e,h=(t-e)/f,m=h*h,d=m*h,p=n*l,x=p-l,_=-2*d+3*m,M=d-m,v=1-_,y=M-m+h;for(let A=0;A!==o;A++){const w=s[x+A+o],T=s[x+A+a]*f,C=s[p+A+o],B=s[p+A]*f;r[A]=v*w+y*T+_*C+M*B}return r};const zz=new Mn;class Vz extends Na{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return zz.fromArray(s).normalize().toArray(s),s}}const ws={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},sd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},IR={9728:Ht,9729:xt,9984:lc,9985:fh,9986:uc,9987:Ar},DR={33071:Cn,33648:tl,10497:Ds},FR={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bo={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Wz={CUBICSPLINE:void 0,LINEAR:zo,STEP:rl},sM={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Jz(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new aa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:$r})),n.DefaultMaterial}function od(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Oa(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function jz(n,e,t){let i=!1,r=!1;for(let a=0,l=e.length;a<l;a++){const f=e[a];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),i&&r)break}if(!i&&!r)return Promise.resolve(n);const s=[],o=[];for(let a=0,l=e.length;a<l;a++){const f=e[a];if(i){const h=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;s.push(h)}if(r){const h=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;o.push(h)}}return Promise.all([Promise.all(s),Promise.all(o)]).then(function(a){const l=a[0],f=a[1];return i&&(n.morphAttributes.position=l),r&&(n.morphAttributes.normal=f),n.morphTargetsRelative=!0,n})}function Xz(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Kz(n){const e=n.extensions&&n.extensions[_t.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+NR(e.attributes):t=n.indices+":"+NR(n.attributes)+":"+n.mode,t}function NR(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function oM(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Qz{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ez,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox|Safari/.test(navigator.userAgent)===!1?this.textureLoader=new jy(this.options.manager):this.textureLoader=new ky(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new hi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};od(s,a,r),Oa(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[f,h]of o.children.entries())s(h,a.children[f])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[_t.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(lr.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=FR[r.type],f=sd[r.componentType],h=f.BYTES_PER_ELEMENT,m=h*l,d=r.byteOffset||0,p=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,x=r.normalized===!0;let _,M;if(p&&p!==m){const v=Math.floor(d/p),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let A=t.cache.get(y);A||(_=new f(a,v*p,r.count*p/h),A=new qs(_,p/h),t.cache.add(y,A)),M=new us(A,l,d%p/h,x)}else a===null?_=new f(r.count*l):_=new f(a,d,r.count*l),M=new lt(_,l,x);if(r.sparse!==void 0){const v=FR.SCALAR,y=sd[r.sparse.indices.componentType],A=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,T=new y(o[1],A,r.sparse.count*v),C=new f(o[2],w,r.sparse.count*l);a!==null&&(M=new lt(M.array.slice(),M.itemSize,M.normalized));for(let B=0,I=T.length;B<I;B++){const k=T[B];if(M.setX(k,C[B*l]),l>=2&&M.setY(k,C[B*l+1]),l>=3&&M.setZ(k,C[B*l+2]),l>=4&&M.setW(k,C[B*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e],s=t.images[r.source];let o=this.textureLoader;if(s.uri){const a=i.manager.getHandler(s.uri);a!==null&&(o=a)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,i){const r=this,s=this.json,o=this.options,a=s.textures[e],l=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const f=self.URL||self.webkitURL;let h=t.uri||"",m=!1;if(t.bufferView!==void 0)h=r.getDependency("bufferView",t.bufferView).then(function(p){m=!0;const x=new Blob([p],{type:t.mimeType});return h=f.createObjectURL(x),h});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(h).then(function(p){return new Promise(function(x,_){let M=x;i.isImageBitmapLoader===!0&&(M=function(v){const y=new Zt(v);y.needsUpdate=!0,x(y)}),i.load(lr.resolveURL(p,o.path),M,void 0,_)})}).then(function(p){m===!0&&f.revokeObjectURL(h),p.flipY=!1,a.name&&(p.name=a.name);const _=(s.samplers||{})[a.sampler]||{};return p.magFilter=IR[_.magFilter]||xt,p.minFilter=IR[_.minFilter]||Ar,p.wrapS=DR[_.wrapS]||Ds,p.wrapT=DR[_.wrapT]||Ds,r.associations.set(p,{textures:e}),p}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",h),null});return this.textureCache[l]=d,d}assignTexture(e,t,i){const r=this;return this.getDependency("texture",i.index).then(function(s){if(i.texCoord!==void 0&&i.texCoord!=0&&!(t==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),r.extensions[_t.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[_t.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const a=r.associations.get(s);s=r.extensions[_t.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),r.associations.set(s,a)}}return e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Zs,un.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new wn,un.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return aa}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},f=[];if(l[_t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const m=r[_t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=m.getMaterialType(),f.push(m.extendParams(a,s,t))}else if(l[_t.KHR_MATERIALS_UNLIT]){const m=r[_t.KHR_MATERIALS_UNLIT];o=m.getMaterialType(),f.push(m.extendParams(a,s,t))}else{const m=s.pbrMetallicRoughness||{};if(a.color=new ye(1,1,1),a.opacity=1,Array.isArray(m.baseColorFactor)){const d=m.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}m.baseColorTexture!==void 0&&f.push(t.assignTexture(a,"map",m.baseColorTexture)),a.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,a.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(a,"metalnessMap",m.metallicRoughnessTexture)),f.push(t.assignTexture(a,"roughnessMap",m.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Di);const h=s.alphaMode||sM.OPAQUE;if(h===sM.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.format=Jn,a.transparent=!1,h===sM.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==fi&&(f.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ie(1,1),s.normalTexture.scale!==void 0)){const m=s.normalTexture.scale;a.normalScale.set(m,m)}return s.occlusionTexture!==void 0&&o!==fi&&(f.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==fi&&(a.emissive=new ye().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==fi&&f.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture)),Promise.all(f).then(function(){let m;return o===iM?m=r[_t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):m=new o(a),s.name&&(m.name=s.name),m.map&&(m.map.encoding=Fi),m.emissiveMap&&(m.emissiveMap.encoding=Fi),Oa(m,s),t.associations.set(m,{materials:e}),s.extensions&&od(r,m,s),m})}createUniqueName(e){const t=St.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[_t.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return kR(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const f=e[a],h=Kz(f),m=r[h];if(m)o.push(m.promise);else{let d;f.extensions&&f.extensions[_t.KHR_DRACO_MESH_COMPRESSION]?d=s(f):d=kR(new je,f,t),r[h]={primitive:f,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,f=o.length;l<f;l++){const h=o[l].material===void 0?Jz(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const f=l.slice(0,l.length-1),h=l[l.length-1],m=[];for(let p=0,x=h.length;p<x;p++){const _=h[p],M=o[p];let v;const y=f[p];if(M.mode===ws.TRIANGLES||M.mode===ws.TRIANGLE_STRIP||M.mode===ws.TRIANGLE_FAN||M.mode===void 0)v=s.isSkinnedMesh===!0?new Tc(_,y):new $t(_,y),v.isSkinnedMesh===!0&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),M.mode===ws.TRIANGLE_STRIP?v.geometry=UR(v.geometry,dA):M.mode===ws.TRIANGLE_FAN&&(v.geometry=UR(v.geometry,B0));else if(M.mode===ws.LINES)v=new ti(_,y);else if(M.mode===ws.LINE_STRIP)v=new br(_,y);else if(M.mode===ws.LINE_LOOP)v=new ep(_,y);else if(M.mode===ws.POINTS)v=new Pl(_,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(v.geometry.morphAttributes).length>0&&Xz(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),Oa(v,s),M.extensions&&od(r,v,M),t.assignFinalMaterial(v),m.push(v)}for(let p=0,x=m.length;p<x;p++)t.associations.set(m[p],{meshes:e,primitives:p});if(m.length===1)return m[0];const d=new sr;t.associations.set(d,{meshes:e});for(let p=0,x=m.length;p<x;p++)d.add(m[p]);return d})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new cn(jo.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new $o(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Oa(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let f=0,h=i.channels.length;f<h;f++){const m=i.channels[f],d=i.samplers[m.sampler],p=m.target,x=p.node!==void 0?p.node:p.id,_=i.parameters!==void 0?i.parameters[d.input]:d.input,M=i.parameters!==void 0?i.parameters[d.output]:d.output;r.push(this.getDependency("node",x)),s.push(this.getDependency("accessor",_)),o.push(this.getDependency("accessor",M)),a.push(d),l.push(p)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(f){const h=f[0],m=f[1],d=f[2],p=f[3],x=f[4],_=[];for(let v=0,y=h.length;v<y;v++){const A=h[v],w=m[v],T=d[v],C=p[v],B=x[v];if(A===void 0)continue;A.updateMatrix(),A.matrixAutoUpdate=!0;let I;switch(Bo[B.path]){case Bo.weights:I=Wl;break;case Bo.rotation:I=to;break;case Bo.position:case Bo.scale:default:I=Jl;break}const k=A.name?A.name:A.uuid,G=C.interpolation!==void 0?Wz[C.interpolation]:zo,O=[];Bo[B.path]===Bo.weights?A.traverse(function(L){L.morphTargetInfluences&&O.push(L.name?L.name:L.uuid)}):O.push(k);let R=T.array;if(T.normalized){const L=oM(R.constructor),W=new Float32Array(R.length);for(let j=0,J=R.length;j<J;j++)W[j]=R[j]*L;R=W}for(let L=0,W=O.length;L<W;L++){const j=new I(O[L]+"."+Bo[B.path],w.array,R,G);C.interpolation==="CUBICSPLINE"&&(j.createInterpolant=function(K){const de=this instanceof to?Vz:Na;return new de(this.times,this.values,this.getValueSize()/3,K)},j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(j)}}const M=i.name?i.name:"animation_"+e;return new jl(M,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(!!a.isMesh)for(let l=0,f=r.weights.length;l<f;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this.extensions,r=this,s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(f){return r._getNodeRef(r.cameraCache,s.camera,f)})),r._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){a.push(f)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new Cc:a.length>1?l=new sr:a.length===1?l=a[0]:l=new ht,l!==a[0])for(let f=0,h=a.length;f<h;f++)l.add(a[f]);if(s.name&&(l.userData.name=s.name,l.name=o),Oa(l,s),s.extensions&&od(i,l,s),s.matrix!==void 0){const f=new Fe;f.fromArray(s.matrix),l.applyMatrix4(f)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new sr;r.name&&(o.name=s.createUniqueName(r.name)),Oa(o,r),r.extensions&&od(i,o,r);const a=r.nodes||[],l=[];for(let f=0,h=a.length;f<h;f++)l.push(OR(a[f],o,t,s));return Promise.all(l).then(function(){const f=h=>{const m=new Map;for(const[d,p]of s.associations)(d instanceof un||d instanceof Zt)&&m.set(d,p);return h.traverse(d=>{const p=s.associations.get(d);p!=null&&m.set(d,p)}),m};return s.associations=f(o),o})}}function OR(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(r.skin===void 0)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let f=0,h=o.joints.length;f<h;f++)l.push(i.getDependency("node",o.joints[f]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const f=[],h=[];for(let m=0,d=a.length;m<d;m++){const p=a[m];if(p){f.push(p);const x=new Fe;o.inverseBindMatrices!==void 0&&x.fromArray(o.inverseBindMatrices.array,m*16),h.push(x)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[m])}l.bind(new bc(f,h),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,f=a.length;l<f;l++){const h=a[l];o.push(OR(h,s,t,i))}}return Promise.all(o)})}function Yz(n,e,t){const i=e.attributes,r=new ci;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,f=a.max;if(l!==void 0&&f!==void 0){if(r.set(new P(l[0],l[1],l[2]),new P(f[0],f[1],f[2])),a.normalized){const h=oM(sd[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new P,l=new P;for(let f=0,h=s.length;f<h;f++){const m=s[f];if(m.POSITION!==void 0){const d=t.json.accessors[m.POSITION],p=d.min,x=d.max;if(p!==void 0&&x!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(x[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(x[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(x[2]))),d.normalized){const _=oM(sd[d.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new ns;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function kR(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=rM[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Oa(n,e),Yz(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?jz(n,e.targets,t):n})}function UR(n,e){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===B0)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const aM=new WeakMap;class qz extends Un{constructor(e){super(e);this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new hi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const f=t.attributeTypes[l];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=f.name)}const i=JSON.stringify(t);if(aM.has(e)){const l=aM.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((f,h)=>{r._callbacks[s]={resolve:f,reject:h},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),aM.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new je;e.index&&t.setIndex(new lt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new lt(o,a))}return t}_loadLibrary(e,t){const i=new hi(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=Zz.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Zz(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(m){h({draco:m})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,f=a.taskConfig;e.then(h=>{const m=h.draco,d=new m.Decoder,p=new m.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{const x=t(m,d,p,f),_=x.attributes.map(M=>M.array.buffer);x.index&&_.push(x.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:x},_)}catch(x){console.error(x),self.postMessage({type:"error",id:a.id,error:x.message})}finally{m.destroy(p),m.destroy(d)}});break}};function t(o,a,l,f){const h=f.attributeIDs,m=f.attributeTypes;let d,p;const x=a.GetEncodedGeometryType(l);if(x===o.TRIANGULAR_MESH)d=new o.Mesh,p=a.DecodeBufferToMesh(l,d);else if(x===o.POINT_CLOUD)d=new o.PointCloud,p=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const _={index:null,attributes:[]};for(const M in h){const v=self[m[M]];let y,A;if(f.useUniqueIDs)A=h[M],y=a.GetAttributeByUniqueId(d,A);else{if(A=a.GetAttributeId(d,o[h[M]]),A===-1)continue;y=a.GetAttribute(d,A)}_.attributes.push(r(o,a,d,M,v,y))}return x===o.TRIANGULAR_MESH&&(_.index=i(o,a,d)),o.destroy(d),_}function i(o,a,l){const h=l.num_faces()*3,m=h*4,d=o._malloc(m);a.GetTrianglesUInt32Array(l,m,d);const p=new Uint32Array(o.HEAPF32.buffer,d,h).slice();return o._free(d),{array:p,itemSize:1}}function r(o,a,l,f,h,m){const d=m.num_components(),x=l.num_points()*d,_=x*h.BYTES_PER_ELEMENT,M=s(o,h),v=o._malloc(_);a.GetAttributeDataArrayForAllPoints(l,m,M,_,v);const y=new h(o.HEAPF32.buffer,v,x).slice();return o._free(v),{name:f,array:y,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let eg;const lM=()=>{if(eg)return eg;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(m=>{s=m.instance,s.exports.__wasm_call_ctors()});function a(m){const d=new Uint8Array(m.length);for(let x=0;x<m.length;++x){const _=m.charCodeAt(x);d[x]=_>96?_-71:_>64?_-65:_>47?_+4:_>46?63:62}let p=0;for(let x=0;x<m.length;++x)d[p++]=d[x]<60?i[d[x]]:(d[x]-60)*64+d[++x];return d.buffer.slice(0,p)}function l(m,d,p,x,_,M){const v=s.exports.sbrk,y=p+3&~3,A=v(y*x),w=v(_.length),T=new Uint8Array(s.exports.memory.buffer);T.set(_,w);const C=m(A,p,x,w,_.length);if(C===0&&M&&M(A,y,x),d.set(T.subarray(A,A+p*x)),v(A-v(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return eg={ready:o,supported:!0,decodeVertexBuffer(m,d,p,x,_){l(s.exports.meshopt_decodeVertexBuffer,m,d,p,x,s.exports[f[_]])},decodeIndexBuffer(m,d,p,x){l(s.exports.meshopt_decodeIndexBuffer,m,d,p,x)},decodeIndexSequence(m,d,p,x){l(s.exports.meshopt_decodeIndexSequence,m,d,p,x)},decodeGltfBuffer(m,d,p,x,_,M){l(s.exports[h[_]],m,d,p,x,s.exports[f[M]])}},eg};let tg=null;function GR(n,e,t){return i=>{t&&t(i),n&&(tg||(tg=new qz),tg.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),i.setDRACOLoader(tg)),e&&i.setMeshoptDecoder(typeof lM=="function"?lM():lM)}}function HR(n,e=!0,t=!0,i){return kf(nM,n,GR(e,t,i))}HR.preload=(n,e=!0,t=!0,i)=>kf.preload(nM,n,GR(e,t,i));HR.clear=n=>kf.clear(nM,n);const $z=({frustum:n=3.75,size:e=.005,near:t=9.5,samples:i=17,rings:r=11}={})=>`#define LIGHT_WORLD_SIZE ${e}
#define LIGHT_FRUSTUM_WIDTH ${n}
#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)
#define NEAR_PLANE ${t}

#define NUM_SAMPLES ${i}
#define NUM_RINGS ${r}
#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES
#define PCF_NUM_SAMPLES NUM_SAMPLES

vec2 poissonDisk[NUM_SAMPLES];

void initPoissonSamples(const in vec2 randomSeed) {
  float ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);
  float INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);
  float angle = rand(randomSeed) * PI2;
  float radius = INV_NUM_SAMPLES;
  float radiusStep = radius;
  for (int i = 0; i < NUM_SAMPLES; i++) {
    poissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);
    radius += radiusStep;
    angle += ANGLE_STEP;
  }
}

float penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}

float findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {
  float searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;
  float blockerDepthSum = 0.0;
  int numBlockers = 0;
  for (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {
    float shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));
    if (shadowMapDepth < zReceiver) {
      blockerDepthSum += shadowMapDepth;
      numBlockers++;
    }
  }
  if (numBlockers == 0) return -1.0;
  return blockerDepthSum / float(numBlockers);
}

float PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {
  float sum = 0.0;
  for (int i = 0; i < PCF_NUM_SAMPLES; i++) {
    float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));
    if (zReceiver <= depth) sum += 1.0;
  }
  for (int i = 0; i < PCF_NUM_SAMPLES; i++) {
    float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));
    if (zReceiver <= depth) sum += 1.0;
  }
  return sum / (2.0 * float(PCF_NUM_SAMPLES));
}

float PCSS(sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  initPoissonSamples(uv);
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);
  if (avgBlockerDepth == -1.0) return 1.0;
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  float filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;
  return PCF_Filter(shadowMap, uv, zReceiver, filterRadius);
}`;let zR=!1;const N9=n=>{if(!zR){zR=!0;let e=ft.shadowmap_pars_fragment;e=e.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+$z(At({},n))),e=e.replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),ft.shadowmap_pars_fragment=e}},O9=re.exports.forwardRef(({intensity:n=1,decay:e,decayRate:t=.65,maxYaw:i=.1,maxPitch:r=.1,maxRoll:s=.1,yawFrequency:o=.1,pitchFrequency:a=.1,rollFrequency:l=.1,controls:f},h)=>{const m=dr(A=>A.camera),d=dr(A=>A.controls),p=re.exports.useRef(n),x=re.exports.useRef(m.rotation.clone()),[_]=re.exports.useState(()=>new tM),[M]=re.exports.useState(()=>new tM),[v]=re.exports.useState(()=>new tM),y=()=>{(p.current<0||p.current>1)&&(p.current=p.current<0?0:1)};return re.exports.useImperativeHandle(h,()=>({getIntensity:()=>p.current,setIntensity:A=>{p.current=A,y()}}),[]),re.exports.useEffect(()=>{const A=d||(f==null?void 0:f.current),w=()=>void(x.current=m.rotation.clone());return A==null||A.addEventListener("change",w),()=>void(A==null?void 0:A.removeEventListener("change",w))},[f,d]),x_(({clock:A},w)=>{const T=Math.pow(p.current,2),C=i*T*_.noise(A.elapsedTime*o,1),B=r*T*M.noise(A.elapsedTime*a,1),I=s*T*v.noise(A.elapsedTime*l,1);m.rotation.set(x.current.x+B,x.current.y+C,x.current.z+I),e&&p.current>0&&(p.current-=t*w,y())}),null}),VR=new Fe,WR=new Fe,ng=[],uM=new $t;class e4 extends sr{constructor(){super();this.color=new ye("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){const i=this.instance.current;if(!i||!i.geometry||!i.material)return;uM.geometry=i.geometry;const r=i.matrixWorld;let s=i.userData.instances.indexOf(this.instanceKey);if(s!==-1){i.getMatrixAt(s,VR),WR.multiplyMatrices(r,VR),uM.matrixWorld=WR,uM.raycast(e,ng);for(let o=0,a=ng.length;o<a;o++){const l=ng[o];l.instanceId=s,l.object=this,t.push(l)}ng.length=0}}}var JR={exports:{}},t4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",n4=t4,i4=n4;function jR(){}function XR(){}XR.resetWarningCache=jR;var r4=function(){function n(i,r,s,o,a,l){if(l!==i4){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:XR,resetWarningCache:jR};return t.PropTypes=t,t};JR.exports=r4();var ad=JR.exports;function KR(n){return QR(n.children,n.components)}KR.propTypes={children:ad.func.isRequired,components:ad.arrayOf(ad.oneOfType([ad.element,ad.func])).isRequired};function QR(n,e,t){if(t=t||[],!e[0])return n(t);function i(r){return QR(n,e.slice(1),t.concat([r]))}return typeof e[0]=="function"?e[0]({results:t,render:i}):re.exports.cloneElement(e[0],{children:i})}let Xi,ig;const YR=re.exports.createContext(null),qR=new Fe,cM=new Fe,ZR=new Fe,s4=new ye,$R=new P,eL=new Mn,tL=new P,o4=re.exports.forwardRef((r,i)=>{var s=r,{context:n,children:e}=s,t=_i(s,["context","children"]);re.exports.useMemo(()=>VU({Position:e4}),[]);const o=re.exports.useRef(),{subscribe:a,getParent:l}=re.exports.useContext(n||YR);return re.exports.useLayoutEffect(()=>a(o),[]),re.exports.createElement("position",Ra({instance:l(),instanceKey:o,ref:u_([i,o])},t),e)}),a4=re.exports.forwardRef((o,s)=>{var a=o,{children:n,range:e,limit:t=1e3,frames:i=1/0}=a,r=_i(a,["children","range","limit","frames"]);const[{context:l,instance:f}]=re.exports.useState(()=>{const v=re.exports.createContext(null);return{context:v,instance:re.exports.forwardRef((y,A)=>re.exports.createElement(o4,Ra({context:v},y,{ref:A})))}}),h=re.exports.useRef(null),[m,d]=re.exports.useState([]),[[p,x]]=re.exports.useState(()=>{const v=new Float32Array(t*16);for(Xi=0;Xi<t;Xi++)ZR.identity().toArray(v,Xi*16);return[v,new Float32Array([...new Array(t*3)].map(()=>1))]});re.exports.useLayoutEffect(()=>{h.current.count=h.current.instanceMatrix.updateRange.count=h.current.instanceColor.updateRange.count=Math.min(t,e!==void 0?e:t,m.length)},[m,e]),re.exports.useEffect(()=>{h.current.instanceMatrix.needsUpdate=!0});let _=0;x_(()=>{if(i===1/0||_<i){for(h.current.updateMatrix(),h.current.updateMatrixWorld(),qR.copy(h.current.matrixWorld).invert(),Xi=0;Xi<m.length;Xi++)ig=m[Xi].current,ig.matrixWorld.decompose($R,eL,tL),cM.compose($R,eL,tL).premultiply(qR),cM.equals(ZR.fromArray(p,Xi*16))||(cM.toArray(p,Xi*16),h.current.instanceMatrix.needsUpdate=!0),ig.color.equals(s4.fromArray(x,Xi*3))||(ig.color.toArray(x,Xi*3),h.current.instanceColor.needsUpdate=!0);_++}});const M=re.exports.useMemo(()=>({getParent:()=>h,subscribe:v=>(d(y=>[...y,v]),()=>d(y=>y.filter(A=>A.current!==v.current)))}),[]);return re.exports.createElement("instancedMesh",Ra({userData:{instances:m},matrixAutoUpdate:!1,ref:u_([s,h]),args:[null,null,0],raycast:()=>null},r),re.exports.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:p.length/16,array:p,itemSize:16,usage:Us}),re.exports.createElement("instancedBufferAttribute",{attach:"instanceColor",count:x.length/3,array:x,itemSize:3,usage:Us}),typeof n=="function"?re.exports.createElement(l.Provider,{value:M},n(f)):re.exports.createElement(YR.Provider,{value:M},n))});function k9(i){var r=i,{meshes:n,children:e}=r,t=_i(r,["meshes","children"]);const s=Array.isArray(n);if(!s)for(const o of Object.keys(n))n[o].isMesh||delete n[o];return re.exports.createElement(KR,{components:(s?n:Object.values(n)).map(({geometry:o,material:a})=>re.exports.createElement(a4,Ra({key:o.uuid,geometry:o,material:a},t)))},o=>s?e(...o):e(Object.keys(n).filter(a=>n[a].isMesh).reduce((a,l,f)=>Nn(At({},a),{[l]:o[f]}),{})))}function U9({pixelated:n}){const e=dr(o=>o.gl),t=dr(o=>o.internal.active),i=dr(o=>o.performance.current),r=dr(o=>o.viewport.initialDpr),s=dr(o=>o.setDpr);return re.exports.useEffect(()=>{const o=e.domElement;return()=>{t&&s(r),n&&o&&(o.style.imageRendering="auto")}},[]),re.exports.useEffect(()=>{s(i*r),n&&e.domElement&&(e.domElement.style.imageRendering=i===1?"auto":"pixelated")},[i]),null}function G9(){const n=dr(t=>t.get),e=dr(t=>t.performance.current);return re.exports.useEffect(()=>{const t=n().raycaster.enabled;return()=>void(n().raycaster.enabled=t)},[]),re.exports.useEffect(()=>void(n().raycaster.enabled=e===1),[e]),null}var rg={exports:{}},ld={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l4=re.exports,nL=60103;ld.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var iL=Symbol.for;nL=iL("react.element"),ld.Fragment=iL("react.fragment")}var u4=l4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c4=Object.prototype.hasOwnProperty,f4={key:!0,ref:!0,__self:!0,__source:!0};function rL(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)c4.call(e,i)&&!f4.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:nL,type:n,key:s,ref:o,props:r,_owner:u4.current}}ld.jsx=rL;ld.jsxs=rL;rg.exports=ld;const fM=rg.exports.jsx,H9=rg.exports.jsxs,z9=rg.exports.Fragment;/**
 * postprocessing v6.23.3 build Mon Dec 06 2021
 * https://github.com/vanruesc/postprocessing
 * Copyright 2021 Raoul van Rüschen
 * @license Zlib
 */var d4=`uniform mediump sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=texture2D(luminanceBuffer0,vUv).r;
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor.r=adaptedLum;}`,dM="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",h4=class extends di{constructor(){super({type:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new ze(null),luminanceBuffer1:new ze(null),minLuminance:new ze(.01),deltaTime:new ze(0),tau:new ze(1)},fragmentShader:d4,vertexShader:dM,blending:li,depthWrite:!1,depthTest:!1,extensions:{shaderTextureLOD:!0}});this.toneMapped=!1}},p4=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <dithering_fragment>
}`,m4="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",sL=class extends di{constructor(n=new ie){super({type:"ConvolutionMaterial",uniforms:{inputBuffer:new ze(null),texelSize:new ze(new ie),halfTexelSize:new ze(new ie),kernel:new ze(0),scale:new ze(1)},fragmentShader:p4,vertexShader:m4,blending:li,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.setTexelSize(n.x,n.y),this.kernelSize=hM.LARGE}getKernel(){return g4[this.kernelSize]}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e),this.uniforms.halfTexelSize.value.set(n,e).multiplyScalar(.5)}},g4=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],hM={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},y4=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,oL=class extends di{constructor(){super({type:"CopyMaterial",uniforms:{inputBuffer:new ze(null),opacity:new ze(1)},fragmentShader:y4,vertexShader:dM,blending:li,depthWrite:!1,depthTest:!1});this.toneMapped=!1}},v4=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,x4="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",_4=class extends di{constructor(n=null,e=null,t=null,i,r=!1){super({type:"EffectMaterial",defines:{DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ze(null),depthBuffer:new ze(null),resolution:new ze(new ie),texelSize:new ze(new ie),cameraNear:new ze(.3),cameraFar:new ze(1e3),aspect:new ze(1),time:new ze(0)},blending:li,depthWrite:!1,depthTest:!1,dithering:r});this.toneMapped=!1,n!==null&&this.setShaderParts(n),e!==null&&this.setDefines(e),t!==null&&this.setUniforms(t),this.adoptCameraSettings(i)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setShaderParts(n){return this.fragmentShader=v4.replace(Tt.FRAGMENT_HEAD,n.get(Tt.FRAGMENT_HEAD)).replace(Tt.FRAGMENT_MAIN_UV,n.get(Tt.FRAGMENT_MAIN_UV)).replace(Tt.FRAGMENT_MAIN_IMAGE,n.get(Tt.FRAGMENT_MAIN_IMAGE)),this.vertexShader=x4.replace(Tt.VERTEX_HEAD,n.get(Tt.VERTEX_HEAD)).replace(Tt.VERTEX_MAIN_SUPPORT,n.get(Tt.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}adoptCameraSettings(n=null){n!==null&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof cn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=Math.max(n,1),i=Math.max(e,1);this.uniforms.resolution.value.set(t,i),this.uniforms.texelSize.value.set(1/t,1/i),this.uniforms.aspect.value=t/i}},Tt={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},M4=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,w4=class extends di{constructor(n=!1,e=null){const t=e!==null;super({type:"LuminanceMaterial",uniforms:{inputBuffer:new ze(null),threshold:new ze(0),smoothing:new ze(1),range:new ze(t?e:new ie)},fragmentShader:M4,vertexShader:dM,blending:li,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.colorOutput=n,this.useThreshold=!0,this.useRange=t}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.uniforms.threshold.value=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.uniforms.smoothing.value=n}get useThreshold(){return this.defines.THRESHOLD!==void 0}set useThreshold(n){n?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.needsUpdate=!0}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.defines.RANGE!==void 0}set useRange(n){n?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}get luminanceRange(){return this.useRange}set luminanceRange(n){this.useRange=n}setLuminanceRangeEnabled(n){this.useRange=n}},A4=new Ks,Ro=null;function S4(){if(Ro===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Ro=new je,Ro.setAttribute!==void 0?(Ro.setAttribute("position",new lt(n,3)),Ro.setAttribute("uv",new lt(e,2))):(Ro.addAttribute("position",new lt(n,3)),Ro.addAttribute("uv",new lt(e,2)))}return Ro}var gr=class{constructor(n="Pass",e=new ls,t=A4){this.name=n,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.getFullscreenMaterial();e!==null&&(e.needsUpdate=!0),this.rtt=!n}}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}getFullscreenMaterial(){return this.screen!==null?this.screen.material:null}setFullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new $t(S4(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new ls),this.scene.add(e),this.screen=e)}getDepthTexture(){return null}setDepthTexture(n,e=0){}render(n,e,t,i,r){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){const n=this.getFullscreenMaterial();n!==null&&n.dispose();for(const e of Object.keys(this)){const t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof ls)continue;this[e].dispose()}}}},E4=class extends gr{constructor(n,e=!0){super("SavePass");this.setFullscreenMaterial(new oL),this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new an(1,1,{minFilter:xt,magFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="SavePass.Target"),this.resize=e}get texture(){return this.renderTarget.texture}render(n,e,t,i,r){const s=this.getFullscreenMaterial();s.uniforms.inputBuffer.value=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){if(this.resize){const t=Math.max(n,1),i=Math.max(e,1);this.renderTarget.setSize(t,i)}}initialize(n,e,t){if(!e&&t===xn&&(this.renderTarget.texture.format=Jn),t!==void 0&&(this.renderTarget.texture.type=t,t!==xn)){const i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},T4=class extends gr{constructor(n,{minLuminance:e=.01,adaptationRate:t=1}={}){super("AdaptiveLuminancePass");this.setFullscreenMaterial(new h4),this.needsSwap=!1,this.renderTargetPrevious=new an(1,1,{minFilter:Ht,magFilter:Ht,type:es,stencilBuffer:!1,depthBuffer:!1,format:qt}),this.renderTargetPrevious.texture.name="Luminance.Previous";const i=this.getFullscreenMaterial().uniforms;i.luminanceBuffer0.value=this.renderTargetPrevious.texture,i.luminanceBuffer1.value=n,i.minLuminance.value=e,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.savePass=new E4(this.renderTargetPrevious,!1),this.adaptationRate=t}get texture(){return this.renderTargetAdapted.texture}set mipLevel1x1(n){const e=this.getFullscreenMaterial();e.defines.MIP_LEVEL_1X1=n.toFixed(1),e.needsUpdate=!0}get adaptationRate(){return this.getFullscreenMaterial().uniforms.tau.value}set adaptationRate(n){this.getFullscreenMaterial().uniforms.tau.value=n}render(n,e,t,i,r){this.getFullscreenMaterial().uniforms.deltaTime.value=i,n.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),n.render(this.scene,this.camera),this.savePass.render(n,this.renderTargetAdapted)}},As=-1,Ki=class{constructor(n,e=As,t=As,i=1){this.resizable=n,this.base=new ie(1,1),this.target=new ie(e,t),this.s=i}get scale(){return this.s}set scale(n){this.s=n,this.target.x=As,this.target.y=As,this.resizable.setSize(this.base.x,this.base.y)}get width(){const n=this.base,e=this.target;let t;return e.x!==As?t=e.x:e.y!==As?t=Math.round(e.y*(n.x/n.y)):t=Math.round(n.x*this.s),t}set width(n){this.target.x=n,this.resizable.setSize(this.base.x,this.base.y)}get height(){const n=this.base,e=this.target;let t;return e.y!==As?t=e.y:e.x!==As?t=Math.round(e.x/(n.x/n.y)):t=Math.round(n.y*this.s),t}set height(n){this.target.y=n,this.resizable.setSize(this.base.x,this.base.y)}static get AUTO_SIZE(){return As}},C4=class extends gr{constructor({resolutionScale:n=.5,width:e=Ki.AUTO_SIZE,height:t=Ki.AUTO_SIZE,kernelSize:i=hM.LARGE}={}){super("BlurPass");this.renderTargetA=new an(1,1,{minFilter:xt,magFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B",this.resolution=new Ki(this,e,t,n),this.convolutionMaterial=new sL,this.ditheredConvolutionMaterial=new sL,this.ditheredConvolutionMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}get width(){return this.resolution.width}set width(n){this.resolution.width=n}get height(){return this.resolution.height}set height(n){this.resolution.height=n}get scale(){return this.convolutionMaterial.uniforms.scale.value}set scale(n){this.convolutionMaterial.uniforms.scale.value=n,this.ditheredConvolutionMaterial.uniforms.scale.value=n}get kernelSize(){return this.convolutionMaterial.kernelSize}set kernelSize(n){this.convolutionMaterial.kernelSize=n,this.ditheredConvolutionMaterial.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB;let f=this.convolutionMaterial,h=f.uniforms;const m=f.getKernel();let d=e,p,x,_;for(this.setFullscreenMaterial(f),x=0,_=m.length-1;x<_;++x)p=(x&1)==0?a:l,h.kernel.value=m[x],h.inputBuffer.value=d.texture,n.setRenderTarget(p),n.render(s,o),d=p;this.dithering&&(f=this.ditheredConvolutionMaterial,h=f.uniforms,this.setFullscreenMaterial(f)),h.kernel.value=m[x],h.inputBuffer.value=d.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.base.set(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.convolutionMaterial.setTexelSize(1/i,1/r),this.ditheredConvolutionMaterial.setTexelSize(1/i,1/r)}initialize(n,e,t){if(!e&&t===xn&&(this.renderTargetA.texture.format=Jn,this.renderTargetB.texture.format=Jn),t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==xn)){const i=this.convolutionMaterial,r=this.ditheredConvolutionMaterial;i.defines.FRAMEBUFFER_PRECISION_HIGH="1",r.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}static get AUTO_SIZE(){return Ki.AUTO_SIZE}},b4=class extends gr{constructor(){super("ClearMaskPass",null,null);this.needsSwap=!1}render(n,e,t,i,r){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},pM=new ye,aL=class extends gr{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null);this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}render(n,e,t,i,r){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=s!==null,f=o>=0;l?(pM.copy(n.getClearColor(pM)),n.setClearColor(s,f?o:a)):f&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(pM,a):f&&n.setClearAlpha(a)}},mM=!1,lL=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Di:t=this.materialsFlatShadedDoubleSide;break;case Wt:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Di:t=this.materialsDoubleSide;break;case Wt:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[n.clone(),n.clone(),n.clone()];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=$r;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=Wt,i}),this.materialsDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=Di,i}),this.materialsFlatShaded=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Wt,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Di,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,mM){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return mM}static set workaroundEnabled(n){mM=n}},uL=class extends gr{constructor(n,e,t=null){super("RenderPass",n,e);this.needsSwap=!1,this.clearPass=new aL,this.overrideMaterialManager=t===null?null:new lL(t),this.backgroundDisabled=!1,this.shadowMapDisabled=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new lL(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.backgroundDisabled}setBackgroundDisabled(n){this.backgroundDisabled=n}isShadowMapDisabled(){return this.shadowMapDisabled}setShadowMapDisabled(n){this.shadowMapDisabled=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,f=s.background,h=n.shadowMap.autoUpdate,m=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.shadowMapDisabled&&(n.shadowMap.autoUpdate=!1),(this.backgroundDisabled||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clear&&this.clearPass.render(n,e),n.setRenderTarget(m),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=l,s.background=f,n.shadowMap.autoUpdate=h}},yt={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},B4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",R4="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",L4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",P4="float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",I4="float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",D4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",F4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",N4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",O4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",k4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",U4="float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",G4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",H4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",z4="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",V4="float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",W4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",J4="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",j4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",X4=new Map([[yt.SKIP,null],[yt.ADD,B4],[yt.ALPHA,R4],[yt.AVERAGE,L4],[yt.COLOR_BURN,P4],[yt.COLOR_DODGE,I4],[yt.DARKEN,D4],[yt.DIFFERENCE,F4],[yt.EXCLUSION,N4],[yt.LIGHTEN,O4],[yt.MULTIPLY,k4],[yt.DIVIDE,U4],[yt.NEGATION,G4],[yt.NORMAL,H4],[yt.OVERLAY,z4],[yt.REFLECT,V4],[yt.SCREEN,W4],[yt.SOFT_LIGHT,J4],[yt.SUBTRACT,j4]]),K4=class extends Er{constructor(n,e=1){super();this.blendFunction=n,this.opacity=new ze(e)}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n,this.dispatchEvent({type:"change"})}getShaderCode(){return X4.get(this.blendFunction)}},Qi=class extends Er{constructor(n,e,{attributes:t=Lo.NONE,blendFunction:i=yt.SCREEN,defines:r=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super();this.name=n,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=r,this.uniforms=s,this.extensions=o,this.blendMode=new K4(i),this.blendMode.addEventListener("change",l=>this.setChanged())}setChanged(){this.dispatchEvent({type:"change"})}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setDepthTexture(n,e=0){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];if(e!==null&&typeof e.dispose=="function"){if(e instanceof ls)continue;this[n].dispose()}}}},Lo={NONE:0,DEPTH:1,CONVOLUTION:2};function gM(n,e){const t=[];let i;for(;(i=n.exec(e))!==null;)t.push(i[1]);return t}function cL(n,e,t){let i,r;for(const s of e){i="$1"+n+s.charAt(0).toUpperCase()+s.slice(1),r=new RegExp("([^\\.])(\\b"+s+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(r,i))}}function Q4(n,e,t,i,r,s,o){const a=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,l=/(?:varying\s+\w+\s+(\w*))/g,f=e.blendMode,h=new Map([["fragment",e.getFragmentShader()],["vertex",e.getVertexShader()]]),m=h.get("fragment")!==void 0&&/mainImage/.test(h.get("fragment")),d=h.get("fragment")!==void 0&&/mainUv/.test(h.get("fragment"));let p=[],x=[],_=!1,M=!1;if(h.get("fragment")===void 0)console.error("Missing fragment shader",e);else if(d&&(o&Lo.CONVOLUTION)!=0)console.error("Effects that transform UV coordinates are incompatible with convolution effects",e);else if(!m&&!d)console.error("The fragment shader contains neither a mainImage nor a mainUv function",e);else{if(d&&(t.set(Tt.FRAGMENT_MAIN_UV,t.get(Tt.FRAGMENT_MAIN_UV)+"	"+n+`MainUv(UV);
`),_=!0),h.get("vertex")!==null&&/mainSupport/.test(h.get("vertex"))){let v="	"+n+"MainSupport(";/mainSupport *\([\w\s]*?uv\s*?\)/.test(h.get("vertex"))&&(v+="vUv"),v+=`);
`,t.set(Tt.VERTEX_MAIN_SUPPORT,t.get(Tt.VERTEX_MAIN_SUPPORT)+v),p=p.concat(gM(l,h.get("vertex"))),x=x.concat(p).concat(gM(a,h.get("vertex")))}if(x=x.concat(gM(a,h.get("fragment"))),x=x.concat(Array.from(e.defines.keys()).map(v=>v.replace(/\([\w\s,]*\)/g,""))),x=x.concat(Array.from(e.uniforms.keys())),e.uniforms.forEach((v,y)=>s.set(n+y.charAt(0).toUpperCase()+y.slice(1),v)),e.defines.forEach((v,y)=>r.set(n+y.charAt(0).toUpperCase()+y.slice(1),v)),cL(n,x,r),cL(n,x,h),i.set(f.blendFunction,f),m){const v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;let y=n+"MainImage(color0, UV, ";(o&Lo.DEPTH)!=0&&v.test(h.get("fragment"))&&(y+="depth, ",M=!0),y+=`color1);
	`;const A=n+"BlendOpacity";s.set(A,f.opacity),y+="color0 = blend"+f.getBlendFunction()+"(color0, color1, "+A+`);

	`,t.set(Tt.FRAGMENT_MAIN_IMAGE,t.get(Tt.FRAGMENT_MAIN_IMAGE)+y),t.set(Tt.FRAGMENT_HEAD,t.get(Tt.FRAGMENT_HEAD)+"uniform float "+A+`;

`)}t.set(Tt.FRAGMENT_HEAD,t.get(Tt.FRAGMENT_HEAD)+h.get("fragment")+`
`),h.get("vertex")!==null&&t.set(Tt.VERTEX_HEAD,t.get(Tt.VERTEX_HEAD)+h.get("vertex")+`
`)}return{varyings:p,transformedUv:_,readDepth:M}}var Y4=class extends gr{constructor(n,...e){super("EffectPass");this.setFullscreenMaterial(new _4(null,null,null,n)),this.effects=e.sort((t,i)=>i.attributes-t.attributes),this.skipRendering=!1,this.uniforms=0,this.varyings=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.getFullscreenMaterial().defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){if(this.encodeOutput!==n){const e=this.getFullscreenMaterial();e.needsUpdate=!0,n?e.defines.ENCODE_OUTPUT="1":delete e.defines.ENCODE_OUTPUT}}get dithering(){return this.getFullscreenMaterial().dithering}set dithering(n){const e=this.getFullscreenMaterial();e.dithering!==n&&(e.dithering=n,e.needsUpdate=!0)}verifyResources(n){const e=n.capabilities;let t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniforms>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniforms+" were defined"),t=e.maxVaryings,this.varyings>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyings+" were defined")}updateMaterial(){const n=/\bblend\b/g,e=new Map([[Tt.FRAGMENT_HEAD,""],[Tt.FRAGMENT_MAIN_UV,""],[Tt.FRAGMENT_MAIN_IMAGE,""],[Tt.VERTEX_HEAD,""],[Tt.VERTEX_MAIN_SUPPORT,""]]),t=new Map,i=new Map,r=new Map,s=new Set;let o=0,a=0,l=0,f=!1,h=!1,m;for(const p of this.effects)if(p.blendMode.getBlendFunction()===yt.SKIP)l|=p.getAttributes()&Lo.DEPTH;else if((l&Lo.CONVOLUTION)!=0&&(p.getAttributes()&Lo.CONVOLUTION)!=0)console.error("Convolution effects cannot be merged",p);else if(l|=p.getAttributes(),m=Q4("e"+o++,p,e,t,i,r,l),a+=m.varyings.length,f=f||m.transformedUv,h=h||m.readDepth,p.extensions!==null)for(const x of p.extensions)s.add(x);for(const p of t.values())e.set(Tt.FRAGMENT_HEAD,e.get(Tt.FRAGMENT_HEAD)+p.getShaderCode().replace(n,"blend"+p.getBlendFunction())+`
`);(l&Lo.DEPTH)!=0?(h&&e.set(Tt.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+e.get(Tt.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,f?(e.set(Tt.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+e.get(Tt.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")):i.set("UV","vUv"),e.forEach((p,x,_)=>_.set(x,p.trim().replace(/^#/,`
#`))),this.uniforms=r.size,this.varyings=a,this.skipRendering=o===0,this.needsSwap=!this.skipRendering;const d=this.getFullscreenMaterial();if(d.setShaderParts(e),d.setDefines(i),d.setUniforms(r),d.extensions={},s.size>0)for(const p of s)d.extensions[p]=!0;this.needsUpdate=!1}recompile(n){this.updateMaterial(),n!==void 0&&this.verifyResources(n)}getDepthTexture(){return this.getFullscreenMaterial().uniforms.depthBuffer.value}setDepthTexture(n,e=R0){const t=this.getFullscreenMaterial();t.uniforms.depthBuffer.value=n,t.depthPacking=e,t.needsUpdate=!0;for(const i of this.effects)i.setDepthTexture(n,e)}render(n,e,t,i,r){const s=this.getFullscreenMaterial(),o=s.uniforms.time.value+i;this.needsUpdate&&this.recompile(n);for(const a of this.effects)a.update(n,e,i);(!this.skipRendering||this.renderToScreen)&&(s.uniforms.inputBuffer.value=e.texture,s.uniforms.time.value=o<=this.maxTime?o:this.minTime,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera))}setSize(n,e){this.getFullscreenMaterial().setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){for(const i of this.effects)i.initialize(n,e,t),i.addEventListener("change",r=>this.handleEvent(r));if(this.updateMaterial(),this.verifyResources(n),t!==void 0&&t!==xn){const i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}dispose(){super.dispose();for(const n of this.effects)n.dispose()}handleEvent(n){switch(n.type){case"change":this.needsUpdate=!0;break}}},fL=class extends gr{constructor({width:n=Ki.AUTO_SIZE,height:e=Ki.AUTO_SIZE,renderTarget:t,luminanceRange:i,colorOutput:r}={}){super("LuminancePass");this.setFullscreenMaterial(new w4(r,i)),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new an(1,1,{minFilter:xt,magFilter:xt,format:r?qt:y0,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1),this.resolution=new Ki(this,n,e)}get texture(){return this.renderTarget.texture}render(n,e,t,i,r){const s=this.getFullscreenMaterial();s.uniforms.inputBuffer.value=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.base.set(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){if(t!==void 0&&t!==xn){const i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},q4=class extends gr{constructor(n,e){super("MaskPass",n,e);this.needsSwap=!1,this.clearPass=new aL(!1,!1,!0),this.inverse=!1}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}render(n,e,t,i,r){const s=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,f=this.clearPass,h=this.inverse?0:1,m=1-h;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,h,4294967295),o.stencil.setClear(m),o.stencil.setLocked(!0),this.clear&&(this.renderToScreen?f.render(n,null):(f.render(n,e),f.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},Z4=class extends gr{constructor(n,e,{resolutionScale:t=1,width:i=Ki.AUTO_SIZE,height:r=Ki.AUTO_SIZE,renderTarget:s}={}){super("NormalPass");this.needsSwap=!1,this.renderPass=new uL(n,e,new pp);const o=this.renderPass;o.setBackgroundDisabled(!0),o.setShadowMapDisabled(!0);const a=o.getClearPass();a.overrideClearColor=new ye(7829503),a.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new an(1,1,{minFilter:Ht,magFilter:Ht,format:Jn,stencilBuffer:!1}),this.renderTarget.texture.name="NormalPass.Target"),this.resolution=new Ki(this,i,r,t)}get texture(){return this.renderTarget.texture}getResolutionScale(){return this.resolutionScale}setResolutionScale(n){this.resolutionScale=n,this.setSize(this.resolution.base.x,this.resolution.base.y)}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.base.set(n,e),this.renderTarget.setSize(t.width,t.height)}},$4=class extends gr{constructor(n,e="inputBuffer"){super("ShaderPass");this.setFullscreenMaterial(n),this.uniform=null,this.setInput(e)}setInput(n){const e=this.getFullscreenMaterial();if(this.uniform=null,e!==null){const t=e.uniforms;t!==void 0&&t[n]!==void 0&&(this.uniform=t[n])}}render(n,e,t,i,r){this.uniform!==null&&e!==null&&(this.uniform.value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){if(t!==void 0&&t!==xn){const i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},yM=1/1e3,e9=1e3,t9=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1}setFixedDeltaEnabled(n){return this.fixedDeltaEnabled=n,this}setAutoResetEnabled(n){return typeof document!="undefined"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this)),this}getDelta(){return this.delta*yM}getFixedDelta(){return this.fixedDelta*yM}setFixedDelta(n){return this.fixedDelta=n*e9,this}getElapsed(){return this.elapsed*yM}getTimescale(){return this.timescale}setTimescale(n){return this.timescale=n,this}update(n){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=n!==void 0?n:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(n){document.hidden||(this.currentTime=performance.now())}dispose(){typeof document!="undefined"&&document.removeEventListener("visibilitychange",this)}},n9=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,alpha:i=!1,multisampling:r=0,frameBufferType:s}={}){this.renderer=n,this.inputBuffer=null,this.outputBuffer=null,this.renderer!==null&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(e,t,s,r),this.outputBuffer=this.inputBuffer.clone()),this.copyPass=new $4(new oL),this.alpha=i,this.depthTexture=null,this.passes=[],this.timer=new t9,this.autoRenderToScreen=!0}get multisampling(){return this.inputBuffer instanceof ll?this.inputBuffer.samples:0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}replaceRenderer(n,e=!0){const t=this.renderer;if(t!==null&&t!==n){const i=t.getSize(new ie),r=n.getSize(new ie),s=t.domElement.parentNode;this.renderer=n,this.renderer.autoClear=!1,i.equals(r)||this.setSize(),e&&s!==null&&(s.removeChild(t.domElement),s.appendChild(n.domElement))}return t}createDepthTexture(){const n=this.depthTexture=new _c;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=Os,n.type=Fs):n.type=il,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const r=this.renderer,s=r.getContext(),o=r.getDrawingBufferSize(new ie),l={format:!(this.alpha||s.getContextAttributes().alpha)&&t===xn?Jn:qt,minFilter:xt,magFilter:xt,stencilBuffer:e,depthBuffer:n,type:t},f=i>0?new ll(o.width,o.height,l):new an(o.width,o.height,l);return i>0&&(f.samples=i),f.texture.name="EffectComposer.Buffer",f.texture.generateMipmaps=!1,f}addPass(n,e){const t=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new ie),s=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(n.setSize(r.width,r.height),n.initialize(i,s,o),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const a=this.createDepthTexture();for(n of t)n.setDepthTexture(a)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const s=(a,l)=>a||l.needsDepthTexture;e.reduce(s,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,r=this.outputBuffer,s=!1,o,a,l;n===void 0&&(n=this.timer.update().getDelta());for(const f of this.passes)f.isEnabled()&&(f.render(e,i,r,n,s),f.needsSwap&&(s&&(t.renderToScreen=f.renderToScreen,o=e.getContext(),a=e.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),t.render(e,i,r,n,s),a.setFunc(o.EQUAL,1,4294967295)),l=i,i=r,r=l),f instanceof q4?s=!0:f instanceof b4&&(s=!1))}setSize(n,e,t){const i=this.renderer;if(n===void 0||e===void 0){const a=i.getSize(new ie);n=a.width,e=a.height}else i.setSize(n,e,t);const r=i.getDrawingBufferSize(new ie),s=this.inputBuffer,o=this.outputBuffer;s.setSize(r.width,r.height),o.setSize(r.width,r.height);for(const a of this.passes)a.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},i9=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,r9=class extends Qi{constructor({blendFunction:n=yt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,resolutionScale:i=.5,intensity:r=1,width:s=Ki.AUTO_SIZE,height:o=Ki.AUTO_SIZE,kernelSize:a=hM.LARGE}={}){super("BloomEffect",i9,{blendFunction:n,uniforms:new Map([["map",new ze(null)],["intensity",new ze(r)]])});this.renderTarget=new an(1,1,{minFilter:xt,magFilter:xt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new C4({resolutionScale:i,width:s,height:o,kernelSize:a}),this.blurPass.resolution.resizable=this,this.luminancePass=new fL({renderTarget:this.renderTarget,colorOutput:!0}),this.luminancePass.resolution=this.resolution,this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t}get texture(){return this.renderTarget.texture}get luminanceMaterial(){return this.luminancePass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get width(){return this.resolution.width}set width(n){this.resolution.width=n}get height(){return this.resolution.height}set height(n){this.resolution.height=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"The distinction field has been removed, use .threshold and .smoothing instead."),1}set distinction(n){console.warn(this.name,"The distinction field has been removed, use .threshold and .smoothing instead.")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget;this.luminancePass.isEnabled()?(this.luminancePass.render(n,e,i),this.blurPass.render(n,i,i)):this.blurPass.render(n,e,i)}setSize(n,e){this.blurPass.setSize(n,e),this.renderTarget.setSize(this.resolution.width,this.resolution.height)}initialize(n,e,t){this.blurPass.initialize(n,e,t),!e&&t===xn&&(this.renderTarget.texture.format=Jn),t!==void 0&&(this.renderTarget.texture.type=t)}},s9="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",o9=class extends Qi{constructor({blendFunction:n=yt.NORMAL,brightness:e=0,contrast:t=0}={}){super("BrightnessContrastEffect",s9,{blendFunction:n,uniforms:new Map([["brightness",new ze(e)],["contrast",new ze(t)]])})}},a9="uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",l9=class extends Qi{constructor({blendFunction:n=yt.NORMAL,bits:e=16}={}){super("ColorDepthEffect",a9,{blendFunction:n,uniforms:new Map([["factor",new ze(1)]])});this.bits=0,this.setBitDepth(e)}getBitDepth(){return this.bits}setBitDepth(n){this.bits=n,this.uniforms.get("factor").value=Math.pow(2,n/3)}},u9=`void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){
#ifdef INVERTED
vec3 color=vec3(1.0-depth);
#else
vec3 color=vec3(depth);
#endif
outputColor=vec4(color,inputColor.a);}`,c9=class extends Qi{constructor({blendFunction:n=yt.NORMAL,inverted:e=!1}={}){super("DepthEffect",u9,{blendFunction:n,attributes:Lo.DEPTH});this.inverted=e}get inverted(){return this.defines.has("INVERTED")}set inverted(n){this.inverted!==n&&(n?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}},f9="uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",d9=class extends Qi{constructor({blendFunction:n=yt.NORMAL,angle:e=Math.PI*.5,scale:t=1}={}){super("DotScreenEffect",f9,{blendFunction:n,uniforms:new Map([["angle",new ze(new ie)],["scale",new ze(t)]])});this.setAngle(e)}setAngle(n){this.uniforms.get("angle").value.set(Math.sin(n),Math.cos(n))}};new P;new Fe;var h9="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",p9=class extends Qi{constructor({blendFunction:n=yt.NORMAL,hue:e=0,saturation:t=0}={}){super("HueSaturationEffect",h9,{blendFunction:n,uniforms:new Map([["hue",new ze(new P)],["saturation",new ze(t)]])});this.setHue(e)}setHue(n){const e=Math.sin(n),t=Math.cos(n);this.uniforms.get("hue").value.set(2*t,-Math.sqrt(3)*e-t,Math.sqrt(3)*e-t).addScalar(1).divideScalar(3)}};new ye;var m9=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,g9=class extends Qi{constructor({blendFunction:n=yt.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",m9,{blendFunction:n});this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(n){this.premultiply!==n&&(n?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}},y9="uniform float count;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 sl=vec2(sin(uv.y*count),cos(uv.y*count));vec3 scanlines=vec3(sl.x,sl.y,sl.x);outputColor=vec4(scanlines,inputColor.a);}",v9=class extends Qi{constructor({blendFunction:n=yt.OVERLAY,density:e=1.25}={}){super("ScanlineEffect",y9,{blendFunction:n,uniforms:new Map([["count",new ze(0)]])});this.resolution=new ie,this.density=e}getDensity(){return this.density}setDensity(n){this.density=n,this.setSize(this.resolution.x,this.resolution.y)}setSize(n,e){this.resolution.set(n,e),this.uniforms.get("count").value=Math.round(e*this.density)}},x9="uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",_9="uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",M9=Math.PI*.5,ud=new P,dL=new P,w9=class extends Qi{constructor(n,e=new P,{speed:t=2,maxRadius:i=1,waveSize:r=.2,amplitude:s=.05}={}){super("ShockWaveEffect",x9,{vertexShader:_9,uniforms:new Map([["active",new ze(!1)],["center",new ze(new ie(.5,.5))],["cameraDistance",new ze(1)],["size",new ze(1)],["radius",new ze(-r)],["maxRadius",new ze(i)],["waveSize",new ze(r)],["amplitude",new ze(s)]])});this.camera=n,this.epicenter=e,this.screenPosition=this.uniforms.get("center").value,this.speed=t,this.time=0,this.active=!1}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(n,e,t){const i=this.epicenter,r=this.camera,s=this.uniforms,o=s.get("active");if(this.active){const a=s.get("waveSize").value;r.getWorldDirection(ud),dL.copy(r.position).sub(i),o.value=ud.angleTo(dL)>M9,o.value&&(s.get("cameraDistance").value=r.position.distanceTo(i),ud.copy(i).project(r),this.screenPosition.set((ud.x+1)*.5,(ud.y+1)*.5)),this.time+=t*this.speed;const l=this.time-a;s.get("radius").value=l,l>=(s.get("maxRadius").value+a)*2&&(this.active=!1,o.value=!1)}}},A9="uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,vec3(1.0-0.607*intensity,0.769*intensity,0.189*intensity)),dot(inputColor.rgb,vec3(0.349*intensity,1.0-0.314*intensity,0.168*intensity)),dot(inputColor.rgb,vec3(0.272*intensity,0.534*intensity,1.0-0.869*intensity)));outputColor=vec4(color,inputColor.a);}",S9=class extends Qi{constructor({blendFunction:n=yt.NORMAL,intensity:e=1}={}){super("SepiaEffect",A9,{blendFunction:n,uniforms:new Map([["intensity",new ze(e)]])})}},E9=`#include <tonemapping_pars_fragment>
uniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;
#ifndef ADAPTIVE
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=linearToRelativeLuminance(color);
#ifdef ADAPTIVE
float lumAvg=texture2D(luminanceBuffer,vec2(0.5)).r;
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#ifdef REINHARD2
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,T9=class extends Qi{constructor({blendFunction:n=yt.NORMAL,adaptive:e=!0,mode:t=e?Wr.REINHARD2_ADAPTIVE:Wr.REINHARD2,resolution:i=256,maxLuminance:r=16,whitePoint:s=r,middleGrey:o=.6,minLuminance:a=.01,averageLuminance:l=1,adaptationRate:f=1}={}){super("ToneMappingEffect",E9,{blendFunction:n,uniforms:new Map([["luminanceBuffer",new ze(null)],["maxLuminance",new ze(r)],["whitePoint",new ze(s)],["middleGrey",new ze(o)],["averageLuminance",new ze(l)]])});this.renderTargetLuminance=new an(1,1,{minFilter:Ar,magFilter:xt,stencilBuffer:!1,depthBuffer:!1,format:Jn}),this.renderTargetLuminance.texture.name="Luminance",this.renderTargetLuminance.texture.generateMipmaps=!0,this.luminancePass=new fL({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new T4(this.luminancePass.texture,{minLuminance:a,adaptationRate:f}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.mode=null,this.setMode(t),this.resolution=i}getMode(){return this.mode}setMode(n){if(this.mode!==n){switch(this.defines.clear(),n){case Wr.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case Wr.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case Wr.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}n===Wr.REINHARD2?this.defines.set("REINHARD2","1"):n===Wr.REINHARD2_ADAPTIVE&&(this.defines.set("REINHARD2","1"),this.defines.set("ADAPTIVE","1")),this.mode=n,this.setChanged()}}get resolution(){return this.luminancePass.resolution.width}set resolution(n){const e=Math.max(0,Math.ceil(Math.log2(n))),t=Math.pow(2,e);this.luminancePass.resolution.width=t,this.luminancePass.resolution.height=t,this.adaptiveLuminancePass.mipLevel1x1=e}get adaptive(){return this.defines.has("ADAPTIVE")}set adaptive(n){this.mode=n?Wr.REINHARD2_ADAPTIVE:Wr.REINHARD2}get adaptationRate(){return this.adaptiveLuminancePass.adaptationRate}set adaptationRate(n){this.adaptiveLuminancePass.adaptationRate=n}get distinction(){return console.warn(this.name,"The distinction field has been removed."),1}set distinction(n){console.warn(this.name,"The distinction field has been removed.")}update(n,e,t){this.mode===Wr.REINHARD2_ADAPTIVE&&(this.luminancePass.render(n,e),this.adaptiveLuminancePass.render(n,null,null,t))}initialize(n,e,t){this.adaptiveLuminancePass.initialize(n,e,t)}},Wr={REINHARD:0,REINHARD2:1,REINHARD2_ADAPTIVE:2,OPTIMIZED_CINEON:3,ACES_FILMIC:4},C9=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#ifdef ESKIL
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#else
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#endif
outputColor=vec4(color,inputColor.a);}`,b9=class extends Qi{constructor(n={}){const e=Object.assign({blendFunction:yt.NORMAL,eskil:!1,offset:.5,darkness:.5},n);super("VignetteEffect",C9,{blendFunction:e.blendFunction,uniforms:new Map([["offset",new ze(e.offset)],["darkness",new ze(e.darkness)]])});this.eskil=e.eskil}get eskil(){return this.defines.has("ESKIL")}set eskil(n){this.eskil!==n&&(n?this.defines.set("ESKIL","1"):this.defines.delete("ESKIL"),this.setChanged())}};const Yi=function(n,e){return e===void 0&&(e=yt.NORMAL),re.exports.forwardRef(function(i,r){let f=i,{blendFunction:s,opacity:o}=f,a=_i(f,["blendFunction","opacity"]);const l=re.exports.useMemo(()=>new n(a),[a]);return re.exports.useLayoutEffect(()=>{l.blendMode.blendFunction=s||e,o!==void 0&&(l.blendMode.opacity.value=o)},[s,l.blendMode,o]),fM("primitive",{ref:r,object:l,dispose:null})})},V9=Yi(r9,yt.SCREEN);Yi(o9);Yi(l9);Yi(c9);const B9=re.exports.createContext(null),R9=Cp.memo(re.exports.forwardRef((n,e)=>{let{children:t,camera:i,scene:r,renderPriority:s=1,autoClear:o=!0,depthBuffer:a,disableNormalPass:l,stencilBuffer:f,multisampling:h=8,frameBufferType:m}=n;const{gl:d,scene:p,camera:x,size:_}=dr();r=r||p,i=i||x;const[M,v]=re.exports.useMemo(()=>{const w=new n9(d,{depthBuffer:a,stencilBuffer:f,multisampling:Sz()?h:0,frameBufferType:m});w.addPass(new uL(r,i));const T=l?null:new Z4(r,i);return T&&(T.enabled=!1),T&&w.addPass(T),[w,T]},[i,d,a,f,h,m,r,l]);re.exports.useLayoutEffect(()=>M==null?void 0:M.setSize(_.width,_.height),[M,_]),x_((w,T)=>(d.autoClear=o,void M.render(T)),s);const y=re.exports.useRef(null);re.exports.useLayoutEffect(()=>{let w;return y.current&&y.current.__r3f&&M&&(w=new Y4(i,...y.current.__r3f.objects),M.addPass(w),w.renderToScreen=!0,v&&(v.enabled=!1)),()=>{w&&(M==null||M.removePass(w)),v&&(v.enabled=!1)}},[M,t,i]);const A=re.exports.useMemo(()=>({composer:M,normalPass:v,camera:i,scene:r}),[M,v,i,r]);return re.exports.useImperativeHandle(e,()=>M,[M]),fM(B9.Provider,{value:A,children:fM("group",{ref:y,children:t})})}));var W9=R9;Yi(d9);Yi(p9);const J9=Yi(g9,yt.COLOR_DODGE);Yi(v9,yt.OVERLAY);Yi(S9);Yi(T9);const j9=Yi(b9);Yi(w9);export{U9 as A,ci as B,O9 as C,W9 as E,z9 as F,$t as M,J9 as N,a0 as P,P as V,fM as a,k9 as b,V9 as c,j9 as d,ye as e,I9 as f,D9 as g,G9 as h,F9 as i,H9 as j,DO as k,re as r,N9 as s,HR as u};
